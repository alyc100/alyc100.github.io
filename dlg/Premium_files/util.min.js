if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var b=(d||0),a=this.length;
b<a;
b++){if(this[b]===c){return b
}}return -1
}
}function record(g,a,j,d,e){var b={};
b.event=g;
b.values=a;
b.collect=j;
b.options=d;
b.componentPath=e;
var h=function(f){return function(i){f.call(this,i.event,i.values);
return false
}
};
for(var c=record.callbacks.length-1;
c>=0;
c--){CQ_Analytics.registerAfterCallback(h(record.callbacks[c]),150-c);
record.callbacks.pop()
}return CQ_Analytics.record(b)
}record.callbacks=[];
CQ_Analytics.Sitecatalyst={events:[],trackVars:[],settings:[],stores:CQ_Analytics.StoreRegistry.getStores(),hasEvent:function(e){var c=CQ_Analytics.StoreRegistry.getStore("eventdata");
var b=c.getProperty("events").split("\u2026");
var d=b.length;
while(d--){if(b[d]===e){return true
}}return false
},setEvar:function(evar,value){if(evar.match(/^eventdata\.events\./)){if(this.hasEvent(evar.replace(/.+\./,""))){this.events.push(value);
this.updateLinkTrackEvents()
}}else{if(value!=""){for(var store in this.stores){try{eval("var "+store+"=this.stores[store].data")
}catch(e){}}try{s[evar]=CQ_Analytics.Variables.replaceVariables(eval(value))
}catch(e){console.log("Could not set "+evar+": "+e)
}if(this.trackVars.indexOf(evar)<0){this.trackVars.push(evar)
}}}},updateLinkTrackEvents:function(){s.events=this.events.join(",");
s.linkTrackEvents=s.events
},updateLinkTrackVars:function(){s.linkTrackVars=this.trackVars.join(",")
},eraseTrackVars:function(b){for(var a=0;
a<this.trackVars.length;
a++){var c=this.trackVars[a];
if(c!=="events"){if(b){b[c]=s[c]
}delete s[c]
}}this.trackVars=[]
},saveEvars:function(){var a={events:this.events,trackVars:this.trackVars,linkTrackVars:s.linkTrackVars,linkTrackEvents:s.linkTrackEvents};
this.events=[];
this.eraseTrackVars(a);
this.settings.push(a)
},restoreEvars:function(){var a=this.settings.pop();
this.events=a.events;
delete a.events;
this.trackVars=a.trackVars;
delete a.trackVars;
this.updateLinkTrackEvents();
this.eraseTrackVars();
for(var b in a){s[b]=a[b]
}},stopTrackingTemporarily:function(){var a={trackDownloadLinks:s.trackDownloadLinks,trackExternalLinks:s.trackExternalLinks};
s.trackDownloadLinks=false;
s.trackExternalLinks=false;
(function(){for(var b in a){s[b]=a[b]
}}).defer(200)
},trackLink:function(d){var e=d.options.obj||"",b;
var a=d.options.defaultLinkType||"o";
b=b||a;
var c=s.tl(e,b,"");
if(c){document.write(c)
}this.stopTrackingTemporarily()
},customTrack:function(obj){var events=obj.getAttribute("adhocevents")||"";
var evars=obj.getAttribute("adhocevars")||"";
if(events||evars){for(var store in this.stores){try{eval("var "+store+"=this.stores[store].data")
}catch(e){}}try{eval("evars = {"+evars+"}")
}catch(e){}CQ_Analytics.Sitecatalyst.saveEvars();
try{var linkTrackVars=[];
if(events.length>0){s.linkTrackEvents=s.events=events;
linkTrackVars.push("events")
}for(var key in evars){linkTrackVars.push(key);
var value="'"+escape(evars[key])+"'";
this.setEvar(key,value)
}if(linkTrackVars.length>0){s.linkTrackVars=linkTrackVars.join(",")
}this.trackLink({options:{obj:obj}})
}finally{CQ_Analytics.Sitecatalyst.restoreEvars()
}}},collect:function(){var elements=document.getElementsByTagName("*");
var evnts={};
var alldata={};
var eventdata=CQ_Analytics.StoreRegistry.getStore("eventdata");
for(var i=0;
i<elements.length;
i++){if(elements[i].getAttribute("record")){var trackres=eval("record("+elements[i].getAttribute("record")+",true)");
var event=trackres[0];
evnts[event]=event;
var data=trackres[1];
for(var j in data){var store=eventdata;
var prop=j.split(".");
if(j.indexOf(".")>=0&&CQ_Analytics.StoreRegistry.getStore(prop[0])){store=CQ_Analytics.StoreRegistry.getStore(prop[0]);
prop=prop[1]
}store.setProperty(prop,data[j])
}}}var myevents=[];
for(i in evnts){myevents.push(i)
}eventdata.setProperty("events",myevents.join("\u2026"))
}};