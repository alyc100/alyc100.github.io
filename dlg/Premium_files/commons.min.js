/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */
(function(a4,aI){var ak,y,aE=typeof aI,n=a4.document,aN=a4.location,bk=a4.jQuery,J=a4.$,ac={},a8=[],u="1.9.1",aK=a8.concat,aq=a8.push,a6=a8.slice,aO=a8.indexOf,B=ac.toString,X=ac.hasOwnProperty,aS=u.trim,bL=function(b5,b6){return new bL.fn.init(b5,b6,y)
},bC=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bt=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,b=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bj=/^[\],:{}\s]*$/,bm=/(?:^|:|,)(?:\s*\[)+/g,bI=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,a1=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,bU=/^-ms-/,aX=/-([\da-z])/gi,O=function(b5,b6){return b6.toUpperCase()
},bY=function(b5){if(n.addEventListener||b5.type==="load"||n.readyState==="complete"){bn();
bL.ready()
}},bn=function(){if(n.addEventListener){n.removeEventListener("DOMContentLoaded",bY,false);
a4.removeEventListener("load",bY,false)
}else{n.detachEvent("onreadystatechange",bY);
a4.detachEvent("onload",bY)
}};
bL.fn=bL.prototype={jquery:u,constructor:bL,init:function(b5,b8,b7){var b6,b9;
if(!b5){return this
}if(typeof b5==="string"){if(b5.charAt(0)==="<"&&b5.charAt(b5.length-1)===">"&&b5.length>=3){b6=[null,b5,null]
}else{b6=bt.exec(b5)
}if(b6&&(b6[1]||!b8)){if(b6[1]){b8=b8 instanceof bL?b8[0]:b8;
bL.merge(this,bL.parseHTML(b6[1],b8&&b8.nodeType?b8.ownerDocument||b8:n,true));
if(b.test(b6[1])&&bL.isPlainObject(b8)){for(b6 in b8){if(bL.isFunction(this[b6])){this[b6](b8[b6])
}else{this.attr(b6,b8[b6])
}}}return this
}else{b9=n.getElementById(b6[2]);
if(b9&&b9.parentNode){if(b9.id!==b6[2]){return b7.find(b5)
}this.length=1;
this[0]=b9
}this.context=n;
this.selector=b5;
return this
}}else{if(!b8||b8.jquery){return(b8||b7).find(b5)
}else{return this.constructor(b8).find(b5)
}}}else{if(b5.nodeType){this.context=this[0]=b5;
this.length=1;
return this
}else{if(bL.isFunction(b5)){return b7.ready(b5)
}}}if(b5.selector!==aI){this.selector=b5.selector;
this.context=b5.context
}return bL.makeArray(b5,this)
},selector:"",length:0,size:function(){return this.length
},toArray:function(){return a6.call(this)
},get:function(b5){return b5==null?this.toArray():(b5<0?this[this.length+b5]:this[b5])
},pushStack:function(b5){var b6=bL.merge(this.constructor(),b5);
b6.prevObject=this;
b6.context=this.context;
return b6
},each:function(b6,b5){return bL.each(this,b6,b5)
},ready:function(b5){bL.ready.promise().done(b5);
return this
},slice:function(){return this.pushStack(a6.apply(this,arguments))
},first:function(){return this.eq(0)
},last:function(){return this.eq(-1)
},eq:function(b7){var b5=this.length,b6=+b7+(b7<0?b5:0);
return this.pushStack(b6>=0&&b6<b5?[this[b6]]:[])
},map:function(b5){return this.pushStack(bL.map(this,function(b7,b6){return b5.call(b7,b6,b7)
}))
},end:function(){return this.prevObject||this.constructor(null)
},push:aq,sort:[].sort,splice:[].splice};
bL.fn.init.prototype=bL.fn;
bL.extend=bL.fn.extend=function(){var b5,cb,b6,b7,ce,cc,ca=arguments[0]||{},b9=1,b8=arguments.length,cd=false;
if(typeof ca==="boolean"){cd=ca;
ca=arguments[1]||{};
b9=2
}if(typeof ca!=="object"&&!bL.isFunction(ca)){ca={}
}if(b8===b9){ca=this;
--b9
}for(;
b9<b8;
b9++){if((ce=arguments[b9])!=null){for(b7 in ce){b5=ca[b7];
b6=ce[b7];
if(ca===b6){continue
}if(cd&&b6&&(bL.isPlainObject(b6)||(cb=bL.isArray(b6)))){if(cb){cb=false;
cc=b5&&bL.isArray(b5)?b5:[]
}else{cc=b5&&bL.isPlainObject(b5)?b5:{}
}ca[b7]=bL.extend(cd,cc,b6)
}else{if(b6!==aI){ca[b7]=b6
}}}}}return ca
};
bL.extend({noConflict:function(b5){if(a4.$===bL){a4.$=J
}if(b5&&a4.jQuery===bL){a4.jQuery=bk
}return bL
},isReady:false,readyWait:1,holdReady:function(b5){if(b5){bL.readyWait++
}else{bL.ready(true)
}},ready:function(b5){if(b5===true?--bL.readyWait:bL.isReady){return
}if(!n.body){return setTimeout(bL.ready)
}bL.isReady=true;
if(b5!==true&&--bL.readyWait>0){return
}ak.resolveWith(n,[bL]);
if(bL.fn.trigger){bL(n).trigger("ready").off("ready")
}},isFunction:function(b5){return bL.type(b5)==="function"
},isArray:Array.isArray||function(b5){return bL.type(b5)==="array"
},isWindow:function(b5){return b5!=null&&b5==b5.window
},isNumeric:function(b5){return !isNaN(parseFloat(b5))&&isFinite(b5)
},type:function(b5){if(b5==null){return String(b5)
}return typeof b5==="object"||typeof b5==="function"?ac[B.call(b5)]||"object":typeof b5
},isPlainObject:function(b7){if(!b7||bL.type(b7)!=="object"||b7.nodeType||bL.isWindow(b7)){return false
}try{if(b7.constructor&&!X.call(b7,"constructor")&&!X.call(b7.constructor.prototype,"isPrototypeOf")){return false
}}catch(b6){return false
}var b5;
for(b5 in b7){}return b5===aI||X.call(b7,b5)
},isEmptyObject:function(b6){var b5;
for(b5 in b6){return false
}return true
},error:function(b5){throw new Error(b5)
},parseHTML:function(b9,b7,b8){if(!b9||typeof b9!=="string"){return null
}if(typeof b7==="boolean"){b8=b7;
b7=false
}b7=b7||n;
var b6=b.exec(b9),b5=!b8&&[];
if(b6){return[b7.createElement(b6[1])]
}b6=bL.buildFragment([b9],b7,b5);
if(b5){bL(b5).remove()
}return bL.merge([],b6.childNodes)
},parseJSON:function(b5){if(a4.JSON&&a4.JSON.parse){return a4.JSON.parse(b5)
}if(b5===null){return b5
}if(typeof b5==="string"){b5=bL.trim(b5);
if(b5){if(bj.test(b5.replace(bI,"@").replace(a1,"]").replace(bm,""))){return(new Function("return "+b5))()
}}}bL.error("Invalid JSON: "+b5)
},parseXML:function(b7){var b5,b6;
if(!b7||typeof b7!=="string"){return null
}try{if(a4.DOMParser){b6=new DOMParser();
b5=b6.parseFromString(b7,"text/xml")
}else{b5=new ActiveXObject("Microsoft.XMLDOM");
b5.async="false";
b5.loadXML(b7)
}}catch(b8){b5=aI
}if(!b5||!b5.documentElement||b5.getElementsByTagName("parsererror").length){bL.error("Invalid XML: "+b7)
}return b5
},noop:function(){},globalEval:function(b5){if(b5&&bL.trim(b5)){(a4.execScript||function(b6){a4["eval"].call(a4,b6)
})(b5)
}},camelCase:function(b5){return b5.replace(bU,"ms-").replace(aX,O)
},nodeName:function(b6,b5){return b6.nodeName&&b6.nodeName.toLowerCase()===b5.toLowerCase()
},each:function(ca,cb,b6){var b9,b7=0,b8=ca.length,b5=ad(ca);
if(b6){if(b5){for(;
b7<b8;
b7++){b9=cb.apply(ca[b7],b6);
if(b9===false){break
}}}else{for(b7 in ca){b9=cb.apply(ca[b7],b6);
if(b9===false){break
}}}}else{if(b5){for(;
b7<b8;
b7++){b9=cb.call(ca[b7],b7,ca[b7]);
if(b9===false){break
}}}else{for(b7 in ca){b9=cb.call(ca[b7],b7,ca[b7]);
if(b9===false){break
}}}}return ca
},trim:aS&&!aS.call("\uFEFF\xA0")?function(b5){return b5==null?"":aS.call(b5)
}:function(b5){return b5==null?"":(b5+"").replace(E,"")
},makeArray:function(b5,b7){var b6=b7||[];
if(b5!=null){if(ad(Object(b5))){bL.merge(b6,typeof b5==="string"?[b5]:b5)
}else{aq.call(b6,b5)
}}return b6
},inArray:function(b8,b6,b7){var b5;
if(b6){if(aO){return aO.call(b6,b8,b7)
}b5=b6.length;
b7=b7?b7<0?Math.max(0,b5+b7):b7:0;
for(;
b7<b5;
b7++){if(b7 in b6&&b6[b7]===b8){return b7
}}}return -1
},merge:function(b9,b7){var b5=b7.length,b8=b9.length,b6=0;
if(typeof b5==="number"){for(;
b6<b5;
b6++){b9[b8++]=b7[b6]
}}else{while(b7[b6]!==aI){b9[b8++]=b7[b6++]
}}b9.length=b8;
return b9
},grep:function(b6,cb,b5){var ca,b7=[],b8=0,b9=b6.length;
b5=!!b5;
for(;
b8<b9;
b8++){ca=!!cb(b6[b8],b8);
if(b5!==ca){b7.push(b6[b8])
}}return b7
},map:function(b7,cc,b5){var cb,b9=0,ca=b7.length,b6=ad(b7),b8=[];
if(b6){for(;
b9<ca;
b9++){cb=cc(b7[b9],b9,b5);
if(cb!=null){b8[b8.length]=cb
}}}else{for(b9 in b7){cb=cc(b7[b9],b9,b5);
if(cb!=null){b8[b8.length]=cb
}}}return aK.apply([],b8)
},guid:1,proxy:function(b9,b8){var b5,b7,b6;
if(typeof b8==="string"){b6=b9[b8];
b8=b9;
b9=b6
}if(!bL.isFunction(b9)){return aI
}b5=a6.call(arguments,2);
b7=function(){return b9.apply(b8||this,b5.concat(a6.call(arguments)))
};
b7.guid=b9.guid=b9.guid||bL.guid++;
return b7
},access:function(b5,ca,cc,cb,b8,ce,cd){var b7=0,b6=b5.length,b9=cc==null;
if(bL.type(cc)==="object"){b8=true;
for(b7 in cc){bL.access(b5,ca,b7,cc[b7],true,ce,cd)
}}else{if(cb!==aI){b8=true;
if(!bL.isFunction(cb)){cd=true
}if(b9){if(cd){ca.call(b5,cb);
ca=null
}else{b9=ca;
ca=function(cg,cf,ch){return b9.call(bL(cg),ch)
}
}}if(ca){for(;
b7<b6;
b7++){ca(b5[b7],cc,cd?cb:cb.call(b5[b7],b7,ca(b5[b7],cc)))
}}}}return b8?b5:b9?ca.call(b5):b6?ca(b5[0],cc):ce
},now:function(){return(new Date()).getTime()
}});
bL.ready.promise=function(b8){if(!ak){ak=bL.Deferred();
if(n.readyState==="complete"){setTimeout(bL.ready)
}else{if(n.addEventListener){n.addEventListener("DOMContentLoaded",bY,false);
a4.addEventListener("load",bY,false)
}else{n.attachEvent("onreadystatechange",bY);
a4.attachEvent("onload",bY);
var b7=false;
try{b7=a4.frameElement==null&&n.documentElement
}catch(b6){}if(b7&&b7.doScroll){(function b5(){if(!bL.isReady){try{b7.doScroll("left")
}catch(b9){return setTimeout(b5,50)
}bn();
bL.ready()
}})()
}}}}return ak.promise(b8)
};
bL.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(b6,b5){ac["[object "+b5+"]"]=b5.toLowerCase()
});
function ad(b7){var b6=b7.length,b5=bL.type(b7);
if(bL.isWindow(b7)){return false
}if(b7.nodeType===1&&b6){return true
}return b5==="array"||b5!=="function"&&(b6===0||typeof b6==="number"&&b6>0&&(b6-1) in b7)
}y=bL(n);
var b0={};
function ag(b6){var b5=b0[b6]={};
bL.each(b6.match(ae)||[],function(b8,b7){b5[b7]=true
});
return b5
}bL.Callbacks=function(cf){cf=typeof cf==="string"?(b0[cf]||ag(cf)):bL.extend({},cf);
var b9,b8,b5,ca,cb,b7,cc=[],cd=!cf.once&&[],b6=function(cg){b8=cf.memory&&cg;
b5=true;
cb=b7||0;
b7=0;
ca=cc.length;
b9=true;
for(;
cc&&cb<ca;
cb++){if(cc[cb].apply(cg[0],cg[1])===false&&cf.stopOnFalse){b8=false;
break
}}b9=false;
if(cc){if(cd){if(cd.length){b6(cd.shift())
}}else{if(b8){cc=[]
}else{ce.disable()
}}}},ce={add:function(){if(cc){var ch=cc.length;
(function cg(ci){bL.each(ci,function(ck,cj){var cl=bL.type(cj);
if(cl==="function"){if(!cf.unique||!ce.has(cj)){cc.push(cj)
}}else{if(cj&&cj.length&&cl!=="string"){cg(cj)
}}})
})(arguments);
if(b9){ca=cc.length
}else{if(b8){b7=ch;
b6(b8)
}}}return this
},remove:function(){if(cc){bL.each(arguments,function(ci,cg){var ch;
while((ch=bL.inArray(cg,cc,ch))>-1){cc.splice(ch,1);
if(b9){if(ch<=ca){ca--
}if(ch<=cb){cb--
}}}})
}return this
},has:function(cg){return cg?bL.inArray(cg,cc)>-1:!!(cc&&cc.length)
},empty:function(){cc=[];
return this
},disable:function(){cc=cd=b8=aI;
return this
},disabled:function(){return !cc
},lock:function(){cd=aI;
if(!b8){ce.disable()
}return this
},locked:function(){return !cd
},fireWith:function(ch,cg){cg=cg||[];
cg=[ch,cg.slice?cg.slice():cg];
if(cc&&(!b5||cd)){if(b9){cd.push(cg)
}else{b6(cg)
}}return this
},fire:function(){ce.fireWith(this,arguments);
return this
},fired:function(){return !!b5
}};
return ce
};
bL.extend({Deferred:function(b7){var b6=[["resolve","done",bL.Callbacks("once memory"),"resolved"],["reject","fail",bL.Callbacks("once memory"),"rejected"],["notify","progress",bL.Callbacks("memory")]],b8="pending",b9={state:function(){return b8
},always:function(){b5.done(arguments).fail(arguments);
return this
},then:function(){var ca=arguments;
return bL.Deferred(function(cb){bL.each(b6,function(cd,cc){var cf=cc[0],ce=bL.isFunction(ca[cd])&&ca[cd];
b5[cc[1]](function(){var cg=ce&&ce.apply(this,arguments);
if(cg&&bL.isFunction(cg.promise)){cg.promise().done(cb.resolve).fail(cb.reject).progress(cb.notify)
}else{cb[cf+"With"](this===b9?cb.promise():this,ce?[cg]:arguments)
}})
});
ca=null
}).promise()
},promise:function(ca){return ca!=null?bL.extend(ca,b9):b9
}},b5={};
b9.pipe=b9.then;
bL.each(b6,function(cb,ca){var cd=ca[2],cc=ca[3];
b9[ca[1]]=cd.add;
if(cc){cd.add(function(){b8=cc
},b6[cb^1][2].disable,b6[2][2].lock)
}b5[ca[0]]=function(){b5[ca[0]+"With"](this===b5?b9:this,arguments);
return this
};
b5[ca[0]+"With"]=cd.fireWith
});
b9.promise(b5);
if(b7){b7.call(b5,b5)
}return b5
},when:function(b9){var b7=0,cb=a6.call(arguments),b5=cb.length,b6=b5!==1||(b9&&bL.isFunction(b9.promise))?b5:0,ce=b6===1?b9:bL.Deferred(),b8=function(cg,ch,cf){return function(ci){ch[cg]=this;
cf[cg]=arguments.length>1?a6.call(arguments):ci;
if(cf===cd){ce.notifyWith(ch,cf)
}else{if(!(--b6)){ce.resolveWith(ch,cf)
}}}
},cd,ca,cc;
if(b5>1){cd=new Array(b5);
ca=new Array(b5);
cc=new Array(b5);
for(;
b7<b5;
b7++){if(cb[b7]&&bL.isFunction(cb[b7].promise)){cb[b7].promise().done(b8(b7,cc,cb)).fail(ce.reject).progress(b8(b7,ca,cd))
}else{--b6
}}}if(!b6){ce.resolveWith(cc,cb)
}return ce.promise()
}});
bL.support=(function(){var cg,cf,cd,cc,ce,cb,b7,b9,b6,b8,b5=n.createElement("div");
b5.setAttribute("className","t");
b5.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
cf=b5.getElementsByTagName("*");
cd=b5.getElementsByTagName("a")[0];
if(!cf||!cd||!cf.length){return{}
}ce=n.createElement("select");
b7=ce.appendChild(n.createElement("option"));
cc=b5.getElementsByTagName("input")[0];
cd.style.cssText="top:1px;float:left;opacity:.5";
cg={getSetAttribute:b5.className!=="t",leadingWhitespace:b5.firstChild.nodeType===3,tbody:!b5.getElementsByTagName("tbody").length,htmlSerialize:!!b5.getElementsByTagName("link").length,style:/top/.test(cd.getAttribute("style")),hrefNormalized:cd.getAttribute("href")==="/a",opacity:/^0.5/.test(cd.style.opacity),cssFloat:!!cd.style.cssFloat,checkOn:!!cc.value,optSelected:b7.selected,enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:n.compatMode==="CSS1Compat",deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};
cc.checked=true;
cg.noCloneChecked=cc.cloneNode(true).checked;
ce.disabled=true;
cg.optDisabled=!b7.disabled;
try{delete b5.test
}catch(ca){cg.deleteExpando=false
}cc=n.createElement("input");
cc.setAttribute("value","");
cg.input=cc.getAttribute("value")==="";
cc.value="t";
cc.setAttribute("type","radio");
cg.radioValue=cc.value==="t";
cc.setAttribute("checked","t");
cc.setAttribute("name","t");
cb=n.createDocumentFragment();
cb.appendChild(cc);
cg.appendChecked=cc.checked;
cg.checkClone=cb.cloneNode(true).cloneNode(true).lastChild.checked;
if(b5.attachEvent){b5.attachEvent("onclick",function(){cg.noCloneEvent=false
});
b5.cloneNode(true).click()
}for(b8 in {submit:true,change:true,focusin:true}){b5.setAttribute(b9="on"+b8,"t");
cg[b8+"Bubbles"]=b9 in a4||b5.attributes[b9].expando===false
}b5.style.backgroundClip="content-box";
b5.cloneNode(true).style.backgroundClip="";
cg.clearCloneStyle=b5.style.backgroundClip==="content-box";
bL(function(){var ci,cl,ck,cj="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",ch=n.getElementsByTagName("body")[0];
if(!ch){return
}ci=n.createElement("div");
ci.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";
ch.appendChild(ci).appendChild(b5);
b5.innerHTML="<table><tr><td></td><td>t</td></tr></table>";
ck=b5.getElementsByTagName("td");
ck[0].style.cssText="padding:0;margin:0;border:0;display:none";
b6=(ck[0].offsetHeight===0);
ck[0].style.display="";
ck[1].style.display="none";
cg.reliableHiddenOffsets=b6&&(ck[0].offsetHeight===0);
b5.innerHTML="";
b5.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
cg.boxSizing=(b5.offsetWidth===4);
cg.doesNotIncludeMarginInBodyOffset=(ch.offsetTop!==1);
if(a4.getComputedStyle){cg.pixelPosition=(a4.getComputedStyle(b5,null)||{}).top!=="1%";
cg.boxSizingReliable=(a4.getComputedStyle(b5,null)||{width:"4px"}).width==="4px";
cl=b5.appendChild(n.createElement("div"));
cl.style.cssText=b5.style.cssText=cj;
cl.style.marginRight=cl.style.width="0";
b5.style.width="1px";
cg.reliableMarginRight=!parseFloat((a4.getComputedStyle(cl,null)||{}).marginRight)
}if(typeof b5.style.zoom!==aE){b5.innerHTML="";
b5.style.cssText=cj+"width:1px;padding:1px;display:inline;zoom:1";
cg.inlineBlockNeedsLayout=(b5.offsetWidth===3);
b5.style.display="block";
b5.innerHTML="<div></div>";
b5.firstChild.style.width="5px";
cg.shrinkWrapBlocks=(b5.offsetWidth!==3);
if(cg.inlineBlockNeedsLayout){ch.style.zoom=1
}}ch.removeChild(ci);
ci=b5=ck=cl=null
});
cf=ce=cb=b7=cd=cc=null;
return cg
})();
var by=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aP=/([A-Z])/g;
function bc(b8,b6,ca,b9){if(!bL.acceptData(b8)){return
}var cb,cd,ce=bL.expando,cc=typeof b6==="string",cf=b8.nodeType,b5=cf?bL.cache:b8,b7=cf?b8[ce]:b8[ce]&&ce;
if((!b7||!b5[b7]||(!b9&&!b5[b7].data))&&cc&&ca===aI){return
}if(!b7){if(cf){b8[ce]=b7=a8.pop()||bL.guid++
}else{b7=ce
}}if(!b5[b7]){b5[b7]={};
if(!cf){b5[b7].toJSON=bL.noop
}}if(typeof b6==="object"||typeof b6==="function"){if(b9){b5[b7]=bL.extend(b5[b7],b6)
}else{b5[b7].data=bL.extend(b5[b7].data,b6)
}}cb=b5[b7];
if(!b9){if(!cb.data){cb.data={}
}cb=cb.data
}if(ca!==aI){cb[bL.camelCase(b6)]=ca
}if(cc){cd=cb[b6];
if(cd==null){cd=cb[bL.camelCase(b6)]
}}else{cd=cb
}return cd
}function ab(b8,b6,b9){if(!bL.acceptData(b8)){return
}var cb,ca,cc,cd=b8.nodeType,b5=cd?bL.cache:b8,b7=cd?b8[bL.expando]:bL.expando;
if(!b5[b7]){return
}if(b6){cc=b9?b5[b7]:b5[b7].data;
if(cc){if(!bL.isArray(b6)){if(b6 in cc){b6=[b6]
}else{b6=bL.camelCase(b6);
if(b6 in cc){b6=[b6]
}else{b6=b6.split(" ")
}}}else{b6=b6.concat(bL.map(b6,bL.camelCase))
}for(cb=0,ca=b6.length;
cb<ca;
cb++){delete cc[b6[cb]]
}if(!(b9?P:bL.isEmptyObject)(cc)){return
}}}if(!b9){delete b5[b7].data;
if(!P(b5[b7])){return
}}if(cd){bL.cleanData([b8],true)
}else{if(bL.support.deleteExpando||b5!=b5.window){delete b5[b7]
}else{b5[b7]=null
}}}bL.extend({cache:{},expando:"jQuery"+(u+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(b5){b5=b5.nodeType?bL.cache[b5[bL.expando]]:b5[bL.expando];
return !!b5&&!P(b5)
},data:function(b6,b5,b7){return bc(b6,b5,b7)
},removeData:function(b6,b5){return ab(b6,b5)
},_data:function(b6,b5,b7){return bc(b6,b5,b7,true)
},_removeData:function(b6,b5){return ab(b6,b5,true)
},acceptData:function(b6){if(b6.nodeType&&b6.nodeType!==1&&b6.nodeType!==9){return false
}var b5=b6.nodeName&&bL.noData[b6.nodeName.toLowerCase()];
return !b5||b5!==true&&b6.getAttribute("classid")===b5
}});
bL.fn.extend({data:function(b8,cb){var b6,b5,b9=this[0],b7=0,ca=null;
if(b8===aI){if(this.length){ca=bL.data(b9);
if(b9.nodeType===1&&!bL._data(b9,"parsedAttrs")){b6=b9.attributes;
for(;
b7<b6.length;
b7++){b5=b6[b7].name;
if(!b5.indexOf("data-")){b5=bL.camelCase(b5.slice(5));
bA(b9,b5,ca[b5])
}}bL._data(b9,"parsedAttrs",true)
}}return ca
}if(typeof b8==="object"){return this.each(function(){bL.data(this,b8)
})
}return bL.access(this,function(cc){if(cc===aI){return b9?bA(b9,b8,bL.data(b9,b8)):null
}this.each(function(){bL.data(this,b8,cc)
})
},null,cb,arguments.length>1,null,true)
},removeData:function(b5){return this.each(function(){bL.removeData(this,b5)
})
}});
function bA(b7,b6,b8){if(b8===aI&&b7.nodeType===1){var b5="data-"+b6.replace(aP,"-$1").toLowerCase();
b8=b7.getAttribute(b5);
if(typeof b8==="string"){try{b8=b8==="true"?true:b8==="false"?false:b8==="null"?null:+b8+""===b8?+b8:by.test(b8)?bL.parseJSON(b8):b8
}catch(b9){}bL.data(b7,b6,b8)
}else{b8=aI
}}return b8
}function P(b6){var b5;
for(b5 in b6){if(b5==="data"&&bL.isEmptyObject(b6[b5])){continue
}if(b5!=="toJSON"){return false
}}return true
}bL.extend({queue:function(b7,b6,b8){var b5;
if(b7){b6=(b6||"fx")+"queue";
b5=bL._data(b7,b6);
if(b8){if(!b5||bL.isArray(b8)){b5=bL._data(b7,b6,bL.makeArray(b8))
}else{b5.push(b8)
}}return b5||[]
}},dequeue:function(ca,b9){b9=b9||"fx";
var b6=bL.queue(ca,b9),cb=b6.length,b8=b6.shift(),b5=bL._queueHooks(ca,b9),b7=function(){bL.dequeue(ca,b9)
};
if(b8==="inprogress"){b8=b6.shift();
cb--
}b5.cur=b8;
if(b8){if(b9==="fx"){b6.unshift("inprogress")
}delete b5.stop;
b8.call(ca,b7,b5)
}if(!cb&&b5){b5.empty.fire()
}},_queueHooks:function(b7,b6){var b5=b6+"queueHooks";
return bL._data(b7,b5)||bL._data(b7,b5,{empty:bL.Callbacks("once memory").add(function(){bL._removeData(b7,b6+"queue");
bL._removeData(b7,b5)
})})
}});
bL.fn.extend({queue:function(b5,b6){var b7=2;
if(typeof b5!=="string"){b6=b5;
b5="fx";
b7--
}if(arguments.length<b7){return bL.queue(this[0],b5)
}return b6===aI?this:this.each(function(){var b8=bL.queue(this,b5,b6);
bL._queueHooks(this,b5);
if(b5==="fx"&&b8[0]!=="inprogress"){bL.dequeue(this,b5)
}})
},dequeue:function(b5){return this.each(function(){bL.dequeue(this,b5)
})
},delay:function(b6,b5){b6=bL.fx?bL.fx.speeds[b6]||b6:b6;
b5=b5||"fx";
return this.queue(b5,function(b8,b7){var b9=setTimeout(b8,b6);
b7.stop=function(){clearTimeout(b9)
}
})
},clearQueue:function(b5){return this.queue(b5||"fx",[])
},promise:function(b7,cb){var b6,b8=1,cc=bL.Deferred(),ca=this,b5=this.length,b9=function(){if(!(--b8)){cc.resolveWith(ca,[ca])
}};
if(typeof b7!=="string"){cb=b7;
b7=aI
}b7=b7||"fx";
while(b5--){b6=bL._data(ca[b5],b7+"queueHooks");
if(b6&&b6.empty){b8++;
b6.empty.add(b9)
}}b9();
return cc.promise(cb)
}});
var ba,b1,bO=/[\t\r\n]/g,am=/\r/g,aH=/^(?:input|select|textarea|button|object)$/i,F=/^(?:a|area)$/i,N=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,at=/^(?:checked|selected)$/i,bR=bL.support.getSetAttribute,bH=bL.support.input;
bL.fn.extend({attr:function(b5,b6){return bL.access(this,bL.attr,b5,b6,arguments.length>1)
},removeAttr:function(b5){return this.each(function(){bL.removeAttr(this,b5)
})
},prop:function(b5,b6){return bL.access(this,bL.prop,b5,b6,arguments.length>1)
},removeProp:function(b5){b5=bL.propFix[b5]||b5;
return this.each(function(){try{this[b5]=aI;
delete this[b5]
}catch(b6){}})
},addClass:function(cc){var b6,b5,cd,b9,b7,b8=0,ca=this.length,cb=typeof cc==="string"&&cc;
if(bL.isFunction(cc)){return this.each(function(ce){bL(this).addClass(cc.call(this,ce,this.className))
})
}if(cb){b6=(cc||"").match(ae)||[];
for(;
b8<ca;
b8++){b5=this[b8];
cd=b5.nodeType===1&&(b5.className?(" "+b5.className+" ").replace(bO," "):" ");
if(cd){b7=0;
while((b9=b6[b7++])){if(cd.indexOf(" "+b9+" ")<0){cd+=b9+" "
}}b5.className=bL.trim(cd)
}}}return this
},removeClass:function(cc){var b6,b5,cd,b9,b7,b8=0,ca=this.length,cb=arguments.length===0||typeof cc==="string"&&cc;
if(bL.isFunction(cc)){return this.each(function(ce){bL(this).removeClass(cc.call(this,ce,this.className))
})
}if(cb){b6=(cc||"").match(ae)||[];
for(;
b8<ca;
b8++){b5=this[b8];
cd=b5.nodeType===1&&(b5.className?(" "+b5.className+" ").replace(bO," "):"");
if(cd){b7=0;
while((b9=b6[b7++])){while(cd.indexOf(" "+b9+" ")>=0){cd=cd.replace(" "+b9+" "," ")
}}b5.className=cc?bL.trim(cd):""
}}}return this
},toggleClass:function(b8,b6){var b7=typeof b8,b5=typeof b6==="boolean";
if(bL.isFunction(b8)){return this.each(function(b9){bL(this).toggleClass(b8.call(this,b9,this.className,b6),b6)
})
}return this.each(function(){if(b7==="string"){var cb,ca=0,b9=bL(this),cc=b6,cd=b8.match(ae)||[];
while((cb=cd[ca++])){cc=b5?cc:!b9.hasClass(cb);
b9[cc?"addClass":"removeClass"](cb)
}}else{if(b7===aE||b7==="boolean"){if(this.className){bL._data(this,"__className__",this.className)
}this.className=this.className||b8===false?"":bL._data(this,"__className__")||""
}}})
},hasClass:function(b5){var b8=" "+b5+" ",b7=0,b6=this.length;
for(;
b7<b6;
b7++){if(this[b7].nodeType===1&&(" "+this[b7].className+" ").replace(bO," ").indexOf(b8)>=0){return true
}}return false
},val:function(b8){var b6,b5,b9,b7=this[0];
if(!arguments.length){if(b7){b5=bL.valHooks[b7.type]||bL.valHooks[b7.nodeName.toLowerCase()];
if(b5&&"get" in b5&&(b6=b5.get(b7,"value"))!==aI){return b6
}b6=b7.value;
return typeof b6==="string"?b6.replace(am,""):b6==null?"":b6
}return
}b9=bL.isFunction(b8);
return this.each(function(cb){var cc,ca=bL(this);
if(this.nodeType!==1){return
}if(b9){cc=b8.call(this,cb,ca.val())
}else{cc=b8
}if(cc==null){cc=""
}else{if(typeof cc==="number"){cc+=""
}else{if(bL.isArray(cc)){cc=bL.map(cc,function(cd){return cd==null?"":cd+""
})
}}}b5=bL.valHooks[this.type]||bL.valHooks[this.nodeName.toLowerCase()];
if(!b5||!("set" in b5)||b5.set(this,cc,"value")===aI){this.value=cc
}})
}});
bL.extend({valHooks:{option:{get:function(b5){var b6=b5.attributes.value;
return !b6||b6.specified?b5.value:b5.text
}},select:{get:function(b5){var cb,b7,cd=b5.options,b9=b5.selectedIndex,b8=b5.type==="select-one"||b9<0,cc=b8?null:[],ca=b8?b9+1:cd.length,b6=b9<0?ca:b8?b9:0;
for(;
b6<ca;
b6++){b7=cd[b6];
if((b7.selected||b6===b9)&&(bL.support.optDisabled?!b7.disabled:b7.getAttribute("disabled")===null)&&(!b7.parentNode.disabled||!bL.nodeName(b7.parentNode,"optgroup"))){cb=bL(b7).val();
if(b8){return cb
}cc.push(cb)
}}return cc
},set:function(b6,b7){var b5=bL.makeArray(b7);
bL(b6).find("option").each(function(){this.selected=bL.inArray(bL(this).val(),b5)>=0
});
if(!b5.length){b6.selectedIndex=-1
}return b5
}}},attr:function(ca,b8,cb){var b5,b9,b7,b6=ca.nodeType;
if(!ca||b6===3||b6===8||b6===2){return
}if(typeof ca.getAttribute===aE){return bL.prop(ca,b8,cb)
}b9=b6!==1||!bL.isXMLDoc(ca);
if(b9){b8=b8.toLowerCase();
b5=bL.attrHooks[b8]||(N.test(b8)?b1:ba)
}if(cb!==aI){if(cb===null){bL.removeAttr(ca,b8)
}else{if(b5&&b9&&"set" in b5&&(b7=b5.set(ca,cb,b8))!==aI){return b7
}else{ca.setAttribute(b8,cb+"");
return cb
}}}else{if(b5&&b9&&"get" in b5&&(b7=b5.get(ca,b8))!==null){return b7
}else{if(typeof ca.getAttribute!==aE){b7=ca.getAttribute(b8)
}return b7==null?aI:b7
}}},removeAttr:function(b7,b9){var b5,b8,b6=0,ca=b9&&b9.match(ae);
if(ca&&b7.nodeType===1){while((b5=ca[b6++])){b8=bL.propFix[b5]||b5;
if(N.test(b5)){if(!bR&&at.test(b5)){b7[bL.camelCase("default-"+b5)]=b7[b8]=false
}else{b7[b8]=false
}}else{bL.attr(b7,b5,"")
}b7.removeAttribute(bR?b5:b8)
}}},attrHooks:{type:{set:function(b5,b6){if(!bL.support.radioValue&&b6==="radio"&&bL.nodeName(b5,"input")){var b7=b5.value;
b5.setAttribute("type",b6);
if(b7){b5.value=b7
}return b6
}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(ca,b8,cb){var b7,b5,b9,b6=ca.nodeType;
if(!ca||b6===3||b6===8||b6===2){return
}b9=b6!==1||!bL.isXMLDoc(ca);
if(b9){b8=bL.propFix[b8]||b8;
b5=bL.propHooks[b8]
}if(cb!==aI){if(b5&&"set" in b5&&(b7=b5.set(ca,cb,b8))!==aI){return b7
}else{return(ca[b8]=cb)
}}else{if(b5&&"get" in b5&&(b7=b5.get(ca,b8))!==null){return b7
}else{return ca[b8]
}}},propHooks:{tabIndex:{get:function(b6){var b5=b6.getAttributeNode("tabindex");
return b5&&b5.specified?parseInt(b5.value,10):aH.test(b6.nodeName)||F.test(b6.nodeName)&&b6.href?0:aI
}}}});
b1={get:function(b8,b6){var b9=bL.prop(b8,b6),b5=typeof b9==="boolean"&&b8.getAttribute(b6),b7=typeof b9==="boolean"?bH&&bR?b5!=null:at.test(b6)?b8[bL.camelCase("default-"+b6)]:!!b5:b8.getAttributeNode(b6);
return b7&&b7.value!==false?b6.toLowerCase():aI
},set:function(b6,b7,b5){if(b7===false){bL.removeAttr(b6,b5)
}else{if(bH&&bR||!at.test(b5)){b6.setAttribute(!bR&&bL.propFix[b5]||b5,b5)
}else{b6[bL.camelCase("default-"+b5)]=b6[b5]=true
}}return b5
}};
if(!bH||!bR){bL.attrHooks.value={get:function(b7,b6){var b5=b7.getAttributeNode(b6);
return bL.nodeName(b7,"input")?b7.defaultValue:b5&&b5.specified?b5.value:aI
},set:function(b6,b7,b5){if(bL.nodeName(b6,"input")){b6.defaultValue=b7
}else{return ba&&ba.set(b6,b7,b5)
}}}
}if(!bR){ba=bL.valHooks.button={get:function(b7,b6){var b5=b7.getAttributeNode(b6);
return b5&&(b6==="id"||b6==="name"||b6==="coords"?b5.value!=="":b5.specified)?b5.value:aI
},set:function(b7,b8,b6){var b5=b7.getAttributeNode(b6);
if(!b5){b7.setAttributeNode((b5=b7.ownerDocument.createAttribute(b6)))
}b5.value=b8+="";
return b6==="value"||b8===b7.getAttribute(b6)?b8:aI
}};
bL.attrHooks.contenteditable={get:ba.get,set:function(b6,b7,b5){ba.set(b6,b7===""?false:b7,b5)
}};
bL.each(["width","height"],function(b6,b5){bL.attrHooks[b5]=bL.extend(bL.attrHooks[b5],{set:function(b7,b8){if(b8===""){b7.setAttribute(b5,"auto");
return b8
}}})
})
}if(!bL.support.hrefNormalized){bL.each(["href","src","width","height"],function(b6,b5){bL.attrHooks[b5]=bL.extend(bL.attrHooks[b5],{get:function(b8){var b7=b8.getAttribute(b5,2);
return b7==null?aI:b7
}})
});
bL.each(["href","src"],function(b6,b5){bL.propHooks[b5]={get:function(b7){return b7.getAttribute(b5,4)
}}
})
}if(!bL.support.style){bL.attrHooks.style={get:function(b5){return b5.style.cssText||aI
},set:function(b5,b6){return(b5.style.cssText=b6+"")
}}
}if(!bL.support.optSelected){bL.propHooks.selected=bL.extend(bL.propHooks.selected,{get:function(b6){var b5=b6.parentNode;
if(b5){b5.selectedIndex;
if(b5.parentNode){b5.parentNode.selectedIndex
}}return null
}})
}if(!bL.support.enctype){bL.propFix.enctype="encoding"
}if(!bL.support.checkOn){bL.each(["radio","checkbox"],function(){bL.valHooks[this]={get:function(b5){return b5.getAttribute("value")===null?"on":b5.value
}}
})
}bL.each(["radio","checkbox"],function(){bL.valHooks[this]=bL.extend(bL.valHooks[this],{set:function(b5,b6){if(bL.isArray(b6)){return(b5.checked=bL.inArray(bL(b5).val(),b6)>=0)
}}})
});
var bJ=/^(?:input|select|textarea)$/i,a5=/^key/,bP=/^(?:mouse|contextmenu)|click/,bD=/^(?:focusinfocus|focusoutblur)$/,bw=/^([^.]*)(?:\.(.+)|)$/;
function T(){return true
}function Z(){return false
}bL.event={global:{},add:function(b9,ce,cj,cb,ca){var cc,ck,cl,b7,cg,cd,ci,b8,ch,b5,b6,cf=bL._data(b9);
if(!cf){return
}if(cj.handler){b7=cj;
cj=b7.handler;
ca=b7.selector
}if(!cj.guid){cj.guid=bL.guid++
}if(!(ck=cf.events)){ck=cf.events={}
}if(!(cd=cf.handle)){cd=cf.handle=function(cm){return typeof bL!==aE&&(!cm||bL.event.triggered!==cm.type)?bL.event.dispatch.apply(cd.elem,arguments):aI
};
cd.elem=b9
}ce=(ce||"").match(ae)||[""];
cl=ce.length;
while(cl--){cc=bw.exec(ce[cl])||[];
ch=b6=cc[1];
b5=(cc[2]||"").split(".").sort();
cg=bL.event.special[ch]||{};
ch=(ca?cg.delegateType:cg.bindType)||ch;
cg=bL.event.special[ch]||{};
ci=bL.extend({type:ch,origType:b6,data:cb,handler:cj,guid:cj.guid,selector:ca,needsContext:ca&&bL.expr.match.needsContext.test(ca),namespace:b5.join(".")},b7);
if(!(b8=ck[ch])){b8=ck[ch]=[];
b8.delegateCount=0;
if(!cg.setup||cg.setup.call(b9,cb,b5,cd)===false){if(b9.addEventListener){b9.addEventListener(ch,cd,false)
}else{if(b9.attachEvent){b9.attachEvent("on"+ch,cd)
}}}}if(cg.add){cg.add.call(b9,ci);
if(!ci.handler.guid){ci.handler.guid=cj.guid
}}if(ca){b8.splice(b8.delegateCount++,0,ci)
}else{b8.push(ci)
}bL.event.global[ch]=true
}b9=null
},remove:function(b8,ce,cl,b9,cd){var cb,ci,cc,ca,ck,cj,cg,b7,ch,b5,b6,cf=bL.hasData(b8)&&bL._data(b8);
if(!cf||!(cj=cf.events)){return
}ce=(ce||"").match(ae)||[""];
ck=ce.length;
while(ck--){cc=bw.exec(ce[ck])||[];
ch=b6=cc[1];
b5=(cc[2]||"").split(".").sort();
if(!ch){for(ch in cj){bL.event.remove(b8,ch+ce[ck],cl,b9,true)
}continue
}cg=bL.event.special[ch]||{};
ch=(b9?cg.delegateType:cg.bindType)||ch;
b7=cj[ch]||[];
cc=cc[2]&&new RegExp("(^|\\.)"+b5.join("\\.(?:.*\\.|)")+"(\\.|$)");
ca=cb=b7.length;
while(cb--){ci=b7[cb];
if((cd||b6===ci.origType)&&(!cl||cl.guid===ci.guid)&&(!cc||cc.test(ci.namespace))&&(!b9||b9===ci.selector||b9==="**"&&ci.selector)){b7.splice(cb,1);
if(ci.selector){b7.delegateCount--
}if(cg.remove){cg.remove.call(b8,ci)
}}}if(ca&&!b7.length){if(!cg.teardown||cg.teardown.call(b8,b5,cf.handle)===false){bL.removeEvent(b8,ch,cf.handle)
}delete cj[ch]
}}if(bL.isEmptyObject(cj)){delete cf.handle;
bL._removeData(b8,"events")
}},trigger:function(b5,cc,b8,cj){var cd,b7,ch,ci,cf,cb,ca,b9=[b8||n],cg=X.call(b5,"type")?b5.type:b5,b6=X.call(b5,"namespace")?b5.namespace.split("."):[];
ch=cb=b8=b8||n;
if(b8.nodeType===3||b8.nodeType===8){return
}if(bD.test(cg+bL.event.triggered)){return
}if(cg.indexOf(".")>=0){b6=cg.split(".");
cg=b6.shift();
b6.sort()
}b7=cg.indexOf(":")<0&&"on"+cg;
b5=b5[bL.expando]?b5:new bL.Event(cg,typeof b5==="object"&&b5);
b5.isTrigger=true;
b5.namespace=b6.join(".");
b5.namespace_re=b5.namespace?new RegExp("(^|\\.)"+b6.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;
b5.result=aI;
if(!b5.target){b5.target=b8
}cc=cc==null?[b5]:bL.makeArray(cc,[b5]);
cf=bL.event.special[cg]||{};
if(!cj&&cf.trigger&&cf.trigger.apply(b8,cc)===false){return
}if(!cj&&!cf.noBubble&&!bL.isWindow(b8)){ci=cf.delegateType||cg;
if(!bD.test(ci+cg)){ch=ch.parentNode
}for(;
ch;
ch=ch.parentNode){b9.push(ch);
cb=ch
}if(cb===(b8.ownerDocument||n)){b9.push(cb.defaultView||cb.parentWindow||a4)
}}ca=0;
while((ch=b9[ca++])&&!b5.isPropagationStopped()){b5.type=ca>1?ci:cf.bindType||cg;
cd=(bL._data(ch,"events")||{})[b5.type]&&bL._data(ch,"handle");
if(cd){cd.apply(ch,cc)
}cd=b7&&ch[b7];
if(cd&&bL.acceptData(ch)&&cd.apply&&cd.apply(ch,cc)===false){b5.preventDefault()
}}b5.type=cg;
if(!cj&&!b5.isDefaultPrevented()){if((!cf._default||cf._default.apply(b8.ownerDocument,cc)===false)&&!(cg==="click"&&bL.nodeName(b8,"a"))&&bL.acceptData(b8)){if(b7&&b8[cg]&&!bL.isWindow(b8)){cb=b8[b7];
if(cb){b8[b7]=null
}bL.event.triggered=cg;
try{b8[cg]()
}catch(ce){}bL.event.triggered=aI;
if(cb){b8[b7]=cb
}}}}return b5.result
},dispatch:function(b5){b5=bL.event.fix(b5);
var b9,ca,ce,b6,b8,cd=[],cc=a6.call(arguments),b7=(bL._data(this,"events")||{})[b5.type]||[],cb=bL.event.special[b5.type]||{};
cc[0]=b5;
b5.delegateTarget=this;
if(cb.preDispatch&&cb.preDispatch.call(this,b5)===false){return
}cd=bL.event.handlers.call(this,b5,b7);
b9=0;
while((b6=cd[b9++])&&!b5.isPropagationStopped()){b5.currentTarget=b6.elem;
b8=0;
while((ce=b6.handlers[b8++])&&!b5.isImmediatePropagationStopped()){if(!b5.namespace_re||b5.namespace_re.test(ce.namespace)){b5.handleObj=ce;
b5.data=ce.data;
ca=((bL.event.special[ce.origType]||{}).handle||ce.handler).apply(b6.elem,cc);
if(ca!==aI){if((b5.result=ca)===false){b5.preventDefault();
b5.stopPropagation()
}}}}}if(cb.postDispatch){cb.postDispatch.call(this,b5)
}return b5.result
},handlers:function(b5,b7){var b6,cc,ca,b9,cb=[],b8=b7.delegateCount,cd=b5.target;
if(b8&&cd.nodeType&&(!b5.button||b5.type!=="click")){for(;
cd!=this;
cd=cd.parentNode||this){if(cd.nodeType===1&&(cd.disabled!==true||b5.type!=="click")){ca=[];
for(b9=0;
b9<b8;
b9++){cc=b7[b9];
b6=cc.selector+" ";
if(ca[b6]===aI){ca[b6]=cc.needsContext?bL(b6,this).index(cd)>=0:bL.find(b6,this,null,[cd]).length
}if(ca[b6]){ca.push(cc)
}}if(ca.length){cb.push({elem:cd,handlers:ca})
}}}}if(b8<b7.length){cb.push({elem:this,handlers:b7.slice(b8)})
}return cb
},fix:function(b8){if(b8[bL.expando]){return b8
}var b6,cb,ca,b7=b8.type,b5=b8,b9=this.fixHooks[b7];
if(!b9){this.fixHooks[b7]=b9=bP.test(b7)?this.mouseHooks:a5.test(b7)?this.keyHooks:{}
}ca=b9.props?this.props.concat(b9.props):this.props;
b8=new bL.Event(b5);
b6=ca.length;
while(b6--){cb=ca[b6];
b8[cb]=b5[cb]
}if(!b8.target){b8.target=b5.srcElement||n
}if(b8.target.nodeType===3){b8.target=b8.target.parentNode
}b8.metaKey=!!b8.metaKey;
return b9.filter?b9.filter(b8,b5):b8
},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b6,b5){if(b6.which==null){b6.which=b5.charCode!=null?b5.charCode:b5.keyCode
}return b6
}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b8,b7){var b5,b9,ca,b6=b7.button,cb=b7.fromElement;
if(b8.pageX==null&&b7.clientX!=null){b9=b8.target.ownerDocument||n;
ca=b9.documentElement;
b5=b9.body;
b8.pageX=b7.clientX+(ca&&ca.scrollLeft||b5&&b5.scrollLeft||0)-(ca&&ca.clientLeft||b5&&b5.clientLeft||0);
b8.pageY=b7.clientY+(ca&&ca.scrollTop||b5&&b5.scrollTop||0)-(ca&&ca.clientTop||b5&&b5.clientTop||0)
}if(!b8.relatedTarget&&cb){b8.relatedTarget=cb===b8.target?b7.toElement:cb
}if(!b8.which&&b6!==aI){b8.which=(b6&1?1:(b6&2?3:(b6&4?2:0)))
}return b8
}},special:{load:{noBubble:true},click:{trigger:function(){if(bL.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();
return false
}}},focus:{trigger:function(){if(this!==n.activeElement&&this.focus){try{this.focus();
return false
}catch(b5){}}},delegateType:"focusin"},blur:{trigger:function(){if(this===n.activeElement&&this.blur){this.blur();
return false
}},delegateType:"focusout"},beforeunload:{postDispatch:function(b5){if(b5.result!==aI){b5.originalEvent.returnValue=b5.result
}}}},simulate:function(b6,b8,b7,b5){var b9=bL.extend(new bL.Event(),b7,{type:b6,isSimulated:true,originalEvent:{}});
if(b5){bL.event.trigger(b9,null,b8)
}else{bL.event.dispatch.call(b8,b9)
}if(b9.isDefaultPrevented()){b7.preventDefault()
}}};
bL.removeEvent=n.removeEventListener?function(b6,b5,b7){if(b6.removeEventListener){b6.removeEventListener(b5,b7,false)
}}:function(b7,b6,b8){var b5="on"+b6;
if(b7.detachEvent){if(typeof b7[b5]===aE){b7[b5]=null
}b7.detachEvent(b5,b8)
}};
bL.Event=function(b6,b5){if(!(this instanceof bL.Event)){return new bL.Event(b6,b5)
}if(b6&&b6.type){this.originalEvent=b6;
this.type=b6.type;
this.isDefaultPrevented=(b6.defaultPrevented||b6.returnValue===false||b6.getPreventDefault&&b6.getPreventDefault())?T:Z
}else{this.type=b6
}if(b5){bL.extend(this,b5)
}this.timeStamp=b6&&b6.timeStamp||bL.now();
this[bL.expando]=true
};
bL.Event.prototype={isDefaultPrevented:Z,isPropagationStopped:Z,isImmediatePropagationStopped:Z,preventDefault:function(){var b5=this.originalEvent;
this.isDefaultPrevented=T;
if(!b5){return
}if(b5.preventDefault){b5.preventDefault()
}else{b5.returnValue=false
}},stopPropagation:function(){var b5=this.originalEvent;
this.isPropagationStopped=T;
if(!b5){return
}if(b5.stopPropagation){b5.stopPropagation()
}b5.cancelBubble=true
},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=T;
this.stopPropagation()
}};
bL.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b6,b5){bL.event.special[b6]={delegateType:b5,bindType:b5,handle:function(b9){var b7,cb=this,ca=b9.relatedTarget,b8=b9.handleObj;
if(!ca||(ca!==cb&&!bL.contains(cb,ca))){b9.type=b8.origType;
b7=b8.handler.apply(this,arguments);
b9.type=b5
}return b7
}}
});
if(!bL.support.submitBubbles){bL.event.special.submit={setup:function(){if(bL.nodeName(this,"form")){return false
}bL.event.add(this,"click._submit keypress._submit",function(b7){var b6=b7.target,b5=bL.nodeName(b6,"input")||bL.nodeName(b6,"button")?b6.form:aI;
if(b5&&!bL._data(b5,"submitBubbles")){bL.event.add(b5,"submit._submit",function(b8){b8._submit_bubble=true
});
bL._data(b5,"submitBubbles",true)
}})
},postDispatch:function(b5){if(b5._submit_bubble){delete b5._submit_bubble;
if(this.parentNode&&!b5.isTrigger){bL.event.simulate("submit",this.parentNode,b5,true)
}}},teardown:function(){if(bL.nodeName(this,"form")){return false
}bL.event.remove(this,"._submit")
}}
}if(!bL.support.changeBubbles){bL.event.special.change={setup:function(){if(bJ.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bL.event.add(this,"propertychange._change",function(b5){if(b5.originalEvent.propertyName==="checked"){this._just_changed=true
}});
bL.event.add(this,"click._change",function(b5){if(this._just_changed&&!b5.isTrigger){this._just_changed=false
}bL.event.simulate("change",this,b5,true)
})
}return false
}bL.event.add(this,"beforeactivate._change",function(b6){var b5=b6.target;
if(bJ.test(b5.nodeName)&&!bL._data(b5,"changeBubbles")){bL.event.add(b5,"change._change",function(b7){if(this.parentNode&&!b7.isSimulated&&!b7.isTrigger){bL.event.simulate("change",this.parentNode,b7,true)
}});
bL._data(b5,"changeBubbles",true)
}})
},handle:function(b6){var b5=b6.target;
if(this!==b5||b6.isSimulated||b6.isTrigger||(b5.type!=="radio"&&b5.type!=="checkbox")){return b6.handleObj.handler.apply(this,arguments)
}},teardown:function(){bL.event.remove(this,"._change");
return !bJ.test(this.nodeName)
}}
}if(!bL.support.focusinBubbles){bL.each({focus:"focusin",blur:"focusout"},function(b8,b5){var b6=0,b7=function(b9){bL.event.simulate(b5,b9.target,bL.event.fix(b9),true)
};
bL.event.special[b5]={setup:function(){if(b6++===0){n.addEventListener(b8,b7,true)
}},teardown:function(){if(--b6===0){n.removeEventListener(b8,b7,true)
}}}
})
}bL.fn.extend({on:function(b7,b5,ca,b9,b6){var b8,cb;
if(typeof b7==="object"){if(typeof b5!=="string"){ca=ca||b5;
b5=aI
}for(b8 in b7){this.on(b8,b5,ca,b7[b8],b6)
}return this
}if(ca==null&&b9==null){b9=b5;
ca=b5=aI
}else{if(b9==null){if(typeof b5==="string"){b9=ca;
ca=aI
}else{b9=ca;
ca=b5;
b5=aI
}}}if(b9===false){b9=Z
}else{if(!b9){return this
}}if(b6===1){cb=b9;
b9=function(cc){bL().off(cc);
return cb.apply(this,arguments)
};
b9.guid=cb.guid||(cb.guid=bL.guid++)
}return this.each(function(){bL.event.add(this,b7,b9,ca,b5)
})
},one:function(b6,b5,b8,b7){return this.on(b6,b5,b8,b7,1)
},off:function(b7,b5,b9){var b6,b8;
if(b7&&b7.preventDefault&&b7.handleObj){b6=b7.handleObj;
bL(b7.delegateTarget).off(b6.namespace?b6.origType+"."+b6.namespace:b6.origType,b6.selector,b6.handler);
return this
}if(typeof b7==="object"){for(b8 in b7){this.off(b8,b5,b7[b8])
}return this
}if(b5===false||typeof b5==="function"){b9=b5;
b5=aI
}if(b9===false){b9=Z
}return this.each(function(){bL.event.remove(this,b7,b9,b5)
})
},bind:function(b5,b7,b6){return this.on(b5,null,b7,b6)
},unbind:function(b5,b6){return this.off(b5,null,b6)
},delegate:function(b5,b6,b8,b7){return this.on(b6,b5,b8,b7)
},undelegate:function(b5,b6,b7){return arguments.length===1?this.off(b5,"**"):this.off(b6,b5||"**",b7)
},trigger:function(b5,b6){return this.each(function(){bL.event.trigger(b5,b6,this)
})
},triggerHandler:function(b5,b7){var b6=this[0];
if(b6){return bL.event.trigger(b5,b7,b6,true)
}}});
/*!
     * Sizzle CSS Selector Engine
     * Copyright 2012 jQuery Foundation and other contributors
     * Released under the MIT license
     * http://sizzlejs.com/
     */
(function(dc,cj){var cz,cd,cp,cJ,cL,cU,cV,di,cX,cD,cq,cf,c1,dd,cc,cH,cF,c7="sizzle"+-(new Date()),cK=dc.document,df={},dg=0,c2=0,b7=cB(),c6=cB(),cI=cB(),db=typeof cj,cP=1<<31,c9=[],da=c9.pop,b6=c9.push,co=c9.slice,cb=c9.indexOf||function(dl){var dk=0,dj=this.length;
for(;
dk<dj;
dk++){if(this[dk]===dl){return dk
}}return -1
},cr="[\\x20\\t\\r\\n\\f]",b5="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cM=b5.replace("w","w#"),ck="([*^$|!~]?=)",c4="\\["+cr+"*("+b5+")"+cr+"*(?:"+ck+cr+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cM+")|)|)"+cr+"*\\]",cm=":("+b5+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+c4.replace(3,8)+")*)|.*)\\)|)",ct=new RegExp("^"+cr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cr+"+$","g"),cw=new RegExp("^"+cr+"*,"+cr+"*"),cC=new RegExp("^"+cr+"*([\\x20\\t\\r\\n\\f>+~])"+cr+"*"),cR=new RegExp(cm),cS=new RegExp("^"+cM+"$"),c0={ID:new RegExp("^#("+b5+")"),CLASS:new RegExp("^\\.("+b5+")"),NAME:new RegExp("^\\[name=['\"]?("+b5+")['\"]?\\]"),TAG:new RegExp("^("+b5.replace("w","w*")+")"),ATTR:new RegExp("^"+c4),PSEUDO:new RegExp("^"+cm),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+cr+"*(even|odd|(([+-]|)(\\d*)n|)"+cr+"*(?:([+-]|)"+cr+"*(\\d+)|))"+cr+"*\\)|)","i"),needsContext:new RegExp("^"+cr+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cr+"*((?:-\\d)?\\d*)"+cr+"*\\)|)(?=[^-]|$)","i")},cY=/[\x20\t\r\n\f]*[+~]/,cO=/^[^{]+\{\s*\[native code/,cQ=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ca=/^(?:input|select|textarea|button)$/i,cn=/^h\d$/i,cN=/'|\\/g,cv=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,cu=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,c3=function(dj,dl){var dk="0x"+dl-65536;
return dk!==dk?dl:dk<0?String.fromCharCode(dk+65536):String.fromCharCode(dk>>10|55296,dk&1023|56320)
};
try{co.call(cK.documentElement.childNodes,0)[0].nodeType
}catch(cE){co=function(dk){var dl,dj=[];
while((dl=this[dk++])){dj.push(dl)
}return dj
}
}function cG(dj){return cO.test(dj+"")
}function cB(){var dj,dk=[];
return(dj=function(dl,dm){if(dk.push(dl+=" ")>cp.cacheLength){delete dj[dk.shift()]
}return(dj[dl]=dm)
})
}function cl(dj){dj[c7]=true;
return dj
}function ce(dj){var dl=cD.createElement("div");
try{return dj(dl)
}catch(dk){return false
}finally{dl=null
}}function cx(ds,dk,dw,dy){var dx,dp,dq,du,dv,dn,dm,dj,dl,dt;
if((dk?dk.ownerDocument||dk:cK)!==cD){cX(dk)
}dk=dk||cD;
dw=dw||[];
if(!ds||typeof ds!=="string"){return dw
}if((du=dk.nodeType)!==1&&du!==9){return[]
}if(!cf&&!dy){if((dx=cQ.exec(ds))){if((dq=dx[1])){if(du===9){dp=dk.getElementById(dq);
if(dp&&dp.parentNode){if(dp.id===dq){dw.push(dp);
return dw
}}else{return dw
}}else{if(dk.ownerDocument&&(dp=dk.ownerDocument.getElementById(dq))&&cH(dk,dp)&&dp.id===dq){dw.push(dp);
return dw
}}}else{if(dx[2]){b6.apply(dw,co.call(dk.getElementsByTagName(ds),0));
return dw
}else{if((dq=dx[3])&&df.getByClassName&&dk.getElementsByClassName){b6.apply(dw,co.call(dk.getElementsByClassName(dq),0));
return dw
}}}}if(df.qsa&&!c1.test(ds)){dm=true;
dj=c7;
dl=dk;
dt=du===9&&ds;
if(du===1&&dk.nodeName.toLowerCase()!=="object"){dn=ch(ds);
if((dm=dk.getAttribute("id"))){dj=dm.replace(cN,"\\$&")
}else{dk.setAttribute("id",dj)
}dj="[id='"+dj+"'] ";
dv=dn.length;
while(dv--){dn[dv]=dj+ci(dn[dv])
}dl=cY.test(ds)&&dk.parentNode||dk;
dt=dn.join(",")
}if(dt){try{b6.apply(dw,co.call(dl.querySelectorAll(dt),0));
return dw
}catch(dr){}finally{if(!dm){dk.removeAttribute("id")
}}}}}return de(ds.replace(ct,"$1"),dk,dw,dy)
}cL=cx.isXML=function(dj){var dk=dj&&(dj.ownerDocument||dj).documentElement;
return dk?dk.nodeName!=="HTML":false
};
cX=cx.setDocument=function(dj){var dk=dj?dj.ownerDocument||dj:cK;
if(dk===cD||dk.nodeType!==9||!dk.documentElement){return cD
}cD=dk;
cq=dk.documentElement;
cf=cL(dk);
df.tagNameNoComments=ce(function(dl){dl.appendChild(dk.createComment(""));
return !dl.getElementsByTagName("*").length
});
df.attributes=ce(function(dm){dm.innerHTML="<select></select>";
var dl=typeof dm.lastChild.getAttribute("multiple");
return dl!=="boolean"&&dl!=="string"
});
df.getByClassName=ce(function(dl){dl.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";
if(!dl.getElementsByClassName||!dl.getElementsByClassName("e").length){return false
}dl.lastChild.className="e";
return dl.getElementsByClassName("e").length===2
});
df.getByName=ce(function(dm){dm.id=c7+0;
dm.innerHTML="<a name='"+c7+"'></a><div name='"+c7+"'></div>";
cq.insertBefore(dm,cq.firstChild);
var dl=dk.getElementsByName&&dk.getElementsByName(c7).length===2+dk.getElementsByName(c7+0).length;
df.getIdNotName=!dk.getElementById(c7);
cq.removeChild(dm);
return dl
});
cp.attrHandle=ce(function(dl){dl.innerHTML="<a href='#'></a>";
return dl.firstChild&&typeof dl.firstChild.getAttribute!==db&&dl.firstChild.getAttribute("href")==="#"
})?{}:{href:function(dl){return dl.getAttribute("href",2)
},type:function(dl){return dl.getAttribute("type")
}};
if(df.getIdNotName){cp.find.ID=function(dn,dm){if(typeof dm.getElementById!==db&&!cf){var dl=dm.getElementById(dn);
return dl&&dl.parentNode?[dl]:[]
}};
cp.filter.ID=function(dm){var dl=dm.replace(cu,c3);
return function(dn){return dn.getAttribute("id")===dl
}
}
}else{cp.find.ID=function(dn,dm){if(typeof dm.getElementById!==db&&!cf){var dl=dm.getElementById(dn);
return dl?dl.id===dn||typeof dl.getAttributeNode!==db&&dl.getAttributeNode("id").value===dn?[dl]:cj:[]
}};
cp.filter.ID=function(dm){var dl=dm.replace(cu,c3);
return function(dp){var dn=typeof dp.getAttributeNode!==db&&dp.getAttributeNode("id");
return dn&&dn.value===dl
}
}
}cp.find.TAG=df.tagNameNoComments?function(dl,dm){if(typeof dm.getElementsByTagName!==db){return dm.getElementsByTagName(dl)
}}:function(dl,dq){var dr,dp=[],dn=0,dm=dq.getElementsByTagName(dl);
if(dl==="*"){while((dr=dm[dn++])){if(dr.nodeType===1){dp.push(dr)
}}return dp
}return dm
};
cp.find.NAME=df.getByName&&function(dl,dm){if(typeof dm.getElementsByName!==db){return dm.getElementsByName(name)
}};
cp.find.CLASS=df.getByClassName&&function(dm,dl){if(typeof dl.getElementsByClassName!==db&&!cf){return dl.getElementsByClassName(dm)
}};
dd=[];
c1=[":focus"];
if((df.qsa=cG(dk.querySelectorAll))){ce(function(dl){dl.innerHTML="<select><option selected=''></option></select>";
if(!dl.querySelectorAll("[selected]").length){c1.push("\\["+cr+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")
}if(!dl.querySelectorAll(":checked").length){c1.push(":checked")
}});
ce(function(dl){dl.innerHTML="<input type='hidden' i=''/>";
if(dl.querySelectorAll("[i^='']").length){c1.push("[*^$]="+cr+"*(?:\"\"|'')")
}if(!dl.querySelectorAll(":enabled").length){c1.push(":enabled",":disabled")
}dl.querySelectorAll("*,:x");
c1.push(",.*:")
})
}if((df.matchesSelector=cG((cc=cq.matchesSelector||cq.mozMatchesSelector||cq.webkitMatchesSelector||cq.oMatchesSelector||cq.msMatchesSelector)))){ce(function(dl){df.disconnectedMatch=cc.call(dl,"div");
cc.call(dl,"[s!='']:x");
dd.push("!=",cm)
})
}c1=new RegExp(c1.join("|"));
dd=new RegExp(dd.join("|"));
cH=cG(cq.contains)||cq.compareDocumentPosition?function(dm,dl){var dp=dm.nodeType===9?dm.documentElement:dm,dn=dl&&dl.parentNode;
return dm===dn||!!(dn&&dn.nodeType===1&&(dp.contains?dp.contains(dn):dm.compareDocumentPosition&&dm.compareDocumentPosition(dn)&16))
}:function(dm,dl){if(dl){while((dl=dl.parentNode)){if(dl===dm){return true
}}}return false
};
cF=cq.compareDocumentPosition?function(dm,dl){var dn;
if(dm===dl){cV=true;
return 0
}if((dn=dl.compareDocumentPosition&&dm.compareDocumentPosition&&dm.compareDocumentPosition(dl))){if(dn&1||dm.parentNode&&dm.parentNode.nodeType===11){if(dm===dk||cH(cK,dm)){return -1
}if(dl===dk||cH(cK,dl)){return 1
}return 0
}return dn&4?-1:1
}return dm.compareDocumentPosition?-1:1
}:function(dm,dl){var dt,dq=0,ds=dm.parentNode,dp=dl.parentNode,dn=[dm],dr=[dl];
if(dm===dl){cV=true;
return 0
}else{if(!ds||!dp){return dm===dk?-1:dl===dk?1:ds?-1:dp?1:0
}else{if(ds===dp){return b8(dm,dl)
}}}dt=dm;
while((dt=dt.parentNode)){dn.unshift(dt)
}dt=dl;
while((dt=dt.parentNode)){dr.unshift(dt)
}while(dn[dq]===dr[dq]){dq++
}return dq?b8(dn[dq],dr[dq]):dn[dq]===cK?-1:dr[dq]===cK?1:0
};
cV=false;
[0,0].sort(cF);
df.detectDuplicates=cV;
return cD
};
cx.matches=function(dk,dj){return cx(dk,null,null,dj)
};
cx.matchesSelector=function(dk,dm){if((dk.ownerDocument||dk)!==cD){cX(dk)
}dm=dm.replace(cv,"='$1']");
if(df.matchesSelector&&!cf&&(!dd||!dd.test(dm))&&!c1.test(dm)){try{var dj=cc.call(dk,dm);
if(dj||df.disconnectedMatch||dk.document&&dk.document.nodeType!==11){return dj
}}catch(dl){}}return cx(dm,cD,null,[dk]).length>0
};
cx.contains=function(dj,dk){if((dj.ownerDocument||dj)!==cD){cX(dj)
}return cH(dj,dk)
};
cx.attr=function(dk,dj){var dl;
if((dk.ownerDocument||dk)!==cD){cX(dk)
}if(!cf){dj=dj.toLowerCase()
}if((dl=cp.attrHandle[dj])){return dl(dk)
}if(cf||df.attributes){return dk.getAttribute(dj)
}return((dl=dk.getAttributeNode(dj))||dk.getAttribute(dj))&&dk[dj]===true?dj:dl&&dl.specified?dl.value:null
};
cx.error=function(dj){throw new Error("Syntax error, unrecognized expression: "+dj)
};
cx.uniqueSort=function(dl){var dm,dn=[],dk=1,dj=0;
cV=!df.detectDuplicates;
dl.sort(cF);
if(cV){for(;
(dm=dl[dk]);
dk++){if(dm===dl[dk-1]){dj=dn.push(dk)
}}while(dj--){dl.splice(dn[dj],1)
}}return dl
};
function b8(dk,dj){var dm=dj&&dk,dl=dm&&(~dj.sourceIndex||cP)-(~dk.sourceIndex||cP);
if(dl){return dl
}if(dm){while((dm=dm.nextSibling)){if(dm===dj){return -1
}}}return dk?1:-1
}function cy(dj){return function(dl){var dk=dl.nodeName.toLowerCase();
return dk==="input"&&dl.type===dj
}
}function b9(dj){return function(dl){var dk=dl.nodeName.toLowerCase();
return(dk==="input"||dk==="button")&&dl.type===dj
}
}function c5(dj){return cl(function(dk){dk=+dk;
return cl(function(dl,dq){var dn,dm=dj([],dl.length,dk),dp=dm.length;
while(dp--){if(dl[(dn=dm[dp])]){dl[dn]=!(dq[dn]=dl[dn])
}}})
})
}cJ=cx.getText=function(dn){var dm,dk="",dl=0,dj=dn.nodeType;
if(!dj){for(;
(dm=dn[dl]);
dl++){dk+=cJ(dm)
}}else{if(dj===1||dj===9||dj===11){if(typeof dn.textContent==="string"){return dn.textContent
}else{for(dn=dn.firstChild;
dn;
dn=dn.nextSibling){dk+=cJ(dn)
}}}else{if(dj===3||dj===4){return dn.nodeValue
}}}return dk
};
cp=cx.selectors={cacheLength:50,createPseudo:cl,match:c0,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(dj){dj[1]=dj[1].replace(cu,c3);
dj[3]=(dj[4]||dj[5]||"").replace(cu,c3);
if(dj[2]==="~="){dj[3]=" "+dj[3]+" "
}return dj.slice(0,4)
},CHILD:function(dj){dj[1]=dj[1].toLowerCase();
if(dj[1].slice(0,3)==="nth"){if(!dj[3]){cx.error(dj[0])
}dj[4]=+(dj[4]?dj[5]+(dj[6]||1):2*(dj[3]==="even"||dj[3]==="odd"));
dj[5]=+((dj[7]+dj[8])||dj[3]==="odd")
}else{if(dj[3]){cx.error(dj[0])
}}return dj
},PSEUDO:function(dk){var dj,dl=!dk[5]&&dk[2];
if(c0.CHILD.test(dk[0])){return null
}if(dk[4]){dk[2]=dk[4]
}else{if(dl&&cR.test(dl)&&(dj=ch(dl,true))&&(dj=dl.indexOf(")",dl.length-dj)-dl.length)){dk[0]=dk[0].slice(0,dj);
dk[2]=dl.slice(0,dj)
}}return dk.slice(0,3)
}},filter:{TAG:function(dj){if(dj==="*"){return function(){return true
}
}dj=dj.replace(cu,c3).toLowerCase();
return function(dk){return dk.nodeName&&dk.nodeName.toLowerCase()===dj
}
},CLASS:function(dj){var dk=b7[dj+" "];
return dk||(dk=new RegExp("(^|"+cr+")"+dj+"("+cr+"|$)"))&&b7(dj,function(dl){return dk.test(dl.className||(typeof dl.getAttribute!==db&&dl.getAttribute("class"))||"")
})
},ATTR:function(dl,dk,dj){return function(dn){var dm=cx.attr(dn,dl);
if(dm==null){return dk==="!="
}if(!dk){return true
}dm+="";
return dk==="="?dm===dj:dk==="!="?dm!==dj:dk==="^="?dj&&dm.indexOf(dj)===0:dk==="*="?dj&&dm.indexOf(dj)>-1:dk==="$="?dj&&dm.slice(-dj.length)===dj:dk==="~="?(" "+dm+" ").indexOf(dj)>-1:dk==="|="?dm===dj||dm.slice(0,dj.length+1)===dj+"-":false
}
},CHILD:function(dk,dn,dm,dp,dl){var dr=dk.slice(0,3)!=="nth",dj=dk.slice(-4)!=="last",dq=dn==="of-type";
return dp===1&&dl===0?function(ds){return !!ds.parentNode
}:function(dy,dw,dB){var ds,dE,dz,dD,dA,dv,dx=dr!==dj?"nextSibling":"previousSibling",dC=dy.parentNode,du=dq&&dy.nodeName.toLowerCase(),dt=!dB&&!dq;
if(dC){if(dr){while(dx){dz=dy;
while((dz=dz[dx])){if(dq?dz.nodeName.toLowerCase()===du:dz.nodeType===1){return false
}}dv=dx=dk==="only"&&!dv&&"nextSibling"
}return true
}dv=[dj?dC.firstChild:dC.lastChild];
if(dj&&dt){dE=dC[c7]||(dC[c7]={});
ds=dE[dk]||[];
dA=ds[0]===dg&&ds[1];
dD=ds[0]===dg&&ds[2];
dz=dA&&dC.childNodes[dA];
while((dz=++dA&&dz&&dz[dx]||(dD=dA=0)||dv.pop())){if(dz.nodeType===1&&++dD&&dz===dy){dE[dk]=[dg,dA,dD];
break
}}}else{if(dt&&(ds=(dy[c7]||(dy[c7]={}))[dk])&&ds[0]===dg){dD=ds[1]
}else{while((dz=++dA&&dz&&dz[dx]||(dD=dA=0)||dv.pop())){if((dq?dz.nodeName.toLowerCase()===du:dz.nodeType===1)&&++dD){if(dt){(dz[c7]||(dz[c7]={}))[dk]=[dg,dD]
}if(dz===dy){break
}}}}}dD-=dl;
return dD===dp||(dD%dp===0&&dD/dp>=0)
}}
},PSEUDO:function(dm,dl){var dj,dk=cp.pseudos[dm]||cp.setFilters[dm.toLowerCase()]||cx.error("unsupported pseudo: "+dm);
if(dk[c7]){return dk(dl)
}if(dk.length>1){dj=[dm,dm,"",dl];
return cp.setFilters.hasOwnProperty(dm.toLowerCase())?cl(function(dq,ds){var dp,dn=dk(dq,dl),dr=dn.length;
while(dr--){dp=cb.call(dq,dn[dr]);
dq[dp]=!(ds[dp]=dn[dr])
}}):function(dn){return dk(dn,0,dj)
}
}return dk
}},pseudos:{not:cl(function(dj){var dk=[],dl=[],dm=cU(dj.replace(ct,"$1"));
return dm[c7]?cl(function(dp,du,ds,dq){var dt,dn=dm(dp,null,dq,[]),dr=dp.length;
while(dr--){if((dt=dn[dr])){dp[dr]=!(du[dr]=dt)
}}}):function(dq,dp,dn){dk[0]=dq;
dm(dk,null,dn,dl);
return !dl.pop()
}
}),has:cl(function(dj){return function(dk){return cx(dj,dk).length>0
}
}),contains:cl(function(dj){return function(dk){return(dk.textContent||dk.innerText||cJ(dk)).indexOf(dj)>-1
}
}),lang:cl(function(dj){if(!cS.test(dj||"")){cx.error("unsupported lang: "+dj)
}dj=dj.replace(cu,c3).toLowerCase();
return function(dl){var dk;
do{if((dk=cf?dl.getAttribute("xml:lang")||dl.getAttribute("lang"):dl.lang)){dk=dk.toLowerCase();
return dk===dj||dk.indexOf(dj+"-")===0
}}while((dl=dl.parentNode)&&dl.nodeType===1);
return false
}
}),target:function(dj){var dk=dc.location&&dc.location.hash;
return dk&&dk.slice(1)===dj.id
},root:function(dj){return dj===cq
},focus:function(dj){return dj===cD.activeElement&&(!cD.hasFocus||cD.hasFocus())&&!!(dj.type||dj.href||~dj.tabIndex)
},enabled:function(dj){return dj.disabled===false
},disabled:function(dj){return dj.disabled===true
},checked:function(dj){var dk=dj.nodeName.toLowerCase();
return(dk==="input"&&!!dj.checked)||(dk==="option"&&!!dj.selected)
},selected:function(dj){if(dj.parentNode){dj.parentNode.selectedIndex
}return dj.selected===true
},empty:function(dj){for(dj=dj.firstChild;
dj;
dj=dj.nextSibling){if(dj.nodeName>"@"||dj.nodeType===3||dj.nodeType===4){return false
}}return true
},parent:function(dj){return !cp.pseudos.empty(dj)
},header:function(dj){return cn.test(dj.nodeName)
},input:function(dj){return ca.test(dj.nodeName)
},button:function(dk){var dj=dk.nodeName.toLowerCase();
return dj==="input"&&dk.type==="button"||dj==="button"
},text:function(dk){var dj;
return dk.nodeName.toLowerCase()==="input"&&dk.type==="text"&&((dj=dk.getAttribute("type"))==null||dj.toLowerCase()===dk.type)
},first:c5(function(){return[0]
}),last:c5(function(dj,dk){return[dk-1]
}),eq:c5(function(dj,dl,dk){return[dk<0?dk+dl:dk]
}),even:c5(function(dj,dl){var dk=0;
for(;
dk<dl;
dk+=2){dj.push(dk)
}return dj
}),odd:c5(function(dj,dl){var dk=1;
for(;
dk<dl;
dk+=2){dj.push(dk)
}return dj
}),lt:c5(function(dj,dm,dl){var dk=dl<0?dl+dm:dl;
for(;
--dk>=0;
){dj.push(dk)
}return dj
}),gt:c5(function(dj,dm,dl){var dk=dl<0?dl+dm:dl;
for(;
++dk<dm;
){dj.push(dk)
}return dj
})}};
for(cz in {radio:true,checkbox:true,file:true,password:true,image:true}){cp.pseudos[cz]=cy(cz)
}for(cz in {submit:true,reset:true}){cp.pseudos[cz]=b9(cz)
}function ch(dn,dt){var dk,dp,dr,ds,dq,dl,dj,dm=c6[dn+" "];
if(dm){return dt?0:dm.slice(0)
}dq=dn;
dl=[];
dj=cp.preFilter;
while(dq){if(!dk||(dp=cw.exec(dq))){if(dp){dq=dq.slice(dp[0].length)||dq
}dl.push(dr=[])
}dk=false;
if((dp=cC.exec(dq))){dk=dp.shift();
dr.push({value:dk,type:dp[0].replace(ct," ")});
dq=dq.slice(dk.length)
}for(ds in cp.filter){if((dp=c0[ds].exec(dq))&&(!dj[ds]||(dp=dj[ds](dp)))){dk=dp.shift();
dr.push({value:dk,type:ds,matches:dp});
dq=dq.slice(dk.length)
}}if(!dk){break
}}return dt?dq.length:dq?cx.error(dn):c6(dn,dl).slice(0)
}function ci(dm){var dl=0,dk=dm.length,dj="";
for(;
dl<dk;
dl++){dj+=dm[dl].value
}return dj
}function cs(dn,dl,dm){var dj=dl.dir,dp=dm&&dj==="parentNode",dk=c2++;
return dl.first?function(ds,dr,dq){while((ds=ds[dj])){if(ds.nodeType===1||dp){return dn(ds,dr,dq)
}}}:function(du,ds,dr){var dw,dq,dt,dv=dg+" "+dk;
if(dr){while((du=du[dj])){if(du.nodeType===1||dp){if(dn(du,ds,dr)){return true
}}}}else{while((du=du[dj])){if(du.nodeType===1||dp){dt=du[c7]||(du[c7]={});
if((dq=dt[dj])&&dq[0]===dv){if((dw=dq[1])===true||dw===cd){return dw===true
}}else{dq=dt[dj]=[dv];
dq[1]=dn(du,ds,dr)||cd;
if(dq[1]===true){return true
}}}}}}
}function dh(dj){return dj.length>1?function(dn,dm,dk){var dl=dj.length;
while(dl--){if(!dj[dl](dn,dm,dk)){return false
}}return true
}:dj[0]
}function cZ(dj,dk,dl,dm,dq){var dn,dt=[],dp=0,dr=dj.length,ds=dk!=null;
for(;
dp<dr;
dp++){if((dn=dj[dp])){if(!dl||dl(dn,dm,dq)){dt.push(dn);
if(ds){dk.push(dp)
}}}}return dt
}function cg(dl,dk,dn,dm,dp,dj){if(dm&&!dm[c7]){dm=cg(dm)
}if(dp&&!dp[c7]){dp=cg(dp,dj)
}return cl(function(dA,dx,ds,dz){var dC,dy,du,dt=[],dB=[],dr=dx.length,dq=dA||cA(dk||"*",ds.nodeType?[ds]:ds,[]),dv=dl&&(dA||!dk)?cZ(dq,dt,dl,ds,dz):dq,dw=dn?dp||(dA?dl:dr||dm)?[]:dx:dv;
if(dn){dn(dv,dw,ds,dz)
}if(dm){dC=cZ(dw,dB);
dm(dC,[],ds,dz);
dy=dC.length;
while(dy--){if((du=dC[dy])){dw[dB[dy]]=!(dv[dB[dy]]=du)
}}}if(dA){if(dp||dl){if(dp){dC=[];
dy=dw.length;
while(dy--){if((du=dw[dy])){dC.push((dv[dy]=du))
}}dp(null,(dw=[]),dC,dz)
}dy=dw.length;
while(dy--){if((du=dw[dy])&&(dC=dp?cb.call(dA,du):dt[dy])>-1){dA[dC]=!(dx[dC]=du)
}}}}else{dw=cZ(dw===dx?dw.splice(dr,dw.length):dw);
if(dp){dp(null,dx,dw,dz)
}else{b6.apply(dx,dw)
}}})
}function c8(dq){var dk,dn,dl,dp=dq.length,dt=cp.relative[dq[0].type],du=dt||cp.relative[" "],dm=dt?1:0,dr=cs(function(dv){return dv===dk
},du,true),ds=cs(function(dv){return cb.call(dk,dv)>-1
},du,true),dj=[function(dx,dw,dv){return(!dt&&(dv||dw!==di))||((dk=dw).nodeType?dr(dx,dw,dv):ds(dx,dw,dv))
}];
for(;
dm<dp;
dm++){if((dn=cp.relative[dq[dm].type])){dj=[cs(dh(dj),dn)]
}else{dn=cp.filter[dq[dm].type].apply(null,dq[dm].matches);
if(dn[c7]){dl=++dm;
for(;
dl<dp;
dl++){if(cp.relative[dq[dl].type]){break
}}return cg(dm>1&&dh(dj),dm>1&&ci(dq.slice(0,dm-1)).replace(ct,"$1"),dn,dm<dl&&c8(dq.slice(dm,dl)),dl<dp&&c8((dq=dq.slice(dl))),dl<dp&&ci(dq))
}dj.push(dn)
}}return dh(dj)
}function cW(dm,dl){var dp=0,dj=dl.length>0,dn=dm.length>0,dk=function(dz,dt,dy,dx,dF){var du,dv,dA,dE=[],dD=0,dw="0",dq=dz&&[],dB=dF!=null,dC=di,ds=dz||dn&&cp.find.TAG("*",dF&&dt.parentNode||dt),dr=(dg+=dC==null?1:Math.random()||0.1);
if(dB){di=dt!==cD&&dt;
cd=dp
}for(;
(du=ds[dw])!=null;
dw++){if(dn&&du){dv=0;
while((dA=dm[dv++])){if(dA(du,dt,dy)){dx.push(du);
break
}}if(dB){dg=dr;
cd=++dp
}}if(dj){if((du=!dA&&du)){dD--
}if(dz){dq.push(du)
}}}dD+=dw;
if(dj&&dw!==dD){dv=0;
while((dA=dl[dv++])){dA(dq,dE,dt,dy)
}if(dz){if(dD>0){while(dw--){if(!(dq[dw]||dE[dw])){dE[dw]=da.call(dx)
}}}dE=cZ(dE)
}b6.apply(dx,dE);
if(dB&&!dz&&dE.length>0&&(dD+dl.length)>1){cx.uniqueSort(dx)
}}if(dB){dg=dr;
di=dC
}return dq
};
return dj?cl(dk):dk
}cU=cx.compile=function(dj,dp){var dl,dk=[],dn=[],dm=cI[dj+" "];
if(!dm){if(!dp){dp=ch(dj)
}dl=dp.length;
while(dl--){dm=c8(dp[dl]);
if(dm[c7]){dk.push(dm)
}else{dn.push(dm)
}}dm=cI(dj,cW(dn,dk))
}return dm
};
function cA(dk,dn,dm){var dl=0,dj=dn.length;
for(;
dl<dj;
dl++){cx(dk,dn[dl],dm)
}return dm
}function de(dl,dj,dm,dq){var dn,ds,dk,dt,dr,dp=ch(dl);
if(!dq){if(dp.length===1){ds=dp[0]=dp[0].slice(0);
if(ds.length>2&&(dk=ds[0]).type==="ID"&&dj.nodeType===9&&!cf&&cp.relative[ds[1].type]){dj=cp.find.ID(dk.matches[0].replace(cu,c3),dj)[0];
if(!dj){return dm
}dl=dl.slice(ds.shift().value.length)
}dn=c0.needsContext.test(dl)?0:ds.length;
while(dn--){dk=ds[dn];
if(cp.relative[(dt=dk.type)]){break
}if((dr=cp.find[dt])){if((dq=dr(dk.matches[0].replace(cu,c3),cY.test(ds[0].type)&&dj.parentNode||dj))){ds.splice(dn,1);
dl=dq.length&&ci(ds);
if(!dl){b6.apply(dm,co.call(dq,0));
return dm
}break
}}}}}cU(dl,dp)(dq,dj,cf,dm,cY.test(dl));
return dm
}cp.pseudos.nth=cp.pseudos.eq;
function cT(){}cp.filters=cT.prototype=cp.pseudos;
cp.setFilters=new cT();
cX();
cx.attr=bL.attr;
bL.find=cx;
bL.expr=cx.selectors;
bL.expr[":"]=bL.expr.pseudos;
bL.unique=cx.uniqueSort;
bL.text=cx.getText;
bL.isXMLDoc=cx.isXML;
bL.contains=cx.contains
})(a4);
var al=/Until$/,bv=/^(?:parents|prev(?:Until|All))/,ap=/^.[^:#\[\.,]*$/,A=bL.expr.match.needsContext,bz={children:true,contents:true,next:true,prev:true};
bL.fn.extend({find:function(b6){var b9,b8,b7,b5=this.length;
if(typeof b6!=="string"){b7=this;
return this.pushStack(bL(b6).filter(function(){for(b9=0;
b9<b5;
b9++){if(bL.contains(b7[b9],this)){return true
}}}))
}b8=[];
for(b9=0;
b9<b5;
b9++){bL.find(b6,this[b9],b8)
}b8=this.pushStack(b5>1?bL.unique(b8):b8);
b8.selector=(this.selector?this.selector+" ":"")+b6;
return b8
},has:function(b8){var b7,b6=bL(b8,this),b5=b6.length;
return this.filter(function(){for(b7=0;
b7<b5;
b7++){if(bL.contains(this,b6[b7])){return true
}}})
},not:function(b5){return this.pushStack(aQ(this,b5,false))
},filter:function(b5){return this.pushStack(aQ(this,b5,true))
},is:function(b5){return !!b5&&(typeof b5==="string"?A.test(b5)?bL(b5,this.context).index(this[0])>=0:bL.filter(b5,this).length>0:this.filter(b5).length>0)
},closest:function(b9,b8){var ca,b7=0,b5=this.length,b6=[],cb=A.test(b9)||typeof b9!=="string"?bL(b9,b8||this.context):0;
for(;
b7<b5;
b7++){ca=this[b7];
while(ca&&ca.ownerDocument&&ca!==b8&&ca.nodeType!==11){if(cb?cb.index(ca)>-1:bL.find.matchesSelector(ca,b9)){b6.push(ca);
break
}ca=ca.parentNode
}}return this.pushStack(b6.length>1?bL.unique(b6):b6)
},index:function(b5){if(!b5){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1
}if(typeof b5==="string"){return bL.inArray(this[0],bL(b5))
}return bL.inArray(b5.jquery?b5[0]:b5,this)
},add:function(b5,b6){var b8=typeof b5==="string"?bL(b5,b6):bL.makeArray(b5&&b5.nodeType?[b5]:b5),b7=bL.merge(this.get(),b8);
return this.pushStack(bL.unique(b7))
},addBack:function(b5){return this.add(b5==null?this.prevObject:this.prevObject.filter(b5))
}});
bL.fn.andSelf=bL.fn.addBack;
function aZ(b6,b5){do{b6=b6[b5]
}while(b6&&b6.nodeType!==1);
return b6
}bL.each({parent:function(b6){var b5=b6.parentNode;
return b5&&b5.nodeType!==11?b5:null
},parents:function(b5){return bL.dir(b5,"parentNode")
},parentsUntil:function(b6,b5,b7){return bL.dir(b6,"parentNode",b7)
},next:function(b5){return aZ(b5,"nextSibling")
},prev:function(b5){return aZ(b5,"previousSibling")
},nextAll:function(b5){return bL.dir(b5,"nextSibling")
},prevAll:function(b5){return bL.dir(b5,"previousSibling")
},nextUntil:function(b6,b5,b7){return bL.dir(b6,"nextSibling",b7)
},prevUntil:function(b6,b5,b7){return bL.dir(b6,"previousSibling",b7)
},siblings:function(b5){return bL.sibling((b5.parentNode||{}).firstChild,b5)
},children:function(b5){return bL.sibling(b5.firstChild)
},contents:function(b5){return bL.nodeName(b5,"iframe")?b5.contentDocument||b5.contentWindow.document:bL.merge([],b5.childNodes)
}},function(b5,b6){bL.fn[b5]=function(b9,b7){var b8=bL.map(this,b6,b9);
if(!al.test(b5)){b7=b9
}if(b7&&typeof b7==="string"){b8=bL.filter(b7,b8)
}b8=this.length>1&&!bz[b5]?bL.unique(b8):b8;
if(this.length>1&&bv.test(b5)){b8=b8.reverse()
}return this.pushStack(b8)
}
});
bL.extend({filter:function(b7,b5,b6){if(b6){b7=":not("+b7+")"
}return b5.length===1?bL.find.matchesSelector(b5[0],b7)?[b5[0]]:[]:bL.find.matches(b7,b5)
},dir:function(b7,b6,b9){var b5=[],b8=b7[b6];
while(b8&&b8.nodeType!==9&&(b9===aI||b8.nodeType!==1||!bL(b8).is(b9))){if(b8.nodeType===1){b5.push(b8)
}b8=b8[b6]
}return b5
},sibling:function(b7,b6){var b5=[];
for(;
b7;
b7=b7.nextSibling){if(b7.nodeType===1&&b7!==b6){b5.push(b7)
}}return b5
}});
function aQ(b8,b7,b5){b7=b7||0;
if(bL.isFunction(b7)){return bL.grep(b8,function(ca,b9){var cb=!!b7.call(ca,b9,ca);
return cb===b5
})
}else{if(b7.nodeType){return bL.grep(b8,function(b9){return(b9===b7)===b5
})
}else{if(typeof b7==="string"){var b6=bL.grep(b8,function(b9){return b9.nodeType===1
});
if(ap.test(b7)){return bL.filter(b7,b6,!b5)
}else{b7=bL.filter(b7,b6)
}}}}return bL.grep(b8,function(b9){return(bL.inArray(b9,b7)>=0)===b5
})
}function C(b5){var b7=f.split("|"),b6=b5.createDocumentFragment();
if(b6.createElement){while(b7.length){b6.createElement(b7.pop())
}}return b6
}var f="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",aC=/ jQuery\d+="(?:null|\d+)"/g,L=new RegExp("<(?:"+f+")[\\s/>]","i"),b4=/^\s+/,aF=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,o=/<([\w:]+)/,bZ=/<tbody/i,K=/<|&#?\w+;/,an=/<(?:script|style|link)/i,s=/^(?:checkbox|radio)$/i,bW=/checked\s*(?:[^=]|=\s*.checked.)/i,bB=/^$|\/(?:java|ecma)script/i,au=/^true\/(.*)/,aM=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,V={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:bL.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},aU=C(n),l=aU.appendChild(n.createElement("div"));
V.optgroup=V.option;
V.tbody=V.tfoot=V.colgroup=V.caption=V.thead;
V.th=V.td;
bL.fn.extend({text:function(b5){return bL.access(this,function(b6){return b6===aI?bL.text(this):this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(b6))
},null,b5,arguments.length)
},wrapAll:function(b5){if(bL.isFunction(b5)){return this.each(function(b7){bL(this).wrapAll(b5.call(this,b7))
})
}if(this[0]){var b6=bL(b5,this[0].ownerDocument).eq(0).clone(true);
if(this[0].parentNode){b6.insertBefore(this[0])
}b6.map(function(){var b7=this;
while(b7.firstChild&&b7.firstChild.nodeType===1){b7=b7.firstChild
}return b7
}).append(this)
}return this
},wrapInner:function(b5){if(bL.isFunction(b5)){return this.each(function(b6){bL(this).wrapInner(b5.call(this,b6))
})
}return this.each(function(){var b6=bL(this),b7=b6.contents();
if(b7.length){b7.wrapAll(b5)
}else{b6.append(b5)
}})
},wrap:function(b5){var b6=bL.isFunction(b5);
return this.each(function(b7){bL(this).wrapAll(b6?b5.call(this,b7):b5)
})
},unwrap:function(){return this.parent().each(function(){if(!bL.nodeName(this,"body")){bL(this).replaceWith(this.childNodes)
}}).end()
},append:function(){return this.domManip(arguments,true,function(b5){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.appendChild(b5)
}})
},prepend:function(){return this.domManip(arguments,true,function(b5){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.insertBefore(b5,this.firstChild)
}})
},before:function(){return this.domManip(arguments,false,function(b5){if(this.parentNode){this.parentNode.insertBefore(b5,this)
}})
},after:function(){return this.domManip(arguments,false,function(b5){if(this.parentNode){this.parentNode.insertBefore(b5,this.nextSibling)
}})
},remove:function(b5,b8){var b7,b6=0;
for(;
(b7=this[b6])!=null;
b6++){if(!b5||bL.filter(b5,[b7]).length>0){if(!b8&&b7.nodeType===1){bL.cleanData(m(b7))
}if(b7.parentNode){if(b8&&bL.contains(b7.ownerDocument,b7)){bu(m(b7,"script"))
}b7.parentNode.removeChild(b7)
}}}return this
},empty:function(){var b6,b5=0;
for(;
(b6=this[b5])!=null;
b5++){if(b6.nodeType===1){bL.cleanData(m(b6,false))
}while(b6.firstChild){b6.removeChild(b6.firstChild)
}if(b6.options&&bL.nodeName(b6,"select")){b6.options.length=0
}}return this
},clone:function(b6,b5){b6=b6==null?false:b6;
b5=b5==null?b6:b5;
return this.map(function(){return bL.clone(this,b6,b5)
})
},html:function(b5){return bL.access(this,function(b9){var b8=this[0]||{},b7=0,b6=this.length;
if(b9===aI){return b8.nodeType===1?b8.innerHTML.replace(aC,""):aI
}if(typeof b9==="string"&&!an.test(b9)&&(bL.support.htmlSerialize||!L.test(b9))&&(bL.support.leadingWhitespace||!b4.test(b9))&&!V[(o.exec(b9)||["",""])[1].toLowerCase()]){b9=b9.replace(aF,"<$1></$2>");
try{for(;
b7<b6;
b7++){b8=this[b7]||{};
if(b8.nodeType===1){bL.cleanData(m(b8,false));
b8.innerHTML=b9
}}b8=0
}catch(ca){}}if(b8){this.empty().append(b9)
}},null,b5,arguments.length)
},replaceWith:function(b6){var b5=bL.isFunction(b6);
if(!b5&&typeof b6!=="string"){b6=bL(b6).not(this).detach()
}return this.domManip([b6],true,function(b9){var b8=this.nextSibling,b7=this.parentNode;
if(b7){bL(this).remove();
b7.insertBefore(b9,b8)
}})
},detach:function(b5){return this.remove(b5,true)
},domManip:function(cd,cj,ci){cd=aK.apply([],cd);
var cb,b7,b5,b9,cg,cc,ca=0,b8=this.length,cf=this,ch=b8-1,ce=cd[0],b6=bL.isFunction(ce);
if(b6||!(b8<=1||typeof ce!=="string"||bL.support.checkClone||!bW.test(ce))){return this.each(function(cl){var ck=cf.eq(cl);
if(b6){cd[0]=ce.call(this,cl,cj?ck.html():aI)
}ck.domManip(cd,cj,ci)
})
}if(b8){cc=bL.buildFragment(cd,this[0].ownerDocument,false,this);
cb=cc.firstChild;
if(cc.childNodes.length===1){cc=cb
}if(cb){cj=cj&&bL.nodeName(cb,"tr");
b9=bL.map(m(cc,"script"),v);
b5=b9.length;
for(;
ca<b8;
ca++){b7=cc;
if(ca!==ch){b7=bL.clone(b7,true,true);
if(b5){bL.merge(b9,m(b7,"script"))
}}ci.call(cj&&bL.nodeName(this[ca],"table")?z(this[ca],"tbody"):this[ca],b7,ca)
}if(b5){cg=b9[b9.length-1].ownerDocument;
bL.map(b9,be);
for(ca=0;
ca<b5;
ca++){b7=b9[ca];
if(bB.test(b7.type||"")&&!bL._data(b7,"globalEval")&&bL.contains(cg,b7)){if(b7.src){bL.ajax({url:b7.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})
}else{bL.globalEval((b7.text||b7.textContent||b7.innerHTML||"").replace(aM,""))
}}}}cc=cb=null
}}return this
}});
function z(b6,b5){return b6.getElementsByTagName(b5)[0]||b6.appendChild(b6.ownerDocument.createElement(b5))
}function v(b6){var b5=b6.getAttributeNode("type");
b6.type=(b5&&b5.specified)+"/"+b6.type;
return b6
}function be(b6){var b5=au.exec(b6.type);
if(b5){b6.type=b5[1]
}else{b6.removeAttribute("type")
}return b6
}function bu(b5,b7){var b8,b6=0;
for(;
(b8=b5[b6])!=null;
b6++){bL._data(b8,"globalEval",!b7||bL._data(b7[b6],"globalEval"))
}}function av(cc,b6){if(b6.nodeType!==1||!bL.hasData(cc)){return
}var b9,b8,b5,cb=bL._data(cc),ca=bL._data(b6,cb),b7=cb.events;
if(b7){delete ca.handle;
ca.events={};
for(b9 in b7){for(b8=0,b5=b7[b9].length;
b8<b5;
b8++){bL.event.add(b6,b9,b7[b9][b8])
}}}if(ca.data){ca.data=bL.extend({},ca.data)
}}function S(b8,b5){var b9,b7,b6;
if(b5.nodeType!==1){return
}b9=b5.nodeName.toLowerCase();
if(!bL.support.noCloneEvent&&b5[bL.expando]){b6=bL._data(b5);
for(b7 in b6.events){bL.removeEvent(b5,b7,b6.handle)
}b5.removeAttribute(bL.expando)
}if(b9==="script"&&b5.text!==b8.text){v(b5).text=b8.text;
be(b5)
}else{if(b9==="object"){if(b5.parentNode){b5.outerHTML=b8.outerHTML
}if(bL.support.html5Clone&&(b8.innerHTML&&!bL.trim(b5.innerHTML))){b5.innerHTML=b8.innerHTML
}}else{if(b9==="input"&&s.test(b8.type)){b5.defaultChecked=b5.checked=b8.checked;
if(b5.value!==b8.value){b5.value=b8.value
}}else{if(b9==="option"){b5.defaultSelected=b5.selected=b8.defaultSelected
}else{if(b9==="input"||b9==="textarea"){b5.defaultValue=b8.defaultValue
}}}}}}bL.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b5,b6){bL.fn[b5]=function(b7){var b8,ca=0,b9=[],cc=bL(b7),cb=cc.length-1;
for(;
ca<=cb;
ca++){b8=ca===cb?this:this.clone(true);
bL(cc[ca])[b6](b8);
aq.apply(b9,b8.get())
}return this.pushStack(b9)
}
});
function m(b8,b5){var b6,b9,b7=0,ca=typeof b8.getElementsByTagName!==aE?b8.getElementsByTagName(b5||"*"):typeof b8.querySelectorAll!==aE?b8.querySelectorAll(b5||"*"):aI;
if(!ca){for(ca=[],b6=b8.childNodes||b8;
(b9=b6[b7])!=null;
b7++){if(!b5||bL.nodeName(b9,b5)){ca.push(b9)
}else{bL.merge(ca,m(b9,b5))
}}}return b5===aI||b5&&bL.nodeName(b8,b5)?bL.merge([b8],ca):ca
}function bX(b5){if(s.test(b5.type)){b5.defaultChecked=b5.checked
}}bL.extend({clone:function(b6,b8,b5){var ca,b7,cd,b9,cb,cc=bL.contains(b6.ownerDocument,b6);
if(bL.support.html5Clone||bL.isXMLDoc(b6)||!L.test("<"+b6.nodeName+">")){cd=b6.cloneNode(true)
}else{l.innerHTML=b6.outerHTML;
l.removeChild(cd=l.firstChild)
}if((!bL.support.noCloneEvent||!bL.support.noCloneChecked)&&(b6.nodeType===1||b6.nodeType===11)&&!bL.isXMLDoc(b6)){ca=m(cd);
cb=m(b6);
for(b9=0;
(b7=cb[b9])!=null;
++b9){if(ca[b9]){S(b7,ca[b9])
}}}if(b8){if(b5){cb=cb||m(b6);
ca=ca||m(cd);
for(b9=0;
(b7=cb[b9])!=null;
b9++){av(b7,ca[b9])
}}else{av(b6,cd)
}}ca=m(cd,"script");
if(ca.length>0){bu(ca,!cc&&m(b6,"script"))
}ca=cb=b7=null;
return cd
},buildFragment:function(b6,b8,cd,ci){var ce,ca,cc,ch,cj,cg,b7,cb=b6.length,b9=C(b8),b5=[],cf=0;
for(;
cf<cb;
cf++){ca=b6[cf];
if(ca||ca===0){if(bL.type(ca)==="object"){bL.merge(b5,ca.nodeType?[ca]:ca)
}else{if(!K.test(ca)){b5.push(b8.createTextNode(ca))
}else{ch=ch||b9.appendChild(b8.createElement("div"));
cj=(o.exec(ca)||["",""])[1].toLowerCase();
b7=V[cj]||V._default;
ch.innerHTML=b7[1]+ca.replace(aF,"<$1></$2>")+b7[2];
ce=b7[0];
while(ce--){ch=ch.lastChild
}if(!bL.support.leadingWhitespace&&b4.test(ca)){b5.push(b8.createTextNode(b4.exec(ca)[0]))
}if(!bL.support.tbody){ca=cj==="table"&&!bZ.test(ca)?ch.firstChild:b7[1]==="<table>"&&!bZ.test(ca)?ch:0;
ce=ca&&ca.childNodes.length;
while(ce--){if(bL.nodeName((cg=ca.childNodes[ce]),"tbody")&&!cg.childNodes.length){ca.removeChild(cg)
}}}bL.merge(b5,ch.childNodes);
ch.textContent="";
while(ch.firstChild){ch.removeChild(ch.firstChild)
}ch=b9.lastChild
}}}}if(ch){b9.removeChild(ch)
}if(!bL.support.appendChecked){bL.grep(m(b5,"input"),bX)
}cf=0;
while((ca=b5[cf++])){if(ci&&bL.inArray(ca,ci)!==-1){continue
}cc=bL.contains(ca.ownerDocument,ca);
ch=m(b9.appendChild(ca),"script");
if(cc){bu(ch)
}if(cd){ce=0;
while((ca=ch[ce++])){if(bB.test(ca.type||"")){cd.push(ca)
}}}}ch=null;
return b9
},cleanData:function(b6,ce){var b8,cd,b7,b9,ca=0,cf=bL.expando,b5=bL.cache,cb=bL.support.deleteExpando,cc=bL.event.special;
for(;
(b8=b6[ca])!=null;
ca++){if(ce||bL.acceptData(b8)){b7=b8[cf];
b9=b7&&b5[b7];
if(b9){if(b9.events){for(cd in b9.events){if(cc[cd]){bL.event.remove(b8,cd)
}else{bL.removeEvent(b8,cd,b9.handle)
}}}if(b5[b7]){delete b5[b7];
if(cb){delete b8[cf]
}else{if(typeof b8.removeAttribute!==aE){b8.removeAttribute(cf)
}else{b8[cf]=null
}}a8.push(b7)
}}}}}});
var aG,bq,G,bi=/alpha\([^)]*\)/i,aV=/opacity\s*=\s*([^)]*)/,bp=/^(top|right|bottom|left)$/,H=/^(none|table(?!-c[ea]).+)/,a0=/^margin/,bb=new RegExp("^("+bC+")(.*)$","i"),Y=new RegExp("^("+bC+")(?!px)[a-z%]+$","i"),U=new RegExp("^([+-])=("+bC+")","i"),bl={BODY:"block"},bd={position:"absolute",visibility:"hidden",display:"block"},bE={letterSpacing:0,fontWeight:400},bV=["Top","Right","Bottom","Left"],ax=["Webkit","O","Moz","ms"];
function c(b8,b6){if(b6 in b8){return b6
}var b9=b6.charAt(0).toUpperCase()+b6.slice(1),b5=b6,b7=ax.length;
while(b7--){b6=ax[b7]+b9;
if(b6 in b8){return b6
}}return b5
}function R(b6,b5){b6=b5||b6;
return bL.css(b6,"display")==="none"||!bL.contains(b6.ownerDocument,b6)
}function r(cb,b5){var cc,b9,ca,b6=[],b7=0,b8=cb.length;
for(;
b7<b8;
b7++){b9=cb[b7];
if(!b9.style){continue
}b6[b7]=bL._data(b9,"olddisplay");
cc=b9.style.display;
if(b5){if(!b6[b7]&&cc==="none"){b9.style.display=""
}if(b9.style.display===""&&R(b9)){b6[b7]=bL._data(b9,"olddisplay",bG(b9.nodeName))
}}else{if(!b6[b7]){ca=R(b9);
if(cc&&cc!=="none"||!ca){bL._data(b9,"olddisplay",ca?cc:bL.css(b9,"display"))
}}}}for(b7=0;
b7<b8;
b7++){b9=cb[b7];
if(!b9.style){continue
}if(!b5||b9.style.display==="none"||b9.style.display===""){b9.style.display=b5?b6[b7]||"":"none"
}}return cb
}bL.fn.extend({css:function(b5,b6){return bL.access(this,function(cb,b8,cc){var b7,ca,cd={},b9=0;
if(bL.isArray(b8)){ca=bq(cb);
b7=b8.length;
for(;
b9<b7;
b9++){cd[b8[b9]]=bL.css(cb,b8[b9],false,ca)
}return cd
}return cc!==aI?bL.style(cb,b8,cc):bL.css(cb,b8)
},b5,b6,arguments.length>1)
},show:function(){return r(this,true)
},hide:function(){return r(this)
},toggle:function(b6){var b5=typeof b6==="boolean";
return this.each(function(){if(b5?b6:R(this)){bL(this).show()
}else{bL(this).hide()
}})
}});
bL.extend({cssHooks:{opacity:{get:function(b7,b6){if(b6){var b5=G(b7,"opacity");
return b5===""?"1":b5
}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bL.support.cssFloat?"cssFloat":"styleFloat"},style:function(b7,b6,cd,b8){if(!b7||b7.nodeType===3||b7.nodeType===8||!b7.style){return
}var cb,cc,ce,b9=bL.camelCase(b6),b5=b7.style;
b6=bL.cssProps[b9]||(bL.cssProps[b9]=c(b5,b9));
ce=bL.cssHooks[b6]||bL.cssHooks[b9];
if(cd!==aI){cc=typeof cd;
if(cc==="string"&&(cb=U.exec(cd))){cd=(cb[1]+1)*cb[2]+parseFloat(bL.css(b7,b6));
cc="number"
}if(cd==null||cc==="number"&&isNaN(cd)){return
}if(cc==="number"&&!bL.cssNumber[b9]){cd+="px"
}if(!bL.support.clearCloneStyle&&cd===""&&b6.indexOf("background")===0){b5[b6]="inherit"
}if(!ce||!("set" in ce)||(cd=ce.set(b7,cd,b8))!==aI){try{b5[b6]=cd
}catch(ca){}}}else{if(ce&&"get" in ce&&(cb=ce.get(b7,false,b8))!==aI){return cb
}return b5[b6]
}},css:function(cb,b9,b6,ca){var b8,cc,b5,b7=bL.camelCase(b9);
b9=bL.cssProps[b7]||(bL.cssProps[b7]=c(cb.style,b7));
b5=bL.cssHooks[b9]||bL.cssHooks[b7];
if(b5&&"get" in b5){cc=b5.get(cb,true,b6)
}if(cc===aI){cc=G(cb,b9,ca)
}if(cc==="normal"&&b9 in bE){cc=bE[b9]
}if(b6===""||b6){b8=parseFloat(cc);
return b6===true||bL.isNumeric(b8)?b8||0:cc
}return cc
},swap:function(ca,b9,cb,b8){var b7,b6,b5={};
for(b6 in b9){b5[b6]=ca.style[b6];
ca.style[b6]=b9[b6]
}b7=cb.apply(ca,b8||[]);
for(b6 in b9){ca.style[b6]=b5[b6]
}return b7
}});
if(a4.getComputedStyle){bq=function(b5){return a4.getComputedStyle(b5,null)
};
G=function(b9,b7,cb){var b8,b6,cd,ca=cb||bq(b9),cc=ca?ca.getPropertyValue(b7)||ca[b7]:aI,b5=b9.style;
if(ca){if(cc===""&&!bL.contains(b9.ownerDocument,b9)){cc=bL.style(b9,b7)
}if(Y.test(cc)&&a0.test(b7)){b8=b5.width;
b6=b5.minWidth;
cd=b5.maxWidth;
b5.minWidth=b5.maxWidth=b5.width=cc;
cc=ca.width;
b5.width=b8;
b5.minWidth=b6;
b5.maxWidth=cd
}}return cc
}
}else{if(n.documentElement.currentStyle){bq=function(b5){return b5.currentStyle
};
G=function(b8,b6,cb){var b7,ca,cc,b9=cb||bq(b8),cd=b9?b9[b6]:aI,b5=b8.style;
if(cd==null&&b5&&b5[b6]){cd=b5[b6]
}if(Y.test(cd)&&!bp.test(b6)){b7=b5.left;
ca=b8.runtimeStyle;
cc=ca&&ca.left;
if(cc){ca.left=b8.currentStyle.left
}b5.left=b6==="fontSize"?"1em":cd;
cd=b5.pixelLeft+"px";
b5.left=b7;
if(cc){ca.left=cc
}}return cd===""?"auto":cd
}
}}function aL(b5,b7,b8){var b6=bb.exec(b7);
return b6?Math.max(0,b6[1]-(b8||0))+(b6[2]||"px"):b7
}function ay(b9,b6,b5,cb,b8){var b7=b5===(cb?"border":"content")?4:b6==="width"?1:0,ca=0;
for(;
b7<4;
b7+=2){if(b5==="margin"){ca+=bL.css(b9,b5+bV[b7],true,b8)
}if(cb){if(b5==="content"){ca-=bL.css(b9,"padding"+bV[b7],true,b8)
}if(b5!=="margin"){ca-=bL.css(b9,"border"+bV[b7]+"Width",true,b8)
}}else{ca+=bL.css(b9,"padding"+bV[b7],true,b8);
if(b5!=="padding"){ca+=bL.css(b9,"border"+bV[b7]+"Width",true,b8)
}}}return ca
}function w(b9,b6,b5){var b8=true,ca=b6==="width"?b9.offsetWidth:b9.offsetHeight,b7=bq(b9),cb=bL.support.boxSizing&&bL.css(b9,"boxSizing",false,b7)==="border-box";
if(ca<=0||ca==null){ca=G(b9,b6,b7);
if(ca<0||ca==null){ca=b9.style[b6]
}if(Y.test(ca)){return ca
}b8=cb&&(bL.support.boxSizingReliable||ca===b9.style[b6]);
ca=parseFloat(ca)||0
}return(ca+ay(b9,b6,b5||(cb?"border":"content"),b8,b7))+"px"
}function bG(b7){var b6=n,b5=bl[b7];
if(!b5){b5=a3(b7,b6);
if(b5==="none"||!b5){aG=(aG||bL("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b6.documentElement);
b6=(aG[0].contentWindow||aG[0].contentDocument).document;
b6.write("<!doctype html><html><body>");
b6.close();
b5=a3(b7,b6);
aG.detach()
}bl[b7]=b5
}return b5
}function a3(b5,b8){var b6=bL(b8.createElement(b5)).appendTo(b8.body),b7=bL.css(b6[0],"display");
b6.remove();
return b7
}bL.each(["height","width"],function(b6,b5){bL.cssHooks[b5]={get:function(b9,b8,b7){if(b8){return b9.offsetWidth===0&&H.test(bL.css(b9,"display"))?bL.swap(b9,bd,function(){return w(b9,b5,b7)
}):w(b9,b5,b7)
}},set:function(b9,ca,b7){var b8=b7&&bq(b9);
return aL(b9,ca,b7?ay(b9,b5,b7,bL.support.boxSizing&&bL.css(b9,"boxSizing",false,b8)==="border-box",b8):0)
}}
});
if(!bL.support.opacity){bL.cssHooks.opacity={get:function(b6,b5){return aV.test((b5&&b6.currentStyle?b6.currentStyle.filter:b6.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":b5?"1":""
},set:function(b9,ca){var b8=b9.style,b6=b9.currentStyle,b5=bL.isNumeric(ca)?"alpha(opacity="+ca*100+")":"",b7=b6&&b6.filter||b8.filter||"";
b8.zoom=1;
if((ca>=1||ca==="")&&bL.trim(b7.replace(bi,""))===""&&b8.removeAttribute){b8.removeAttribute("filter");
if(ca===""||b6&&!b6.filter){return
}}b8.filter=bi.test(b7)?b7.replace(bi,b5):b7+" "+b5
}}
}bL(function(){if(!bL.support.reliableMarginRight){bL.cssHooks.marginRight={get:function(b6,b5){if(b5){return bL.swap(b6,{display:"inline-block"},G,[b6,"marginRight"])
}}}
}if(!bL.support.pixelPosition&&bL.fn.position){bL.each(["top","left"],function(b5,b6){bL.cssHooks[b6]={get:function(b8,b7){if(b7){b7=G(b8,b6);
return Y.test(b7)?bL(b8).position()[b6]+"px":b7
}}}
})
}});
if(bL.expr&&bL.expr.filters){bL.expr.filters.hidden=function(b5){return b5.offsetWidth<=0&&b5.offsetHeight<=0||(!bL.support.reliableHiddenOffsets&&((b5.style&&b5.style.display)||bL.css(b5,"display"))==="none")
};
bL.expr.filters.visible=function(b5){return !bL.expr.filters.hidden(b5)
}
}bL.each({margin:"",padding:"",border:"Width"},function(b5,b6){bL.cssHooks[b5+b6]={expand:function(b9){var b8=0,b7={},ca=typeof b9==="string"?b9.split(" "):[b9];
for(;
b8<4;
b8++){b7[b5+bV[b8]+b6]=ca[b8]||ca[b8-2]||ca[0]
}return b7
}};
if(!a0.test(b5)){bL.cssHooks[b5+b6].set=aL
}});
var bx=/%20/g,aT=/\[\]$/,W=/\r?\n/g,d=/^(?:submit|button|image|reset|file)$/i,aw=/^(?:input|select|textarea|keygen)/i;
bL.fn.extend({serialize:function(){return bL.param(this.serializeArray())
},serializeArray:function(){return this.map(function(){var b5=bL.prop(this,"elements");
return b5?bL.makeArray(b5):this
}).filter(function(){var b5=this.type;
return this.name&&!bL(this).is(":disabled")&&aw.test(this.nodeName)&&!d.test(b5)&&(this.checked||!s.test(b5))
}).map(function(b5,b6){var b7=bL(this).val();
return b7==null?null:bL.isArray(b7)?bL.map(b7,function(b8){return{name:b6.name,value:b8.replace(W,"\r\n")}
}):{name:b6.name,value:b7.replace(W,"\r\n")}
}).get()
}});
bL.param=function(b5,b7){var b8,b6=[],b9=function(ca,cb){cb=bL.isFunction(cb)?cb():(cb==null?"":cb);
b6[b6.length]=encodeURIComponent(ca)+"="+encodeURIComponent(cb)
};
if(b7===aI){b7=bL.ajaxSettings&&bL.ajaxSettings.traditional
}if(bL.isArray(b5)||(b5.jquery&&!bL.isPlainObject(b5))){bL.each(b5,function(){b9(this.name,this.value)
})
}else{for(b8 in b5){j(b8,b5[b8],b7,b9)
}}return b6.join("&").replace(bx,"+")
};
function j(b7,b9,b6,b8){var b5;
if(bL.isArray(b9)){bL.each(b9,function(cb,ca){if(b6||aT.test(b7)){b8(b7,ca)
}else{j(b7+"["+(typeof ca==="object"?cb:"")+"]",ca,b6,b8)
}})
}else{if(!b6&&bL.type(b9)==="object"){for(b5 in b9){j(b7+"["+b5+"]",b9[b5],b6,b8)
}}else{b8(b7,b9)
}}}bL.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b6,b5){bL.fn[b5]=function(b8,b7){return arguments.length>0?this.on(b5,null,b8,b7):this.trigger(b5)
}
});
bL.fn.hover=function(b5,b6){return this.mouseenter(b5).mouseleave(b6||b5)
};
var b3,aa,bQ=bL.now(),aB=/\?/,ar=/#.*$/,Q=/([?&])_=[^&]*/,ai=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,D=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,q=/^(?:GET|HEAD)$/,aJ=/^\/\//,aW=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,b2=bL.fn.load,x={},a9={},aY="*/".concat("*");
try{aa=aN.href
}catch(bh){aa=n.createElement("a");
aa.href="";
aa=aa.href
}b3=aW.exec(aa.toLowerCase())||[];
function bN(b5){return function(b9,ca){if(typeof b9!=="string"){ca=b9;
b9="*"
}var b6,b7=0,b8=b9.toLowerCase().match(ae)||[];
if(bL.isFunction(ca)){while((b6=b8[b7++])){if(b6[0]==="+"){b6=b6.slice(1)||"*";
(b5[b6]=b5[b6]||[]).unshift(ca)
}else{(b5[b6]=b5[b6]||[]).push(ca)
}}}}
}function p(b5,b7,cb,b8){var b6={},b9=(b5===a9);
function ca(cc){var cd;
b6[cc]=true;
bL.each(b5[cc]||[],function(cf,ce){var cg=ce(b7,cb,b8);
if(typeof cg==="string"&&!b9&&!b6[cg]){b7.dataTypes.unshift(cg);
ca(cg);
return false
}else{if(b9){return !(cd=cg)
}}});
return cd
}return ca(b7.dataTypes[0])||!b6["*"]&&ca("*")
}function t(b7,b8){var b5,b6,b9=bL.ajaxSettings.flatOptions||{};
for(b6 in b8){if(b8[b6]!==aI){(b9[b6]?b7:(b5||(b5={})))[b6]=b8[b6]
}}if(b5){bL.extend(true,b7,b5)
}return b7
}bL.fn.load=function(b8,cb,cc){if(typeof b8!=="string"&&b2){return b2.apply(this,arguments)
}var b5,b7,b9,b6=this,ca=b8.indexOf(" ");
if(ca>=0){b5=b8.slice(ca,b8.length);
b8=b8.slice(0,ca)
}if(bL.isFunction(cb)){cc=cb;
cb=aI
}else{if(cb&&typeof cb==="object"){b9="POST"
}}if(b6.length>0){bL.ajax({url:b8,type:b9,dataType:"html",data:cb}).done(function(cd){b7=arguments;
b6.html(b5?bL("<div>").append(bL.parseHTML(cd)).find(b5):cd)
}).complete(cc&&function(ce,cd){b6.each(cc,b7||[ce.responseText,cd,ce])
})
}return this
};
bL.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(b5,b6){bL.fn[b6]=function(b7){return this.on(b6,b7)
}
});
bL.each(["get","post"],function(b5,b6){bL[b6]=function(b7,b9,ca,b8){if(bL.isFunction(b9)){b8=b8||ca;
ca=b9;
b9=aI
}return bL.ajax({url:b7,type:b6,dataType:b8,data:b9,success:ca})
}
});
bL.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:aa,type:"GET",isLocal:D.test(b3[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":aY,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a4.String,"text html":true,"text json":bL.parseJSON,"text xml":bL.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(b6,b5){return b5?t(t(b6,bL.ajaxSettings),b5):t(bL.ajaxSettings,b6)
},ajaxPrefilter:bN(x),ajaxTransport:bN(a9),ajax:function(b9,b6){if(typeof b9==="object"){b6=b9;
b9=aI
}b6=b6||{};
var ci,ck,ca,cp,ce,b5,cl,b7,cd=bL.ajaxSetup({},b6),cr=cd.context||cd,cg=cd.context&&(cr.nodeType||cr.jquery)?bL(cr):bL.event,cq=bL.Deferred(),cn=bL.Callbacks("once memory"),cb=cd.statusCode||{},ch={},co={},b8=0,cc="canceled",cj={readyState:0,getResponseHeader:function(ct){var cs;
if(b8===2){if(!b7){b7={};
while((cs=ai.exec(cp))){b7[cs[1].toLowerCase()]=cs[2]
}}cs=b7[ct.toLowerCase()]
}return cs==null?null:cs
},getAllResponseHeaders:function(){return b8===2?cp:null
},setRequestHeader:function(ct,cu){var cs=ct.toLowerCase();
if(!b8){ct=co[cs]=co[cs]||ct;
ch[ct]=cu
}return this
},overrideMimeType:function(cs){if(!b8){cd.mimeType=cs
}return this
},statusCode:function(ct){var cs;
if(ct){if(b8<2){for(cs in ct){cb[cs]=[cb[cs],ct[cs]]
}}else{cj.always(ct[cj.status])
}}return this
},abort:function(ct){var cs=ct||cc;
if(cl){cl.abort(cs)
}cf(0,cs);
return this
}};
cq.promise(cj).complete=cn.add;
cj.success=cj.done;
cj.error=cj.fail;
cd.url=((b9||cd.url||aa)+"").replace(ar,"").replace(aJ,b3[1]+"//");
cd.type=b6.method||b6.type||cd.method||cd.type;
cd.dataTypes=bL.trim(cd.dataType||"*").toLowerCase().match(ae)||[""];
if(cd.crossDomain==null){ci=aW.exec(cd.url.toLowerCase());
cd.crossDomain=!!(ci&&(ci[1]!==b3[1]||ci[2]!==b3[2]||(ci[3]||(ci[1]==="http:"?80:443))!=(b3[3]||(b3[1]==="http:"?80:443))))
}if(cd.data&&cd.processData&&typeof cd.data!=="string"){cd.data=bL.param(cd.data,cd.traditional)
}p(x,cd,b6,cj);
if(b8===2){return cj
}b5=cd.global;
if(b5&&bL.active++===0){bL.event.trigger("ajaxStart")
}cd.type=cd.type.toUpperCase();
cd.hasContent=!q.test(cd.type);
ca=cd.url;
if(!cd.hasContent){if(cd.data){ca=(cd.url+=(aB.test(ca)?"&":"?")+cd.data);
delete cd.data
}if(cd.cache===false){cd.url=Q.test(ca)?ca.replace(Q,"$1_="+bQ++):ca+(aB.test(ca)?"&":"?")+"_="+bQ++
}}if(cd.ifModified){if(bL.lastModified[ca]){cj.setRequestHeader("If-Modified-Since",bL.lastModified[ca])
}if(bL.etag[ca]){cj.setRequestHeader("If-None-Match",bL.etag[ca])
}}if(cd.data&&cd.hasContent&&cd.contentType!==false||b6.contentType){cj.setRequestHeader("Content-Type",cd.contentType)
}cj.setRequestHeader("Accept",cd.dataTypes[0]&&cd.accepts[cd.dataTypes[0]]?cd.accepts[cd.dataTypes[0]]+(cd.dataTypes[0]!=="*"?", "+aY+"; q=0.01":""):cd.accepts["*"]);
for(ck in cd.headers){cj.setRequestHeader(ck,cd.headers[ck])
}if(cd.beforeSend&&(cd.beforeSend.call(cr,cj,cd)===false||b8===2)){return cj.abort()
}cc="abort";
for(ck in {success:1,error:1,complete:1}){cj[ck](cd[ck])
}cl=p(a9,cd,b6,cj);
if(!cl){cf(-1,"No Transport")
}else{cj.readyState=1;
if(b5){cg.trigger("ajaxSend",[cj,cd])
}if(cd.async&&cd.timeout>0){ce=setTimeout(function(){cj.abort("timeout")
},cd.timeout)
}try{b8=1;
cl.send(ch,cf)
}catch(cm){if(b8<2){cf(-1,cm)
}else{throw cm
}}}function cf(cx,ct,cy,cv){var cs,cB,cz,cw,cA,cu=ct;
if(b8===2){return
}b8=2;
if(ce){clearTimeout(ce)
}cl=aI;
cp=cv||"";
cj.readyState=cx>0?4:0;
if(cy){cw=h(cd,cj,cy)
}if(cx>=200&&cx<300||cx===304){if(cd.ifModified){cA=cj.getResponseHeader("Last-Modified");
if(cA){bL.lastModified[ca]=cA
}cA=cj.getResponseHeader("etag");
if(cA){bL.etag[ca]=cA
}}if(cx===204){cs=true;
cu="nocontent"
}else{if(cx===304){cs=true;
cu="notmodified"
}else{cs=ah(cd,cw);
cu=cs.state;
cB=cs.data;
cz=cs.error;
cs=!cz
}}}else{cz=cu;
if(cx||!cu){cu="error";
if(cx<0){cx=0
}}}cj.status=cx;
cj.statusText=(ct||cu)+"";
if(cs){cq.resolveWith(cr,[cB,cu,cj])
}else{cq.rejectWith(cr,[cj,cu,cz])
}cj.statusCode(cb);
cb=aI;
if(b5){cg.trigger(cs?"ajaxSuccess":"ajaxError",[cj,cd,cs?cB:cz])
}cn.fireWith(cr,[cj,cu]);
if(b5){cg.trigger("ajaxComplete",[cj,cd]);
if(!(--bL.active)){bL.event.trigger("ajaxStop")
}}}return cj
},getScript:function(b5,b6){return bL.get(b5,aI,b6,"script")
},getJSON:function(b5,b6,b7){return bL.get(b5,b6,b7,"json")
}});
function h(ce,cd,ca){var b5,b9,b8,cb,b6=ce.contents,cc=ce.dataTypes,b7=ce.responseFields;
for(cb in b7){if(cb in ca){cd[b7[cb]]=ca[cb]
}}while(cc[0]==="*"){cc.shift();
if(b9===aI){b9=ce.mimeType||cd.getResponseHeader("Content-Type")
}}if(b9){for(cb in b6){if(b6[cb]&&b6[cb].test(b9)){cc.unshift(cb);
break
}}}if(cc[0] in ca){b8=cc[0]
}else{for(cb in ca){if(!cc[0]||ce.converters[cb+" "+cc[0]]){b8=cb;
break
}if(!b5){b5=cb
}}b8=b8||b5
}if(b8){if(b8!==cc[0]){cc.unshift(b8)
}return ca[b8]
}}function ah(cf,b7){var b5,cb,cd,b8,ce={},b9=0,cc=cf.dataTypes.slice(),b6=cc[0];
if(cf.dataFilter){b7=cf.dataFilter(b7,cf.dataType)
}if(cc[1]){for(cd in cf.converters){ce[cd.toLowerCase()]=cf.converters[cd]
}}for(;
(cb=cc[++b9]);
){if(cb!=="*"){if(b6!=="*"&&b6!==cb){cd=ce[b6+" "+cb]||ce["* "+cb];
if(!cd){for(b5 in ce){b8=b5.split(" ");
if(b8[1]===cb){cd=ce[b6+" "+b8[0]]||ce["* "+b8[0]];
if(cd){if(cd===true){cd=ce[b5]
}else{if(ce[b5]!==true){cb=b8[0];
cc.splice(b9--,0,cb)
}}break
}}}}if(cd!==true){if(cd&&cf["throws"]){b7=cd(b7)
}else{try{b7=cd(b7)
}catch(ca){return{state:"parsererror",error:cd?ca:"No conversion from "+b6+" to "+cb}
}}}}b6=cb
}}return{state:"success",data:b7}
}bL.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(b5){bL.globalEval(b5);
return b5
}}});
bL.ajaxPrefilter("script",function(b5){if(b5.cache===aI){b5.cache=false
}if(b5.crossDomain){b5.type="GET";
b5.global=false
}});
bL.ajaxTransport("script",function(b7){if(b7.crossDomain){var b5,b6=n.head||bL("head")[0]||n.documentElement;
return{send:function(b8,b9){b5=n.createElement("script");
b5.async=true;
if(b7.scriptCharset){b5.charset=b7.scriptCharset
}b5.src=b7.url;
b5.onload=b5.onreadystatechange=function(cb,ca){if(ca||!b5.readyState||/loaded|complete/.test(b5.readyState)){b5.onload=b5.onreadystatechange=null;
if(b5.parentNode){b5.parentNode.removeChild(b5)
}b5=null;
if(!ca){b9(200,"success")
}}};
b6.insertBefore(b5,b6.firstChild)
},abort:function(){if(b5){b5.onload(aI,true)
}}}
}});
var bs=[],a7=/(=)\?(?=&|$)|\?\?/;
bL.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b5=bs.pop()||(bL.expando+"_"+(bQ++));
this[b5]=true;
return b5
}});
bL.ajaxPrefilter("json jsonp",function(b8,b5,b9){var cb,b6,b7,ca=b8.jsonp!==false&&(a7.test(b8.url)?"url":typeof b8.data==="string"&&!(b8.contentType||"").indexOf("application/x-www-form-urlencoded")&&a7.test(b8.data)&&"data");
if(ca||b8.dataTypes[0]==="jsonp"){cb=b8.jsonpCallback=bL.isFunction(b8.jsonpCallback)?b8.jsonpCallback():b8.jsonpCallback;
if(ca){b8[ca]=b8[ca].replace(a7,"$1"+cb)
}else{if(b8.jsonp!==false){b8.url+=(aB.test(b8.url)?"&":"?")+b8.jsonp+"="+cb
}}b8.converters["script json"]=function(){if(!b7){bL.error(cb+" was not called")
}return b7[0]
};
b8.dataTypes[0]="json";
b6=a4[cb];
a4[cb]=function(){b7=arguments
};
b9.always(function(){a4[cb]=b6;
if(b8[cb]){b8.jsonpCallback=b5.jsonpCallback;
bs.push(cb)
}if(b7&&bL.isFunction(b6)){b6(b7[0])
}b7=b6=aI
});
return"script"
}});
var aj,az,aA=0,aR=a4.ActiveXObject&&function(){var b5;
for(b5 in aj){aj[b5](aI,true)
}};
function bF(){try{return new a4.XMLHttpRequest()
}catch(b5){}}function bf(){try{return new a4.ActiveXObject("Microsoft.XMLHTTP")
}catch(b5){}}bL.ajaxSettings.xhr=a4.ActiveXObject?function(){return !this.isLocal&&bF()||bf()
}:bF;
az=bL.ajaxSettings.xhr();
bL.support.cors=!!az&&("withCredentials" in az);
az=bL.support.ajax=!!az;
if(az){bL.ajaxTransport(function(b5){if(!b5.crossDomain||bL.support.cors){var b6;
return{send:function(cc,b7){var ca,b8,cb=b5.xhr();
if(b5.username){cb.open(b5.type,b5.url,b5.async,b5.username,b5.password)
}else{cb.open(b5.type,b5.url,b5.async)
}if(b5.xhrFields){for(b8 in b5.xhrFields){cb[b8]=b5.xhrFields[b8]
}}if(b5.mimeType&&cb.overrideMimeType){cb.overrideMimeType(b5.mimeType)
}if(!b5.crossDomain&&!cc["X-Requested-With"]){cc["X-Requested-With"]="XMLHttpRequest"
}try{for(b8 in cc){cb.setRequestHeader(b8,cc[b8])
}}catch(b9){}cb.send((b5.hasContent&&b5.data)||null);
b6=function(cf,ce){var cd,cg,cj,ch;
try{if(b6&&(ce||cb.readyState===4)){b6=aI;
if(ca){cb.onreadystatechange=bL.noop;
if(aR){delete aj[ca]
}}if(ce){if(cb.readyState!==4){cb.abort()
}}else{ch={};
cd=cb.status;
cg=cb.getAllResponseHeaders();
if(typeof cb.responseText==="string"){ch.text=cb.responseText
}try{cj=cb.statusText
}catch(ci){cj=""
}if(!cd&&b5.isLocal&&!b5.crossDomain){cd=ch.text?200:404
}else{if(cd===1223){cd=204
}}}}}catch(ck){if(!ce){b7(-1,ck)
}}if(ch){b7(cd,cj,ch,cg)
}};
if(!b5.async){b6()
}else{if(cb.readyState===4){setTimeout(b6)
}else{ca=++aA;
if(aR){if(!aj){aj={};
bL(a4).unload(aR)
}aj[ca]=b6
}cb.onreadystatechange=b6
}}},abort:function(){if(b6){b6(aI,true)
}}}
}})
}var M,af,bT=/^(?:toggle|show|hide)$/,bM=new RegExp("^(?:([+-])=|)("+bC+")([a-z%]*)$","i"),bS=/queueHooks$/,aD=[i],a2={"*":[function(b5,cc){var b8,cd,ce=this.createTween(b5,cc),b9=bM.exec(cc),ca=ce.cur(),b6=+ca||0,b7=1,cb=20;
if(b9){b8=+b9[2];
cd=b9[3]||(bL.cssNumber[b5]?"":"px");
if(cd!=="px"&&b6){b6=bL.css(ce.elem,b5,true)||b8||1;
do{b7=b7||".5";
b6=b6/b7;
bL.style(ce.elem,b5,b6+cd)
}while(b7!==(b7=ce.cur()/ca)&&b7!==1&&--cb)
}ce.unit=cd;
ce.start=b6;
ce.end=b9[1]?b6+(b9[1]+1)*b8:b8
}return ce
}]};
function bo(){setTimeout(function(){M=aI
});
return(M=bL.now())
}function bg(b6,b5){bL.each(b5,function(cb,b9){var ca=(a2[cb]||[]).concat(a2["*"]),b7=0,b8=ca.length;
for(;
b7<b8;
b7++){if(ca[b7].call(b6,cb,b9)){return
}}})
}function g(b7,cb,ce){var cf,b5,ca=0,b6=aD.length,cd=bL.Deferred().always(function(){delete b9.elem
}),b9=function(){if(b5){return false
}var cl=M||bo(),ci=Math.max(0,b8.startTime+b8.duration-cl),cg=ci/b8.duration||0,ck=1-cg,ch=0,cj=b8.tweens.length;
for(;
ch<cj;
ch++){b8.tweens[ch].run(ck)
}cd.notifyWith(b7,[b8,ck,ci]);
if(ck<1&&cj){return ci
}else{cd.resolveWith(b7,[b8]);
return false
}},b8=cd.promise({elem:b7,props:bL.extend({},cb),opts:bL.extend(true,{specialEasing:{}},ce),originalProperties:cb,originalOptions:ce,startTime:M||bo(),duration:ce.duration,tweens:[],createTween:function(ci,cg){var ch=bL.Tween(b7,b8.opts,ci,cg,b8.opts.specialEasing[ci]||b8.opts.easing);
b8.tweens.push(ch);
return ch
},stop:function(ch){var cg=0,ci=ch?b8.tweens.length:0;
if(b5){return this
}b5=true;
for(;
cg<ci;
cg++){b8.tweens[cg].run(1)
}if(ch){cd.resolveWith(b7,[b8,ch])
}else{cd.rejectWith(b7,[b8,ch])
}return this
}}),cc=b8.props;
ao(cc,b8.opts.specialEasing);
for(;
ca<b6;
ca++){cf=aD[ca].call(b8,b7,cc,b8.opts);
if(cf){return cf
}}bg(b8,cc);
if(bL.isFunction(b8.opts.start)){b8.opts.start.call(b7,b8)
}bL.fx.timer(bL.extend(b9,{elem:b7,anim:b8,queue:b8.opts.queue}));
return b8.progress(b8.opts.progress).done(b8.opts.done,b8.opts.complete).fail(b8.opts.fail).always(b8.opts.always)
}function ao(b8,ca){var b9,b7,b6,cb,b5;
for(b6 in b8){b7=bL.camelCase(b6);
cb=ca[b7];
b9=b8[b6];
if(bL.isArray(b9)){cb=b9[1];
b9=b8[b6]=b9[0]
}if(b6!==b7){b8[b7]=b9;
delete b8[b6]
}b5=bL.cssHooks[b7];
if(b5&&"expand" in b5){b9=b5.expand(b9);
delete b8[b7];
for(b6 in b9){if(!(b6 in b8)){b8[b6]=b9[b6];
ca[b6]=cb
}}}else{ca[b7]=cb
}}}bL.Animation=bL.extend(g,{tweener:function(b6,b9){if(bL.isFunction(b6)){b9=b6;
b6=["*"]
}else{b6=b6.split(" ")
}var b8,b5=0,b7=b6.length;
for(;
b5<b7;
b5++){b8=b6[b5];
a2[b8]=a2[b8]||[];
a2[b8].unshift(b9)
}},prefilter:function(b6,b5){if(b5){aD.unshift(b6)
}else{aD.push(b6)
}}});
function i(b9,cf,b5){var b7,ce,b8,ch,cl,cb,ck,cj,ci,ca=this,b6=b9.style,cg={},cd=[],cc=b9.nodeType&&R(b9);
if(!b5.queue){cj=bL._queueHooks(b9,"fx");
if(cj.unqueued==null){cj.unqueued=0;
ci=cj.empty.fire;
cj.empty.fire=function(){if(!cj.unqueued){ci()
}}
}cj.unqueued++;
ca.always(function(){ca.always(function(){cj.unqueued--;
if(!bL.queue(b9,"fx").length){cj.empty.fire()
}})
})
}if(b9.nodeType===1&&("height" in cf||"width" in cf)){b5.overflow=[b6.overflow,b6.overflowX,b6.overflowY];
if(bL.css(b9,"display")==="inline"&&bL.css(b9,"float")==="none"){if(!bL.support.inlineBlockNeedsLayout||bG(b9.nodeName)==="inline"){b6.display="inline-block"
}else{b6.zoom=1
}}}if(b5.overflow){b6.overflow="hidden";
if(!bL.support.shrinkWrapBlocks){ca.always(function(){b6.overflow=b5.overflow[0];
b6.overflowX=b5.overflow[1];
b6.overflowY=b5.overflow[2]
})
}}for(ce in cf){ch=cf[ce];
if(bT.exec(ch)){delete cf[ce];
cb=cb||ch==="toggle";
if(ch===(cc?"hide":"show")){continue
}cd.push(ce)
}}b8=cd.length;
if(b8){cl=bL._data(b9,"fxshow")||bL._data(b9,"fxshow",{});
if("hidden" in cl){cc=cl.hidden
}if(cb){cl.hidden=!cc
}if(cc){bL(b9).show()
}else{ca.done(function(){bL(b9).hide()
})
}ca.done(function(){var cm;
bL._removeData(b9,"fxshow");
for(cm in cg){bL.style(b9,cm,cg[cm])
}});
for(ce=0;
ce<b8;
ce++){b7=cd[ce];
ck=ca.createTween(b7,cc?cl[b7]:0);
cg[b7]=cl[b7]||bL.style(b9,b7);
if(!(b7 in cl)){cl[b7]=ck.start;
if(cc){ck.end=ck.start;
ck.start=b7==="width"||b7==="height"?1:0
}}}}}function I(b7,b6,b9,b5,b8){return new I.prototype.init(b7,b6,b9,b5,b8)
}bL.Tween=I;
I.prototype={constructor:I,init:function(b8,b6,ca,b5,b9,b7){this.elem=b8;
this.prop=ca;
this.easing=b9||"swing";
this.options=b6;
this.start=this.now=this.cur();
this.end=b5;
this.unit=b7||(bL.cssNumber[ca]?"":"px")
},cur:function(){var b5=I.propHooks[this.prop];
return b5&&b5.get?b5.get(this):I.propHooks._default.get(this)
},run:function(b7){var b6,b5=I.propHooks[this.prop];
if(this.options.duration){this.pos=b6=bL.easing[this.easing](b7,this.options.duration*b7,0,1,this.options.duration)
}else{this.pos=b6=b7
}this.now=(this.end-this.start)*b6+this.start;
if(this.options.step){this.options.step.call(this.elem,this.now,this)
}if(b5&&b5.set){b5.set(this)
}else{I.propHooks._default.set(this)
}return this
}};
I.prototype.init.prototype=I.prototype;
I.propHooks={_default:{get:function(b6){var b5;
if(b6.elem[b6.prop]!=null&&(!b6.elem.style||b6.elem.style[b6.prop]==null)){return b6.elem[b6.prop]
}b5=bL.css(b6.elem,b6.prop,"");
return !b5||b5==="auto"?0:b5
},set:function(b5){if(bL.fx.step[b5.prop]){bL.fx.step[b5.prop](b5)
}else{if(b5.elem.style&&(b5.elem.style[bL.cssProps[b5.prop]]!=null||bL.cssHooks[b5.prop])){bL.style(b5.elem,b5.prop,b5.now+b5.unit)
}else{b5.elem[b5.prop]=b5.now
}}}}};
I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(b5){if(b5.elem.nodeType&&b5.elem.parentNode){b5.elem[b5.prop]=b5.now
}}};
bL.each(["toggle","show","hide"],function(b6,b5){var b7=bL.fn[b5];
bL.fn[b5]=function(b8,ca,b9){return b8==null||typeof b8==="boolean"?b7.apply(this,arguments):this.animate(bK(b5,true),b8,ca,b9)
}
});
bL.fn.extend({fadeTo:function(b5,b8,b7,b6){return this.filter(R).css("opacity",0).show().end().animate({opacity:b8},b5,b7,b6)
},animate:function(cb,b8,ca,b9){var b7=bL.isEmptyObject(cb),b5=bL.speed(b8,ca,b9),b6=function(){var cc=g(this,bL.extend({},cb),b5);
b6.finish=function(){cc.stop(true)
};
if(b7||bL._data(this,"finish")){cc.stop(true)
}};
b6.finish=b6;
return b7||b5.queue===false?this.each(b6):this.queue(b5.queue,b6)
},stop:function(b7,b6,b5){var b8=function(b9){var ca=b9.stop;
delete b9.stop;
ca(b5)
};
if(typeof b7!=="string"){b5=b6;
b6=b7;
b7=aI
}if(b6&&b7!==false){this.queue(b7||"fx",[])
}return this.each(function(){var cc=true,b9=b7!=null&&b7+"queueHooks",cb=bL.timers,ca=bL._data(this);
if(b9){if(ca[b9]&&ca[b9].stop){b8(ca[b9])
}}else{for(b9 in ca){if(ca[b9]&&ca[b9].stop&&bS.test(b9)){b8(ca[b9])
}}}for(b9=cb.length;
b9--;
){if(cb[b9].elem===this&&(b7==null||cb[b9].queue===b7)){cb[b9].anim.stop(b5);
cc=false;
cb.splice(b9,1)
}}if(cc||!b5){bL.dequeue(this,b7)
}})
},finish:function(b5){if(b5!==false){b5=b5||"fx"
}return this.each(function(){var b8,cb=bL._data(this),b7=cb[b5+"queue"],b6=cb[b5+"queueHooks"],ca=bL.timers,b9=b7?b7.length:0;
cb.finish=true;
bL.queue(this,b5,[]);
if(b6&&b6.cur&&b6.cur.finish){b6.cur.finish.call(this)
}for(b8=ca.length;
b8--;
){if(ca[b8].elem===this&&ca[b8].queue===b5){ca[b8].anim.stop(true);
ca.splice(b8,1)
}}for(b8=0;
b8<b9;
b8++){if(b7[b8]&&b7[b8].finish){b7[b8].finish.call(this)
}}delete cb.finish
})
}});
function bK(b7,b9){var b8,b5={height:b7},b6=0;
b9=b9?1:0;
for(;
b6<4;
b6+=2-b9){b8=bV[b6];
b5["margin"+b8]=b5["padding"+b8]=b7
}if(b9){b5.opacity=b5.width=b7
}return b5
}bL.each({slideDown:bK("show"),slideUp:bK("hide"),slideToggle:bK("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b5,b6){bL.fn[b5]=function(b7,b9,b8){return this.animate(b6,b7,b9,b8)
}
});
bL.speed=function(b7,b8,b6){var b5=b7&&typeof b7==="object"?bL.extend({},b7):{complete:b6||!b6&&b8||bL.isFunction(b7)&&b7,duration:b7,easing:b6&&b8||b8&&!bL.isFunction(b8)&&b8};
b5.duration=bL.fx.off?0:typeof b5.duration==="number"?b5.duration:b5.duration in bL.fx.speeds?bL.fx.speeds[b5.duration]:bL.fx.speeds._default;
if(b5.queue==null||b5.queue===true){b5.queue="fx"
}b5.old=b5.complete;
b5.complete=function(){if(bL.isFunction(b5.old)){b5.old.call(this)
}if(b5.queue){bL.dequeue(this,b5.queue)
}};
return b5
};
bL.easing={linear:function(b5){return b5
},swing:function(b5){return 0.5-Math.cos(b5*Math.PI)/2
}};
bL.timers=[];
bL.fx=I.prototype.init;
bL.fx.tick=function(){var b7,b6=bL.timers,b5=0;
M=bL.now();
for(;
b5<b6.length;
b5++){b7=b6[b5];
if(!b7()&&b6[b5]===b7){b6.splice(b5--,1)
}}if(!b6.length){bL.fx.stop()
}M=aI
};
bL.fx.timer=function(b5){if(b5()&&bL.timers.push(b5)){bL.fx.start()
}};
bL.fx.interval=13;
bL.fx.start=function(){if(!af){af=setInterval(bL.fx.tick,bL.fx.interval)
}};
bL.fx.stop=function(){clearInterval(af);
af=null
};
bL.fx.speeds={slow:600,fast:200,_default:400};
bL.fx.step={};
if(bL.expr&&bL.expr.filters){bL.expr.filters.animated=function(b5){return bL.grep(bL.timers,function(b6){return b5===b6.elem
}).length
}
}bL.fn.offset=function(b6){if(arguments.length){return b6===aI?this:this.each(function(cb){bL.offset.setOffset(this,b6,cb)
})
}var b5,ca,b8={top:0,left:0},b7=this[0],b9=b7&&b7.ownerDocument;
if(!b9){return
}b5=b9.documentElement;
if(!bL.contains(b5,b7)){return b8
}if(typeof b7.getBoundingClientRect!==aE){b8=b7.getBoundingClientRect()
}ca=br(b9);
return{top:b8.top+(ca.pageYOffset||b5.scrollTop)-(b5.clientTop||0),left:b8.left+(ca.pageXOffset||b5.scrollLeft)-(b5.clientLeft||0)}
};
bL.offset={setOffset:function(b8,ch,cb){var cc=bL.css(b8,"position");
if(cc==="static"){b8.style.position="relative"
}var ca=bL(b8),b6=ca.offset(),b5=bL.css(b8,"top"),cf=bL.css(b8,"left"),cg=(cc==="absolute"||cc==="fixed")&&bL.inArray("auto",[b5,cf])>-1,ce={},cd={},b7,b9;
if(cg){cd=ca.position();
b7=cd.top;
b9=cd.left
}else{b7=parseFloat(b5)||0;
b9=parseFloat(cf)||0
}if(bL.isFunction(ch)){ch=ch.call(b8,cb,b6)
}if(ch.top!=null){ce.top=(ch.top-b6.top)+b7
}if(ch.left!=null){ce.left=(ch.left-b6.left)+b9
}if("using" in ch){ch.using.call(b8,ce)
}else{ca.css(ce)
}}};
bL.fn.extend({position:function(){if(!this[0]){return
}var b7,b8,b5={top:0,left:0},b6=this[0];
if(bL.css(b6,"position")==="fixed"){b8=b6.getBoundingClientRect()
}else{b7=this.offsetParent();
b8=this.offset();
if(!bL.nodeName(b7[0],"html")){b5=b7.offset()
}b5.top+=bL.css(b7[0],"borderTopWidth",true);
b5.left+=bL.css(b7[0],"borderLeftWidth",true)
}return{top:b8.top-b5.top-bL.css(b6,"marginTop",true),left:b8.left-b5.left-bL.css(b6,"marginLeft",true)}
},offsetParent:function(){return this.map(function(){var b5=this.offsetParent||n.documentElement;
while(b5&&(!bL.nodeName(b5,"html")&&bL.css(b5,"position")==="static")){b5=b5.offsetParent
}return b5||n.documentElement
})
}});
bL.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b7,b6){var b5=/Y/.test(b6);
bL.fn[b7]=function(b8){return bL.access(this,function(b9,cc,cb){var ca=br(b9);
if(cb===aI){return ca?(b6 in ca)?ca[b6]:ca.document.documentElement[cc]:b9[cc]
}if(ca){ca.scrollTo(!b5?cb:bL(ca).scrollLeft(),b5?cb:bL(ca).scrollTop())
}else{b9[cc]=cb
}},b7,b8,arguments.length,null)
}
});
function br(b5){return bL.isWindow(b5)?b5:b5.nodeType===9?b5.defaultView||b5.parentWindow:false
}bL.each({Height:"height",Width:"width"},function(b5,b6){bL.each({padding:"inner"+b5,content:b6,"":"outer"+b5},function(b7,b8){bL.fn[b8]=function(cc,cb){var ca=arguments.length&&(b7||typeof cc!=="boolean"),b9=b7||(cc===true||cb===true?"margin":"border");
return bL.access(this,function(ce,cd,cf){var cg;
if(bL.isWindow(ce)){return ce.document.documentElement["client"+b5]
}if(ce.nodeType===9){cg=ce.documentElement;
return Math.max(ce.body["scroll"+b5],cg["scroll"+b5],ce.body["offset"+b5],cg["offset"+b5],cg["client"+b5])
}return cf===aI?bL.css(ce,cd,b9):bL.style(ce,cd,cf,b9)
},b6,ca?cc:aI,ca,null)
}
})
});
a4.jQuery=a4.$=bL;
if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bL
})
}})(window);
(function(){var b,c;
jQuery.uaMatch=function(f){f=f.toLowerCase();
var d=/(chrome)[ \/]([\w.]+)/.exec(f)||/(webkit)[ \/]([\w.]+)/.exec(f)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(f)||/(msie) ([\w.]+)/.exec(f)||f.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(f)||[];
return{browser:d[1]||"",version:d[2]||"0"}
};
b=jQuery.uaMatch(navigator.userAgent);
c={};
if(b.browser){c[b.browser]=true;
c.version=b.version
}if(c.chrome){c.webkit=true
}else{if(c.webkit){c.safari=true
}}jQuery.browser=c
})();
/*! jQuery UI - v1.10.3 - 2013-07-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.datepicker.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(g,d){function c(m,l){var j,s,p,q=m.nodeName.toLowerCase();
return"area"===q?(j=m.parentNode,s=j.name,m.href&&s&&"map"===j.nodeName.toLowerCase()?(p=g("img[usemap=#"+s+"]")[0],!!p&&f(p)):!1):(/input|select|textarea|button|object/.test(q)?!m.disabled:"a"===q?m.href||l:l)&&f(m)
}function f(i){return g.expr.filters.visible(i)&&!g(i).parents().addBack().filter(function(){return"hidden"===g.css(this,"visibility")
}).length
}var b=0,h=/^ui-id-\d+$/;
g.ui=g.ui||{},g.extend(g.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),g.fn.extend({focus:function(i){return function(j,l){return"number"==typeof j?this.each(function(){var m=this;
setTimeout(function(){g(m).focus(),l&&l.call(m)
},j)
}):i.apply(this,arguments)
}
}(g.fn.focus),scrollParent:function(){var i;
return i=g.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(g.css(this,"position"))&&/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))
}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))
}).eq(0),/fixed/.test(this.css("position"))||!i.length?g(document):i
},zIndex:function(l){if(l!==d){return this.css("zIndex",l)
}if(this.length){for(var m,j,o=g(this[0]);
o.length&&o[0]!==document;
){if(m=o.css("position"),("absolute"===m||"relative"===m||"fixed"===m)&&(j=parseInt(o.css("zIndex"),10),!isNaN(j)&&0!==j)){return j
}o=o.parent()
}}return 0
},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++b)
})
},removeUniqueId:function(){return this.each(function(){h.test(this.id)&&g(this).removeAttr("id")
})
}}),g.extend(g.expr[":"],{data:g.expr.createPseudo?g.expr.createPseudo(function(i){return function(j){return !!g.data(j,i)
}
}):function(l,j,m){return !!g.data(l,m[3])
},focusable:function(i){return c(i,!isNaN(g.attr(i,"tabindex")))
},tabbable:function(j){var l=g.attr(j,"tabindex"),i=isNaN(l);
return(i||l>=0)&&c(j,!i)
}}),g("<a>").outerWidth(1).jquery||g.each(["Width","Height"],function(l,m){function j(r,o,u,n){return g.each(t,function(){o-=parseFloat(g.css(r,"padding"+this))||0,u&&(o-=parseFloat(g.css(r,"border"+this+"Width"))||0),n&&(o-=parseFloat(g.css(r,"margin"+this))||0)
}),o
}var t="Width"===m?["Left","Right"]:["Top","Bottom"],p=m.toLowerCase(),q={innerWidth:g.fn.innerWidth,innerHeight:g.fn.innerHeight,outerWidth:g.fn.outerWidth,outerHeight:g.fn.outerHeight};
g.fn["inner"+m]=function(n){return n===d?q["inner"+m].call(this):this.each(function(){g(this).css(p,j(this,n)+"px")
})
},g.fn["outer"+m]=function(o,n){return"number"!=typeof o?q["outer"+m].call(this,o):this.each(function(){g(this).css(p,j(this,o,!0,n)+"px")
})
}
}),g.fn.addBack||(g.fn.addBack=function(i){return this.add(null==i?this.prevObject:this.prevObject.filter(i))
}),g("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(g.fn.removeData=function(i){return function(j){return arguments.length?i.call(this,g.camelCase(j)):i.call(this)
}
}(g.fn.removeData)),g.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),g.support.selectstart="onselectstart" in document.createElement("div"),g.fn.extend({disableSelection:function(){return this.bind((g.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(i){i.preventDefault()
})
},enableSelection:function(){return this.unbind(".ui-disableSelection")
}}),g.extend(g.ui,{plugin:{add:function(m,l,o){var j,p=g.ui[m].prototype;
for(j in o){p.plugins[j]=p.plugins[j]||[],p.plugins[j].push([l,o[j]])
}},call:function(o,m,l){var n,j=o.plugins[m];
if(j&&o.element[0].parentNode&&11!==o.element[0].parentNode.nodeType){for(n=0;
j.length>n;
n++){o.options[j[n][0]]&&j[n][1].apply(o.element,l)
}}}},hasScroll:function(m,l){if("hidden"===g(m).css("overflow")){return !1
}var n=l&&"left"===l?"scrollLeft":"scrollTop",j=!1;
return m[n]>0?!0:(m[n]=1,j=m[n]>0,m[n]=0,j)
}})
})(jQuery);
(function(d,h){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},d.extend(this._defaults,this.regional[""]),this.dpDiv=f(d("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
}function f(m){var l="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
return m.delegate(l,"mouseout",function(){d(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&d(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&d(this).removeClass("ui-datepicker-next-hover")
}).delegate(l,"mouseover",function(){d.datepicker._isDisabledDatepicker(b.inline?m.parent()[0]:b.input[0])||(d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&d(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&d(this).addClass("ui-datepicker-next-hover"))
})
}function j(n,l){d.extend(n,l);
for(var m in l){null==l[m]&&(n[m]=l[m])
}return n
}d.extend(d.ui,{datepicker:{version:"1.10.3"}});
var b,g="datepicker";
d.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv
},setDefaults:function(i){return j(this._defaults,i||{}),this
},_attachDatepicker:function(p,m){var o,q,l;
o=p.nodeName.toLowerCase(),q="div"===o||"span"===o,p.id||(this.uuid+=1,p.id="dp"+this.uuid),l=this._newInst(d(p),q),l.settings=d.extend({},m||{}),"input"===o?this._connectDatepicker(p,l):q&&this._inlineDatepicker(p,l)
},_newInst:function(m,l){var o=m[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");
return{id:o,input:m,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:l,dpDiv:l?f(d("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}
},_connectDatepicker:function(n,l){var m=d(n);
l.append=d([]),l.trigger=d([]),m.hasClass(this.markerClassName)||(this._attachments(m,l),m.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(l),d.data(n,g,l),l.settings.disabled&&this._disableDatepicker(n))
},_attachments:function(t,m){var p,v,l,q=this._get(m,"appendText"),u=this._get(m,"isRTL");
m.append&&m.append.remove(),q&&(m.append=d("<span class='"+this._appendClass+"'>"+q+"</span>"),t[u?"before":"after"](m.append)),t.unbind("focus",this._showDatepicker),m.trigger&&m.trigger.remove(),p=this._get(m,"showOn"),("focus"===p||"both"===p)&&t.focus(this._showDatepicker),("button"===p||"both"===p)&&(v=this._get(m,"buttonText"),l=this._get(m,"buttonImage"),m.trigger=d(this._get(m,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:l,alt:v,title:v}):d("<button type='button'></button>").addClass(this._triggerClass).html(l?d("<img/>").attr({src:l,alt:v,title:v}):v)),t[u?"before":"after"](m.trigger),m.trigger.click(function(){return d.datepicker._datepickerShowing&&d.datepicker._lastInput===t[0]?d.datepicker._hideDatepicker():d.datepicker._datepickerShowing&&d.datepicker._lastInput!==t[0]?(d.datepicker._hideDatepicker(),d.datepicker._showDatepicker(t[0])):d.datepicker._showDatepicker(t[0]),!1
}))
},_autoSize:function(o){if(this._get(o,"autoSize")&&!o.inline){var u,m,p,v,l=new Date(2009,11,20),q=this._get(o,"dateFormat");
q.match(/[DM]/)&&(u=function(i){for(m=0,p=0,v=0;
i.length>v;
v++){i[v].length>m&&(m=i[v].length,p=v)
}return p
},l.setMonth(u(this._get(o,q.match(/MM/)?"monthNames":"monthNamesShort"))),l.setDate(u(this._get(o,q.match(/DD/)?"dayNames":"dayNamesShort"))+20-l.getDay())),o.input.attr("size",this._formatDate(o,l).length)
}},_inlineDatepicker:function(n,l){var m=d(n);
m.hasClass(this.markerClassName)||(m.addClass(this.markerClassName).append(l.dpDiv),d.data(n,g,l),this._setDate(l,this._getDefaultDate(l),!0),this._updateDatepicker(l),this._updateAlternate(l),l.settings.disabled&&this._disableDatepicker(n),l.dpDiv.css("display","block"))
},_dialogDatepicker:function(v,r,A,y,n){var t,q,x,z,w,m=this._dialogInst;
return m||(this.uuid+=1,t="dp"+this.uuid,this._dialogInput=d("<input type='text' id='"+t+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),m=this._dialogInst=this._newInst(this._dialogInput,!1),m.settings={},d.data(this._dialogInput[0],g,m)),j(m.settings,y||{}),r=r&&r.constructor===Date?this._formatDate(m,r):r,this._dialogInput.val(r),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(q=document.documentElement.clientWidth,x=document.documentElement.clientHeight,z=document.documentElement.scrollLeft||document.body.scrollLeft,w=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[q/2-100+z,x/2-150+w]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),m.settings.onSelect=A,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),d.blockUI&&d.blockUI(this.dpDiv),d.data(this._dialogInput[0],g,m),this
},_destroyDatepicker:function(o){var l,m=d(o),p=d.data(o,g);
m.hasClass(this.markerClassName)&&(l=o.nodeName.toLowerCase(),d.removeData(o,g),"input"===l?(p.append.remove(),p.trigger.remove(),m.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===l||"span"===l)&&m.removeClass(this.markerClassName).empty())
},_enableDatepicker:function(p){var m,o,q=d(p),l=d.data(p,g);
q.hasClass(this.markerClassName)&&(m=p.nodeName.toLowerCase(),"input"===m?(p.disabled=!1,l.trigger.filter("button").each(function(){this.disabled=!1
}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===m||"span"===m)&&(o=q.children("."+this._inlineClass),o.children().removeClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=d.map(this._disabledInputs,function(i){return i===p?null:i
}))
},_disableDatepicker:function(p){var m,o,q=d(p),l=d.data(p,g);
q.hasClass(this.markerClassName)&&(m=p.nodeName.toLowerCase(),"input"===m?(p.disabled=!0,l.trigger.filter("button").each(function(){this.disabled=!0
}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===m||"span"===m)&&(o=q.children("."+this._inlineClass),o.children().addClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=d.map(this._disabledInputs,function(i){return i===p?null:i
}),this._disabledInputs[this._disabledInputs.length]=p)
},_isDisabledDatepicker:function(i){if(!i){return !1
}for(var l=0;
this._disabledInputs.length>l;
l++){if(this._disabledInputs[l]===i){return !0
}}return !1
},_getInst:function(m){try{return d.data(m,g)
}catch(l){throw"Missing instance data for this datepicker"
}},_optionDatepicker:function(p,t,n){var u,v,q,m,w=this._getInst(p);
return 2===arguments.length&&"string"==typeof t?"defaults"===t?d.extend({},d.datepicker._defaults):w?"all"===t?d.extend({},w.settings):this._get(w,t):null:(u=t||{},"string"==typeof t&&(u={},u[t]=n),w&&(this._curInst===w&&this._hideDatepicker(),v=this._getDateDatepicker(p,!0),q=this._getMinMaxDate(w,"min"),m=this._getMinMaxDate(w,"max"),j(w.settings,u),null!==q&&u.dateFormat!==h&&u.minDate===h&&(w.settings.minDate=this._formatDate(w,q)),null!==m&&u.dateFormat!==h&&u.maxDate===h&&(w.settings.maxDate=this._formatDate(w,m)),"disabled" in u&&(u.disabled?this._disableDatepicker(p):this._enableDatepicker(p)),this._attachments(d(p),w),this._autoSize(w),this._setDate(w,v),this._updateAlternate(w),this._updateDatepicker(w)),h)
},_changeDatepicker:function(m,n,l){this._optionDatepicker(m,n,l)
},_refreshDatepicker:function(i){var l=this._getInst(i);
l&&this._updateDatepicker(l)
},_setDateDatepicker:function(m,n){var l=this._getInst(m);
l&&(this._setDate(l,n),this._updateDatepicker(l),this._updateAlternate(l))
},_getDateDatepicker:function(m,n){var l=this._getInst(m);
return l&&!l.inline&&this._setDateFromField(l,n),l?this._getDate(l):null
},_doKeyDown:function(t){var m,p,v,l=d.datepicker._getInst(t.target),q=!0,u=l.dpDiv.is(".ui-datepicker-rtl");
if(l._keyEvent=!0,d.datepicker._datepickerShowing){switch(t.keyCode){case 9:d.datepicker._hideDatepicker(),q=!1;
break;
case 13:return v=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",l.dpDiv),v[0]&&d.datepicker._selectDay(t.target,l.selectedMonth,l.selectedYear,v[0]),m=d.datepicker._get(l,"onSelect"),m?(p=d.datepicker._formatDate(l),m.apply(l.input?l.input[0]:null,[p,l])):d.datepicker._hideDatepicker(),!1;
case 27:d.datepicker._hideDatepicker();
break;
case 33:d.datepicker._adjustDate(t.target,t.ctrlKey?-d.datepicker._get(l,"stepBigMonths"):-d.datepicker._get(l,"stepMonths"),"M");
break;
case 34:d.datepicker._adjustDate(t.target,t.ctrlKey?+d.datepicker._get(l,"stepBigMonths"):+d.datepicker._get(l,"stepMonths"),"M");
break;
case 35:(t.ctrlKey||t.metaKey)&&d.datepicker._clearDate(t.target),q=t.ctrlKey||t.metaKey;
break;
case 36:(t.ctrlKey||t.metaKey)&&d.datepicker._gotoToday(t.target),q=t.ctrlKey||t.metaKey;
break;
case 37:(t.ctrlKey||t.metaKey)&&d.datepicker._adjustDate(t.target,u?1:-1,"D"),q=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&d.datepicker._adjustDate(t.target,t.ctrlKey?-d.datepicker._get(l,"stepBigMonths"):-d.datepicker._get(l,"stepMonths"),"M");
break;
case 38:(t.ctrlKey||t.metaKey)&&d.datepicker._adjustDate(t.target,-7,"D"),q=t.ctrlKey||t.metaKey;
break;
case 39:(t.ctrlKey||t.metaKey)&&d.datepicker._adjustDate(t.target,u?-1:1,"D"),q=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&d.datepicker._adjustDate(t.target,t.ctrlKey?+d.datepicker._get(l,"stepBigMonths"):+d.datepicker._get(l,"stepMonths"),"M");
break;
case 40:(t.ctrlKey||t.metaKey)&&d.datepicker._adjustDate(t.target,7,"D"),q=t.ctrlKey||t.metaKey;
break;
default:q=!1
}}else{36===t.keyCode&&t.ctrlKey?d.datepicker._showDatepicker(this):q=!1
}q&&(t.preventDefault(),t.stopPropagation())
},_doKeyPress:function(m){var o,p,l=d.datepicker._getInst(m.target);
return d.datepicker._get(l,"constrainInput")?(o=d.datepicker._possibleChars(d.datepicker._get(l,"dateFormat")),p=String.fromCharCode(null==m.charCode?m.keyCode:m.charCode),m.ctrlKey||m.metaKey||" ">p||!o||o.indexOf(p)>-1):h
},_doKeyUp:function(o){var l,m=d.datepicker._getInst(o.target);
if(m.input.val()!==m.lastVal){try{l=d.datepicker.parseDate(d.datepicker._get(m,"dateFormat"),m.input?m.input.val():null,d.datepicker._getFormatConfig(m)),l&&(d.datepicker._setDateFromField(m),d.datepicker._updateAlternate(m),d.datepicker._updateDatepicker(m))
}catch(p){}}return !0
},_showDatepicker:function(v){if(v=v.target||v,"input"!==v.nodeName.toLowerCase()&&(v=d("input",v.parentNode)[0]),!d.datepicker._isDisabledDatepicker(v)&&d.datepicker._lastInput!==v){var p,t,n,u,w,q,m;
p=d.datepicker._getInst(v),d.datepicker._curInst&&d.datepicker._curInst!==p&&(d.datepicker._curInst.dpDiv.stop(!0,!0),p&&d.datepicker._datepickerShowing&&d.datepicker._hideDatepicker(d.datepicker._curInst.input[0])),t=d.datepicker._get(p,"beforeShow"),n=t?t.apply(v,[v,p]):{},n!==!1&&(j(p.settings,n),p.lastVal=null,d.datepicker._lastInput=v,d.datepicker._setDateFromField(p),d.datepicker._inDialog&&(v.value=""),d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(v),d.datepicker._pos[1]+=v.offsetHeight),u=!1,d(v).parents().each(function(){return u|="fixed"===d(this).css("position"),!u
}),w={left:d.datepicker._pos[0],top:d.datepicker._pos[1]},d.datepicker._pos=null,p.dpDiv.empty(),p.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),d.datepicker._updateDatepicker(p),w=d.datepicker._checkOffset(p,w,u),p.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":u?"fixed":"absolute",display:"none",left:w.left+"px",top:w.top+"px"}),p.inline||(q=d.datepicker._get(p,"showAnim"),m=d.datepicker._get(p,"duration"),p.dpDiv.zIndex(d(v).zIndex()+1),d.datepicker._datepickerShowing=!0,d.effects&&d.effects.effect[q]?p.dpDiv.show(q,d.datepicker._get(p,"showOptions"),m):p.dpDiv[q||"show"](q?m:null),d.datepicker._shouldFocusInput(p)&&p.input.focus(),d.datepicker._curInst=p))
}},_updateDatepicker:function(p){this.maxRows=4,b=p,p.dpDiv.empty().append(this._generateHTML(p)),this._attachHandlers(p),p.dpDiv.find("."+this._dayOverClass+" a").mouseover();
var l,m=this._getNumberOfMonths(p),q=m[1],o=17;
p.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),q>1&&p.dpDiv.addClass("ui-datepicker-multi-"+q).css("width",o*q+"em"),p.dpDiv[(1!==m[0]||1!==m[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),p.dpDiv[(this._get(p,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),p===d.datepicker._curInst&&d.datepicker._datepickerShowing&&d.datepicker._shouldFocusInput(p)&&p.input.focus(),p.yearshtml&&(l=p.yearshtml,setTimeout(function(){l===p.yearshtml&&p.yearshtml&&p.dpDiv.find("select.ui-datepicker-year:first").replaceWith(p.yearshtml),l=p.yearshtml=null
},0))
},_shouldFocusInput:function(i){return i.input&&i.input.is(":visible")&&!i.input.is(":disabled")&&!i.input.is(":focus")
},_checkOffset:function(w,u,y){var q=w.dpDiv.outerWidth(),x=w.dpDiv.outerHeight(),m=w.input?w.input.outerWidth():0,p=w.input?w.input.outerHeight():0,v=document.documentElement.clientWidth+(y?0:d(document).scrollLeft()),t=document.documentElement.clientHeight+(y?0:d(document).scrollTop());
return u.left-=this._get(w,"isRTL")?q-m:0,u.left-=y&&u.left===w.input.offset().left?d(document).scrollLeft():0,u.top-=y&&u.top===w.input.offset().top+p?d(document).scrollTop():0,u.left-=Math.min(u.left,u.left+q>v&&v>q?Math.abs(u.left+q-v):0),u.top-=Math.min(u.top,u.top+x>t&&t>x?Math.abs(x+p):0),u
},_findPos:function(o){for(var l,m=this._getInst(o),p=this._get(m,"isRTL");
o&&("hidden"===o.type||1!==o.nodeType||d.expr.filters.hidden(o));
){o=o[p?"previousSibling":"nextSibling"]
}return l=d(o).offset(),[l.left,l.top]
},_hideDatepicker:function(q){var m,p,t,l,r=this._curInst;
!r||q&&r!==d.data(q,g)||this._datepickerShowing&&(m=this._get(r,"showAnim"),p=this._get(r,"duration"),t=function(){d.datepicker._tidyDialog(r)
},d.effects&&(d.effects.effect[m]||d.effects[m])?r.dpDiv.hide(m,d.datepicker._get(r,"showOptions"),p,t):r.dpDiv["slideDown"===m?"slideUp":"fadeIn"===m?"fadeOut":"hide"](m?p:null,t),m||t(),this._datepickerShowing=!1,l=this._get(r,"onClose"),l&&l.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv))),this._inDialog=!1)
},_tidyDialog:function(i){i.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
},_checkExternalClick:function(n){if(d.datepicker._curInst){var l=d(n.target),m=d.datepicker._getInst(l[0]);
(l[0].id!==d.datepicker._mainDivId&&0===l.parents("#"+d.datepicker._mainDivId).length&&!l.hasClass(d.datepicker.markerClassName)&&!l.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)||l.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!==m)&&d.datepicker._hideDatepicker()
}},_adjustDate:function(p,m,o){var q=d(p),l=this._getInst(q[0]);
this._isDisabledDatepicker(q[0])||(this._adjustInstDate(l,m+("M"===o?this._get(l,"showCurrentAtPos"):0),o),this._updateDatepicker(l))
},_gotoToday:function(o){var l,m=d(o),p=this._getInst(m[0]);
this._get(p,"gotoCurrent")&&p.currentDay?(p.selectedDay=p.currentDay,p.drawMonth=p.selectedMonth=p.currentMonth,p.drawYear=p.selectedYear=p.currentYear):(l=new Date,p.selectedDay=l.getDate(),p.drawMonth=p.selectedMonth=l.getMonth(),p.drawYear=p.selectedYear=l.getFullYear()),this._notifyChange(p),this._adjustDate(m)
},_selectMonthYear:function(p,m,o){var q=d(p),l=this._getInst(q[0]);
l["selected"+("M"===o?"Month":"Year")]=l["draw"+("M"===o?"Month":"Year")]=parseInt(m.options[m.selectedIndex].value,10),this._notifyChange(l),this._adjustDate(q)
},_selectDay:function(q,m,o,t){var l,p=d(q);
d(t).hasClass(this._unselectableClass)||this._isDisabledDatepicker(p[0])||(l=this._getInst(p[0]),l.selectedDay=l.currentDay=d("a",t).html(),l.selectedMonth=l.currentMonth=m,l.selectedYear=l.currentYear=o,this._selectDate(q,this._formatDate(l,l.currentDay,l.currentMonth,l.currentYear)))
},_clearDate:function(m){var l=d(m);
this._selectDate(l,"")
},_selectDate:function(p,m){var o,q=d(p),l=this._getInst(q[0]);
m=null!=m?m:this._formatDate(l),l.input&&l.input.val(m),this._updateAlternate(l),o=this._get(l,"onSelect"),o?o.apply(l.input?l.input[0]:null,[m,l]):l.input&&l.input.trigger("change"),l.inline?this._updateDatepicker(l):(this._hideDatepicker(),this._lastInput=l.input[0],"object"!=typeof l.input[0]&&l.input.focus(),this._lastInput=null)
},_updateAlternate:function(p){var m,o,q,l=this._get(p,"altField");
l&&(m=this._get(p,"altFormat")||this._get(p,"dateFormat"),o=this._getDate(p),q=this.formatDate(m,o,this._getFormatConfig(p)),d(l).each(function(){d(this).val(q)
}))
},noWeekends:function(i){var l=i.getDay();
return[l>0&&6>l,""]
},iso8601Week:function(m){var n,l=new Date(m.getTime());
return l.setDate(l.getDate()+4-(l.getDay()||7)),n=l.getTime(),l.setMonth(0),l.setDate(1),Math.floor(Math.round((n-l)/86400000)/7)+1
},parseDate:function(M,E,I){if(null==M||null==E){throw"Invalid arguments"
}if(E="object"==typeof E?""+E:E+"",""===E){return null
}var T,F,H,N,K=0,R=(I?I.shortYearCutoff:null)||this._defaults.shortYearCutoff,B="string"!=typeof R?R:(new Date).getFullYear()%100+parseInt(R,10),Q=(I?I.dayNamesShort:null)||this._defaults.dayNamesShort,G=(I?I.dayNames:null)||this._defaults.dayNames,P=(I?I.monthNamesShort:null)||this._defaults.monthNamesShort,J=(I?I.monthNames:null)||this._defaults.monthNames,O=-1,A=-1,U=-1,S=-1,q=!1,t=function(i){var l=M.length>T+1&&M.charAt(T+1)===i;
return l&&T++,l
},L=function(o){var p=t(o),m="@"===o?14:"!"===o?20:"y"===o&&p?4:"o"===o?3:2,r=RegExp("^\\d{1,"+m+"}"),l=E.substring(K).match(r);
if(!l){throw"Missing number at position "+K
}return K+=l[0].length,parseInt(l[0],10)
},z=function(m,u,l){var p=-1,s=d.map(t(m)?l:u,function(i,n){return[[n,i]]
}).sort(function(i,n){return -(i[1].length-n[1].length)
});
if(d.each(s,function(r,o){var v=o[1];
return E.substr(K,v.length).toLowerCase()===v.toLowerCase()?(p=o[0],K+=v.length,!1):h
}),-1!==p){return p+1
}throw"Unknown name at position "+K
},C=function(){if(E.charAt(K)!==M.charAt(T)){throw"Unexpected literal at position "+K
}K++
};
for(T=0;
M.length>T;
T++){if(q){"'"!==M.charAt(T)||t("'")?C():q=!1
}else{switch(M.charAt(T)){case"d":U=L("d");
break;
case"D":z("D",Q,G);
break;
case"o":S=L("o");
break;
case"m":A=L("m");
break;
case"M":A=z("M",P,J);
break;
case"y":O=L("y");
break;
case"@":N=new Date(L("@")),O=N.getFullYear(),A=N.getMonth()+1,U=N.getDate();
break;
case"!":N=new Date((L("!")-this._ticksTo1970)/10000),O=N.getFullYear(),A=N.getMonth()+1,U=N.getDate();
break;
case"'":t("'")?C():q=!0;
break;
default:C()
}}}if(E.length>K&&(H=E.substr(K),!/^\s+/.test(H))){throw"Extra/unparsed characters found in date: "+H
}if(-1===O?O=(new Date).getFullYear():100>O&&(O+=(new Date).getFullYear()-(new Date).getFullYear()%100+(B>=O?0:-100)),S>-1){for(A=1,U=S;
;
){if(F=this._getDaysInMonth(O,A-1),F>=U){break
}A++,U-=F
}}if(N=this._daylightSavingAdjust(new Date(O,A-1,U)),N.getFullYear()!==O||N.getMonth()+1!==A||N.getDate()!==U){throw"Invalid date"
}return N
},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:10000000*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(D,y,w){if(!y){return""
}var E,q=(w?w.dayNamesShort:null)||this._defaults.dayNamesShort,B=(w?w.dayNames:null)||this._defaults.dayNames,m=(w?w.monthNamesShort:null)||this._defaults.monthNamesShort,p=(w?w.monthNames:null)||this._defaults.monthNames,x=function(n){var l=D.length>E+1&&D.charAt(E+1)===n;
return l&&E++,l
},v=function(n,r,l){var o=""+r;
if(x(n)){for(;
l>o.length;
){o="0"+o
}}return o
},A=function(n,r,l,o){return x(n)?o[r]:l[r]
},C="",z=!1;
if(y){for(E=0;
D.length>E;
E++){if(z){"'"!==D.charAt(E)||x("'")?C+=D.charAt(E):z=!1
}else{switch(D.charAt(E)){case"d":C+=v("d",y.getDate(),2);
break;
case"D":C+=A("D",y.getDay(),q,B);
break;
case"o":C+=v("o",Math.round((new Date(y.getFullYear(),y.getMonth(),y.getDate()).getTime()-new Date(y.getFullYear(),0,0).getTime())/86400000),3);
break;
case"m":C+=v("m",y.getMonth()+1,2);
break;
case"M":C+=A("M",y.getMonth(),m,p);
break;
case"y":C+=x("y")?y.getFullYear():(10>y.getYear()%100?"0":"")+y.getYear()%100;
break;
case"@":C+=y.getTime();
break;
case"!":C+=10000*y.getTime()+this._ticksTo1970;
break;
case"'":x("'")?C+="'":z=!0;
break;
default:C+=D.charAt(E)
}}}}return C
},_possibleChars:function(m){var p,l="",o=!1,q=function(n){var r=m.length>p+1&&m.charAt(p+1)===n;
return r&&p++,r
};
for(p=0;
m.length>p;
p++){if(o){"'"!==m.charAt(p)||q("'")?l+=m.charAt(p):o=!1
}else{switch(m.charAt(p)){case"d":case"m":case"y":case"@":l+="0123456789";
break;
case"D":case"M":return null;
case"'":q("'")?l+="'":o=!0;
break;
default:l+=m.charAt(p)
}}}return l
},_get:function(m,l){return m.settings[l]!==h?m.settings[l]:this._defaults[l]
},_setDateFromField:function(p,v){if(p.input.val()!==p.lastVal){var m=this._get(p,"dateFormat"),q=p.lastVal=p.input?p.input.val():null,x=this._getDefaultDate(p),l=x,u=this._getFormatConfig(p);
try{l=this.parseDate(m,q,u)||x
}catch(w){q=v?"":q
}p.selectedDay=l.getDate(),p.drawMonth=p.selectedMonth=l.getMonth(),p.drawYear=p.selectedYear=l.getFullYear(),p.currentDay=q?l.getDate():0,p.currentMonth=q?l.getMonth():0,p.currentYear=q?l.getFullYear():0,this._adjustInstDate(p)
}},_getDefaultDate:function(i){return this._restrictMinMax(i,this._determineDate(i,this._get(i,"defaultDate"),new Date))
},_determineDate:function(q,m,o){var t=function(i){var n=new Date;
return n.setDate(n.getDate()+i),n
},l=function(w){try{return d.datepicker.parseDate(d.datepicker._get(q,"dateFormat"),w,d.datepicker._getFormatConfig(q))
}catch(y){}for(var B=(w.toLowerCase().match(/^c/)?d.datepicker._getDate(q):null)||new Date,v=B.getFullYear(),z=B.getMonth(),A=B.getDate(),x=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=x.exec(w);
u;
){switch(u[2]||"d"){case"d":case"D":A+=parseInt(u[1],10);
break;
case"w":case"W":A+=7*parseInt(u[1],10);
break;
case"m":case"M":z+=parseInt(u[1],10),A=Math.min(A,d.datepicker._getDaysInMonth(v,z));
break;
case"y":case"Y":v+=parseInt(u[1],10),A=Math.min(A,d.datepicker._getDaysInMonth(v,z))
}u=x.exec(w)
}return new Date(v,z,A)
},p=null==m||""===m?o:"string"==typeof m?l(m):"number"==typeof m?isNaN(m)?o:t(m):new Date(m.getTime());
return p=p&&"Invalid Date"==""+p?o:p,p&&(p.setHours(0),p.setMinutes(0),p.setSeconds(0),p.setMilliseconds(0)),this._daylightSavingAdjust(p)
},_daylightSavingAdjust:function(i){return i?(i.setHours(i.getHours()>12?i.getHours()+2:0),i):null
},_setDate:function(o,u,m){var p=!u,v=o.selectedMonth,l=o.selectedYear,q=this._restrictMinMax(o,this._determineDate(o,u,new Date));
o.selectedDay=o.currentDay=q.getDate(),o.drawMonth=o.selectedMonth=o.currentMonth=q.getMonth(),o.drawYear=o.selectedYear=o.currentYear=q.getFullYear(),v===o.selectedMonth&&l===o.selectedYear||m||this._notifyChange(o),this._adjustInstDate(o),o.input&&o.input.val(p?"":this._formatDate(o))
},_getDate:function(i){var l=!i.currentYear||i.input&&""===i.input.val()?null:this._daylightSavingAdjust(new Date(i.currentYear,i.currentMonth,i.currentDay));
return l
},_attachHandlers:function(n){var l=this._get(n,"stepMonths"),m="#"+n.id.replace(/\\\\/g,"\\");
n.dpDiv.find("[data-handler]").map(function(){var i={prev:function(){d.datepicker._adjustDate(m,-l,"M")
},next:function(){d.datepicker._adjustDate(m,+l,"M")
},hide:function(){d.datepicker._hideDatepicker()
},today:function(){d.datepicker._gotoToday(m)
},selectDay:function(){return d.datepicker._selectDay(m,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1
},selectMonth:function(){return d.datepicker._selectMonthYear(m,this,"M"),!1
},selectYear:function(){return d.datepicker._selectMonthYear(m,this,"Y"),!1
}};
d(this).bind(this.getAttribute("data-event"),i[this.getAttribute("data-handler")])
})
},_generateHTML:function(aJ){var aY,aU,aK,aP,a2,aL,aO,aV,aR,a0,aI,aZ,aN,aX,aQ,aW,aH,a3,a1,aE,aF,aS,aG,ay,ah,az,ao,ai,an,at,al,aB,aD,au,ax,aw,am,ae,aT,aj=new Date,ap=this._daylightSavingAdjust(new Date(aj.getFullYear(),aj.getMonth(),aj.getDate())),ab=this._get(aJ,"isRTL"),aA=this._get(aJ,"showButtonPanel"),ar=this._get(aJ,"hideIfNoPrevNext"),aq=this._get(aJ,"navigationAsDateFormat"),ak=this._getNumberOfMonths(aJ),af=this._get(aJ,"showCurrentAtPos"),ag=this._get(aJ,"stepMonths"),aM=1!==ak[0]||1!==ak[1],ac=this._daylightSavingAdjust(aJ.currentDay?new Date(aJ.currentYear,aJ.currentMonth,aJ.currentDay):new Date(9999,9,9)),av=this._getMinMaxDate(aJ,"min"),aC=this._getMinMaxDate(aJ,"max"),aa=aJ.drawMonth-af,ad=aJ.drawYear;
if(0>aa&&(aa+=12,ad--),aC){for(aY=this._daylightSavingAdjust(new Date(aC.getFullYear(),aC.getMonth()-ak[0]*ak[1]+1,aC.getDate())),aY=av&&av>aY?av:aY;
this._daylightSavingAdjust(new Date(ad,aa,1))>aY;
){aa--,0>aa&&(aa=11,ad--)
}}for(aJ.drawMonth=aa,aJ.drawYear=ad,aU=this._get(aJ,"prevText"),aU=aq?this.formatDate(aU,this._daylightSavingAdjust(new Date(ad,aa-ag,1)),this._getFormatConfig(aJ)):aU,aK=this._canAdjustMonth(aJ,-1,ad,aa)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+aU+"'><span class='ui-icon ui-icon-circle-triangle-"+(ab?"e":"w")+"'>"+aU+"</span></a>":ar?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+aU+"'><span class='ui-icon ui-icon-circle-triangle-"+(ab?"e":"w")+"'>"+aU+"</span></a>",aP=this._get(aJ,"nextText"),aP=aq?this.formatDate(aP,this._daylightSavingAdjust(new Date(ad,aa+ag,1)),this._getFormatConfig(aJ)):aP,a2=this._canAdjustMonth(aJ,1,ad,aa)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+aP+"'><span class='ui-icon ui-icon-circle-triangle-"+(ab?"w":"e")+"'>"+aP+"</span></a>":ar?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+aP+"'><span class='ui-icon ui-icon-circle-triangle-"+(ab?"w":"e")+"'>"+aP+"</span></a>",aL=this._get(aJ,"currentText"),aO=this._get(aJ,"gotoCurrent")&&aJ.currentDay?ac:ap,aL=aq?this.formatDate(aL,aO,this._getFormatConfig(aJ)):aL,aV=aJ.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(aJ,"closeText")+"</button>",aR=aA?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(ab?aV:"")+(this._isInRange(aJ,aO)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+aL+"</button>":"")+(ab?"":aV)+"</div>":"",a0=parseInt(this._get(aJ,"firstDay"),10),a0=isNaN(a0)?0:a0,aI=this._get(aJ,"showWeek"),aZ=this._get(aJ,"dayNames"),aN=this._get(aJ,"dayNamesMin"),aX=this._get(aJ,"monthNames"),aQ=this._get(aJ,"monthNamesShort"),aW=this._get(aJ,"beforeShowDay"),aH=this._get(aJ,"showOtherMonths"),a3=this._get(aJ,"selectOtherMonths"),a1=this._getDefaultDate(aJ),aE="",aS=0;
ak[0]>aS;
aS++){for(aG="",this.maxRows=4,ay=0;
ak[1]>ay;
ay++){if(ah=this._daylightSavingAdjust(new Date(ad,aa,aJ.selectedDay)),az=" ui-corner-all",ao="",aM){if(ao+="<div class='ui-datepicker-group",ak[1]>1){switch(ay){case 0:ao+=" ui-datepicker-group-first",az=" ui-corner-"+(ab?"right":"left");
break;
case ak[1]-1:ao+=" ui-datepicker-group-last",az=" ui-corner-"+(ab?"left":"right");
break;
default:ao+=" ui-datepicker-group-middle",az=""
}}ao+="'>"
}for(ao+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+az+"'>"+(/all|left/.test(az)&&0===aS?ab?a2:aK:"")+(/all|right/.test(az)&&0===aS?ab?aK:a2:"")+this._generateMonthYearHeader(aJ,aa,ad,av,aC,aS>0||ay>0,aX,aQ)+"</div><table class='ui-datepicker-calendar'><thead><tr>",ai=aI?"<th class='ui-datepicker-week-col'>"+this._get(aJ,"weekHeader")+"</th>":"",aF=0;
7>aF;
aF++){an=(aF+a0)%7,ai+="<th"+((aF+a0+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+aZ[an]+"'>"+aN[an]+"</span></th>"
}for(ao+=ai+"</tr></thead><tbody>",at=this._getDaysInMonth(ad,aa),ad===aJ.selectedYear&&aa===aJ.selectedMonth&&(aJ.selectedDay=Math.min(aJ.selectedDay,at)),al=(this._getFirstDayOfMonth(ad,aa)-a0+7)%7,aB=Math.ceil((al+at)/7),aD=aM?this.maxRows>aB?this.maxRows:aB:aB,this.maxRows=aD,au=this._daylightSavingAdjust(new Date(ad,aa,1-al)),ax=0;
aD>ax;
ax++){for(ao+="<tr>",aw=aI?"<td class='ui-datepicker-week-col'>"+this._get(aJ,"calculateWeek")(au)+"</td>":"",aF=0;
7>aF;
aF++){am=aW?aW.apply(aJ.input?aJ.input[0]:null,[au]):[!0,""],ae=au.getMonth()!==aa,aT=ae&&!a3||!am[0]||av&&av>au||aC&&au>aC,aw+="<td class='"+((aF+a0+6)%7>=5?" ui-datepicker-week-end":"")+(ae?" ui-datepicker-other-month":"")+(au.getTime()===ah.getTime()&&aa===aJ.selectedMonth&&aJ._keyEvent||a1.getTime()===au.getTime()&&a1.getTime()===ah.getTime()?" "+this._dayOverClass:"")+(aT?" "+this._unselectableClass+" ui-state-disabled":"")+(ae&&!aH?"":" "+am[1]+(au.getTime()===ac.getTime()?" "+this._currentClass:"")+(au.getTime()===ap.getTime()?" ui-datepicker-today":""))+"'"+(ae&&!aH||!am[2]?"":" title='"+am[2].replace(/'/g,"&#39;")+"'")+(aT?"":" data-handler='selectDay' data-event='click' data-month='"+au.getMonth()+"' data-year='"+au.getFullYear()+"'")+">"+(ae&&!aH?"&#xa0;":aT?"<span class='ui-state-default'>"+au.getDate()+"</span>":"<a class='ui-state-default"+(au.getTime()===ap.getTime()?" ui-state-highlight":"")+(au.getTime()===ac.getTime()?" ui-state-active":"")+(ae?" ui-priority-secondary":"")+"' href='#'>"+au.getDate()+"</a>")+"</td>",au.setDate(au.getDate()+1),au=this._daylightSavingAdjust(au)
}ao+=aw+"</tr>"
}aa++,aa>11&&(aa=0,ad++),ao+="</tbody></table>"+(aM?"</div>"+(ak[0]>0&&ay===ak[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),aG+=ao
}aE+=aG
}return aE+=aR,aJ._keyEvent=!1,aE
},_generateMonthYearHeader:function(z,L,H,A,E,P,B,D){var I,G,N,x,M,C,K,F,J=this._get(z,"changeMonth"),w=this._get(z,"changeYear"),Q=this._get(z,"showMonthAfterYear"),O="<div class='ui-datepicker-title'>",q="";
if(P||!J){q+="<span class='ui-datepicker-month'>"+B[L]+"</span>"
}else{for(I=A&&A.getFullYear()===H,G=E&&E.getFullYear()===H,q+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",N=0;
12>N;
N++){(!I||N>=A.getMonth())&&(!G||E.getMonth()>=N)&&(q+="<option value='"+N+"'"+(N===L?" selected='selected'":"")+">"+D[N]+"</option>")
}q+="</select>"
}if(Q||(O+=q+(!P&&J&&w?"":"&#xa0;")),!z.yearshtml){if(z.yearshtml="",P||!w){O+="<span class='ui-datepicker-year'>"+H+"</span>"
}else{for(x=this._get(z,"yearRange").split(":"),M=(new Date).getFullYear(),C=function(i){var l=i.match(/c[+\-].*/)?H+parseInt(i.substring(1),10):i.match(/[+\-].*/)?M+parseInt(i,10):parseInt(i,10);
return isNaN(l)?M:l
},K=C(x[0]),F=Math.max(K,C(x[1]||"")),K=A?Math.max(K,A.getFullYear()):K,F=E?Math.min(F,E.getFullYear()):F,z.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
F>=K;
K++){z.yearshtml+="<option value='"+K+"'"+(K===H?" selected='selected'":"")+">"+K+"</option>"
}z.yearshtml+="</select>",O+=z.yearshtml,z.yearshtml=null
}}return O+=this._get(z,"yearSuffix"),Q&&(O+=(!P&&J&&w?"":"&#xa0;")+q),O+="</div>"
},_adjustInstDate:function(o,u,m){var p=o.drawYear+("Y"===m?u:0),v=o.drawMonth+("M"===m?u:0),l=Math.min(o.selectedDay,this._getDaysInMonth(p,v))+("D"===m?u:0),q=this._restrictMinMax(o,this._daylightSavingAdjust(new Date(p,v,l)));
o.selectedDay=q.getDate(),o.drawMonth=o.selectedMonth=q.getMonth(),o.drawYear=o.selectedYear=q.getFullYear(),("M"===m||"Y"===m)&&this._notifyChange(o)
},_restrictMinMax:function(m,p){var l=this._getMinMaxDate(m,"min"),o=this._getMinMaxDate(m,"max"),q=l&&l>p?l:p;
return o&&q>o?o:q
},_notifyChange:function(i){var l=this._get(i,"onChangeMonthYear");
l&&l.apply(i.input?i.input[0]:null,[i.selectedYear,i.selectedMonth+1,i])
},_getNumberOfMonths:function(i){var l=this._get(i,"numberOfMonths");
return null==l?[1,1]:"number"==typeof l?[1,l]:l
},_getMinMaxDate:function(i,l){return this._determineDate(i,this._get(i,l+"Date"),null)
},_getDaysInMonth:function(i,l){return 32-this._daylightSavingAdjust(new Date(i,l,32)).getDate()
},_getFirstDayOfMonth:function(i,l){return new Date(i,l,1).getDay()
},_canAdjustMonth:function(o,q,m,p){var r=this._getNumberOfMonths(o),l=this._daylightSavingAdjust(new Date(m,p+(0>q?q:r[0]*r[1]),1));
return 0>q&&l.setDate(this._getDaysInMonth(l.getFullYear(),l.getMonth())),this._isInRange(o,l)
},_isInRange:function(x,v){var q,y,p=this._getMinMaxDate(x,"min"),w=this._getMinMaxDate(x,"max"),l=null,m=null,u=this._get(x,"yearRange");
return u&&(q=u.split(":"),y=(new Date).getFullYear(),l=parseInt(q[0],10),m=parseInt(q[1],10),q[0].match(/[+\-].*/)&&(l+=y),q[1].match(/[+\-].*/)&&(m+=y)),(!p||v.getTime()>=p.getTime())&&(!w||v.getTime()<=w.getTime())&&(!l||v.getFullYear()>=l)&&(!m||m>=v.getFullYear())
},_getFormatConfig:function(i){var l=this._get(i,"shortYearCutoff");
return l="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),{shortYearCutoff:l,dayNamesShort:this._get(i,"dayNamesShort"),dayNames:this._get(i,"dayNames"),monthNamesShort:this._get(i,"monthNamesShort"),monthNames:this._get(i,"monthNames")}
},_formatDate:function(m,p,l,o){p||(m.currentDay=m.selectedDay,m.currentMonth=m.selectedMonth,m.currentYear=m.selectedYear);
var q=p?"object"==typeof p?p:this._daylightSavingAdjust(new Date(o,l,p)):this._daylightSavingAdjust(new Date(m.currentYear,m.currentMonth,m.currentDay));
return this.formatDate(this._get(m,"dateFormat"),q,this._getFormatConfig(m))
}}),d.fn.datepicker=function(m){if(!this.length){return this
}d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick),d.datepicker.initialized=!0),0===d("#"+d.datepicker._mainDivId).length&&d("body").append(d.datepicker.dpDiv);
var l=Array.prototype.slice.call(arguments,1);
return"string"!=typeof m||"isDisabled"!==m&&"getDate"!==m&&"widget"!==m?"option"===m&&2===arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+m+"Datepicker"].apply(d.datepicker,[this[0]].concat(l)):this.each(function(){"string"==typeof m?d.datepicker["_"+m+"Datepicker"].apply(d.datepicker,[this].concat(l)):d.datepicker._attachDatepicker(this,m)
}):d.datepicker["_"+m+"Datepicker"].apply(d.datepicker,[this[0]].concat(l))
},d.datepicker=new c,d.datepicker.initialized=!1,d.datepicker.uuid=(new Date).getTime(),d.datepicker.version="1.10.3"
})(jQuery);
(function(L,G,P){function E(b){return Q(b)?new aa(b):new R(b)
}function R(b){return this._data=b,this
}function aa(b){return this._data=b,this
}function V(b){return Q(b)?[b]:b
}function X(b){if(typeof b!="number"){throw"Invalid index."
}}function q(p,d){p=Q(p)?p:[p];
for(var c,b=d,h=b,f=p.length,g=[],l=0;
l<f;
l++){if(c=p[l],S(c)){C.apply(g,[g.length,1].concat(q(c.call(d,d),d)));
continue
}else{if(""+c!==c){d=h=c,h!==b&&g.push(b=h);
continue
}}h!==b&&g.push(b=h),g.push(c)
}return g
}function W(f,c){var d,b;
for(d in f){b=!0;
break
}b||delete D[c]
}function O(f,c){if(!(f.data&&f.data.off)){var d=c.oldValue,b=f.data;
f.type===Z?b.cb.array(f,c):(b.prop==="*"||b.prop===c.path)&&(typeof d===J&&U(V(d),b.path,b.cb),typeof(d=c.value)===J&&T(V(d),b.path,b.cb),b.cb(f,c))
}}function T(){function f(b,n,r,s){var g=B(ai),v=V(ai);
if(F=0,ao||s){g&&(G(v).off(b,O),F&&delete F[G.data(ai,"obId")])
}else{if(y=g&&G._data(ai)){for(y=y&&y.events,y=y&&y[r?Z:N],al=y&&y.length;
al--;
){if((c=y[al].data)&&c.cb===ad){if(r){return
}n==="*"&&c.prop!==n&&(G(ai).off(b+"."+c.prop,O),F&&delete F[G.data(ai,"obId")])
}}}G(v).on(b,null,r?{cb:ad}:{path:n,prop:t,cb:ad},O);
ap&&(ap[G.data(ai,"obId")||G.data(ai,"obId",Y++)]=ai)
}}function p(o,g){o._ob=i(o,l);
var b=l;
return function(){var n=o._ob,r=g.length;
typeof n===J&&(af(n,!0),r&&U(V(n),g,ad,i)),n=o._ob=i(o,b),typeof n===J&&(af(n),r&&T(V(n),g,ad,i,b))
}
}function af(g,b){if(ad&&ad.array&&Q(g)){var n=ai;
ai=g,f(Z+".observe.obs"+ad._bnd,P,!0,b),ai=n
}}var ak,aq,t,ag,d,ai,ao,ad,an,al,c,y,i,h,ap,ac,ab,ae=1,u=A,am=z.apply([],arguments),aj=am.pop(),l=am[0],ah=""+l!==l?am.shift():P,w=am.length;
for(l=ah,S(aj)?ad=aj:(aj===!0?ao=aj:aj&&(l=aj,ae=0),aj=am[w-1],(w&&aj===P||S(aj))&&(ad=am.pop(),w--)),S(am[w-1])&&(i=ad,ad=am.pop(),w--),u+=ao?ad?".obs"+ad._bnd:"":".obs"+(an=ad._bnd=ad._bnd||m++),ao&&w===0&&ah&&G(ah).off(A,O),ao||(ap=D[an]=D[an]||{}),ac=0,ak=0;
ak<w;
ak++){if(ag=am[ak],af(ai,ao),ai=ah,""+ag===ag){if(aq=ag.split("^"),aq[1]&&(ac=aq[0].split(".").length,ag=aq.join("."),ac=ag.split(".").length-ac),i&&(h=i(ag,ah))){w+=h.length-1,C.apply(am,[ak--,1].concat(h));
continue
}aq=ag.split(".")
}else{ae&&!S(ag)&&(ag._jsvOb&&(ao||(ag._cb=ab=p(ag,am.slice(ak+1)),ag._rt=l,ab._bnd=ad._bnd),T(ag._rt,am.slice(0,ak),ag._cb,i,ao),ag=ag._ob),ai=ag),ah=ag,aq=[ah]
}while(ai&&typeof ai=="object"&&(t=aq.shift())!==P){if(""+t===t){if(t===""){continue
}if(aq.length<ac+1&&!ai.nodeType){if(!ao&&(y=B(ai)&&G._data(ai))){for(y=y.events,y=y&&y.propertyChange,al=y&&y.length;
al--;
){if(c=y[al].data,c&&c.cb===ad&&(c.prop===t&&c.path===aq.join(".")||c.prop==="*")){break
}}if(al>-1){ai=ai[t];
continue
}}if(t==="*"){S(ai)?(d=ai.depends)&&T(d,ad,ao||l):f(u,t);
break
}else{!t||S(d=ai[t])&&d.depends||f(u+"."+t,aq.join("."))
}}t=t?ai[t]:ai
}if(S(t)){(d=t.depends)&&T(ai,q(d,ai),ad,i,ao||V(l));
break
}ai=t
}}return af(ai,ao),an&&W(ap,an),{cbId:an,bnd:ap,leaf:ai}
}function U(){return[].push.call(arguments,!0),T.apply(this,arguments)
}if(!G){throw"requires jQuery or JsRender"
}if(!G.observable){var F,j,K,I,x=G.event.special,H=G.views?G.views.sub:{},C=[].splice,z=[].concat,Q=G.isArray,M=G.expando,J="object",N=H.propChng=H.propChng||"propertyChange",Z=H.arrChng=H.arrChng||"arrayChange",D=H._cbBnds=H._cbBnds||{},A=N+".observe",S=G.isFunction,Y=1,m=1,B=G.hasData;
G.observable=E,E.Object=R,E.Array=aa,E.observe=T,E.unobserve=U,R.prototype={_data:null,data:function(){return this._data
},observe:function(c,b){return T(this._data,c,b)
},unobserve:function(c,b){return U(this._data,c,b)
},setProperty:function(p,c,g){var b,d,l,h=this,i=h._data;
if(p=p||"",i){if(Q(p)){for(b=p.length;
b--;
){d=p[b],h.setProperty(d.name,d.value,g===P||g)
}}else{if(""+p!==p){for(b in p){h.setProperty(b,p[b],c)
}}else{if(p.indexOf(M)<0){for(l=p.split(".");
i&&l.length>1;
){i=i[l.shift()]
}h._setProperty(i,l.join("."),c,g)
}}}}return h
},_setProperty:function(l,d,c,f){var g,h,b=d?l[d]:l;
S(b)&&b.set&&(h=b,g=b.set===!0?b:b.set,b=b.call(l)),(b!==c||f&&b!=c)&&(!(b instanceof Date)||b>c||b<c)&&(g?(g.call(l,c),c=h.call(l)):l[d]=c,this._trigger(l,{path:d,value:c,oldValue:b}))
},_trigger:function(c,b){G(c).triggerHandler(N,b)
}},aa.prototype={_data:null,data:function(){return this._data
},insert:function(c,b){return X(c),arguments.length>1&&(b=Q(b)?b:[b],b.length&&this._insert(c,b)),this
},_insert:function(c,b){I=this._data,K=I.length,C.apply(I,[c,0].concat(b)),this._trigger({change:"insert",index:c,items:b})
},remove:function(d,b){if(X(d),b=b===P||b===null?1:b,b&&d>-1){var c=this._data.slice(d,d+b);
b=c.length,b&&this._remove(d,b,c)
}return this
},_remove:function(d,c,b){I=this._data,K=I.length,I.splice(d,c),this._trigger({change:"remove",index:d,items:b})
},move:function(f,c,d){if(X(f),X(c),d=d===P||d===null?1:d,d){var b=this._data.slice(f,f+d);
this._move(f,c,d,b)
}return this
},_move:function(f,d,c,b){I=this._data,K=I.length,I.splice(f,c),I.splice.apply(I,[d,0].concat(b)),this._trigger({change:"move",oldIndex:f,index:d,items:b})
},refresh:function(c){var b=this._data.slice(0);
return this._refresh(b,c),this
},_refresh:function(c,b){I=this._data,K=I.length,C.apply(I,[0,I.length].concat(b)),this._trigger({change:"refresh",oldItems:c})
},_trigger:function(d){var c=I.length,b=G([I]);
b.triggerHandler(Z,d),c!==K&&b.triggerHandler(N,{path:"length",value:c,oldValue:K})
}},x[N]=x[Z]={remove:function(b){(b=b.data)&&(b.off=1,b=b.cb)&&(F=D[j=b._bnd])
},teardown:function(){F&&(delete F[G.data(this,"obId")],W(F,j))
}}
}})(this,this.jQuery||this.jsviews);
/*! http://mths.be/placeholder v2.0.7 by @mathias */
(function(i,l,f){var b="placeholder" in l.createElement("input"),g="placeholder" in l.createElement("textarea"),m=f.fn,d=f.valHooks,o,n;
if(b&&g){n=m.placeholder=function(){return this
};
n.input=n.textarea=true
}else{n=m.placeholder=function(){var p=this;
p.filter((b?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":c,"blur.placeholder":h}).data("placeholder-enabled",true).trigger("blur.placeholder");
return p
};
n.input=b;
n.textarea=g;
o={get:function(q){var p=f(q);
return p.data("placeholder-enabled")&&p.hasClass("placeholder")?"":q.value
},set:function(q,r){var p=f(q);
if(!p.data("placeholder-enabled")){return q.value=r
}if(r==""){q.value=r;
if(q!=l.activeElement){h.call(q)
}}else{if(p.hasClass("placeholder")){c.call(q,true,r)||(q.value=r)
}else{q.value=r
}}return p
}};
b||(d.input=o);
g||(d.textarea=o);
f(function(){f(l).delegate("form","submit.placeholder",function(){var p=f(".placeholder",this).each(c);
setTimeout(function(){p.each(h)
},10)
})
});
f(i).bind("beforeunload.placeholder",function(){f(".placeholder").each(function(){this.value=""
})
})
}function j(q){var p={},r=/^jQuery\d+$/;
f.each(q.attributes,function(t,s){if(s.specified&&!r.test(s.name)){p[s.name]=s.value
}});
return p
}function c(q,r){var p=this,s=f(p);
if(p.value==s.attr("placeholder")&&s.hasClass("placeholder")){if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));
if(q===true){return s[0].value=r
}s.focus()
}else{p.value="";
s.removeClass("placeholder");
p==l.activeElement&&p.select()
}}}function h(){var u,p=this,t=f(p),q=t,s=this.id;
if(p.value==""){if(p.type=="password"){if(!t.data("placeholder-textinput")){try{u=t.clone().attr({type:"text"})
}catch(r){u=f("<input>").attr(f.extend(j(this),{type:"text"}))
}u.removeAttr("name").data({"placeholder-password":true,"placeholder-id":s}).bind("focus.placeholder",c);
t.data({"placeholder-textinput":u,"placeholder-id":s}).before(u)
}t=t.removeAttr("id").hide().prev().attr("id",s).show()
}t.addClass("placeholder");
t[0].value=t.attr("placeholder")
}else{t.removeClass("placeholder")
}}}(this,document,jQuery));
/*! jQuery TubePlayer - v1.1.6 - 2013-06-04
* https://github.com/nirvanatikku/jQuery-TubePlayer-Plugin
* Copyright (c) 2013 Nirvana Tikku; Licensed MIT */
(function(h){function p(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var l=0|16*Math.random(),i="x"==n?l:8|3&l;
return i.toString(16)
})
}var j=".tubeplayer",b="jquery-youtube-tubeplayer",d="opts"+j,c={inited:!1,ytplayers:{},inits:[],iframeScriptInited:!1,State:{UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},Error:{BAD_INIT:0,INVALID_PARAM:2,NOT_FOUND:100,NOT_EMBEDDABLE:101,CANT_PLAY:150}};
h.tubeplayer={events:{},TubePlayer:c},h.tubeplayer.defaults={afterReady:function(){},stateChange:function(l){var i=this.onPlayer;
return function(o){var q=h("#"+l).parent();
switch("object"==typeof o&&(o=o.data),o){case c.State.UNSTARTED:return i.unstarted[l].call(q);
case c.State.ENDED:return i.ended[l].call(q);
case c.State.PLAYING:return i.playing[l].call(q);
case c.State.PAUSED:return i.paused[l].call(q);
case c.State.BUFFERING:return i.buffering[l].call(q);
case c.State.CUED:return i.cued[l].call(q);
default:return null
}}
},onError:function(l){var i=this.onErr;
return function(o){var q=h("#"+l).parent();
switch("object"==typeof o&&(o=o.data),o){case c.Error.BAD_INIT:case c.Error.INVALID_PARAM:return i.invalidParameter[l].call(q);
case c.Error.NOT_FOUND:return i.notFound[l].call(q);
case c.Error.NOT_EMBEDDABLE:case c.Error.CANT_PLAY:return i.notEmbeddable[l].call(q);
default:return i.defaultError[l].call(q)
}}
},qualityChange:function(l){var i=this;
return function(o){var q=h("#"+l).parent();
return"object"==typeof o&&(o=o.data),i.onQualityChange[l].call(q,o)
}
},onQualityChange:{},onPlayer:{unstarted:{},ended:{},playing:{},paused:{},buffering:{},cued:{}},onErr:{defaultError:{},notFound:{},notEmbeddable:{},invalidParameter:{}}};
var f={width:425,height:355,allowFullScreen:"true",initialVideo:"DkoeNLuMbcI",start:0,preferredQuality:"auto",showControls:!0,showRelated:!1,playsinline:!1,annotations:!0,autoPlay:!1,autoHide:!0,loop:0,theme:"dark",color:"red",showinfo:!1,modestbranding:!0,protocol:"http",wmode:"transparent",swfobjectURL:"ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js",loadSWFObject:!1,allowScriptAccess:"always",playerID:"tubeplayer-player-container",iframed:!0,onPlay:function(){},onPause:function(){},onStop:function(){},onSeek:function(){},onMute:function(){},onUnMute:function(){},onPlayerUnstarted:function(){},onPlayerEnded:function(){},onPlayerPlaying:function(){},onPlayerPaused:function(){},onPlayerBuffering:function(){},onPlayerCued:function(){},onQualityChange:function(){},onError:function(){},onErrorNotFound:function(){},onErrorNotEmbeddable:function(){},onErrorInvalidParameter:function(){}};
h.fn.tubeplayer=function(o,q){var s=h(this),i=typeof o;
return 0===arguments.length||"object"===i?s.each(function(){c.init(h(this),o)
}):"string"===i?s.triggerHandler(o+j,q!==void 0?q:null):void 0
};
var g=function(i){return function(o,l){var q=c.getPkg(o);
if(q.ytplayer){var s=i(o,l,q);
return s===void 0&&(s=q.$player),s
}return q.$player
}
};
h.tubeplayer.getPlayers=function(){return c.ytplayers
},c.init=function(l,o){if(l.hasClass(b)){return l
}var q=h.extend({},f,o);
q.playerID+="-"+p(),l.addClass(b).data(d,q);
for(var n in m){l.bind(n+j,l,m[n])
}return c.initDefaults(h.tubeplayer.defaults,q),h("<div></div>").attr("id",q.playerID).appendTo(l),c.initPlayer(l,q),l
},c.getPkg=function(o){var l=o.data,i=l.data(d),n=c.ytplayers[i.playerID];
return{$player:l,opts:i,ytplayer:n}
},c.iframeReady=function(i){return c.inits.push(function(){new YT.Player(i.playerID,{videoId:i.initialVideo,width:i.width,height:i.height,playerVars:{autoplay:i.autoPlay?1:0,autohide:i.autoHide?1:0,controls:i.showControls?1:0,loop:i.loop?1:0,playlist:i.loop?i.initialVideo:"",rel:i.showRelated?1:0,fs:i.allowFullScreen?1:0,wmode:i.wmode,showinfo:i.showinfo?1:0,modestbranding:i.modestbranding?1:0,iv_load_policy:i.annotations?1:3,start:i.start,theme:i.theme,color:i.color,playsinline:i.playsinline},events:{onReady:function(l){c.ytplayers[i.playerID]=l.target;
var o=h(l.target.getIframe()).parents("."+b);
h.tubeplayer.defaults.afterReady(o)
},onPlaybackQualityChange:h.tubeplayer.defaults.qualityChange(i.playerID),onStateChange:h.tubeplayer.defaults.stateChange(i.playerID),onError:h.tubeplayer.defaults.onError(i.playerID)}})
}),c.inits.length>=1&&!c.inited?function(){for(var l=0;
c.inits.length>l;
l++){c.inits[l]()
}c.inited=!0
}:(c.inited&&c.inits.pop()(),window.onYouTubePlayerAPIReady)
},c.initDefaults=function(q,l){var i=l.playerID,o=q.onPlayer;
o.unstarted[i]=l.onPlayerUnstarted,o.ended[i]=l.onPlayerEnded,o.playing[i]=l.onPlayerPlaying,o.paused[i]=l.onPlayerPaused,o.buffering[i]=l.onPlayerBuffering,o.cued[i]=l.onPlayerCued,q.onQualityChange[i]=l.onQualityChange;
var s=q.onErr;
s.defaultError[i]=l.onError,s.notFound[i]=l.onErrorNotFound,s.notEmbeddable[i]=l.onErrorNotEmbeddable,s.invalidParameter[i]=l.onErrorInvalidParameter
},c.initPlayer=function(l,i){i.iframed?c.initIframePlayer(l,i):c.initFlashPlayer(l,i)
},c.initIframePlayer=function(o,l){if(!c.iframeScriptInited){var i=document.createElement("script");
i.src=l.protocol+"://www.youtube.com/iframe_api";
var n=document.getElementsByTagName("script")[0];
n.parentNode.insertBefore(i,n),c.iframeScriptInited=!0
}window.onYouTubePlayerAPIReady=c.iframeReady(l)
},c.initFlashPlayer=function(l,i){i.loadSWFObject?(i.swfobjectURL=i.swfobjectURL.replace("http://",""),i.swfobjectURL=i.swfobjectURL.replace("https://",""),i.swfobjectURL=i.protocol+"://"+i.swfobjectURL,h.getScript(i.swfobjectURL,c.init_flash_player(i))):c.init_flash_player(i)()
},c.init_flash_player=function(i){return function(){if(!window.swfobject){return alert("YouTube Player couldn't be initialized. Please include swfobject."),void 0
}var l=["//www.youtube.com/v/"];
l.push(i.initialVideo),l.push("?&enablejsapi=1&version=3"),l.push("&playerapiid="+i.playerID),l.push("&rel="+(i.showRelated?1:0)),l.push("&autoplay="+(i.autoPlay?1:0)),l.push("&autohide="+(i.autoHide?1:0)),l.push("&loop="+(i.loop?1:0)),l.push("&playlist="+(i.loop?i.initialVideo:"")),l.push("&controls="+(i.showControls?1:0)),l.push("&showinfo="+(i.showinfo?1:0)),l.push("&modestbranding="+(i.modestbranding?1:0)),l.push("&iv_load_policy="+(i.annotations?1:3)),l.push("&start="+i.start),l.push("&theme="+i.theme),l.push("&color="+i.color),l.push("&playsinline="+i.playsinline),l.push("&fs="+(i.allowFullScreen?1:0)),window.swfobject.embedSWF(l.join(""),i.playerID,i.width,i.height,"8",null,null,{allowScriptAccess:i.allowScriptAccess,wmode:i.wmode,allowFullScreen:i.allowFullScreen},{id:i.playerID}),window.onYouTubePlayerReady=function(s){var q=document.getElementById(s),u=s.replace(/-/g,""),o=h.tubeplayer.defaults;
h.tubeplayer.events[u]={stateChange:o.stateChange(s),error:o.onError(s),qualityChange:o.qualityChange(s)},q.addEventListener("onStateChange","$.tubeplayer.events."+u+".stateChange"),q.addEventListener("onError","$.tubeplayer.events."+u+".error"),q.addEventListener("onPlaybackQualityChange","$.tubeplayer.events."+u+".qualityChange"),c.ytplayers[s]=q;
var r=h(q).parents("."+b);
h.tubeplayer.defaults.afterReady(r)
}
}
},c.getVideoIDFromURL=function(q){q=q||"";
var l=q.indexOf("?"),i=q.substring(l,q.length),o=i.indexOf("v=");
if(o>-1){var s=i.indexOf("&",o);
return -1===s&&(s=i.length),i.substring(o+"v=".length,s)
}return""
};
var m={opts:g(function(n,l,i){return i.opts
}),cue:g(function(n,l,i){i.ytplayer.cueVideoById(l,0,i.opts.preferredQuality)
}),play:g(function(n,l,i){"object"==typeof l?i.ytplayer.loadVideoById(l.id,l.time,i.opts.preferredQuality):l!==void 0?i.ytplayer.loadVideoById(l,0,i.opts.preferredQuality):i.ytplayer.playVideo(),i.opts.onPlay(l)
}),pause:g(function(n,l,i){i.ytplayer.pauseVideo(),i.opts.onPause(i)
}),stop:g(function(n,l,i){i.ytplayer.stopVideo(),i.opts.onStop(i)
}),seek:g(function(q,l,i){if(/:/.test(l)){var o=l.split(":").reverse();
l=0;
for(var s=0;
o.length>s;
s++){l+=Math.pow(60,s)*(0|o[s])
}}i.ytplayer.seekTo(l,!0),i.opts.onSeek(l)
}),mute:g(function(n,l,i){i.$player.attr("data-prev-mute-volume",i.ytplayer.getVolume()),i.ytplayer.mute(),i.opts.onMute(i)
}),unmute:g(function(n,l,i){i.ytplayer.unMute(),i.ytplayer.setVolume(i.$player.attr("data-prev-mute-volume")||50),i.opts.onUnMute()
}),isMuted:g(function(n,l,i){return i.ytplayer.isMuted()
}),volume:g(function(n,l,i){return void 0===l?i.ytplayer.getVolume()||0:(i.ytplayer.setVolume(l),i.$player.attr("data-prev-mute-volume",i.ytplayer.getVolume()),void 0)
}),quality:g(function(n,l,i){return void 0===l?i.ytplayer.getPlaybackQuality():(i.ytplayer.setPlaybackQuality(l),void 0)
}),playbackRate:g(function(n,l,i){return void 0===l?i.ytplayer.getPlaybackRate():(i.ytplayer.setPlaybackRate(l),void 0)
}),data:g(function(q,l,i){var o={},s=i.ytplayer;
return o.videoLoadedFraction=s.getVideoLoadedFraction(),o.bytesLoaded=s.getVideoBytesLoaded(),o.bytesTotal=s.getVideoBytesTotal(),o.startBytes=s.getVideoStartBytes(),o.state=s.getPlayerState(),o.currentTime=s.getCurrentTime(),o.duration=s.getDuration(),o.videoURL=s.getVideoUrl(),o.videoEmbedCode=s.getVideoEmbedCode(),o.videoID=c.getVideoIDFromURL(o.videoURL),o.availableQualityLevels=s.getAvailableQualityLevels(),o.availablePlaybackRates=s.getAvailablePlaybackRates(),o
}),videoId:g(function(n,l,i){return c.getVideoIDFromURL(i.ytplayer.getVideoUrl())
}),size:g(function(l,i,n){i!==void 0&&i.width&&i.height&&(n.ytplayer.setSize(i.width,i.height),h(n.ytplayer).css(i))
}),destroy:g(function(r,n,q){q.$player.removeClass(b).data(d,null).unbind(j).html(""),delete c.ytplayers[q.opts.playerID];
var o=h.tubeplayer.defaults,s=["unstarted","ended","playing","paused","buffering","cued"];
return h.each(s,function(l,i){delete o.onPlayer[i][q.opts.playerID]
}),s=["defaultError","notFound","notEmbeddable","invalidParameter"],h.each(s,function(l,i){delete o.onErr[i][q.opts.playerID]
}),delete o.onQualityChange[q.opts.playerID],delete h.tubeplayer.events[q.opts.playerID],"destroy" in q.ytplayer&&q.ytplayer.destroy(),h(q.ytplayer).remove(),null
}),player:g(function(n,l,i){return i.ytplayer
})}
})(jQuery);
/*! JsRender v1.0.0-beta: http://github.com/BorisMoore/jsrender and http://jsviews.com/jsviews */
(function(b,z,s){if(z&&z.views||b.jsviews){return
}var ai="v1.0.0-beta",O,ae,v,A,q="{",p="{",i="}",h="}",aa="^",B=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,ab=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,V=/[ \t]*(\r\n|\n|\r)/g,g=/\\(['"])/g,ag=/['"\\]/g,r=/\x08(~)?([^\x08]+)\x08/g,m=/^if\s/,u=/<(\w+)[>\s]/,Q=/[\x00`><"'&]/g,L=Q,aj=0,ah=0,N={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},Y="data-jsv-tmpl",R={},U={template:{compile:c},tag:{compile:t},helper:{},converter:{}},P={jsviews:ai,render:R,settings:{delimiters:x,debugMode:true,tryCatch:true},sub:{View:af,Error:G,tmplFn:E,parse:y,extend:w,error:I,syntaxError:T},_cnvt:J,_tag:d,_err:function(ak){return W.debugMode?("Error: "+(ak.message||ak))+". ":""
}};
function G(al,ak){if(ak&&ak.onError){if(ak.onError(al)===false){return
}}this.name="JsRender Error";
this.message=al||"JsRender error"
}function w(am,al){var ak;
am=am||{};
for(ak in al){am[ak]=al[ak]
}return am
}(G.prototype=new Error()).constructor=G;
function x(ak,am,al){if(!X.rTag||arguments.length){q=ak?ak.charAt(0):q;
p=ak?ak.charAt(1):p;
i=am?am.charAt(0):i;
h=am?am.charAt(1):h;
aa=al||aa;
ak="\\"+q+"(\\"+aa+")?\\"+p;
am="\\"+i+"\\"+h;
v="(?:(?:(\\w+(?=[\\/\\s\\"+i+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+i+"]|\\"+i+"(?!\\"+h+"))*?)";
X.rTag=v+")";
v=new RegExp(ak+v+"(\\/)?|(?:\\/(\\w+)))"+am,"g");
A=new RegExp("<.*>|([^\\\\]|^)[{}]|"+ak+".*"+am)
}return[q,p,i,h,aa]
}function M(ao,aq){if(!aq){aq=ao;
ao=s
}var an,ap,am,ar,al=this,ak=!aq||aq==="root";
if(ao){ar=al.type===aq?al:s;
if(!ar){an=al.views;
if(al._.useKey){for(ap in an){if(ar=an[ap].get(ao,aq)){break
}}}else{for(ap=0,am=an.length;
!ar&&ap<am;
ap++){ar=an[ap].get(ao,aq)
}}}}else{if(ak){while(al.parent.parent){ar=al=al.parent
}}else{while(al&&!ar){ar=al.type===aq?al:s;
al=al.parent
}}}return ar
}function K(){var ak=this.get("item");
return ak?ak.index:s
}K.depends=function(){return[this.get("item"),"index"]
};
function Z(ao,an){var al,ak=this,am=an&&an[ao]||(ak.ctx||{})[ao];
am=am===s?ak.getRsc("helpers",ao):am;
if(am){if(typeof am==="function"){al=function(){return am.apply(ak,arguments)
};
w(al,am)
}}return al||am
}function J(ap,an,ao){var am,al,ar,aq=+ao===ao&&ao,ak=an.linkCtx;
if(aq){ao=(aq=an.tmpl.bnds[aq-1])(an.data,an,P)
}ar=ao.args[0];
if(ap||aq){al=ak&&ak.tag||{_:{inline:!ak},tagName:ap+":",flow:true,_is:"tag"};
al._.bnd=aq;
if(ak){ak.tag=al;
ao.ctx=ad(ao.ctx,ak.view.ctx)
}al.tagCtx=ao;
ao.view=an;
al.ctx=ao.ctx||{};
delete ao.ctx;
an._.tag=al;
ap=ap!=="true"&&ap;
if(ap&&((am=an.getRsc("converters",ap))||I("Unknown converter: {{"+ap+":"))){al.depends=am.depends;
ar=am.apply(al,ao.args)
}ar=aq&&an._.onRender?an._.onRender(ar,an,aq):ar;
an._.tag=s
}return ar
}function C(an,ao){var am,ak=this,al=P[an];
am=al&&al[ao];
while((am===s)&&ak){al=ak.tmpl[an];
am=al&&al[ao];
ak=ak.parent
}return am
}function d(am,ao,ar,at){var aH,aI,av,ay,aC,aD,aA,aF,au,ak,aB,aE,aq,aw,aG="",ap=+at===at&&at,an=ao.linkCtx||0,az=ao.ctx,al=ar||ao.tmpl,ax=ao._;
if(am._is==="tag"){aI=am;
am=aI.tagName
}if(ap){at=(aE=al.bnds[ap-1])(ao.data,ao,P)
}aA=at.length;
aI=aI||an.tag;
for(aD=0;
aD<aA;
aD++){au=at[aD];
aB=au.tmpl;
aB=au.content=aB&&al.tmpls[aB-1];
ar=au.props.tmpl;
if(!aD&&(!ar||!aI)){aq=ao.getRsc("tags",am)||I("Unknown tag: {{"+am+"}}")
}ar=ar||(aI?aI:aq).template||aB;
ar=""+ar===ar?ao.getRsc("templates",ar)||H(ar):ar;
w(au,{tmpl:ar,render:o,index:aD,view:ao,ctx:ad(au.ctx,az)});
if(!aI){if(aq._ctr){aI=new aq._ctr();
aw=!!aI.init;
aI.attr=aI.attr||aq.attr||s
}else{aI={render:aq.render}
}aI._={inline:!an};
if(an){an.attr=aI.attr=an.attr||aI.attr;
an.tag=aI;
aI.linkCtx=an
}if(aI._.bnd=aE||an){aI._.arrVws={}
}aI.tagName=am;
aI.parent=aC=az&&az.tag;
aI._is="tag";
aI._def=aq
}ax.tag=aI;
au.tag=aI;
aI.tagCtxs=at;
if(!aI.flow){ak=au.ctx=au.ctx||{};
av=aI.parents=ak.parentTags=az&&ad(ak.parentTags,az.parentTags)||{};
if(aC){av[aC.tagName]=aC
}ak.tag=aI
}}aI.rendering={};
for(aD=0;
aD<aA;
aD++){au=aI.tagCtx=at[aD];
aI.ctx=au.ctx;
if(!aD&&aw){aI.init(au,an,aI.ctx);
aw=s
}if(aH=aI.render){aF=aH.apply(aI,au.args)
}aG+=aF!==s?aF:au.tmpl?au.render():""
}delete aI.rendering;
aI.tagCtx=aI.tagCtxs[0];
aI.ctx=aI.tagCtx.ctx;
if(aI._.inline&&(ay=aI.attr)&&ay!=="html"){aG=ay==="text"?ac.html(aG):""
}return ap&&ao._.onRender?ao._.onRender(aG,ao,ap):aG
}function af(ak,ap,aw,al,aq,ar,av,ay){var at,ao,ax,an=ap==="array",am={key:0,useKey:an?0:1,id:""+ah++,onRender:ay,bnds:{}},au={data:al,tmpl:aq,content:av,views:an?[]:{},parent:aw,ctx:ak,type:ap,get:M,getIndex:K,getRsc:C,hlp:Z,_:am,_is:"view"};
if(aw){at=aw.views;
ao=aw._;
if(ao.useKey){at[am.key="_"+ao.useKey++]=au;
ax=ao.tag;
am.bnd=an&&(!ax||!!ax._.bnd&&ax)
}else{at.splice(am.key=au.index=ar!==s?ar:at.length,0,au)
}au.ctx=ak||aw.ctx
}return au
}function n(ao){var ak,ap,al,am,an;
for(ak in U){am=U[ak];
if((an=am.compile)&&(ap=ao[ak+"s"])){for(al in ap){ap[al]=an(al,ap[al],ao,ak,am)
}}}}function t(al,an,am){var ao,ak;
if(typeof an==="function"){an={depends:an.depends,render:an}
}else{if(ak=an.template){an.template=""+ak===ak?(H[ak]||H(ak)):ak
}if(an.init!==false){ao=an._ctr=function(ap){};
(ao.prototype=an).constructor=ao
}}if(am){an._parentTmpl=am
}return an
}function c(ak,aq,ar,ap,al,at){function an(au){if((""+au===au)||au.nodeType>0){try{am=au.nodeType>0?au:!A.test(au)&&z&&z(b.document).find(au)[0]
}catch(av){}if(am){au=am.getAttribute(Y);
ak=ak||au;
au=H[au];
if(!au){ak=ak||"_"+aj++;
am.setAttribute(Y,ak);
au=H[ak]=c(ak,am.innerHTML,ar,ap,al,at)
}}return au
}}var ao,am;
aq=aq||"";
ao=an(aq);
at=at||(aq.markup?aq:{});
at.tmplName=ak;
if(ar){at._parentTmpl=ar
}if(!ao&&aq.markup&&(ao=an(aq.markup))){if(ao.fn&&(ao.debug!==aq.debug||ao.allowCode!==aq.allowCode)){ao=ao.markup
}}if(ao!==s){if(ak&&!ar){R[ak]=function(){return aq.render.apply(aq,arguments)
}
}if(ao.fn||aq.fn){if(ao.fn){if(ak&&ak!==ao.tmplName){aq=ad(at,ao)
}else{aq=ao
}}}else{aq=j(ao,at);
E(ao,aq)
}n(at);
return aq
}}function j(an,ao){var ak,al=W.wrapMap||{},am=w({markup:an,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:o},ao);
if(!ao.htmlTag){ak=u.exec(an);
am.htmlTag=ak?ak[1].toLowerCase():""
}ak=al[am.htmlTag];
if(ak&&ak!==al.div){am.markup=O.trim(am.markup);
am._elCnt=true
}return am
}function f(am,al){function an(ao,aq,av){var ap,au,at,ar;
if(ao&&""+ao!==ao&&!ao.nodeType&&!ao.markup){for(at in ao){an(at,ao[at],aq)
}return P
}if(aq===s){aq=ao;
ao=s
}if(ao&&""+ao!==ao){av=aq;
aq=ao;
ao=s
}ar=av?av[ak]=av[ak]||{}:an;
au=al.compile;
if(ap=X.onBeforeStoreItem){au=ap(ar,ao,aq,au)||au
}if(!ao){aq=au(s,aq)
}else{if(aq===null){delete ar[ao]
}else{ar[ao]=au?(aq=au(ao,aq,av,am,al)):aq
}}if(au&&aq){aq._is=am
}if(ap=X.onStoreItem){ap(ar,ao,aq,au)
}return aq
}var ak=am+"s";
P[ak]=an;
U[am]=al
}function o(aF,am,an,aG,ap,ao){var aA,az,ar,aC,aE,ax,aw,at,al,aD,aB,ak,aq,ay=this,av=!ay.attr||ay.attr==="html",au="";
if(aG===true){aw=true;
aG=0
}if(ay.tag){at=ay;
ay=ay.tag;
aD=ay._;
ak=ay.tagName;
aq=at.tmpl;
am=ad(am,ay.ctx);
al=at.content;
if(at.props.link===false){am=am||{};
am.link=false
}an=an||at.view;
aF=aF===s?an:aF
}else{aq=ay.jquery&&(ay[0]||I('Unknown template: "'+ay.selector+'"'))||ay
}if(aq){if(!an&&aF&&aF._is==="view"){an=aF
}if(an){al=al||an.content;
ao=ao||an._.onRender;
if(aF===an){aF=an.data;
ap=true
}am=ad(am,an.ctx)
}if(!an||an.data===s){(am=am||{}).root=aF
}if(!aq.fn){aq=H[aq]||H(aq)
}if(aq){ao=(am&&am.link)!==false&&av&&ao;
aB=ao;
if(ao===true){aB=s;
ao=an._.onRender
}if(O.isArray(aF)&&!ap){aC=aw?an:(aG!==s&&an)||af(am,"array",an,aF,aq,aG,al,ao);
for(aA=0,az=aF.length;
aA<az;
aA++){ar=aF[aA];
aE=af(am,"item",aC,ar,aq,(aG||0)+aA,al,ao);
ax=aq.fn(ar,aE,P);
au+=aC._.onRender?aC._.onRender(ax,aE):ax
}}else{aC=aw?an:af(am,ak||"data",an,aF,aq,aG,al,ao);
if(aD&&!ay.flow){aC.tag=ay
}au+=aq.fn(aF,aC,P)
}return aB?aB(au,aC):au
}}return""
}function I(ak){throw new P.sub.Error(ak)
}function T(ak){I("Syntax error\n"+ak)
}function E(ay,au,ax,ap){function am(az){az-=ao;
if(az){ar.push(ay.substr(ao,az).replace(V,"\\n"))
}}function aw(az){az&&T('Unmatched or missing tag: "{{/'+az+'}}" in template:\n'+ay)
}function ak(aD,aR,aE,aO,aM,aH,aB,aL,aN,aJ,aQ,aF){if(aH){aM=":";
aO="html"
}aJ=aJ||ax;
var az,aI,aP=aR&&[],aA="",aC="",aK="",aG=!aJ&&!aM&&!aB;
aE=aE||aM;
am(aF);
ao=aF+aD.length;
if(aL){if(an){ar.push(["*","\n"+aN.replace(g,"$1")+"\n"])
}}else{if(aE){if(aE==="else"){if(m.test(aN)){T('for "{{else if expr}}" use "{{else expr}}"')
}aP=aq[6];
aq[7]=ay.substring(aq[7],aF);
aq=at.pop();
ar=aq[3];
aG=true
}if(aN){aN=aN.replace(V," ");
aA=y(aN,aP,au).replace(r,function(aS,aT,aU){if(aT){aK+=aU+","
}else{aC+=aU+","
}return""
})
}aC=aC.slice(0,-1);
aA=aA.slice(0,-1);
az=aC&&(aC.indexOf("noerror:true")+1)&&aC||"";
av=[aE,aO||!!ap||"",aA,aG&&[],'params:"'+aN+'",props:{'+aC+"}"+(aK?",ctx:{"+aK.slice(0,-1)+"}":""),az,aP||0];
ar.push(av);
if(aG){at.push(aq);
aq=av;
aq[7]=ao
}}else{if(aQ){aI=aq[0];
aw(aQ!==aI&&aI!=="else"&&aQ);
aq[7]=ay.substring(aq[7],aF);
aq=at.pop()
}}}aw(!aq&&aQ);
ar=aq[3]
}var av,an=au&&au.allowCode,al=[],ao=0,at=[],ar=al,aq=[,,,al];
ay=ay.replace(ag,"\\$&");
aw(at[0]&&at[0][3].pop()[0]);
ay.replace(v,ak);
am(ay.length);
if(ao=al[al.length-1]){aw(""+ao!==ao&&(+ao[7]===ao[7])&&ao[0])
}return D(al,ax?ay:au,ax)
}function D(ay,aA,ax){var aJ,aD,at,aP,aO,aq,aS,ap,aG,ar,aC,am,aQ,au,al,av,aH,aF,aL,aw,ao,aK,aR,aB,aI,aN=0,an="",ak="",az={},aE=ay.length;
if(""+aA===aA){al=ax?'data-link="'+aA.replace(V," ").slice(1,-1)+'"':aA;
aA=0
}else{al=aA.tmplName||"unnamed";
if(aA.allowCode){az.allowCode=true
}if(aA.debug){az.debug=true
}am=aA.bnds;
au=aA.tmpls
}for(aJ=0;
aJ<aE;
aJ++){aD=ay[aJ];
if(""+aD===aD){an+='\nret+="'+aD+'";'
}else{at=aD[0];
if(at==="*"){an+=""+aD[1]
}else{aP=aD[1];
aO=aD[2];
aF=aD[3];
aq=aD[4];
ak=aD[5];
aL=aD[7];
if(!(aK=at==="else")){aN=0;
if(am&&(aQ=aD[6])){aN=am.push(aQ)
}}if(aR=at===":"){if(aP){at=aP==="html"?">":aP+at
}if(ak){aB="prm"+aJ;
ak="try{var "+aB+"=["+aO+"][0];}catch(e){"+aB+'="";}\n';
aO=aB
}}else{if(aF){av=j(aL,az);
av.tmplName=al+"/"+at;
D(aF,av);
au.push(av)
}if(!aK){aH=at;
ao=an;
an=""
}aw=ay[aJ+1];
aw=aw&&aw[0]==="else"
}aq+=",args:["+aO+"]}";
if(aR&&aQ||aP&&at!==">"){aI=new Function("data,view,j,u"," // "+al+" "+aN+" "+at+"\n"+ak+"return {"+aq+";");
aI.paths=aQ;
aI._ctxs=at;
if(ax){return aI
}aC=1
}an+=(aR?"\n"+(aQ?"":ak)+(ax?"return ":"ret+=")+(aC?(aC=0,ar=true,'c("'+aP+'",view,'+(aQ?((am[aN-1]=aI),aN):"{"+aq)+");"):at===">"?(ap=true,"h("+aO+");"):(aG=true,"(v="+aO+")!="+(ax?"=":"")+'u?v:"";')):(aS=true,"{tmpl:"+(aF?au.length:"0")+","+aq+","));
if(aH&&!aw){an="["+an.slice(0,-1)+"]";
if(ax||aQ){an=new Function("data,view,j,u"," // "+al+" "+aN+" "+aH+"\nreturn "+an+";");
if(aQ){(am[aN-1]=an).paths=aQ
}an._ctxs=at;
if(ax){return an
}}an=ao+'\nret+=t("'+aH+'",view,this,'+(aN||an)+");";
aQ=0;
aH=0
}}}}an="// "+al+"\nvar j=j||"+(z?"jQuery.":"js")+"views"+(aG?",v":"")+(aS?",t=j._tag":"")+(ar?",c=j._cnvt":"")+(ap?",h=j.converters.html":"")+(ax?";\n":',ret="";\n')+(W.tryCatch?"try{\n":"")+(az.debug?"debugger;":"")+an+(ax?"\n":"\nreturn ret;\n")+(W.tryCatch?"\n}catch(e){return j._err(e);}":"");
try{an=new Function("data,view,j,u",an)
}catch(aM){T("Compiled template code:\n\n"+an,aM)
}if(aA){aA.fn=an
}return an
}function y(ap,al,av){function aw(aB,aS,aD,ay,aK,aI,aE,aT,az,aJ,aR,aQ,aM,aP,aG,aN,aC,aO,aF,aH){var aA;
aI=aI||"";
aD=aD||aS||aQ;
aK=aK||az;
aJ=aJ||aC||"";
function aL(aX,aW,aZ,aU,a1,a0,aY){if(aW){if(al){if(aq==="linkTo"){ax=al.to=al.to||[];
ax.push(aK)
}if(!aq||ar){al.push(aK)
}}if(aW!=="."){var aV=(aZ?'view.hlp("'+aZ+'")':aU?"view":"data")+(aY?(a1?"."+a1:aZ?"":(aU?"":"."+aW))+(a0||""):(aY=aZ?"":aU?a1||"":aW,""));
aV=aV+(aY?"."+aY:"");
return aV.slice(0,9)==="view.data"?aV.slice(5):aV
}}return aX
}if(aE){T(ap)
}else{if(al&&aN&&!at&&!ao){if(!aq||ar||ax){aA=au[am];
if(aH.length-2>aF-aA){aA=aH.slice(aA,aF+1);
aN=p+":"+aA+i;
aN=an[aN]=an[aN]||E(q+aN+h,av,true);
if(!aN.paths){y(aA,aN.paths=[],av)
}(ax||al).push({_jsvOb:aN})
}}}return(at?(at=!aM,(at?aB:'"')):ao?(ao=!aP,(ao?aB:'"')):((aD?(am++,au[am]=aF++,aD):"")+(aO?(am?"":aq?(aq=ar=ax=false,"\b"):","):aT?(am&&T(ap),aq=aK,ar=ay,"\b"+aK+":"):aK?(aK.split("^").join(".").replace(B,aL)+(aJ?(ak[++am]=true,aK.charAt(0)!=="."&&(au[am]=aF),aJ):aI)):aI?aI:aG?((ak[am--]=false,aG)+(aJ?(ak[++am]=true,aJ):"")):aR?(ak[am]||T(ap),","):aS?"":(at=aM,ao=aP,'"'))))
}}var aq,ax,ar,an=av.links,ak={},au={0:-1},am=0,ao=false,at=false;
return(ap+" ").replace(ab,aw)
}function ad(al,ak){return al&&al!==ak?(ak?w(w({},ak),al):al):ak&&w({},ak)
}function l(ak){return N[ak]||(N[ak]="&#"+ak.charCodeAt(0)+";")
}for(ae in U){f(ae,U[ae])
}var H=P.templates,ac=P.converters,F=P.helpers,S=P.tags,X=P.sub,W=P.settings;
if(z){O=z;
O.fn.render=o
}else{O=b.jsviews={};
O.isArray=Array&&Array.isArray||function(ak){return Object.prototype.toString.call(ak)==="[object Array]"
}
}O.render=R;
O.views=P;
O.templates=H=P.templates;
S({"else":function(){},"if":{render:function(am){var ak=this,al=(ak.rendering.done||!am&&(arguments.length||!ak.tagCtx.index))?"":(ak.rendering.done=true,ak.selected=ak.tagCtx.index,ak.tagCtx.render());
return al
},onUpdate:function(ao,an,am){var al,ak,ap;
for(al=0;
(ak=this.tagCtxs[al])&&ak.args.length;
al++){ak=ak.args[0];
ap=!ak!==!am[al].args[0];
if(!!ak||ap){return ap
}}return false
},flow:true},"for":{render:function(ap){var an=this,am=an.tagCtx,ao=!arguments.length,ak="",al=ao||0;
if(!an.rendering.done){if(ao){ak=s
}else{if(ap!==s){ak+=am.render(ap);
al+=O.isArray(ap)?ap.length:1
}}if(an.rendering.done=al){an.selected=am.index
}}return ak
},onArrayChange:function(an,al){var am,ak=this,ao=al.change;
if(this.tagCtxs[1]&&(ao==="insert"&&an.target.length===al.items.length||ao==="remove"&&!an.target.length||ao==="refresh"&&!al.oldItems.length!==!an.target.length)){this.refresh()
}else{for(am in ak._.arrVws){am=ak._.arrVws[am];
if(am.data===an.target){am._.onArrayChange.apply(am,arguments)
}}}an.done=true
},flow:true},include:{flow:true},"*":{render:function(ak){return ak
},flow:true}});
ac({html:function(ak){return ak!=s?String(ak).replace(L,l):""
},attr:function(ak){return ak!=s?String(ak).replace(Q,l):ak===null?null:""
},url:function(ak){return ak!=s?encodeURI(String(ak)):ak===null?null:""
}});
x()
})(this,this.jQuery);
(function(d){var c;
c=function(aE){var aD,aC,aB,aA,az,ay,ax,aw,av,au,at,ar,aq,ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad,ac,ab,aa,Z,Y,X,W,V,U,T,S,R,Q,P;
ao=function(g,f){return g<<f|g>>>32-f
};
aC=function(i,h){var o,n,m,l,j;
m=i&2147483648;
j=h&2147483648;
n=i&1073741824;
l=h&1073741824;
o=(i&1073741823)+(h&1073741823);
if(n&l){return o^2147483648^m^j
}if(n|l){if(o&1073741824){return o^3221225472^m^j
}else{return o^1073741824^m^j
}}else{return o^m^j
}};
ax=function(g,f,h){return g&f|~g&h
};
av=function(g,f,h){return g&h|f&~h
};
at=function(g,f,h){return g^f^h
};
aq=function(g,f,h){return f^(g|~h)
};
aw=function(j,h,p,o,n,m,l){j=aC(j,aC(aC(ax(h,p,o),n),l));
return aC(ao(j,m),h)
};
au=function(j,i,p,o,n,m,l){j=aC(j,aC(aC(av(i,p,o),n),l));
return aC(ao(j,m),i)
};
ar=function(j,i,p,o,n,m,l){j=aC(j,aC(aC(at(i,p,o),n),l));
return aC(ao(j,m),i)
};
ap=function(j,i,p,o,n,m,l){j=aC(j,aC(aC(aq(i,p,o),n),l));
return aC(ao(j,m),i)
};
az=function(s){var r,q,p,o,n,m,l,j;
p=s.length;
n=p+8;
m=(n-n%64)/64;
o=(m+1)*16;
l=Array(o-1);
q=0;
r=0;
while(r<p){j=(r-r%4)/4;
q=r%4*8;
l[j]=l[j]|s.charCodeAt(r)<<q;
r++
}j=(r-r%4)/4;
q=r%4*8;
l[j]=l[j]|128<<q;
l[o-2]=p<<3;
l[o-1]=p>>>29;
return l
};
W=function(g){var f,j,i,h;
f="";
j="";
h=0;
while(h<=3){i=g>>>h*8&255;
j="0"+i.toString(16);
f=f+j.substr(j.length-2,2);
h++
}return f
};
X=function(g){var f,i,h;
g=g.replace(/\r\n/g,"\n");
h="";
i=0;
while(i<g.length){f=g.charCodeAt(i);
if(f<128){h+=String.fromCharCode(f)
}else{if(f>127&&f<2048){h+=String.fromCharCode(f>>6|192);
h+=String.fromCharCode(f&63|128)
}else{h+=String.fromCharCode(f>>12|224);
h+=String.fromCharCode(f>>6&63|128);
h+=String.fromCharCode(f&63|128)
}}i++
}return h
};
P=Array();
an=7;
am=12;
al=17;
ak=22;
aj=5;
ai=9;
ah=14;
ag=20;
af=4;
ae=11;
ad=16;
ac=23;
ab=6;
aa=10;
Z=15;
Y=21;
aE=X(aE);
P=az(aE);
V=1732584193;
U=4023233417;
T=2562383102;
S=271733878;
R=0;
while(R<P.length){aD=V;
aB=U;
aA=T;
ay=S;
V=aw(V,U,T,S,P[R+0],an,3614090360);
S=aw(S,V,U,T,P[R+1],am,3905402710);
T=aw(T,S,V,U,P[R+2],al,606105819);
U=aw(U,T,S,V,P[R+3],ak,3250441966);
V=aw(V,U,T,S,P[R+4],an,4118548399);
S=aw(S,V,U,T,P[R+5],am,1200080426);
T=aw(T,S,V,U,P[R+6],al,2821735955);
U=aw(U,T,S,V,P[R+7],ak,4249261313);
V=aw(V,U,T,S,P[R+8],an,1770035416);
S=aw(S,V,U,T,P[R+9],am,2336552879);
T=aw(T,S,V,U,P[R+10],al,4294925233);
U=aw(U,T,S,V,P[R+11],ak,2304563134);
V=aw(V,U,T,S,P[R+12],an,1804603682);
S=aw(S,V,U,T,P[R+13],am,4254626195);
T=aw(T,S,V,U,P[R+14],al,2792965006);
U=aw(U,T,S,V,P[R+15],ak,1236535329);
V=au(V,U,T,S,P[R+1],aj,4129170786);
S=au(S,V,U,T,P[R+6],ai,3225465664);
T=au(T,S,V,U,P[R+11],ah,643717713);
U=au(U,T,S,V,P[R+0],ag,3921069994);
V=au(V,U,T,S,P[R+5],aj,3593408605);
S=au(S,V,U,T,P[R+10],ai,38016083);
T=au(T,S,V,U,P[R+15],ah,3634488961);
U=au(U,T,S,V,P[R+4],ag,3889429448);
V=au(V,U,T,S,P[R+9],aj,568446438);
S=au(S,V,U,T,P[R+14],ai,3275163606);
T=au(T,S,V,U,P[R+3],ah,4107603335);
U=au(U,T,S,V,P[R+8],ag,1163531501);
V=au(V,U,T,S,P[R+13],aj,2850285829);
S=au(S,V,U,T,P[R+2],ai,4243563512);
T=au(T,S,V,U,P[R+7],ah,1735328473);
U=au(U,T,S,V,P[R+12],ag,2368359562);
V=ar(V,U,T,S,P[R+5],af,4294588738);
S=ar(S,V,U,T,P[R+8],ae,2272392833);
T=ar(T,S,V,U,P[R+11],ad,1839030562);
U=ar(U,T,S,V,P[R+14],ac,4259657740);
V=ar(V,U,T,S,P[R+1],af,2763975236);
S=ar(S,V,U,T,P[R+4],ae,1272893353);
T=ar(T,S,V,U,P[R+7],ad,4139469664);
U=ar(U,T,S,V,P[R+10],ac,3200236656);
V=ar(V,U,T,S,P[R+13],af,681279174);
S=ar(S,V,U,T,P[R+0],ae,3936430074);
T=ar(T,S,V,U,P[R+3],ad,3572445317);
U=ar(U,T,S,V,P[R+6],ac,76029189);
V=ar(V,U,T,S,P[R+9],af,3654602809);
S=ar(S,V,U,T,P[R+12],ae,3873151461);
T=ar(T,S,V,U,P[R+15],ad,530742520);
U=ar(U,T,S,V,P[R+2],ac,3299628645);
V=ap(V,U,T,S,P[R+0],ab,4096336452);
S=ap(S,V,U,T,P[R+7],aa,1126891415);
T=ap(T,S,V,U,P[R+14],Z,2878612391);
U=ap(U,T,S,V,P[R+5],Y,4237533241);
V=ap(V,U,T,S,P[R+12],ab,1700485571);
S=ap(S,V,U,T,P[R+3],aa,2399980690);
T=ap(T,S,V,U,P[R+10],Z,4293915773);
U=ap(U,T,S,V,P[R+1],Y,2240044497);
V=ap(V,U,T,S,P[R+8],ab,1873313359);
S=ap(S,V,U,T,P[R+15],aa,4264355552);
T=ap(T,S,V,U,P[R+6],Z,2734768916);
U=ap(U,T,S,V,P[R+13],Y,1309151649);
V=ap(V,U,T,S,P[R+4],ab,4149444226);
S=ap(S,V,U,T,P[R+11],aa,3174756917);
T=ap(T,S,V,U,P[R+2],Z,718787259);
U=ap(U,T,S,V,P[R+9],Y,3951481745);
V=aC(V,aD);
U=aC(U,aB);
T=aC(T,aA);
S=aC(S,ay);
R+=16
}Q=W(V)+W(U)+W(T)+W(S);
return Q.toLowerCase()
};
return d.extend({MD5:c})
})(jQuery);
(function(b){if(typeof define==="function"&&define.amd){define(b)
}else{window.purl=b()
}})(function(){var j={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},q=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],d={anchor:"fragment"},b={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},h=/^[0-9]+$/;
function g(u,x){var z=decodeURI(u),w=b[x||false?"strict":"loose"].exec(z),y={attr:{},param:{},seg:{}},v=14;
while(v--){y.attr[q[v]]=w[v]||""
}y.param.query=l(y.attr.query);
y.param.fragment=l(y.attr.fragment);
y.seg.path=y.attr.path.replace(/^\/+|\/+$/g,"").split("/");
y.seg.fragment=y.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");
y.attr.base=y.attr.host?(y.attr.protocol?y.attr.protocol+"://"+y.attr.host:y.attr.host)+(y.attr.port?":"+y.attr.port:""):"";
return y
}function c(v){var u=v.tagName;
if(typeof u!=="undefined"){return j[u.toLowerCase()]
}return u
}function t(x,w){if(x[w].length===0){return x[w]={}
}var v={};
for(var u in x[w]){v[u]=x[w][u]
}x[w]=v;
return v
}function f(y,w,v,z){var u=y.shift();
if(!u){if(i(w[v])){w[v].push(z)
}else{if("object"==typeof w[v]){w[v]=z
}else{if("undefined"==typeof w[v]){w[v]=z
}else{w[v]=[w[v],z]
}}}}else{var x=w[v]=w[v]||[];
if("]"==u){if(i(x)){if(""!==z){x.push(z)
}}else{if("object"==typeof x){x[s(x).length]=z
}else{x=w[v]=[w[v],z]
}}}else{if(~u.indexOf("]")){u=u.substr(0,u.length-1);
if(!h.test(u)&&i(x)){x=t(w,v)
}f(y,x,u,z)
}else{if(!h.test(u)&&i(x)){x=t(w,v)
}f(y,x,u,z)
}}}}function n(x,w,z){if(~w.indexOf("]")){var y=w.split("[");
f(y,x,"base",z)
}else{if(!h.test(w)&&i(x.base)){var v={};
for(var u in x.base){v[u]=x.base[u]
}x.base=v
}if(w!==""){o(x.base,w,z)
}}return x
}function l(u){return m(String(u).split(/&|;/),function(v,A){try{A=decodeURIComponent(A.replace(/\+/g," "))
}catch(x){}var B=A.indexOf("="),z=r(A),w=A.substr(0,z||B),y=A.substr(z||B,A.length);
y=y.substr(y.indexOf("=")+1,y.length);
if(w===""){w=A;
y=""
}return n(v,w,y)
},{base:{}}).base
}function o(x,w,y){var u=x[w];
if(typeof u==="undefined"){x[w]=y
}else{if(i(u)){u.push(y)
}else{x[w]=[u,y]
}}}function r(x){var u=x.length,w,y;
for(var v=0;
v<u;
++v){y=x[v];
if("]"==y){w=false
}if("["==y){w=true
}if("="==y&&!w){return v
}}}function m(y,v){var w=0,u=y.length>>0,x=arguments[2];
while(w<u){if(w in y){x=v.call(undefined,x,y[w],w,y)
}++w
}return x
}function i(u){return Object.prototype.toString.call(u)==="[object Array]"
}function s(v){var u=[];
for(var w in v){if(v.hasOwnProperty(w)){u.push(w)
}}return u
}function p(u,v){if(arguments.length===1&&u===true){v=true;
u=undefined
}v=v||false;
u=u||window.location.toString();
return{data:g(u,v),attr:function(w){w=d[w]||w;
return typeof w!=="undefined"?this.data.attr[w]:this.data.attr
},param:function(w){return typeof w!=="undefined"?this.data.param.query[w]:this.data.param.query
},fparam:function(w){return typeof w!=="undefined"?this.data.param.fragment[w]:this.data.param.fragment
},segment:function(w){if(typeof w==="undefined"){return this.data.seg.path
}else{w=w<0?this.data.seg.path.length+w:w-1;
return this.data.seg.path[w]
}},fsegment:function(w){if(typeof w==="undefined"){return this.data.seg.fragment
}else{w=w<0?this.data.seg.fragment.length+w:w-1;
return this.data.seg.fragment[w]
}}}
}p.jQuery=function(u){if(u!=null){u.fn.url=function(w){var v="";
if(this.length){v=u(this).attr(c(this[0]))||""
}return p(v,w)
};
u.url=p
}};
p.jQuery(window.jQuery);
return p
});
window.Modernizr=function(ay,ax,aw){function U(b){ao.cssText=b
}function T(d,c){return U(ak.join(d+";")+(c||""))
}function S(d,c){return typeof d===c
}function R(d,c){return !!~(""+d).indexOf(c)
}function Q(f,c){for(var h in f){var g=f[h];
if(!R(g,"-")&&ao[g]!==aw){return c=="pfx"?g:!0
}}return !1
}function P(g,c,j){for(var i in g){var h=c[g[i]];
if(h!==aw){return j===!1?g[i]:S(h,"function")?h.bind(j||c):h
}}return !1
}function O(g,f,j){var i=g.charAt(0).toUpperCase()+g.slice(1),h=(g+" "+ai.join(i+" ")+i).split(" ");
return S(f,"string")||S(f,"undefined")?Q(h,f):(h=(g+" "+ah.join(i+" ")+i).split(" "),P(h,f,j))
}function N(){au.input=function(g){for(var f=0,b=g.length;
f<b;
f++){ad[g[f]]=g[f] in an
}return ad.list&&(ad.list=!!ax.createElement("datalist")&&!!ay.HTMLDataListElement),ad
}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),au.inputtypes=function(b){for(var m=0,l,j,g,c=b.length;
m<c;
m++){an.setAttribute("type",j=b[m]),l=an.type!=="text",l&&(an.value=am,an.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(j)&&an.style.WebkitAppearance!==aw?(ar.appendChild(an),g=ax.defaultView,l=g.getComputedStyle&&g.getComputedStyle(an,null).WebkitAppearance!=="textfield"&&an.offsetHeight!==0,ar.removeChild(an)):/^(search|tel)$/.test(j)||(/^(url|email)$/.test(j)?l=an.checkValidity&&an.checkValidity()===!1:l=an.value!=am)),ae[b[m]]=!!l
}return ae
}("search tel url email datetime date month week time datetime-local number range color".split(" "))
}var av="2.7.2",au={},at=!0,ar=ax.documentElement,aq="modernizr",ap=ax.createElement(aq),ao=ap.style,an=ax.createElement("input"),am=":)",al={}.toString,ak=" -webkit- -moz- -o- -ms- ".split(" "),aj="Webkit Moz O ms",ai=aj.split(" "),ah=aj.toLowerCase().split(" "),ag={svg:"http://www.w3.org/2000/svg"},af={},ae={},ad={},ac=[],ab=ac.slice,aa,Z=function(v,u,t,s){var r,q,p,o,h=ax.createElement("div"),g=ax.body,b=g||ax.createElement("body");
if(parseInt(t,10)){while(t--){p=ax.createElement("div"),p.id=s?s[t]:aq+(t+1),h.appendChild(p)
}}return r=["&#173;",'<style id="s',aq,'">',v,"</style>"].join(""),h.id=aq,(g?h:b).innerHTML+=r,b.appendChild(h),g||(b.style.background="",b.style.overflow="hidden",o=ar.style.overflow,ar.style.overflow="hidden",ar.appendChild(b)),q=u(h,v),g?h.parentNode.removeChild(h):(b.parentNode.removeChild(b),ar.style.overflow=o),!!q
},Y=function(f){var h=ay.matchMedia||ay.msMatchMedia;
if(h){return h(f).matches
}var g;
return Z("@media "+f+" { #"+aq+" { position: absolute; } }",function(c){g=(ay.getComputedStyle?getComputedStyle(c,null):c.currentStyle)["position"]=="absolute"
}),g
},X=function(){function c(i,h){h=h||ax.createElement(b[i]||"div"),i="on"+i;
var g=i in h;
return g||(h.setAttribute||(h=ax.createElement("div")),h.setAttribute&&h.removeAttribute&&(h.setAttribute(i,""),g=S(h[i],"function"),S(h[i],"undefined")||(h[i]=aw),h.removeAttribute(i))),h=null,g
}var b={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};
return c
}(),W={}.hasOwnProperty,V;
!S(W,"undefined")&&!S(W.call,"undefined")?V=function(d,c){return W.call(d,c)
}:V=function(d,c){return c in d&&S(d.constructor.prototype[c],"undefined")
},Function.prototype.bind||(Function.prototype.bind=function(f){var i=this;
if(typeof i!="function"){throw new TypeError
}var h=ab.call(arguments,1),g=function(){if(this instanceof g){var b=function(){};
b.prototype=i.prototype;
var d=new b,c=i.apply(d,h.concat(ab.call(arguments)));
return Object(c)===c?c:d
}return i.apply(f,h.concat(ab.call(arguments)))
};
return g
}),af.flexbox=function(){return O("flexWrap")
},af.touch=function(){var b;
return"ontouchstart" in ay||ay.DocumentTouch&&ax instanceof DocumentTouch?b=!0:Z(["@media (",ak.join("touch-enabled),("),aq,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(c){b=c.offsetTop===9
}),b
},af.indexedDB=function(){return !!O("indexedDB",ay)
},af.hashchange=function(){return X("hashchange",ay)&&(ax.documentMode===aw||ax.documentMode>7)
},af.history=function(){return !!ay.history&&!!history.pushState
},af.rgba=function(){return U("background-color:rgba(150,255,150,.5)"),R(ao.backgroundColor,"rgba")
},af.hsla=function(){return U("background-color:hsla(120,40%,100%,.5)"),R(ao.backgroundColor,"rgba")||R(ao.backgroundColor,"hsla")
},af.multiplebgs=function(){return U("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(ao.background)
},af.backgroundsize=function(){return O("backgroundSize")
},af.borderimage=function(){return O("borderImage")
},af.borderradius=function(){return O("borderRadius")
},af.boxshadow=function(){return O("boxShadow")
},af.textshadow=function(){return ax.createElement("div").style.textShadow===""
},af.opacity=function(){return T("opacity:.55"),/^0.55$/.test(ao.opacity)
},af.cssanimations=function(){return O("animationName")
},af.csscolumns=function(){return O("columnCount")
},af.cssgradients=function(){var f="background-image:",d="gradient(linear,left top,right bottom,from(#9f9),to(white));",g="linear-gradient(left top,#9f9, white);";
return U((f+"-webkit- ".split(" ").join(d+f)+ak.join(g+f)).slice(0,-f.length)),R(ao.backgroundImage,"gradient")
},af.cssreflections=function(){return O("boxReflect")
},af.csstransforms=function(){return !!O("transform")
},af.csstransforms3d=function(){var b=!!O("perspective");
return b&&"webkitPerspective" in ar.style&&Z("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(d,f){b=d.offsetLeft===9&&d.offsetHeight===3
}),b
},af.csstransitions=function(){return O("transition")
},af.fontface=function(){var b;
return Z('@font-face {font-family:"font";src:url("https://")}',function(m,l){var j=ax.getElementById("smodernizr"),i=j.sheet||j.styleSheet,h=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";
b=/src/i.test(h)&&h.indexOf(l.split(" ")[0])===0
}),b
},af.generatedcontent=function(){var b;
return Z(["#",aq,"{font:0/0 a}#",aq,':after{content:"',am,'";visibility:hidden;font:3px/1 a}'].join(""),function(c){b=c.offsetHeight>=3
}),b
},af.video=function(){var b=ax.createElement("video"),g=!1;
try{if(g=!!b.canPlayType){g=new Boolean(g),g.ogg=b.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),g.h264=b.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),g.webm=b.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")
}}catch(f){}return g
},af.audio=function(){var b=ax.createElement("audio"),g=!1;
try{if(g=!!b.canPlayType){g=new Boolean(g),g.ogg=b.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),g.mp3=b.canPlayType("audio/mpeg;").replace(/^no$/,""),g.wav=b.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),g.m4a=(b.canPlayType("audio/x-m4a;")||b.canPlayType("audio/aac;")).replace(/^no$/,"")
}}catch(f){}return g
},af.localstorage=function(){try{return localStorage.setItem(aq,aq),localStorage.removeItem(aq),!0
}catch(b){return !1
}},af.sessionstorage=function(){try{return sessionStorage.setItem(aq,aq),sessionStorage.removeItem(aq),!0
}catch(b){return !1
}},af.svg=function(){return !!ax.createElementNS&&!!ax.createElementNS(ag.svg,"svg").createSVGRect
};
for(var M in af){V(af,M)&&(aa=M.toLowerCase(),au[aa]=af[M](),ac.push((au[aa]?"":"no-")+aa))
}return au.input||N(),au.addTest=function(f,c){if(typeof f=="object"){for(var g in f){V(f,g)&&au.addTest(g,f[g])
}}else{f=f.toLowerCase();
if(au[f]!==aw){return au
}c=typeof c=="function"?c():c,typeof at!="undefined"&&at&&(ar.className+=" "+(c?"":"no-")+f),au[f]=c
}return au
},U(""),ap=an=null,function(L,K){function A(g,f){var i=g.createElement("p"),h=g.getElementsByTagName("head")[0]||g.documentElement;
return i.innerHTML="x<style>"+f+"</style>",h.insertBefore(i.lastChild,h.firstChild)
}function z(){var b=t.elements;
return typeof b=="string"?b.split(" "):b
}function y(d){var c=C[d[E]];
return c||(c={},D++,d[E]=D,C[D]=c),c
}function x(b,i,h){i||(i=K);
if(B){return i.createElement(b)
}h||(h=y(i));
var f;
return h.cache[b]?f=h.cache[b].cloneNode():G.test(b)?f=(h.cache[b]=h.createElem(b)).cloneNode():f=h.createElem(b),f.canHaveChildren&&!H.test(b)&&!f.tagUrn?h.frag.appendChild(f):f
}function w(b,m){b||(b=K);
if(B){return b.createDocumentFragment()
}m=m||y(b);
var l=m.frag.cloneNode(),j=0,i=z(),h=i.length;
for(;
j<h;
j++){l.createElement(i[j])
}return l
}function v(d,c){c.cache||(c.cache={},c.createElem=d.createElement,c.createFrag=d.createDocumentFragment,c.frag=c.createFrag()),d.createElement=function(b){return t.shivMethods?x(b,d,c):c.createElem(b)
},d.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+z().join().replace(/[\w\-]+/g,function(b){return c.createElem(b),c.frag.createElement(b),'c("'+b+'")'
})+");return n}")(t,c.frag)
}function u(b){b||(b=K);
var d=y(b);
return t.shivCSS&&!F&&!d.hasCSS&&(d.hasCSS=!!A(b,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),B||v(b,d),b
}var J="3.7.0",I=L.html5||{},H=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,G=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,F,E="_html5shiv",D=0,C={},B;
(function(){try{var b=K.createElement("a");
b.innerHTML="<xyz></xyz>",F="hidden" in b,B=b.childNodes.length==1||function(){K.createElement("a");
var c=K.createDocumentFragment();
return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"
}()
}catch(d){F=!0,B=!0
}})();
var t={elements:I.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:J,shivCSS:I.shivCSS!==!1,supportsUnknownElements:B,shivMethods:I.shivMethods!==!1,type:"default",shivDocument:u,createElement:x,createDocumentFragment:w};
L.html5=t,u(K)
}(this,ax),au._version=av,au._prefixes=ak,au._domPrefixes=ah,au._cssomPrefixes=ai,au.mq=Y,au.hasEvent=X,au.testProp=function(b){return Q([b])
},au.testAllProps=O,au.testStyles=Z,au.prefixed=function(f,d,g){return d?O(f,d,g):O(f,"pfx")
},ar.className=ar.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(at?" js "+ac.join(" "):""),au
}(this,this.document),Modernizr.addTest("mediaqueries",Modernizr.mq("only all")),Modernizr.addTest("performance",!!Modernizr.prefixed("performance",window)),Modernizr.addTest("lastchild",function(){return Modernizr.testStyles("#modernizr div {width:100px} #modernizr :last-child{width:200px;display:block}",function(b){return b.lastChild.offsetWidth>b.firstChild.offsetWidth
},2)
});
/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license */
window.matchMedia||(window.matchMedia=function(){var c=(window.styleMedia||window.media);
if(!c){var d=document.createElement("style"),b=document.getElementsByTagName("script")[0],f=null;
d.type="text/css";
d.id="matchmediajs-test";
b.parentNode.insertBefore(d,b);
f=("getComputedStyle" in window)&&window.getComputedStyle(d)||d.currentStyle;
c={matchMedium:function(g){var h="@media "+g+"{ #matchmediajs-test { width: 1px; } }";
if(d.styleSheet){d.styleSheet.cssText=h
}else{d.textContent=h
}return f.width==="1px"
}}
}return function(g){return{matches:c.matchMedium(g||"all"),media:g||"all"}
}
}());
!function(d,c){"object"==typeof exports&&"undefined"!=typeof module?module.exports=c():"function"==typeof define&&define.amd?define(c):d.moment=c()
}(this,function(){function eB(){return bm.apply(null,arguments)
}function ez(b){bm=b
}function ex(b){return b instanceof Array||"[object Array]"===Object.prototype.toString.call(b)
}function ev(b){return b instanceof Date||"[object Date]"===Object.prototype.toString.call(b)
}function et(g,f){var i,h=[];
for(i=0;
i<g.length;
++i){h.push(f(g[i],i))
}return h
}function er(d,c){return Object.prototype.hasOwnProperty.call(d,c)
}function eq(f,d){for(var g in d){er(d,g)&&(f[g]=d[g])
}return er(d,"toString")&&(f.toString=d.toString),er(d,"valueOf")&&(f.valueOf=d.valueOf),f
}function ep(g,f,i,h){return fm(g,f,i,h,!0).utc()
}function eo(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}
}function en(b){return null==b._pf&&(b._pf=eo()),b._pf
}function em(d){if(null==d._isValid){var c=en(d);
d._isValid=!(isNaN(d._d.getTime())||!(c.overflow<0)||c.empty||c.invalidMonth||c.invalidWeekday||c.nullInput||c.invalidFormat||c.userInvalidated),d._strict&&(d._isValid=d._isValid&&0===c.charsLeftOver&&0===c.unusedTokens.length&&void 0===c.bigHour)
}return d._isValid
}function el(d){var c=ep(NaN);
return null!=d?eq(en(c),d):en(c).userInvalidated=!0,c
}function ek(b){return void 0===b
}function ej(g,f){var j,i,h;
if(ek(f._isAMomentObject)||(g._isAMomentObject=f._isAMomentObject),ek(f._i)||(g._i=f._i),ek(f._f)||(g._f=f._f),ek(f._l)||(g._l=f._l),ek(f._strict)||(g._strict=f._strict),ek(f._tzm)||(g._tzm=f._tzm),ek(f._isUTC)||(g._isUTC=f._isUTC),ek(f._offset)||(g._offset=f._offset),ek(f._pf)||(g._pf=en(f)),ek(f._locale)||(g._locale=f._locale),b5.length>0){for(j in b5){i=b5[j],h=f[i],ek(h)||(g[i]=h)
}}return g
}function ei(c){ej(this,c),this._d=new Date(null!=c._d?c._d.getTime():NaN),ao===!1&&(ao=!0,eB.updateOffset(this),ao=!1)
}function eh(b){return b instanceof ei||null!=b&&null!=b._isAMomentObject
}function eg(b){return 0>b?Math.ceil(b):Math.floor(b)
}function ef(f){var d=+f,g=0;
return 0!==d&&isFinite(d)&&(g=eg(d)),g
}function d9(i,h,o){var n,m=Math.min(i.length,h.length),l=Math.abs(i.length-h.length),j=0;
for(n=0;
m>n;
n++){(o&&i[n]!==h[n]||!o&&ef(i[n])!==ef(h[n]))&&j++
}return j+l
}function d8(c){eB.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+c)
}function d7(f,d){var g=!0;
return eq(function(){return g&&(d8(f+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),g=!1),d.apply(this,arguments)
},d)
}function d6(d,c){ft[d]||(d8(c),ft[d]=!0)
}function d5(b){return b instanceof Function||"[object Function]"===Object.prototype.toString.call(b)
}function d4(b){return"[object Object]"===Object.prototype.toString.call(b)
}function d2(f){var d,g;
for(g in f){d=f[g],d5(d)?this[g]=d:this["_"+g]=d
}this._config=f,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)
}function d0(g,f){var i,h=eq({},g);
for(i in f){er(f,i)&&(d4(g[i])&&d4(f[i])?(h[i]={},eq(h[i],g[i]),eq(h[i],f[i])):null!=f[i]?h[i]=f[i]:delete h[i])
}return h
}function fh(b){null!=b&&this.set(b)
}function fg(b){return b?b.toLowerCase().replace("_","-"):b
}function e9(h){for(var g,m,l,j,i=0;
i<h.length;
){for(j=fg(h[i]).split("-"),g=j.length,m=fg(h[i+1]),m=m?m.split("-"):null;
g>0;
){if(l=e7(j.slice(0,g).join("-"))){return l
}if(m&&m.length>=g&&d9(j,m,!0)>=g-1){break
}g--
}i++
}return null
}function e7(f){var d=null;
if(!eu[f]&&"undefined"!=typeof module&&module&&module.exports){try{d=e4._abbr,require("./locale/"+f),e5(d)
}catch(g){}}return eu[f]
}function e5(f,d){var g;
return f&&(g=ek(d)?e0(f):e3(f,d),g&&(e4=g)),e4._abbr
}function e3(d,c){return null!==c?(c.abbr=d,null!=eu[d]?(d6("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),c=d0(eu[d]._config,c)):null!=c.parentLocale&&(null!=eu[c.parentLocale]?c=d0(eu[c.parentLocale]._config,c):d6("parentLocaleUndefined","specified parentLocale is not defined yet")),eu[d]=new fh(c),e5(d),eu[d]):(delete eu[d],null)
}function e1(f,d){if(null!=d){var g;
null!=eu[f]&&(d=d0(eu[f]._config,d)),g=new fh(d),g.parentLocale=eu[f],eu[f]=g,e5(f)
}else{null!=eu[f]&&(null!=eu[f].parentLocale?eu[f]=eu[f].parentLocale:null!=eu[f]&&delete eu[f])
}return eu[f]
}function e0(d){var c;
if(d&&d._locale&&d._locale._abbr&&(d=d._locale._abbr),!d){return e4
}if(!ex(d)){if(c=e7(d)){return c
}d=[d]
}return e9(d)
}function eZ(){return Object.keys(eu)
}function eY(f,d){var g=f.toLowerCase();
dT[g]=dT[g+"s"]=dT[d]=f
}function eX(b){return"string"==typeof b?dT[b]||dT[b.toLowerCase()]:void 0
}function eW(g){var f,i,h={};
for(i in g){er(g,i)&&(f=eX(i),f&&(h[f]=g[i]))
}return h
}function eV(d,f){return function(b){return null!=b?(eT(this,d,b),eB.updateOffset(this,f),this):eU(this,d)
}
}function eU(d,c){return d.isValid()?d._d["get"+(d._isUTC?"UTC":"")+c]():NaN
}function eT(f,d,g){f.isValid()&&f._d["set"+(f._isUTC?"UTC":"")+d](g)
}function eS(f,d){var g;
if("object"==typeof f){for(g in f){this.set(g,f[g])
}}else{if(f=eX(f),d5(this[f])){return this[f](d)
}}return this
}function eR(h,g,m){var l=""+Math.abs(h),j=g-l.length,i=h>=0;
return(i?m?"+":"":"-")+Math.pow(10,Math.max(0,j)).toString().substr(1)+l
}function eQ(g,f,j,i){var h=i;
"string"==typeof i&&(h=function(){return this[i]()
}),g&&(c9[g]=h),f&&(c9[f[0]]=function(){return eR(h.apply(this,arguments),f[1],f[2])
}),j&&(c9[j]=function(){return this.localeData().ordinal(h.apply(this,arguments),g)
})
}function eP(b){return b.match(/\[[\s\S]/)?b.replace(/^\[|\]$/g,""):b.replace(/\\/g,"")
}function eO(g){var f,i,h=g.match(dJ);
for(f=0,i=h.length;
i>f;
f++){c9[h[f]]?h[f]=c9[h[f]]:h[f]=eP(h[f])
}return function(c){var b="";
for(f=0;
i>f;
f++){b+=h[f] instanceof Function?h[f].call(c,g):h[f]
}return b
}
}function eN(d,c){return d.isValid()?(c=eM(c,d.localeData()),dp[c]=dp[c]||eO(c),dp[c](d)):d.localeData().invalidDate()
}function eM(g,f){function i(b){return f.longDateFormat(b)||b
}var h=5;
for(dz.lastIndex=0;
h>=0&&dz.test(g);
){g=g.replace(dz,i),dz.lastIndex=0,h-=1
}return g
}function eL(f,d,g){fo[f]=d5(d)?d:function(b,c){return b&&g?g:d
}
}function eK(d,c){return er(fo,d)?fo[d](c._strict,c._locale):new RegExp(eJ(d))
}function eJ(b){return eH(b.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(g,f,j,i,h){return f||j||i||h
}))
}function eH(b){return b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")
}function fw(g,f){var i,h=f;
for("string"==typeof g&&(g=[g]),"number"==typeof f&&(h=function(b,d){d[f]=ef(b)
}),i=0;
i<g.length;
i++){bq[g[i]]=h
}}function eC(d,c){fw(d,function(b,h,g,f){g._w=g._w||{},c(b,g._w,g,f)
})
}function fx(f,d,g){null!=d&&er(bq,f)&&bq[f](d,g._a,g,f)
}function ff(d,c){return new Date(Date.UTC(d,c+1,0)).getUTCDate()
}function eA(d,c){return ex(this._months)?this._months[d.month()]:this._months[dY.test(c)?"format":"standalone"][d.month()]
}function dW(d,c){return ex(this._monthsShort)?this._monthsShort[d.month()]:this._monthsShort[dY.test(c)?"format":"standalone"][d.month()]
}function dM(h,g,m){var l,j,i;
for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),l=0;
12>l;
l++){if(j=ep([2000,l]),m&&!this._longMonthsParse[l]&&(this._longMonthsParse[l]=new RegExp("^"+this.months(j,"").replace(".","")+"$","i"),this._shortMonthsParse[l]=new RegExp("^"+this.monthsShort(j,"").replace(".","")+"$","i")),m||this._monthsParse[l]||(i="^"+this.months(j,"")+"|^"+this.monthsShort(j,""),this._monthsParse[l]=new RegExp(i.replace(".",""),"i")),m&&"MMMM"===g&&this._longMonthsParse[l].test(h)){return l
}if(m&&"MMM"===g&&this._shortMonthsParse[l].test(h)){return l
}if(!m&&this._monthsParse[l].test(h)){return l
}}}function dC(f,d){var g;
if(!f.isValid()){return f
}if("string"==typeof d){if(/^\d+$/.test(d)){d=ef(d)
}else{if(d=f.localeData().monthsParse(d),"number"!=typeof d){return f
}}}return g=Math.min(f.date(),ff(f.year(),d)),f._d["set"+(f._isUTC?"UTC":"")+"Month"](d,g),f
}function ds(c){return null!=c?(dC(this,c),eB.updateOffset(this,!0),this):eU(this,"Month")
}function dh(){return ff(this.year(),this.month())
}function c2(b){return this._monthsParseExact?(er(this,"_monthsRegex")||cI.call(this),b?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&b?this._monthsShortStrictRegex:this._monthsShortRegex
}function cS(b){return this._monthsParseExact?(er(this,"_monthsRegex")||cI.call(this),b?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&b?this._monthsStrictRegex:this._monthsRegex
}function cI(){function h(d,c){return c.length-d.length
}var g,m,l=[],j=[],i=[];
for(g=0;
12>g;
g++){m=ep([2000,g]),l.push(this.monthsShort(m,"")),j.push(this.months(m,"")),i.push(this.months(m,"")),i.push(this.monthsShort(m,""))
}for(l.sort(h),j.sort(h),i.sort(h),g=0;
12>g;
g++){l[g]=eH(l[g]),j[g]=eH(j[g]),i[g]=eH(i[g])
}this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+j.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+l.join("|")+")$","i")
}function cz(f){var d,g=f._a;
return g&&-2===en(f).overflow&&(d=g[aX]<0||g[aX]>11?aX:g[aN]<1||g[aN]>ff(g[a7],g[aX])?aN:g[aD]<0||g[aD]>24||24===g[aD]&&(0!==g[at]||0!==g[fJ]||0!==g[fz])?aD:g[at]<0||g[at]>59?at:g[fJ]<0||g[fJ]>59?fJ:g[fz]<0||g[fz]>999?fz:-1,en(f)._overflowDayOfYear&&(a7>d||d>aN)&&(d=aN),en(f)._overflowWeeks&&-1===d&&(d=fj),en(f)._overflowWeekday&&-1===d&&(d=eE),en(f).overflow=d),f
}function cq(s){var r,q,p,o,n,m,l=s._i,j=c4.exec(l)||cU.exec(l);
if(j){for(en(s).iso=!0,r=0,q=cA.length;
q>r;
r++){if(cA[r][1].exec(j[1])){o=cA[r][0],p=cA[r][2]!==!1;
break
}}if(null==o){return void (s._isValid=!1)
}if(j[3]){for(r=0,q=cr.length;
q>r;
r++){if(cr[r][1].exec(j[3])){n=(j[2]||" ")+cr[r][0];
break
}}if(null==n){return void (s._isValid=!1)
}}if(!p&&null!=n){return void (s._isValid=!1)
}if(j[4]){if(!cK.exec(j[4])){return void (s._isValid=!1)
}m="Z"
}s._f=o+(n||"")+(m||""),bf(s)
}else{s._isValid=!1
}}function ch(d){var f=ci.exec(d._i);
return null!==f?void (d._d=new Date(+f[1])):(cq(d),void (d._isValid===!1&&(delete d._isValid,eB.createFromInputFallback(d))))
}function bZ(j,i,q,p,o,n,m){var l=new Date(j,i,q,p,o,n,m);
return 100>j&&j>=0&&isFinite(l.getFullYear())&&l.setFullYear(j),l
}function bQ(d){var c=new Date(Date.UTC.apply(null,arguments));
return 100>d&&d>=0&&isFinite(c.getUTCFullYear())&&c.setUTCFullYear(d),c
}function bH(b){return by(b)?366:365
}function by(b){return b%4===0&&b%100!==0||b%400===0
}function bk(){return by(this.year())
}function a5(g,f,j){var i=7+f-j,h=(7+bQ(g,0,i).getUTCDay()-f)%7;
return -h+i-1
}function aV(u,t,s,r,q){var p,o,n=(7+s-r)%7,m=a5(u,r,q),l=1+7*(t-1)+n+m;
return 0>=l?(p=u-1,o=bH(p)+l):l>bH(u)?(p=u+1,o=l-bH(u)):(p=u,o=l),{year:p,dayOfYear:o}
}function aL(i,h,o){var n,m,l=a5(i.year(),h,o),j=Math.floor((i.dayOfYear()-l-1)/7)+1;
return 1>j?(m=i.year()-1,n=j+aB(m,h,o)):j>aB(i.year(),h,o)?(n=j-aB(i.year(),h,o),m=i.year()+1):(m=i.year(),n=j),{week:n,year:m}
}function aB(g,f,j){var i=a5(g,f,j),h=a5(g+1,f,j);
return(bH(g)-i+h)/7
}function am(f,d,g){return null!=f?f:null!=d?d:g
}function fH(d){var f=new Date(eB.now());
return d._useUTC?[f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()]:[f.getFullYear(),f.getMonth(),f.getDate()]
}function fr(h){var g,m,l,j,i=[];
if(!h._d){for(l=fH(h),h._w&&null==h._a[aN]&&null==h._a[aX]&&bt(h),h._dayOfYear&&(j=am(h._a[a7],l[a7]),h._dayOfYear>bH(j)&&(en(h)._overflowDayOfYear=!0),m=bQ(j,0,h._dayOfYear),h._a[aX]=m.getUTCMonth(),h._a[aN]=m.getUTCDate()),g=0;
3>g&&null==h._a[g];
++g){h._a[g]=i[g]=l[g]
}for(;
7>g;
g++){h._a[g]=i[g]=null==h._a[g]?2===g?1:0:h._a[g]
}24===h._a[aD]&&0===h._a[at]&&0===h._a[fJ]&&0===h._a[fz]&&(h._nextDay=!0,h._a[aD]=0),h._d=(h._useUTC?bQ:bZ).apply(null,i),null!=h._tzm&&h._d.setUTCMinutes(h._d.getUTCMinutes()-h._tzm),h._nextDay&&(h._a[aD]=24)
}}function bt(s){var r,q,p,o,n,m,l,j;
r=s._w,null!=r.GG||null!=r.W||null!=r.E?(n=1,m=4,q=am(r.GG,s._a[a7],aL(eI(),1,4).year),p=am(r.W,1),o=am(r.E,1),(1>o||o>7)&&(j=!0)):(n=s._locale._week.dow,m=s._locale._week.doy,q=am(r.gg,s._a[a7],aL(eI(),n,m).year),p=am(r.w,1),null!=r.d?(o=r.d,(0>o||o>6)&&(j=!0)):null!=r.e?(o=r.e+n,(r.e<0||r.e>6)&&(j=!0)):o=n),1>p||p>aB(q,n,m)?en(s)._overflowWeeks=!0:null!=j?en(s)._overflowWeekday=!0:(l=aV(q,p,o,n,m),s._a[a7]=l.year,s._dayOfYear=l.dayOfYear)
}function bf(s){if(s._f===eB.ISO_8601){return void cq(s)
}s._a=[],en(s).empty=!0;
var r,q,p,o,n,m=""+s._i,l=m.length,j=0;
for(p=eM(s._f,s._locale).match(dJ)||[],r=0;
r<p.length;
r++){o=p[r],q=(m.match(eK(o,s))||[])[0],q&&(n=m.substr(0,m.indexOf(q)),n.length>0&&en(s).unusedInput.push(n),m=m.slice(m.indexOf(q)+q.length),j+=q.length),c9[o]?(q?en(s).empty=!1:en(s).unusedTokens.push(o),fx(o,q,s)):s._strict&&!q&&en(s).unusedTokens.push(o)
}en(s).charsLeftOver=l-j,m.length>0&&en(s).unusedInput.push(m),en(s).bigHour===!0&&s._a[aD]<=12&&s._a[aD]>0&&(en(s).bigHour=void 0),s._a[aD]=a0(s._locale,s._a[aD],s._meridiem),fr(s),cz(s)
}function a0(g,f,i){var h;
return null==i?f:null!=g.meridiemHour?g.meridiemHour(f,i):null!=g.isPM?(h=g.isPM(i),h&&12>f&&(f+=12),h||12!==f||(f=0),f):f
}function aQ(h){var g,m,l,j,i;
if(0===h._f.length){return en(h).invalidFormat=!0,void (h._d=new Date(NaN))
}for(j=0;
j<h._f.length;
j++){i=0,g=ej({},h),null!=h._useUTC&&(g._useUTC=h._useUTC),g._f=h._f[j],bf(g),em(g)&&(i+=en(g).charsLeftOver,i+=10*en(g).unusedTokens.length,en(g).score=i,(null==l||l>i)&&(l=i,m=g))
}eq(h,m||g)
}function aG(d){if(!d._d){var c=eW(d._i);
d._a=et([c.year,c.month,c.day||c.date,c.hour,c.minute,c.second,c.millisecond],function(b){return b&&parseInt(b,10)
}),fr(d)
}}function aw(d){var c=new ei(cz(ah(d)));
return c._nextDay&&(c.add(1,"d"),c._nextDay=void 0),c
}function ah(d){var c=d._i,f=d._f;
return d._locale=d._locale||e0(d._l),null===c||void 0===f&&""===c?el({nullInput:!0}):("string"==typeof c&&(d._i=c=d._locale.preparse(c)),eh(c)?new ei(cz(c)):(ex(f)?aQ(d):f?bf(d):ev(c)?d._d=c:fC(d),em(d)||(d._d=null),d))
}function fC(c){var d=c._i;
void 0===d?c._d=new Date(eB.now()):ev(d)?c._d=new Date(+d):"string"==typeof d?ch(c):ex(d)?(c._a=et(d.slice(0),function(b){return parseInt(b,10)
}),fr(c)):"object"==typeof d?aG(c):"number"==typeof d?c._d=new Date(d):eB.createFromInputFallback(c)
}function fm(h,g,m,l,j){var i={};
return"boolean"==typeof m&&(l=m,m=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=j,i._l=m,i._i=h,i._f=g,i._strict=l,aw(i)
}function eI(g,f,i,h){return fm(g,f,i,h,!1)
}function d3(f,c){var h,g;
if(1===c.length&&ex(c[0])&&(c=c[0]),!c.length){return eI()
}for(h=c[0],g=1;
g<c.length;
++g){(!c[g].isValid()||c[g][f](h))&&(h=c[g])
}return h
}function dR(){var b=[].slice.call(arguments,0);
return d3("isBefore",b)
}function dH(){var b=[].slice.call(arguments,0);
return d3("isAfter",b)
}function dx(v){var u=eW(v),t=u.year||0,s=u.quarter||0,r=u.month||0,q=u.week||0,p=u.day||0,o=u.hour||0,n=u.minute||0,m=u.second||0,l=u.millisecond||0;
this._milliseconds=+l+1000*m+60000*n+3600000*o,this._days=+p+7*q,this._months=+r+3*s+12*t,this._data={},this._locale=e0(),this._bubble()
}function dm(b){return b instanceof dx
}function c7(d,c){eQ(d,0,0,function(){var b=this.utcOffset(),f="+";
return 0>b&&(b=-b,f="-"),f+eR(~~(b/60),2)+c+eR(~~b%60,2)
})
}function cX(h,g){var m=(g||"").match(h)||[],l=m[m.length-1]||[],j=(l+"").match(bl)||["-",0,0],i=+(60*j[1])+ef(j[2]);
return"+"===j[0]?i:-i
}function cN(d,i){var h,g;
return i._isUTC?(h=i.clone(),g=(eh(d)||ev(d)?+d:+eI(d))-+h,h._d.setTime(+h._d+g),eB.updateOffset(h,!1),h):eI(d).local()
}function cD(b){return 15*-Math.round(b._d.getTimezoneOffset()/15)
}function cu(f,i){var h,g=this._offset||0;
return this.isValid()?null!=f?("string"==typeof f?f=cX(ay,f):Math.abs(f)<16&&(f=60*f),!this._isUTC&&i&&(h=cD(this)),this._offset=f,this._isUTC=!0,null!=h&&this.add(h,"m"),g!==f&&(!i||this._changeInProgress?c1(this,ey(f-g,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,eB.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?g:cD(this):null!=f?this:NaN
}function cl(d,c){return null!=d?("string"!=typeof d&&(d=-d),this.utcOffset(d,c),this):-this.utcOffset()
}function b3(b){return this.utcOffset(0,b)
}function bU(b){return this._isUTC&&(this.utcOffset(0,b),this._isUTC=!1,b&&this.subtract(cD(this),"m")),this
}function bL(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(cX(aI,this._i)),this
}function bC(b){return this.isValid()?(b=b?eI(b).utcOffset():0,(this.utcOffset()-b)%60===0):!1
}function bo(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()
}function b7(){if(!ek(this._isDSTShifted)){return this._isDSTShifted
}var d={};
if(ej(d,this),d=ah(d),d._a){var c=d._isUTC?ep(d._a):eI(d._a);
this._isDSTShifted=this.isValid()&&d9(d._a,c.toArray())>0
}else{this._isDSTShifted=!1
}return this._isDSTShifted
}function aq(){return this.isValid()?!this._isUTC:!1
}function fv(){return this.isValid()?this._isUTC:!1
}function e8(){return this.isValid()?this._isUTC&&0===this._offset:!1
}function ey(i,f){var o,n,m,l=i,j=null;
return dm(i)?l={ms:i._milliseconds,d:i._days,M:i._months}:"number"==typeof i?(l={},f?l[f]=i:l.milliseconds=i):(j=b4.exec(i))?(o="-"===j[1]?-1:1,l={y:0,d:ef(j[aN])*o,h:ef(j[aD])*o,m:ef(j[at])*o,s:ef(j[fJ])*o,ms:ef(j[fz])*o}):(j=an.exec(i))?(o="-"===j[1]?-1:1,l={y:dV(j[2],o),M:dV(j[3],o),w:dV(j[4],o),d:dV(j[5],o),h:dV(j[6],o),m:dV(j[7],o),s:dV(j[8],o)}):null==l?l={}:"object"==typeof l&&("from" in l||"to" in l)&&(m=dB(eI(l.from),eI(l.to)),l={},l.ms=m.milliseconds,l.M=m.months),n=new dx(l),dm(i)&&er(i,"_locale")&&(n._locale=i._locale),n
}function dV(f,d){var g=f&&parseFloat(f.replace(",","."));
return(isNaN(g)?0:g)*d
}function dL(f,d){var g={milliseconds:0,months:0};
return g.months=d.month()-f.month()+12*(d.year()-f.year()),f.clone().add(g.months,"M").isAfter(d)&&--g.months,g.milliseconds=+d-+f.clone().add(g.months,"M"),g
}function dB(f,d){var g;
return f.isValid()&&d.isValid()?(d=cN(d,f),f.isBefore(d)?g=dL(f,d):(g=dL(d,f),g.milliseconds=-g.milliseconds,g.months=-g.months),g):{milliseconds:0,months:0}
}function dr(b){return 0>b?-1*Math.round(-1*b):Math.round(b)
}function dg(d,c){return function(i,h){var g,b;
return null===h||isNaN(+h)||(d6(c,"moment()."+c+"(period, number) is deprecated. Please use moment()."+c+"(number, period)."),b=i,i=h,h=b),i="string"==typeof i?+i:i,g=ey(i,h),c1(this,g,d),this
}
}function c1(i,p,o,n){var m=p._milliseconds,l=dr(p._days),j=dr(p._months);
i.isValid()&&(n=null==n?!0:n,m&&i._d.setTime(+i._d+m*o),l&&eT(i,"Date",eU(i,"Date")+l*o),j&&dC(i,eU(i,"Month")+j*o),n&&eB.updateOffset(i,l||j))
}function cR(i,h){var o=i||eI(),n=cN(o,this).startOf("day"),m=this.diff(n,"days",!0),l=-6>m?"sameElse":-1>m?"lastWeek":0>m?"lastDay":1>m?"sameDay":2>m?"nextDay":7>m?"nextWeek":"sameElse",j=h&&(d5(h[l])?h[l]():h[l]);
return this.format(j||this.localeData().calendar(l,this,eI(o)))
}function cH(){return new ei(this)
}function cy(f,d){var g=eh(f)?f:eI(f);
return this.isValid()&&g.isValid()?(d=eX(ek(d)?"millisecond":d),"millisecond"===d?+this>+g:+g<+this.clone().startOf(d)):!1
}function cp(f,d){var g=eh(f)?f:eI(f);
return this.isValid()&&g.isValid()?(d=eX(ek(d)?"millisecond":d),"millisecond"===d?+g>+this:+this.clone().endOf(d)<+g):!1
}function cg(f,d,g){return this.isAfter(f,g)&&this.isBefore(d,g)
}function bY(g,f){var i,h=eh(g)?g:eI(g);
return this.isValid()&&h.isValid()?(f=eX(f||"millisecond"),"millisecond"===f?+this===+h:(i=+h,+this.clone().startOf(f)<=i&&i<=+this.clone().endOf(f))):!1
}function bP(d,c){return this.isSame(d,c)||this.isAfter(d,c)
}function bG(d,c){return this.isSame(d,c)||this.isBefore(d,c)
}function bx(i,h,o){var n,m,l,j;
return this.isValid()?(n=cN(i,this),n.isValid()?(m=60000*(n.utcOffset()-this.utcOffset()),h=eX(h),"year"===h||"month"===h||"quarter"===h?(j=bj(this,n),"quarter"===h?j/=3:"year"===h&&(j/=12)):(l=this-n,j="second"===h?l/1000:"minute"===h?l/60000:"hour"===h?l/3600000:"day"===h?(l-m)/86400000:"week"===h?(l-m)/604800000:l),o?j:eg(j)):NaN):NaN
}function bj(h,g){var m,l,j=12*(g.year()-h.year())+(g.month()-h.month()),i=h.clone().add(j,"months");
return 0>g-i?(m=h.clone().add(j-1,"months"),l=(g-i)/(i-m)):(m=h.clone().add(j+1,"months"),l=(g-i)/(m-i)),-(j+l)
}function a4(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
}function aU(){var b=this.clone().utc();
return 0<b.year()&&b.year()<=9999?d5(Date.prototype.toISOString)?this.toDate().toISOString():eN(b,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):eN(b,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
}function aK(d){var f=eN(this,d||eB.defaultFormat);
return this.localeData().postformat(f)
}function aA(d,c){return this.isValid()&&(eh(d)&&d.isValid()||eI(d).isValid())?ey({to:this,from:d}).locale(this.locale()).humanize(!c):this.localeData().invalidDate()
}function al(b){return this.from(eI(),b)
}function fG(d,c){return this.isValid()&&(eh(d)&&d.isValid()||eI(d).isValid())?ey({from:this,to:d}).locale(this.locale()).humanize(!c):this.localeData().invalidDate()
}function fq(b){return this.to(eI(),b)
}function bs(d){var c;
return void 0===d?this._locale._abbr:(c=e0(d),null!=c&&(this._locale=c),this)
}function a9(){return this._locale
}function aZ(b){switch(b=eX(b)){case"year":this.month(0);
case"quarter":case"month":this.date(1);
case"week":case"isoWeek":case"day":this.hours(0);
case"hour":this.minutes(0);
case"minute":this.seconds(0);
case"second":this.milliseconds(0)
}return"week"===b&&this.weekday(0),"isoWeek"===b&&this.isoWeekday(1),"quarter"===b&&this.month(3*Math.floor(this.month()/3)),this
}function aP(b){return b=eX(b),void 0===b||"millisecond"===b?this:this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms")
}function aF(){return +this._d-60000*(this._offset||0)
}function av(){return Math.floor(+this/1000)
}function ag(){return this._offset?new Date(+this):this._d
}function fB(){var b=this;
return[b.year(),b.month(),b.date(),b.hour(),b.minute(),b.second(),b.millisecond()]
}function fl(){var b=this;
return{years:b.year(),months:b.month(),date:b.date(),hours:b.hours(),minutes:b.minutes(),seconds:b.seconds(),milliseconds:b.milliseconds()}
}function eG(){return this.isValid()?this.toISOString():null
}function d1(){return em(this)
}function dQ(){return eq({},en(this))
}function dG(){return en(this).overflow
}function dw(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}
}function dl(d,c){eQ(0,[d,d.length],0,c)
}function c6(b){return ct.call(this,b,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)
}function cW(b){return ct.call(this,b,this.isoWeek(),this.isoWeekday(),1,4)
}function cM(){return aB(this.year(),1,4)
}function cC(){var b=this.localeData()._week;
return aB(this.year(),b.dow,b.doy)
}function ct(h,g,m,l,j){var i;
return null==h?aL(this,l,j).year:(i=aB(h,l,j),g>i&&(g=i),ck.call(this,h,g,m,l,j))
}function ck(i,h,o,n,m){var l=aV(i,h,o,n,m),j=bQ(l.year,0,l.dayOfYear);
return this.year(j.getUTCFullYear()),this.month(j.getUTCMonth()),this.date(j.getUTCDate()),this
}function b2(b){return null==b?Math.ceil((this.month()+1)/3):this.month(3*(b-1)+this.month()%3)
}function bT(b){return aL(b,this._week.dow,this._week.doy).week
}function bK(){return this._week.dow
}function bB(){return this._week.doy
}function bn(d){var c=this.localeData().week(this);
return null==d?c:this.add(7*(d-c),"d")
}function b6(d){var c=aL(this,1,4).week;
return null==d?c:this.add(7*(d-c),"d")
}function ap(d,c){return"string"!=typeof d?d:isNaN(d)?(d=c.weekdaysParse(d),"number"==typeof d?d:null):parseInt(d,10)
}function fu(d,c){return ex(this._weekdays)?this._weekdays[d.day()]:this._weekdays[this._weekdays.isFormat.test(c)?"format":"standalone"][d.day()]
}function e6(b){return this._weekdaysShort[b.day()]
}function ew(b){return this._weekdaysMin[b.day()]
}function dU(h,g,m){var l,j,i;
for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),l=0;
7>l;
l++){if(j=eI([2000,1]).day(l),m&&!this._fullWeekdaysParse[l]&&(this._fullWeekdaysParse[l]=new RegExp("^"+this.weekdays(j,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[l]=new RegExp("^"+this.weekdaysShort(j,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[l]=new RegExp("^"+this.weekdaysMin(j,"").replace(".",".?")+"$","i")),this._weekdaysParse[l]||(i="^"+this.weekdays(j,"")+"|^"+this.weekdaysShort(j,"")+"|^"+this.weekdaysMin(j,""),this._weekdaysParse[l]=new RegExp(i.replace(".",""),"i")),m&&"dddd"===g&&this._fullWeekdaysParse[l].test(h)){return l
}if(m&&"ddd"===g&&this._shortWeekdaysParse[l].test(h)){return l
}if(m&&"dd"===g&&this._minWeekdaysParse[l].test(h)){return l
}if(!m&&this._weekdaysParse[l].test(h)){return l
}}}function dK(d){if(!this.isValid()){return null!=d?this:NaN
}var c=this._isUTC?this._d.getUTCDay():this._d.getDay();
return null!=d?(d=ap(d,this.localeData()),this.add(d-c,"d")):c
}function dA(d){if(!this.isValid()){return null!=d?this:NaN
}var c=(this.day()+7-this.localeData()._week.dow)%7;
return null==d?c:this.add(d-c,"d")
}function dq(b){return this.isValid()?null==b?this.day()||7:this.day(this.day()%7?b:b-7):null!=b?this:NaN
}function df(d){var c=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/86400000)+1;
return null==d?c:this.add(d-c,"d")
}function c0(){return this.hours()%12||12
}function cQ(d,c){eQ(d,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),c)
})
}function cG(d,c){return c._meridiemParse
}function cx(b){return"p"===(b+"").toLowerCase().charAt(0)
}function co(f,d,g){return f>11?g?"pm":"PM":g?"am":"AM"
}function cf(d,c){c[fz]=ef(1000*("0."+d))
}function bX(){return this._isUTC?"UTC":""
}function bO(){return this._isUTC?"Coordinated Universal Time":""
}function bF(b){return eI(1000*b)
}function bw(){return eI.apply(null,arguments).parseZone()
}function bi(g,f,i){var h=this._calendar[g];
return d5(h)?h.call(f,i):h
}function a3(f){var d=this._longDateFormat[f],g=this._longDateFormat[f.toUpperCase()];
return d||!g?d:(this._longDateFormat[f]=g.replace(/MMMM|MM|DD|dddd/g,function(b){return b.slice(1)
}),this._longDateFormat[f])
}function aT(){return this._invalidDate
}function aJ(b){return this._ordinal.replace("%d",b)
}function az(b){return b
}function ak(g,f,j,i){var h=this._relativeTime[j];
return d5(h)?h(g,f,j,i):h.replace(/%d/i,g)
}function fF(f,d){var g=this._relativeTime[f>0?"future":"past"];
return d5(g)?g(d):g.replace(/%s/i,d)
}function fp(h,g,m,l){var j=e0(),i=ep().set(l,g);
return j[m](i,h)
}function br(i,h,o,n,m){if("number"==typeof i&&(h=i,i=void 0),i=i||"",null!=h){return fp(i,h,o,m)
}var l,j=[];
for(l=0;
n>l;
l++){j[l]=fp(i,l,o,m)
}return j
}function a8(d,c){return br(d,c,"months",12,"month")
}function aY(d,c){return br(d,c,"monthsShort",12,"month")
}function aO(d,c){return br(d,c,"weekdays",7,"day")
}function aE(d,c){return br(d,c,"weekdaysShort",7,"day")
}function au(d,c){return br(d,c,"weekdaysMin",7,"day")
}function af(){var b=this._data;
return this._milliseconds=ai(this._milliseconds),this._days=ai(this._days),this._months=ai(this._months),b.milliseconds=ai(b.milliseconds),b.seconds=ai(b.seconds),b.minutes=ai(b.minutes),b.hours=ai(b.hours),b.months=ai(b.months),b.years=ai(b.years),this
}function fA(g,f,j,i){var h=ey(f,j);
return g._milliseconds+=i*h._milliseconds,g._days+=i*h._days,g._months+=i*h._months,g._bubble()
}function fk(d,c){return fA(this,d,c,1)
}function eF(d,c){return fA(this,d,c,-1)
}function dZ(b){return 0>b?Math.floor(b):Math.ceil(b)
}function dP(){var s,r,q,p,o,n=this._milliseconds,m=this._days,l=this._months,j=this._data;
return n>=0&&m>=0&&l>=0||0>=n&&0>=m&&0>=l||(n+=86400000*dZ(dv(l)+m),m=0,l=0),j.milliseconds=n%1000,s=eg(n/1000),j.seconds=s%60,r=eg(s/60),j.minutes=r%60,q=eg(r/60),j.hours=q%24,m+=eg(q/24),o=eg(dF(m)),l+=o,m-=dZ(dv(o)),p=eg(l/12),l%=12,j.days=m,j.months=l,j.years=p,this
}function dF(b){return 4800*b/146097
}function dv(b){return 146097*b/4800
}function dk(g){var f,i,h=this._milliseconds;
if(g=eX(g),"month"===g||"year"===g){return f=this._days+h/86400000,i=this._months+dF(f),"month"===g?i:i/12
}switch(f=this._days+Math.round(dv(this._months)),g){case"week":return f/7+h/604800000;
case"day":return f+h/86400000;
case"hour":return 24*f+h/3600000;
case"minute":return 1440*f+h/60000;
case"second":return 86400*f+h/1000;
case"millisecond":return Math.floor(86400000*f)+h;
default:throw new Error("Unknown unit "+g)
}}function c5(){return this._milliseconds+86400000*this._days+this._months%12*2592000000+31536000000*ef(this._months/12)
}function cV(b){return function(){return this.as(b)
}
}function cL(b){return b=eX(b),this[b+"s"]()
}function cB(b){return function(){return this._data[b]
}
}function cs(){return eg(this.days()/7)
}function cj(g,f,j,i,h){return h.relativeTime(f||1,!!j,g,i)
}function b1(v,u,t){var s=ey(v).abs(),r=dt(s.as("s")),q=dt(s.as("m")),p=dt(s.as("h")),o=dt(s.as("d")),n=dt(s.as("M")),m=dt(s.as("y")),l=r<di.s&&["s",r]||1>=q&&["m"]||q<di.m&&["mm",q]||1>=p&&["h"]||p<di.h&&["hh",p]||1>=o&&["d"]||o<di.d&&["dd",o]||1>=n&&["M"]||n<di.M&&["MM",n]||1>=m&&["y"]||["yy",m];
return l[2]=u,l[3]=+v>0,l[4]=t,cj.apply(null,l)
}function bS(d,c){return void 0===di[d]?!1:void 0===c?di[d]:(di[d]=c,!0)
}function bJ(f){var d=this.localeData(),g=b1(this,!f,d);
return f&&(g=d.pastFuture(+this,g)),d.postformat(g)
}function bA(){var z,y,x,w=c3(this._milliseconds)/1000,v=c3(this._days),u=c3(this._months);
z=eg(w/60),y=eg(z/60),w%=60,z%=60,x=eg(u/12),u%=12;
var t=x,s=u,r=v,q=y,p=z,o=w,n=this.asSeconds();
return n?(0>n?"-":"")+"P"+(t?t+"Y":"")+(s?s+"M":"")+(r?r+"D":"")+(q||p||o?"T":"")+(q?q+"H":"")+(p?p+"M":"")+(o?o+"S":""):"P0D"
}var bm,b5=eB.momentProperties=[],ao=!1,ft={};
eB.suppressDeprecationWarnings=!1;
var e4,eu={},dT={},dJ=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,dz=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,dp={},c9={},cZ=/\d/,cP=/\d\d/,cF=/\d{3}/,cw=/\d{4}/,cn=/[+-]?\d{6}/,b9=/\d\d?/,bW=/\d\d\d\d?/,bN=/\d\d\d\d\d\d?/,bE=/\d{1,3}/,bv=/\d{1,4}/,bh=/[+-]?\d{1,6}/,a2=/\d+/,aS=/[+-]?\d+/,aI=/Z|[+-]\d\d:?\d\d/gi,ay=/Z|[+-]\d\d(?::?\d\d)?/gi,aj=/[+-]?\d+(\.\d{1,3})?/,fE=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,fo={},bq={},a7=0,aX=1,aN=2,aD=3,at=4,fJ=5,fz=6,fj=7,eE=8;
eQ("M",["MM",2],"Mo",function(){return this.month()+1
}),eQ("MMM",0,0,function(b){return this.localeData().monthsShort(this,b)
}),eQ("MMMM",0,0,function(b){return this.localeData().months(this,b)
}),eY("month","M"),eL("M",b9),eL("MM",b9,cP),eL("MMM",function(d,c){return c.monthsShortRegex(d)
}),eL("MMMM",function(d,c){return c.monthsRegex(d)
}),fw(["M","MM"],function(d,c){c[aX]=ef(d)-1
}),fw(["MMM","MMMM"],function(g,f,j,i){var h=j._locale.monthsParse(g,i,j._strict);
null!=h?f[aX]=h:en(j).invalidMonth=g
});
var dY=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,dO="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),dE="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),du=fE,dj=fE,c4=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,cU=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,cK=/Z|[+-]\d\d(?::?\d\d)?/,cA=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],cr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ci=/^\/?Date\((\-?\d+)/i;
eB.createFromInputFallback=d7("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(b){b._d=new Date(b._i+(b._useUTC?" UTC":""))
}),eQ("Y",0,0,function(){var b=this.year();
return 9999>=b?""+b:"+"+b
}),eQ(0,["YY",2],0,function(){return this.year()%100
}),eQ(0,["YYYY",4],0,"year"),eQ(0,["YYYYY",5],0,"year"),eQ(0,["YYYYYY",6,!0],0,"year"),eY("year","y"),eL("Y",aS),eL("YY",b9,cP),eL("YYYY",bv,cw),eL("YYYYY",bh,cn),eL("YYYYYY",bh,cn),fw(["YYYYY","YYYYYY"],a7),fw("YYYY",function(d,f){f[a7]=2===d.length?eB.parseTwoDigitYear(d):ef(d)
}),fw("YY",function(d,f){f[a7]=eB.parseTwoDigitYear(d)
}),fw("Y",function(d,c){c[a7]=parseInt(d,10)
}),eB.parseTwoDigitYear=function(b){return ef(b)+(ef(b)>68?1900:2000)
};
var b0=eV("FullYear",!1);
eB.ISO_8601=function(){};
var bR=d7("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var b=eI.apply(null,arguments);
return this.isValid()&&b.isValid()?this>b?this:b:el()
}),bI=d7("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var b=eI.apply(null,arguments);
return this.isValid()&&b.isValid()?b>this?this:b:el()
}),bz=function(){return Date.now?Date.now():+new Date
};
c7("Z",":"),c7("ZZ",""),eL("Z",ay),eL("ZZ",ay),fw(["Z","ZZ"],function(f,d,g){g._useUTC=!0,g._tzm=cX(ay,f)
});
var bl=/([\+\-]|\d\d)/gi;
eB.updateOffset=function(){};
var b4=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,an=/^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;
ey.fn=dx.prototype;
var fs=dg(1,"add"),e2=dg(-1,"subtract");
eB.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";
var es=d7("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return void 0===b?this.localeData():this.locale(b)
});
eQ(0,["gg",2],0,function(){return this.weekYear()%100
}),eQ(0,["GG",2],0,function(){return this.isoWeekYear()%100
}),dl("gggg","weekYear"),dl("ggggg","weekYear"),dl("GGGG","isoWeekYear"),dl("GGGGG","isoWeekYear"),eY("weekYear","gg"),eY("isoWeekYear","GG"),eL("G",aS),eL("g",aS),eL("GG",b9,cP),eL("gg",b9,cP),eL("GGGG",bv,cw),eL("gggg",bv,cw),eL("GGGGG",bh,cn),eL("ggggg",bh,cn),eC(["gggg","ggggg","GGGG","GGGGG"],function(g,f,i,h){f[h.substr(0,2)]=ef(g)
}),eC(["gg","GG"],function(f,i,h,g){i[g]=eB.parseTwoDigitYear(f)
}),eQ("Q",0,"Qo","quarter"),eY("quarter","Q"),eL("Q",cZ),fw("Q",function(d,c){c[aX]=3*(ef(d)-1)
}),eQ("w",["ww",2],"wo","week"),eQ("W",["WW",2],"Wo","isoWeek"),eY("week","w"),eY("isoWeek","W"),eL("w",b9),eL("ww",b9,cP),eL("W",b9),eL("WW",b9,cP),eC(["w","ww","W","WW"],function(g,f,i,h){f[h.substr(0,1)]=ef(g)
});
var dS={dow:0,doy:6};
eQ("D",["DD",2],"Do","date"),eY("date","D"),eL("D",b9),eL("DD",b9,cP),eL("Do",function(d,c){return d?c._ordinalParse:c._ordinalParseLenient
}),fw(["D","DD"],aN),fw("Do",function(d,c){c[aN]=ef(d.match(b9)[0],10)
});
var dI=eV("Date",!0);
eQ("d",0,"do","day"),eQ("dd",0,0,function(b){return this.localeData().weekdaysMin(this,b)
}),eQ("ddd",0,0,function(b){return this.localeData().weekdaysShort(this,b)
}),eQ("dddd",0,0,function(b){return this.localeData().weekdays(this,b)
}),eQ("e",0,0,"weekday"),eQ("E",0,0,"isoWeekday"),eY("day","d"),eY("weekday","e"),eY("isoWeekday","E"),eL("d",b9),eL("e",b9),eL("E",b9),eL("dd",fE),eL("ddd",fE),eL("dddd",fE),eC(["dd","ddd","dddd"],function(g,f,j,i){var h=j._locale.weekdaysParse(g,i,j._strict);
null!=h?f.d=h:en(j).invalidWeekday=g
}),eC(["d","e","E"],function(g,f,i,h){f[h]=ef(g)
});
var dy="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),dn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),c8="Su_Mo_Tu_We_Th_Fr_Sa".split("_");
eQ("DDD",["DDDD",3],"DDDo","dayOfYear"),eY("dayOfYear","DDD"),eL("DDD",bE),eL("DDDD",cF),fw(["DDD","DDDD"],function(f,d,g){g._dayOfYear=ef(f)
}),eQ("H",["HH",2],0,"hour"),eQ("h",["hh",2],0,c0),eQ("hmm",0,0,function(){return""+c0.apply(this)+eR(this.minutes(),2)
}),eQ("hmmss",0,0,function(){return""+c0.apply(this)+eR(this.minutes(),2)+eR(this.seconds(),2)
}),eQ("Hmm",0,0,function(){return""+this.hours()+eR(this.minutes(),2)
}),eQ("Hmmss",0,0,function(){return""+this.hours()+eR(this.minutes(),2)+eR(this.seconds(),2)
}),cQ("a",!0),cQ("A",!1),eY("hour","h"),eL("a",cG),eL("A",cG),eL("H",b9),eL("h",b9),eL("HH",b9,cP),eL("hh",b9,cP),eL("hmm",bW),eL("hmmss",bN),eL("Hmm",bW),eL("Hmmss",bN),fw(["H","HH"],aD),fw(["a","A"],function(f,d,g){g._isPm=g._locale.isPM(f),g._meridiem=f
}),fw(["h","hh"],function(f,d,g){d[aD]=ef(f),en(g).bigHour=!0
}),fw("hmm",function(g,f,i){var h=g.length-2;
f[aD]=ef(g.substr(0,h)),f[at]=ef(g.substr(h)),en(i).bigHour=!0
}),fw("hmmss",function(g,f,j){var i=g.length-4,h=g.length-2;
f[aD]=ef(g.substr(0,i)),f[at]=ef(g.substr(i,2)),f[fJ]=ef(g.substr(h)),en(j).bigHour=!0
}),fw("Hmm",function(g,f,i){var h=g.length-2;
f[aD]=ef(g.substr(0,h)),f[at]=ef(g.substr(h))
}),fw("Hmmss",function(g,f,j){var i=g.length-4,h=g.length-2;
f[aD]=ef(g.substr(0,i)),f[at]=ef(g.substr(i,2)),f[fJ]=ef(g.substr(h))
});
var cY=/[ap]\.?m?\.?/i,cO=eV("Hours",!0);
eQ("m",["mm",2],0,"minute"),eY("minute","m"),eL("m",b9),eL("mm",b9,cP),fw(["m","mm"],at);
var cE=eV("Minutes",!1);
eQ("s",["ss",2],0,"second"),eY("second","s"),eL("s",b9),eL("ss",b9,cP),fw(["s","ss"],fJ);
var cv=eV("Seconds",!1);
eQ("S",0,0,function(){return ~~(this.millisecond()/100)
}),eQ(0,["SS",2],0,function(){return ~~(this.millisecond()/10)
}),eQ(0,["SSS",3],0,"millisecond"),eQ(0,["SSSS",4],0,function(){return 10*this.millisecond()
}),eQ(0,["SSSSS",5],0,function(){return 100*this.millisecond()
}),eQ(0,["SSSSSS",6],0,function(){return 1000*this.millisecond()
}),eQ(0,["SSSSSSS",7],0,function(){return 10000*this.millisecond()
}),eQ(0,["SSSSSSSS",8],0,function(){return 100000*this.millisecond()
}),eQ(0,["SSSSSSSSS",9],0,function(){return 1000000*this.millisecond()
}),eY("millisecond","ms"),eL("S",bE,cZ),eL("SS",bE,cP),eL("SSS",bE,cF);
var cm;
for(cm="SSSS";
cm.length<=9;
cm+="S"){eL(cm,a2)
}for(cm="S";
cm.length<=9;
cm+="S"){fw(cm,cf)
}var b8=eV("Milliseconds",!1);
eQ("z",0,0,"zoneAbbr"),eQ("zz",0,0,"zoneName");
var bV=ei.prototype;
bV.add=fs,bV.calendar=cR,bV.clone=cH,bV.diff=bx,bV.endOf=aP,bV.format=aK,bV.from=aA,bV.fromNow=al,bV.to=fG,bV.toNow=fq,bV.get=eS,bV.invalidAt=dG,bV.isAfter=cy,bV.isBefore=cp,bV.isBetween=cg,bV.isSame=bY,bV.isSameOrAfter=bP,bV.isSameOrBefore=bG,bV.isValid=d1,bV.lang=es,bV.locale=bs,bV.localeData=a9,bV.max=bI,bV.min=bR,bV.parsingFlags=dQ,bV.set=eS,bV.startOf=aZ,bV.subtract=e2,bV.toArray=fB,bV.toObject=fl,bV.toDate=ag,bV.toISOString=aU,bV.toJSON=eG,bV.toString=a4,bV.unix=av,bV.valueOf=aF,bV.creationData=dw,bV.year=b0,bV.isLeapYear=bk,bV.weekYear=c6,bV.isoWeekYear=cW,bV.quarter=bV.quarters=b2,bV.month=ds,bV.daysInMonth=dh,bV.week=bV.weeks=bn,bV.isoWeek=bV.isoWeeks=b6,bV.weeksInYear=cC,bV.isoWeeksInYear=cM,bV.date=dI,bV.day=bV.days=dK,bV.weekday=dA,bV.isoWeekday=dq,bV.dayOfYear=df,bV.hour=bV.hours=cO,bV.minute=bV.minutes=cE,bV.second=bV.seconds=cv,bV.millisecond=bV.milliseconds=b8,bV.utcOffset=cu,bV.utc=b3,bV.local=bU,bV.parseZone=bL,bV.hasAlignedHourOffset=bC,bV.isDST=bo,bV.isDSTShifted=b7,bV.isLocal=aq,bV.isUtcOffset=fv,bV.isUtc=e8,bV.isUTC=e8,bV.zoneAbbr=bX,bV.zoneName=bO,bV.dates=d7("dates accessor is deprecated. Use date instead.",dI),bV.months=d7("months accessor is deprecated. Use month instead",ds),bV.years=d7("years accessor is deprecated. Use year instead",b0),bV.zone=d7("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",cl);
var bM=bV,bD={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},bu={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},bg="Invalid date",a1="%d",aR=/\d{1,2}/,aH={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ax=fh.prototype;
ax._calendar=bD,ax.calendar=bi,ax._longDateFormat=bu,ax.longDateFormat=a3,ax._invalidDate=bg,ax.invalidDate=aT,ax._ordinal=a1,ax.ordinal=aJ,ax._ordinalParse=aR,ax.preparse=az,ax.postformat=az,ax._relativeTime=aH,ax.relativeTime=ak,ax.pastFuture=fF,ax.set=d2,ax.months=eA,ax._months=dO,ax.monthsShort=dW,ax._monthsShort=dE,ax.monthsParse=dM,ax._monthsRegex=dj,ax.monthsRegex=cS,ax._monthsShortRegex=du,ax.monthsShortRegex=c2,ax.week=bT,ax._week=dS,ax.firstDayOfYear=bB,ax.firstDayOfWeek=bK,ax.weekdays=fu,ax._weekdays=dy,ax.weekdaysMin=ew,ax._weekdaysMin=c8,ax.weekdaysShort=e6,ax._weekdaysShort=dn,ax.weekdaysParse=dU,ax.isPM=cx,ax._meridiemParse=cY,ax.meridiem=co,e5("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(f){var d=f%10,g=1===ef(f%100/10)?"th":1===d?"st":2===d?"nd":3===d?"rd":"th";
return f+g
}}),eB.lang=d7("moment.lang is deprecated. Use moment.locale instead.",e5),eB.langData=d7("moment.langData is deprecated. Use moment.localeData instead.",e0);
var ai=Math.abs,fD=cV("ms"),fn=cV("s"),bp=cV("m"),a6=cV("h"),aW=cV("d"),aM=cV("w"),aC=cV("M"),ar=cV("y"),fI=cB("milliseconds"),fy=cB("seconds"),fi=cB("minutes"),eD=cB("hours"),dX=cB("days"),dN=cB("months"),dD=cB("years"),dt=Math.round,di={s:45,m:45,h:22,d:26,M:11},c3=Math.abs,cT=dx.prototype;
cT.abs=af,cT.add=fk,cT.subtract=eF,cT.as=dk,cT.asMilliseconds=fD,cT.asSeconds=fn,cT.asMinutes=bp,cT.asHours=a6,cT.asDays=aW,cT.asWeeks=aM,cT.asMonths=aC,cT.asYears=ar,cT.valueOf=c5,cT._bubble=dP,cT.get=cL,cT.milliseconds=fI,cT.seconds=fy,cT.minutes=fi,cT.hours=eD,cT.days=dX,cT.weeks=cs,cT.months=dN,cT.years=dD,cT.humanize=bJ,cT.toISOString=bA,cT.toString=bA,cT.toJSON=bA,cT.locale=bs,cT.localeData=a9,cT.toIsoString=d7("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",bA),cT.lang=es,eQ("X",0,0,"unix"),eQ("x",0,0,"valueOf"),eL("x",aS),eL("X",aj),fw("X",function(f,d,g){g._d=new Date(1000*parseFloat(f,10))
}),fw("x",function(f,d,g){g._d=new Date(ef(f))
}),eB.version="2.12.0",ez(eI),eB.fn=bM,eB.min=dR,eB.max=dH,eB.now=bz,eB.utc=ep,eB.unix=bF,eB.months=a8,eB.isDate=ev,eB.locale=e5,eB.invalid=el,eB.duration=ey,eB.isMoment=eh,eB.weekdays=aO,eB.parseZone=bw,eB.localeData=e0,eB.isDuration=dm,eB.monthsShort=aY,eB.weekdaysMin=au,eB.defineLocale=e3,eB.updateLocale=e1,eB.locales=eZ,eB.weekdaysShort=aE,eB.normalizeUnits=eX,eB.relativeTimeThreshold=bS,eB.prototype=bM;
var cJ=eB;
return cJ
});
if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)){var viewportmeta=document.querySelector('meta[name="viewport"]');
if(viewportmeta){viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0";
document.body.addEventListener("gesturestart",function(){viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"
},false)
}}var CryptoJS=CryptoJS||function(x,b){var v={},o=v.lib={},g=function(){},y=o.Base={extend:function(h){g.prototype=this;
var f=new g;
h&&f.mixIn(h);
f.hasOwnProperty("init")||(f.init=function(){f.$super.init.apply(this,arguments)
});
f.init.prototype=f;
f.$super=this;
return f
},create:function(){var f=this.extend();
f.init.apply(f,arguments);
return f
},init:function(){},mixIn:function(h){for(var f in h){h.hasOwnProperty(f)&&(this[f]=h[f])
}h.hasOwnProperty("toString")&&(this.toString=h.toString)
},clone:function(){return this.init.prototype.extend(this)
}},w=o.WordArray=y.extend({init:function(h,f){h=this.words=h||[];
this.sigBytes=f!=b?f:4*h.length
},toString:function(f){return(f||B).stringify(this)
},concat:function(h){var f=this.words,l=h.words,m=this.sigBytes;
h=h.sigBytes;
this.clamp();
if(m%4){for(var j=0;
j<h;
j++){f[m+j>>>2]|=(l[j>>>2]>>>24-8*(j%4)&255)<<24-8*((m+j)%4)
}}else{if(65535<l.length){for(j=0;
j<h;
j+=4){f[m+j>>>2]=l[j>>>2]
}}else{f.push.apply(f,l)
}}this.sigBytes+=h;
return this
},clamp:function(){var h=this.words,f=this.sigBytes;
h[f>>>2]&=4294967295<<32-8*(f%4);
h.length=x.ceil(f/4)
},clone:function(){var f=y.clone.call(this);
f.words=this.words.slice(0);
return f
},random:function(h){for(var f=[],j=0;
j<h;
j+=4){f.push(4294967296*x.random()|0)
}return new w.init(f,h)
}}),i=v.enc={},B=i.Hex={stringify:function(h){var f=h.words;
h=h.sigBytes;
for(var l=[],m=0;
m<h;
m++){var j=f[m>>>2]>>>24-8*(m%4)&255;
l.push((j>>>4).toString(16));
l.push((j&15).toString(16))
}return l.join("")
},parse:function(h){for(var f=h.length,j=[],l=0;
l<f;
l+=2){j[l>>>3]|=parseInt(h.substr(l,2),16)<<24-4*(l%8)
}return new w.init(j,f/2)
}},d=i.Latin1={stringify:function(h){var f=h.words;
h=h.sigBytes;
for(var j=[],l=0;
l<h;
l++){j.push(String.fromCharCode(f[l>>>2]>>>24-8*(l%4)&255))
}return j.join("")
},parse:function(h){for(var f=h.length,j=[],l=0;
l<f;
l++){j[l>>>2]|=(h.charCodeAt(l)&255)<<24-8*(l%4)
}return new w.init(j,f)
}},A=i.Utf8={stringify:function(h){try{return decodeURIComponent(escape(d.stringify(h)))
}catch(f){throw Error("Malformed UTF-8 data")
}},parse:function(f){return d.parse(unescape(encodeURIComponent(f)))
}},c=o.BufferedBlockAlgorithm=y.extend({reset:function(){this._data=new w.init;
this._nDataBytes=0
},_append:function(f){"string"==typeof f&&(f=A.parse(f));
this._data.concat(f);
this._nDataBytes+=f.sigBytes
},_process:function(j){var h=this._data,p=h.words,q=h.sigBytes,n=this.blockSize,m=q/(4*n),m=j?x.ceil(m):x.max((m|0)-this._minBufferSize,0);
j=m*n;
q=x.min(4*j,q);
if(j){for(var l=0;
l<j;
l+=n){this._doProcessBlock(p,l)
}l=p.splice(0,j);
h.sigBytes-=q
}return new w.init(l,q)
},clone:function(){var f=y.clone.call(this);
f._data=this._data.clone();
return f
},_minBufferSize:0});
o.Hasher=c.extend({cfg:y.extend(),init:function(f){this.cfg=this.cfg.extend(f);
this.reset()
},reset:function(){c.reset.call(this);
this._doReset()
},update:function(f){this._append(f);
this._process();
return this
},finalize:function(f){f&&this._append(f);
return this._doFinalize()
},blockSize:16,_createHelper:function(f){return function(h,j){return(new f.init(j)).finalize(h)
}
},_createHmacHelper:function(f){return function(h,j){return(new z.HMAC.init(f,j)).finalize(h)
}
}});
var z=v.algo={};
return v
}(Math);
(function(m){for(var q=CryptoJS,p=q.lib,A=p.WordArray,o=p.Hasher,p=q.algo,D=[],C=[],B=function(b){return 4294967296*(b-(b|0))|0
},i=2,y=0;
64>y;
){var x;
a:{x=i;
for(var z=m.sqrt(x),c=2;
c<=z;
c++){if(!(x%c)){x=!1;
break a
}}x=!0
}x&&(8>y&&(D[y]=B(m.pow(i,0.5))),C[y]=B(m.pow(i,1/3)),y++);
i++
}var f=[],p=p.SHA256=o.extend({_doReset:function(){this._hash=new A.init(D.slice(0))
},_doProcessBlock:function(n,w){for(var K=this._hash.words,I=K[0],H=K[1],J=K[2],u=K[3],F=K[4],E=K[5],v=K[6],t=K[7],G=0;
64>G;
G++){if(16>G){f[G]=n[w+G]|0
}else{var s=f[G-15],r=f[G-2];
f[G]=((s<<25|s>>>7)^(s<<14|s>>>18)^s>>>3)+f[G-7]+((r<<15|r>>>17)^(r<<13|r>>>19)^r>>>10)+f[G-16]
}s=t+((F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25))+(F&E^~F&v)+C[G]+f[G];
r=((I<<30|I>>>2)^(I<<19|I>>>13)^(I<<10|I>>>22))+(I&H^I&J^H&J);
t=v;
v=E;
E=F;
F=u+s|0;
u=J;
J=H;
H=I;
I=s+r|0
}K[0]=K[0]+I|0;
K[1]=K[1]+H|0;
K[2]=K[2]+J|0;
K[3]=K[3]+u|0;
K[4]=K[4]+F|0;
K[5]=K[5]+E|0;
K[6]=K[6]+v|0;
K[7]=K[7]+t|0
},_doFinalize:function(){var j=this._data,g=j.words,h=8*this._nDataBytes,l=8*j.sigBytes;
g[l>>>5]|=128<<24-l%32;
g[(l+64>>>9<<4)+14]=m.floor(h/4294967296);
g[(l+64>>>9<<4)+15]=h;
j.sigBytes=4*g.length;
this._process();
return this._hash
},clone:function(){var d=o.clone.call(this);
d._hash=this._hash.clone();
return d
}});
q.SHA256=o._createHelper(p);
q.HmacSHA256=o._createHmacHelper(p)
})(Math);
(function(){function aR(f,b,d){d=(d||0)-1;
for(var c=f?f.length:0;
++d<c;
){if(f[d]===b){return d
}}return -1
}function aK(c,f){var d=typeof f;
if(c=c.l,"boolean"==d||null==f){return c[f]?0:-1
}"number"!=d&&"string"!=d&&(d="object");
var b="number"==d?f:a4+f;
return c=(c=c[d])&&c[b],"object"==d?c&&-1<aR(c,f)?0:-1:c?0:-1
}function a1(f){var b=this.l,d=typeof f;
if("boolean"==d||null==f){b[f]=true
}else{"number"!=d&&"string"!=d&&(d="object");
var c="number"==d?f:a4+f,b=b[d]||(b[d]={});
"object"==d?(b[c]||(b[c]=[])).push(f):b[c]=true
}}function aM(b){return b.charCodeAt(0)
}function aJ(l,f){for(var h=l.m,g=f.m,c=-1,j=h.length;
++c<j;
){var b=h[c],d=g[c];
if(b!==d){if(b>d||typeof b=="undefined"){return 1
}if(b<d||typeof d=="undefined"){return -1
}}}return l.n-f.n
}function aQ(h){var d=-1,f=h.length,c=h[0],g=h[f/2|0],b=h[f-1];
if(c&&typeof c=="object"&&g&&typeof g=="object"&&b&&typeof b=="object"){return false
}for(c=aT(),c["false"]=c["null"]=c["true"]=c.undefined=false,g=aT(),g.k=h,g.l=c,g.push=a1;
++d<f;
){g.push(h[d])
}return g
}function a5(b){return"\\"+ab[b]
}function aW(){return aI.pop()||[]
}function aT(){return aF.pop()||{k:null,l:null,m:null,"false":false,n:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,o:null}
}function a0(b){return typeof b.toString!="function"&&typeof(b+"")=="string"
}function a3(b){b.length=0,aI.length<aH&&aI.push(b)
}function aP(c){var b=c.l;
b&&aP(b),c.k=c.l=c.m=c.object=c.number=c.string=c.o=null,aF.length<aH&&aF.push(c)
}function aL(g,c,f){c||(c=0),typeof f=="undefined"&&(f=g?g.length:0);
var d=-1;
f=f-c||0;
for(var b=Array(0>f?0:f);
++d<f;
){b[d]=g[c+d]
}return b
}function aY(bd){function U(v){return v&&typeof v=="object"&&!r(v)&&g.call(v,"__wrapped__")?v:new R(v)
}function R(w,v){this.__chain__=!!v,this.__wrapped__=w
}function S(be){function w(){if(y){var cl=y.slice();
s.apply(cl,arguments)
}if(this instanceof w){var bt=bm(Y.prototype),cl=Y.apply(bt,cl||arguments);
return z(cl)?cl:bt
}return Y.apply(v,cl||arguments)
}var Y=be[0],y=be[2],v=be[4];
return bB(w,be),w
}function bl(Y,co,cl,v,cn){if(cl){var y=cl(Y);
if(typeof y!="undefined"){return y
}}if(!z(Y)){return Y
}var cm=bP.call(Y);
if(!ae[cm]||!bZ.nodeClass&&a0(Y)){return Y
}var be=t[cm];
switch(cm){case ao:case aE:return new be(+Y);
case ad:case an:return new be(Y);
case aq:return y=be(Y.source,ah.exec(Y)),y.lastIndex=Y.lastIndex,y
}if(cm=r(Y),co){var w=!v;
v||(v=aW()),cn||(cn=aW());
for(var bt=v.length;
bt--;
){if(v[bt]==Y){return cn[bt]
}}y=cm?be(Y.length):{}
}else{y=cm?aL(Y):M({},Y)
}return cm&&(g.call(Y,"index")&&(y.index=Y.index),g.call(Y,"input")&&(y.input=Y.input)),co?(v.push(Y),cn.push(y),(cm?bH:b2)(Y,function(cq,cp){y[cp]=bl(cq,co,cl,v,cn)
}),w&&(a3(v),a3(cn)),y):y
}function bm(v){return z(v)?H(v):{}
}function br(be,w,Y){if(typeof be!="function"){return ba
}if(typeof w=="undefined"||!("prototype" in be)){return be
}var y=be.__bindData__;
if(typeof y=="undefined"&&(bZ.funcNames&&(y=!be.name),y=y||!bZ.funcDecomp,!y)){var v=D.call(be);
bZ.funcNames||(y=!aA.test(v)),y||(y=az.test(v),bB(be,y))
}if(false===y||true!==y&&1&y[1]){return be
}switch(Y){case 1:return function(bt){return be.call(w,bt)
};
case 2:return function(cl,bt){return be.call(w,cl,bt)
};
case 3:return function(cm,cl,bt){return be.call(w,cm,cl,bt)
};
case 4:return function(cm,cl,bt,cn){return be.call(w,cm,cl,bt,cn)
}
}return V(be,w)
}function ck(Y){function cr(){var ct=be?cp:this;
if(cq){var cs=cq.slice();
s.apply(cs,arguments)
}return(y||co)&&(cs||(cs=aL(arguments)),y&&s.apply(cs,y),co&&cs.length<bt)?(v|=16,ck([cn,w?v:-4&v,cs,null,cp,bt])):(cs||(cs=arguments),cm&&(cn=ct[cl]),this instanceof cr?(ct=bm(cn.prototype),cs=cn.apply(ct,cs),z(cs)?cs:ct):cn.apply(ct,cs))
}var cn=Y[0],v=Y[1],cq=Y[2],y=Y[3],cp=Y[4],bt=Y[5],be=1&v,cm=2&v,co=4&v,w=8&v,cl=cn;
return bB(cr,Y),cr
}function b5(cl,be){var y=-1,w=bj(),Y=cl?cl.length:0,v=Y>=a6&&w===aR,bt=[];
if(v){var cm=aQ(be);
cm?(w=aK,be=cm):v=false
}for(;
++y<Y;
){cm=cl[y],0>w(be,cm)&&bt.push(cm)
}return v&&aP(be),bt
}function T(y,co,cl,v){v=(v||0)-1;
for(var cn=y?y.length:0,w=[];
++v<cn;
){var cm=y[v];
if(cm&&typeof cm=="object"&&typeof cm.length=="number"&&(r(cm)||bK(cm))){co||(cm=T(cm,co,cl));
var be=-1,Y=cm.length,bt=w.length;
for(w.length+=Y;
++be<Y;
){w[bt++]=cm[be]
}}else{cl||w.push(cm)
}}return w
}function bE(Y,cp,cm,v,co,y){if(cm){var cn=cm(Y,cp);
if(typeof cn!="undefined"){return !!cn
}}if(Y===cp){return 0!==Y||1/Y==1/cp
}if(Y===Y&&!(Y&&ac[typeof Y]||cp&&ac[typeof cp])){return false
}if(null==Y||null==cp){return Y===cp
}var be=bP.call(Y),w=bP.call(cp);
if(be==ag&&(be=au),w==ag&&(w=au),be!=w){return false
}switch(be){case ao:case aE:return +Y==+cp;
case ad:return Y!=+Y?cp!=+cp:0==Y?1/Y==1/cp:Y==+cp;
case aq:case an:return Y==bM(cp)
}if(w=be==aD,!w){var cq=g.call(Y,"__wrapped__"),cl=g.call(cp,"__wrapped__");
if(cq||cl){return bE(cq?Y.__wrapped__:Y,cl?cp.__wrapped__:cp,cm,v,co,y)
}if(be!=au||!bZ.nodeClass&&(a0(Y)||a0(cp))){return false
}if(be=!bZ.argsObject&&bK(Y)?bf:Y.constructor,cq=!bZ.argsObject&&bK(cp)?bf:cp.constructor,be!=cq&&!(l(be)&&be instanceof be&&l(cq)&&cq instanceof cq)&&"constructor" in Y&&"constructor" in cp){return false
}}for(cq=!co,co||(co=aW()),y||(y=aW()),be=co.length;
be--;
){if(co[be]==Y){return y[be]==cp
}}var bt=0,cn=true;
if(co.push(Y),y.push(cp),w){if(be=Y.length,bt=cp.length,cn=bt==Y.length,!cn&&!v){return cn
}for(;
bt--;
){if(w=be,cq=cp[bt],v){for(;
w--&&!(cn=bE(Y[w],cq,cm,v,co,y));
){}}else{if(!(cn=bE(Y[bt],cq,cm,v,co,y))){break
}}}return cn
}return c(cp,function(ct,cs,cr){return g.call(cr,cs)?(bt++,cn=g.call(Y,cs)&&bE(Y[cs],ct,cm,v,co,y)):void 0
}),cn&&!v&&c(Y,function(ct,cr,cs){return g.call(cs,cr)?cn=-1<--bt:void 0
}),cq&&(a3(co),a3(y)),cn
}function P(be,w,Y,y,v){(r(w)?bn:b2)(w,function(cn,cp){var cl,cm,bt=cn,co=be[cp];
if(cn&&((cm=r(cn))||bo(cn))){for(bt=y.length;
bt--;
){if(cl=y[bt]==cn){co=v[bt];
break
}}if(!cl){var cq;
Y&&(bt=Y(co,cn),cq=typeof bt!="undefined")&&(co=bt),cq||(co=cm?r(co)?co:[]:bo(co)?co:{}),y.push(cn),v.push(co),cq||P(co,cn,Y,y,v)
}}else{Y&&(bt=Y(co,cn),typeof bt=="undefined"&&(bt=cn)),typeof bt!="undefined"&&(co=bt)
}be[cp]=co
})
}function b3(w,v){return w+bT(bg()*(v-w+1))
}function b0(cm,w,cq){var co=-1,Y=bj(),cl=cm?cm.length:0,cr=[],bt=!w&&cl>=a6&&Y===aR,be=cq||bt?aW():cr;
if(bt){var cp=aQ(be);
cp?(Y=aK,be=cp):(bt=false,be=cq?be:(a3(be),cr))
}for(;
++co<cl;
){var cp=cm[co],cn=cq?cq(cp,co,cm):cp;
(w?!co||be[be.length-1]!==cn:0>Y(be,cn))&&((cq||bt)&&be.push(cn),cr.push(cp))
}return bt?(a3(be.k),aP(be)):cq&&a3(be),cr
}function N(v){return function(Y,bt,be){var y={};
if(bt=U.createCallback(bt,be,3),r(Y)){be=-1;
for(var cl=Y.length;
++be<cl;
){var w=Y[be];
v(y,w,bt(w,be,Y),Y)
}}else{bH(Y,function(cm,cn,co){v(y,cm,bt(cm,cn,co),co)
})
}return y
}
}function B(y,cp,cl,v,co,w){var cn=1&cp,be=4&cp,Y=16&cp,bt=32&cp;
if(!(2&cp||l(y))){throw new a8
}Y&&!cl.length&&(cp&=-17,Y=cl=false),bt&&!v.length&&(cp&=-33,bt=v=false);
var cm=y&&y.__bindData__;
return cm&&true!==cm?(cm=cm.slice(),!cn||1&cm[1]||(cm[4]=co),!cn&&1&cm[1]&&(cp|=8),!be||4&cm[1]||(cm[5]=w),Y&&s.apply(cm[2]||(cm[2]=[]),cl),bt&&s.apply(cm[3]||(cm[3]=[]),v),cm[1]|=cp,B.apply(null,cm)):(1==cp||17===cp?S:ck)([y,cp,cl,v,co,w])
}function bN(){aj.h=av,aj.b=aj.c=aj.g=aj.i="",aj.e="t",aj.j=true;
for(var be,w=0;
be=arguments[w];
w++){for(var Y in be){aj[Y]=be[Y]
}}w=aj.a,aj.d=/^[^,]+/.exec(w)[0],be=bC,w="return function("+w+"){",Y=aj;
var y="var n,t="+Y.d+",E="+Y.e+";if(!t)return E;"+Y.i+";";
Y.b?(y+="var u=t.length;n=-1;if("+Y.b+"){",bZ.unindexedChars&&(y+="if(s(t)){t=t.split('')}"),y+="while(++n<u){"+Y.g+";}}else{"):bZ.nonEnumArgs&&(y+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+Y.g+";}}else{"),bZ.enumPrototypes&&(y+="var G=typeof t=='function';"),bZ.enumErrorProps&&(y+="var F=t===k||t instanceof Error;");
var v=[];
if(bZ.enumPrototypes&&v.push('!(G&&n=="prototype")'),bZ.enumErrorProps&&v.push('!(F&&(n=="message"||n=="name"))'),Y.j&&Y.f){y+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",v.length&&(y+="if("+v.join("&&")+"){"),y+=Y.g+";",v.length&&(y+="}"),y+="}"
}else{if(y+="for(n in t){",Y.j&&v.push("m.call(t, n)"),v.length&&(y+="if("+v.join("&&")+"){"),y+=Y.g+";",v.length&&(y+="}"),y+="}",bZ.nonEnumShadows){for(y+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;
7>k;
k++){y+="n='"+Y.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",Y.j||(y+="||(!x[n]&&t[n]!==A[n])"),y+="){"+Y.g+"}"
}y+="}"
}}return(Y.b||bZ.nonEnumArgs)&&(y+="}"),y+=Y.c+";return E",be("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",w+y+"}")(br,aN,b8,g,a2,bK,r,bk,aj.f,X,ac,o,an,J,bP)
}function bI(v){return bc[v]
}function bj(){var v=(v=U.indexOf)===i?aR:v;
return v
}function E(y){var v,w;
return !y||bP.call(y)!=au||(v=y.constructor,l(v)&&!(v instanceof v))||!bZ.argsClass&&bK(y)||!bZ.nodeClass&&a0(y)?false:bZ.ownLast?(c(y,function(bt,Y,be){return w=g.call(be,Y),false
}),false!==w):(c(y,function(be,Y){w=Y
}),typeof w=="undefined"||g.call(y,w))
}function bQ(v){return cg[v]
}function bK(v){return v&&typeof v=="object"&&typeof v.length=="number"&&bP.call(v)==ag||false
}function u(be,w,Y){var y=q(be),v=y.length;
for(w=br(w,Y,3);
v--&&(Y=y[v],false!==w(be[Y],Y,be));
){}return be
}function bh(w){var v=[];
return c(w,function(Y,y){l(Y)&&v.push(y)
}),v.sort()
}function ch(bt){for(var w=-1,Y=q(bt),y=Y.length,v={};
++w<y;
){var be=Y[w];
v[bt[be]]=be
}return v
}function l(v){return typeof v=="function"
}function z(v){return !(!v||!ac[typeof v])
}function b9(v){return typeof v=="number"||v&&typeof v=="object"&&bP.call(v)==ad||false
}function bk(v){return typeof v=="string"||v&&typeof v=="object"&&bP.call(v)==an||false
}function d(be){for(var w=-1,Y=q(be),y=Y.length,v=ce(y);
++w<y;
){v[w]=be[Y[w]]
}return v
}function A(cl,y,be){var Y=-1,w=bj(),bt=cl?cl.length:0,v=false;
return be=(0>be?a9(0,bt+be):be)||0,r(cl)?v=-1<w(cl,y,be):typeof bt=="number"?v=-1<(bk(cl)?cl.indexOf(y,be):w(cl,y,be)):bH(cl,function(cm){return ++Y<be?void 0:!(v=cm===y)
}),v
}function bs(be,w,Y){var y=true;
if(w=U.createCallback(w,Y,3),r(be)){Y=-1;
for(var v=be.length;
++Y<v&&(y=!!w(be[Y],Y,be));
){}}else{bH(be,function(cm,cl,bt){return y=!!w(cm,cl,bt)
})
}return y
}function cb(bt,w,Y){var y=[];
if(w=U.createCallback(w,Y,3),r(bt)){Y=-1;
for(var v=bt.length;
++Y<v;
){var be=bt[Y];
w(be,Y,bt)&&y.push(be)
}}else{bH(bt,function(cn,cm,cl){w(cn,cm,cl)&&y.push(cn)
})
}return y
}function b1(bt,w,Y){if(w=U.createCallback(w,Y,3),!r(bt)){var y;
return bH(bt,function(cn,cm,cl){return w(cn,cm,cl)?(y=cn,false):void 0
}),y
}Y=-1;
for(var v=bt.length;
++Y<v;
){var be=bt[Y];
if(w(be,Y,bt)){return be
}}}function bn(Y,v,y){if(v&&typeof y=="undefined"&&r(Y)){y=-1;
for(var w=Y.length;
++y<w&&false!==v(Y[y],y,Y);
){}}else{bH(Y,v,y)
}return Y
}function Q(bt,w,Y){var y=bt,v=bt?bt.length:0;
if(w=w&&typeof Y=="undefined"?w:br(w,Y,3),r(bt)){for(;
v--&&false!==w(bt[v],v,bt);
){}}else{if(typeof v!="number"){var be=q(bt),v=be.length
}else{bZ.unindexedChars&&bk(bt)&&(y=bt.split(""))
}bH(bt,function(cn,cm,cl){return cm=be?be[--v]:--v,w(y[cm],cm,cl)
})
}return bt
}function bO(bt,w,Y){var y=-1,v=bt?bt.length:0,be=ce(typeof v=="number"?v:0);
if(w=U.createCallback(w,Y,3),r(bt)){for(;
++y<v;
){be[y]=w(bt[y],y,bt)
}}else{bH(bt,function(cn,cm,cl){be[++y]=w(cn,cm,cl)
})
}return be
}function bJ(cl,Y,be){var w=-1/0,bt=w;
if(typeof Y!="function"&&be&&be[Y]===cl&&(Y=null),null==Y&&r(cl)){be=-1;
for(var v=cl.length;
++be<v;
){var y=cl[be];
y>bt&&(bt=y)
}}else{Y=null==Y&&bk(cl)?aM:U.createCallback(Y,be,3),bH(cl,function(co,cn,cm){cn=Y(co,cn,cm),cn>w&&(w=cn,bt=co)
})
}return bt
}function Z(cl,y,be,Y){var w=3>arguments.length;
if(y=U.createCallback(y,Y,4),r(cl)){var bt=-1,v=cl.length;
for(w&&(be=cl[++bt]);
++bt<v;
){be=y(be,cl[bt],bt,cl)
}}else{bH(cl,function(co,cm,cn){be=w?(w=false,co):y(be,co,cm,cn)
})
}return be
}function m(be,w,Y,y){var v=3>arguments.length;
return w=U.createCallback(w,y,4),Q(be,function(cm,bt,cl){Y=v?(v=false,cm):w(Y,cm,bt,cl)
}),Y
}function f(Y){var v=-1,y=Y?Y.length:0,w=ce(typeof y=="number"?y:0);
return bn(Y,function(bt){var be=b3(0,++v);
w[v]=w[be],w[be]=bt
}),w
}function bS(be,w,Y){var y;
if(w=U.createCallback(w,Y,3),r(be)){Y=-1;
for(var v=be.length;
++Y<v&&!(y=w(be[Y],Y,be));
){}}else{bH(be,function(cm,cl,bt){return !(y=w(cm,cl,bt))
})
}return !!y
}function bp(bt,w,Y){var y=0,v=bt?bt.length:0;
if(typeof w!="number"&&null!=w){var be=-1;
for(w=U.createCallback(w,Y,3);
++be<v&&w(bt[be],be,bt);
){y++
}}else{if(y=w,null==y||Y){return bt?bt[0]:aX
}}return aL(bt,0,bX(a9(0,y),v))
}function i(w,Y,y){if(typeof y=="number"){var v=w?w.length:0;
y=0>y?a9(0,v+y):y||0
}else{if(y){return y=h(w,Y),w[y]===Y?y:-1
}}return aR(w,Y,y)
}function bw(bt,w,Y){if(typeof w!="number"&&null!=w){var y=0,v=-1,be=bt?bt.length:0;
for(w=U.createCallback(w,Y,3);
++v<be&&w(bt[v],v,bt);
){y++
}}else{y=null==w||Y?1:a9(0,w)
}return aL(bt,y)
}function h(bt,w,Y,y){var v=0,be=bt?bt.length:v;
for(Y=Y?U.createCallback(Y,y,1):ba,w=Y(w);
v<be;
){y=v+be>>>1,Y(bt[y])<w?v=y+1:be=y
}return v
}function C(Y,v,y,w){return typeof v!="boolean"&&null!=v&&(w=y,y=typeof v!="function"&&w&&w[v]===Y?null:v,v=false),null!=y&&(y=U.createCallback(y,w,3)),b0(Y,v,y)
}function I(){for(var Y=1<arguments.length?arguments:arguments[0],v=-1,y=Y?bJ(a7(Y,"length")):0,w=ce(0>y?0:y);
++v<y;
){w[v]=a7(Y,v)
}return w
}function b4(bt,w){var Y=-1,y=bt?bt.length:0,v={};
for(w||!y||r(bt[0])||(w=[]);
++Y<y;
){var be=bt[Y];
w?v[be]=w[Y]:be&&(v[be[0]]=be[1])
}return v
}function V(w,v){return 2<arguments.length?B(w,17,aL(arguments,2),null,v):B(w,1,null,null,v)
}function b6(bt,cv,cp){var w,cu,be,cs,cm,cl,co,cq=0,Y=false,cw=true;
if(!l(bt)){throw new a8
}if(cv=a9(0,cv)||0,true===cp){var cn=true,cw=false
}else{z(cp)&&(cn=cp.leading,Y="maxWait" in cp&&(a9(cv,cp.maxWait)||0),cw="trailing" in cp?cp.trailing:cw)
}var ct=function(){var v=cv-(W()-cs);
0<v?cl=ci(ct,v):(cu&&bY(cu),v=co,cu=cl=co=aX,v&&(cq=W(),be=bt.apply(cm,w),cl||cu||(w=cm=null)))
},cr=function(){cl&&bY(cl),cu=cl=co=aX,(cw||Y!==cv)&&(cq=W(),be=bt.apply(cm,w),cl||cu||(w=cm=null))
};
return function(){if(w=arguments,cs=W(),cm=this,co=cw&&(cl||!cn),false===Y){var cx=cn&&!cl
}else{cu||cn||(cq=cs);
var y=Y-(cs-cq),v=0>=y;
v?(cu&&(cu=bY(cu)),cq=cs,be=bt.apply(cm,w)):cu||(cu=ci(cr,y))
}return v&&cl?cl=bY(cl):cl||cv===Y||(cl=ci(ct,cv)),cx&&(v=true,be=bt.apply(cm,w)),!v||cl||cu||(w=cm=null),be
}
}function ba(v){return v
}function bL(cl,y,be){var Y=true,w=y&&bh(y);
y&&(be||w.length)||(null==be&&(be=y),bt=R,y=cl,cl=U,w=bh(y)),false===be?Y=false:z(be)&&"chain" in be&&(Y=be.chain);
var bt=cl,v=l(bt);
bn(w,function(cn){var cm=cl[cn]=y[cn];
v&&(bt.prototype[cn]=function(){var cp=this.__chain__,cq=this.__wrapped__,co=[cq];
if(s.apply(co,arguments),co=cm.apply(cl,co),Y||cp){if(cq===co&&z(co)){return this
}co=new bt(co),co.__chain__=cp
}return co
})
})
}function by(){}function F(v){return function(w){return w[v]
}
}function p(){return this.__wrapped__
}bd=bd?aC.defaults(aa.Object(),bd,aC.pick(aa,ai)):aa;
var ce=bd.Array,bV=bd.Boolean,bz=bd.Date,bC=bd.Function,j=bd.Math,cf=bd.Number,bf=bd.Object,bb=bd.RegExp,bM=bd.String,a8=bd.TypeError,cc=[],b8=bd.Error.prototype,X=bf.prototype,J=bM.prototype,bW=bd._,bP=X.toString,bv=bb("^"+bM(bP).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),L=j.ceil,bY=bd.clearTimeout,bT=j.floor,D=bC.prototype.toString,bq=bv.test(bq=bf.getPrototypeOf)&&bq,g=X.hasOwnProperty,s=cc.push,G=X.propertyIsEnumerable,ci=bd.setTimeout,bx=cc.splice,n=function(){try{var Y={},v=bv.test(v=bf.defineProperty)&&v,y=v(Y,Y,Y)&&v
}catch(w){}return y
}(),H=bv.test(H=bf.create)&&H,bD=bv.test(bD=ce.isArray)&&bD,cj=bd.isFinite,ca=bd.isNaN,bA=bv.test(bA=bf.keys)&&bA,a9=j.max,bX=j.min,bR=bd.parseInt,bg=j.random,t={};
t[aD]=ce,t[ao]=bV,t[aE]=bz,t[ap]=bC,t[au]=bf,t[ad]=cf,t[aq]=bb,t[an]=bM;
var o={};
o[aD]=o[aE]=o[ad]={constructor:true,toLocaleString:true,toString:true,valueOf:true},o[ao]=o[an]={constructor:true,toString:true,valueOf:true},o[aN]=o[ap]=o[aq]={constructor:true,toString:true},o[au]={constructor:true},function(){for(var y=av.length;
y--;
){var v,w=av[y];
for(v in o){g.call(o,v)&&!g.call(o[v],w)&&(o[v][w]=false)
}}}(),R.prototype=U.prototype;
var bZ=U.support={};
!function(){var be=function(){this.x=1
},w={0:1,length:1},y=[];
be.prototype={valueOf:1,y:1};
for(var v in new be){y.push(v)
}for(v in arguments){}bZ.argsClass=bP.call(arguments)==ag,bZ.argsObject=arguments.constructor==bf&&!(arguments instanceof ce),bZ.enumErrorProps=G.call(b8,"message")||G.call(b8,"name"),bZ.enumPrototypes=G.call(be,"prototype"),bZ.funcDecomp=!bv.test(bd.WinRTError)&&az.test(aY),bZ.funcNames=typeof bC.name=="string",bZ.nonEnumArgs=0!=v,bZ.nonEnumShadows=!/valueOf/.test(y),bZ.ownLast="x"!=y[0],bZ.spliceObjects=(cc.splice.call(w,0,1),!w[0]),bZ.unindexedChars="xx"!="x"[0]+bf("x")[0];
try{bZ.nodeClass=!(bP.call(document)==au&&!({toString:0}+""))
}catch(Y){bZ.nodeClass=true
}}(1),U.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ar,variable:"",imports:{_:U}},H||(bm=function(){function v(){}return function(w){if(z(w)){v.prototype=w;
var y=new v;
v.prototype=null
}return y||bd.Object()
}
}());
var bB=n?function(w,v){af.value=v,n(w,"__bindData__",af)
}:by;
bZ.argsClass||(bK=function(v){return v&&typeof v=="object"&&typeof v.length=="number"&&g.call(v,"callee")&&!G.call(v,"callee")||false
});
var r=bD||function(v){return v&&typeof v=="object"&&typeof v.length=="number"&&bP.call(v)==aD||false
},bG=bN({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),q=bA?function(v){return z(v)?bZ.enumPrototypes&&typeof v=="function"||bZ.nonEnumArgs&&v.length&&bK(v)?bG(v):bA(v):[]
}:bG,K={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:q,g:"if(e(t[n],n,g)===false)return E"},O={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:q,g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},cd={i:"if(!B[typeof t])return E;"+K.i,b:false},bc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cg=ch(bc),bi=bb("("+q(cg).join("|")+")","g"),bU=bb("["+q(bc).join("")+"]","g"),bH=bN(K),M=bN(O,{i:O.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),x=bN(O),c=bN(K,cd,{j:false}),b2=bN(K,cd);
l(/x/)&&(l=function(v){return typeof v=="function"&&bP.call(v)==ap
});
var bo=bq?function(y){if(!y||bP.call(y)!=au||!bZ.argsClass&&bK(y)){return false
}var v=y.valueOf,w=typeof v=="function"&&(w=bq(v))&&bq(w);
return w?y==w||bq(y)==w:E(y)
}:E,bu=N(function(y,v,w){g.call(y,w)?y[w]++:y[w]=1
}),b=N(function(y,v,w){(g.call(y,w)?y[w]:y[w]=[]).push(v)
}),b7=N(function(y,v,w){y[w]=v
}),a7=bO,W=bv.test(W=bz.now)&&W||function(){return(new bz).getTime()
},bF=8==bR(aV+"08")?bR:function(w,v){return bR(bk(w)?w.replace(ax,""):w,v||0)
};
return U.after=function(w,v){if(!l(v)){throw new a8
}return function(){return 1>--w?v.apply(this,arguments):void 0
}
},U.assign=M,U.at=function(be){var w=arguments,Y=-1,y=T(w,true,false,1),w=w[2]&&w[2][w[1]]===be?1:y.length,v=ce(w);
for(bZ.unindexedChars&&bk(be)&&(be=be.split(""));
++Y<w;
){v[Y]=be[y[Y]]
}return v
},U.bind=V,U.bindAll=function(be){for(var w=1<arguments.length?T(arguments,true,false,1):bh(be),Y=-1,y=w.length;
++Y<y;
){var v=w[Y];
be[v]=B(be[v],1,null,null,be)
}return be
},U.bindKey=function(w,v){return 2<arguments.length?B(v,19,aL(arguments,2),null,w):B(v,3,null,null,w)
},U.chain=function(v){return v=new R(v),v.__chain__=true,v
},U.compact=function(be){for(var w=-1,Y=be?be.length:0,y=[];
++w<Y;
){var v=be[w];
v&&y.push(v)
}return y
},U.compose=function(){for(var w=arguments,v=w.length;
v--;
){if(!l(w[v])){throw new a8
}}return function(){for(var y=arguments,Y=w.length;
Y--;
){y=[w[Y].apply(this,y)]
}return y[0]
}
},U.constant=function(v){return function(){return v
}
},U.countBy=bu,U.create=function(y,v){var w=bm(y);
return v?M(w,v):w
},U.createCallback=function(cl,y,be){var Y=typeof cl;
if(null==cl||"function"==Y){return br(cl,y,be)
}if("object"!=Y){return F(cl)
}var w=q(cl),bt=w[0],v=cl[bt];
return 1!=w.length||v!==v||z(v)?function(cm){for(var co=w.length,cn=false;
co--&&(cn=bE(cm[w[co]],cl[w[co]],null,true));
){}return cn
}:function(cm){return cm=cm[bt],v===cm&&(0!==v||1/v==1/cm)
}
},U.curry=function(w,v){return v=typeof v=="number"?v:+v||w.length,B(w,4,null,null,null,v)
},U.debounce=b6,U.defaults=x,U.defer=function(w){if(!l(w)){throw new a8
}var v=aL(arguments,1);
return ci(function(){w.apply(aX,v)
},1)
},U.delay=function(y,v){if(!l(y)){throw new a8
}var w=aL(arguments,2);
return ci(function(){y.apply(aX,w)
},v)
},U.difference=function(v){return b5(v,T(arguments,true,true,1))
},U.filter=cb,U.flatten=function(Y,v,y,w){return typeof v!="boolean"&&null!=v&&(w=y,y=typeof v!="function"&&w&&w[v]===Y?null:v,v=false),null!=y&&(Y=bO(Y,y,w)),T(Y,v)
},U.forEach=bn,U.forEachRight=Q,U.forIn=c,U.forInRight=function(be,w,Y){var y=[];
c(be,function(cl,bt){y.push(bt,cl)
});
var v=y.length;
for(w=br(w,Y,3);
v--&&false!==w(y[v--],y[v],be);
){}return be
},U.forOwn=b2,U.forOwnRight=u,U.functions=bh,U.groupBy=b,U.indexBy=b7,U.initial=function(bt,w,Y){var y=0,v=bt?bt.length:0;
if(typeof w!="number"&&null!=w){var be=v;
for(w=U.createCallback(w,Y,3);
be--&&w(bt[be],be,bt);
){y++
}}else{y=null==w||Y?1:w||y
}return aL(bt,0,bX(a9(0,v-y),v))
},U.intersection=function(){for(var cn=[],w=-1,cr=arguments.length,cp=aW(),be=bj(),cm=be===aR,cs=aW();
++w<cr;
){var cl=arguments[w];
(r(cl)||bK(cl))&&(cn.push(cl),cp.push(cm&&cl.length>=a6&&aQ(w?cn[w]:cs)))
}var cm=cn[0],bt=-1,cq=cm?cm.length:0,co=[];
aR:for(;
++bt<cq;
){var Y=cp[0],cl=cm[bt];
if(0>(Y?aK(Y,cl):be(cs,cl))){for(w=cr,(Y||cs).push(cl);
--w;
){if(Y=cp[w],0>(Y?aK(Y,cl):be(cn[w],cl))){continue aR
}}co.push(cl)
}}for(;
cr--;
){(Y=cp[cr])&&aP(Y)
}return a3(cp),a3(cs),co
},U.invert=ch,U.invoke=function(cl,y){var be=aL(arguments,2),Y=-1,w=typeof y=="function",bt=cl?cl.length:0,v=ce(typeof bt=="number"?bt:0);
return bn(cl,function(cm){v[++Y]=(w?y:cm[y]).apply(cm,be)
}),v
},U.keys=q,U.map=bO,U.mapValues=function(Y,v,y){var w={};
return v=U.createCallback(v,y,3),b2(Y,function(cl,bt,be){w[bt]=v(cl,bt,be)
}),w
},U.max=bJ,U.memoize=function(y,v){if(!l(y)){throw new a8
}var w=function(){var be=w.cache,Y=v?v.apply(this,arguments):a4+arguments[0];
return g.call(be,Y)?be[Y]:be[Y]=y.apply(this,arguments)
};
return w.cache={},w
},U.merge=function(cl){var y=arguments,be=2;
if(!z(cl)){return cl
}if("number"!=typeof y[2]&&(be=y.length),3<be&&"function"==typeof y[be-2]){var Y=br(y[--be-1],y[be--],2)
}else{2<be&&"function"==typeof y[be-1]&&(Y=y[--be])
}for(var y=aL(arguments,1,be),w=-1,bt=aW(),v=aW();
++w<be;
){P(cl,y[w],Y,bt,v)
}return a3(bt),a3(v),cl
},U.min=function(cl,Y,be){var w=1/0,bt=w;
if(typeof Y!="function"&&be&&be[Y]===cl&&(Y=null),null==Y&&r(cl)){be=-1;
for(var v=cl.length;
++be<v;
){var y=cl[be];
y<bt&&(bt=y)
}}else{Y=null==Y&&bk(cl)?aM:U.createCallback(Y,be,3),bH(cl,function(co,cn,cm){cn=Y(co,cn,cm),cn<w&&(w=cn,bt=co)
})
}return bt
},U.omit=function(cm,Y,bt){var be={};
if(typeof Y!="function"){var w=[];
c(cm,function(co,cn){w.push(cn)
});
for(var w=b5(w,T(arguments,true,false,1)),cl=-1,v=w.length;
++cl<v;
){var y=w[cl];
be[y]=cm[y]
}}else{Y=U.createCallback(Y,bt,3),c(cm,function(cp,co,cn){Y(cp,co,cn)||(be[co]=cp)
})
}return be
},U.once=function(y){var v,w;
if(!l(y)){throw new a8
}return function(){return v?w:(v=true,w=y.apply(this,arguments),y=null,w)
}
},U.pairs=function(bt){for(var w=-1,Y=q(bt),y=Y.length,v=ce(y);
++w<y;
){var be=Y[w];
v[w]=[be,bt[be]]
}return v
},U.partial=function(v){return B(v,16,aL(arguments,1))
},U.partialRight=function(v){return B(v,32,null,aL(arguments,1))
},U.pick=function(cm,Y,bt){var be={};
if(typeof Y!="function"){for(var w=-1,cl=T(arguments,true,false,1),v=z(cm)?cl.length:0;
++w<v;
){var y=cl[w];
y in cm&&(be[y]=cm[y])
}}else{Y=U.createCallback(Y,bt,3),c(cm,function(cp,co,cn){Y(cp,co,cn)&&(be[co]=cp)
})
}return be
},U.pluck=a7,U.property=F,U.pull=function(cl){for(var y=arguments,be=0,Y=y.length,w=cl?cl.length:0;
++be<Y;
){for(var bt=-1,v=y[be];
++bt<w;
){cl[bt]===v&&(bx.call(cl,bt--,1),w--)
}}return cl
},U.range=function(be,w,Y){be=+be||0,Y=typeof Y=="number"?Y:+Y||1,null==w&&(w=be,be=0);
var y=-1;
w=a9(0,L((w-be)/(Y||1)));
for(var v=ce(w);
++y<w;
){v[y]=be,be+=Y
}return v
},U.reject=function(y,v,w){return v=U.createCallback(v,w,3),cb(y,function(bt,be,Y){return !v(bt,be,Y)
})
},U.remove=function(bt,w,Y){var y=-1,v=bt?bt.length:0,be=[];
for(w=U.createCallback(w,Y,3);
++y<v;
){Y=bt[y],w(Y,y,bt)&&(be.push(Y),bx.call(bt,y--,1),v--)
}return be
},U.rest=bw,U.shuffle=f,U.sortBy=function(cl,w,be){var y=-1,bt=r(w),v=cl?cl.length:0,Y=ce(typeof v=="number"?v:0);
for(bt||(w=U.createCallback(w,be,3)),bn(cl,function(cp,co,cn){var cm=Y[++y]=aT();
bt?cm.m=bO(w,function(cq){return cp[cq]
}):(cm.m=aW())[0]=w(cp,co,cn),cm.n=y,cm.o=cp
}),v=Y.length,Y.sort(aJ);
v--;
){cl=Y[v],Y[v]=cl.o,bt||a3(cl.m),aP(cl)
}return Y
},U.tap=function(w,v){return v(w),w
},U.throttle=function(be,w,Y){var y=true,v=true;
if(!l(be)){throw new a8
}return false===Y?y=false:z(Y)&&(y="leading" in Y?Y.leading:y,v="trailing" in Y?Y.trailing:v),at.leading=y,at.maxWait=w,at.trailing=v,b6(be,w,at)
},U.times=function(be,w,Y){be=-1<(be=+be)?be:0;
var y=-1,v=ce(be);
for(w=br(w,Y,1);
++y<be;
){v[y]=w(y)
}return v
},U.toArray=function(v){return v&&typeof v.length=="number"?bZ.unindexedChars&&bk(v)?v.split(""):aL(v):d(v)
},U.transform=function(bt,w,Y,y){var v=r(bt);
if(null==Y){if(v){Y=[]
}else{var be=bt&&bt.constructor;
Y=bm(be&&be.prototype)
}}return w&&(w=U.createCallback(w,y,4),(v?bH:b2)(bt,function(cn,cm,cl){return w(Y,cn,cm,cl)
})),Y
},U.union=function(){return b0(T(arguments,true,true))
},U.uniq=C,U.values=d,U.where=cb,U.without=function(v){return b5(v,aL(arguments,1))
},U.wrap=function(w,v){return B(v,16,[w])
},U.xor=function(){for(var Y=-1,v=arguments.length;
++Y<v;
){var y=arguments[Y];
if(r(y)||bK(y)){var w=w?b0(b5(w,y).concat(b5(y,w))):y
}}return w||[]
},U.zip=I,U.zipObject=b4,U.collect=bO,U.drop=bw,U.each=bn,U.eachRight=Q,U.extend=M,U.methods=bh,U.object=b4,U.select=cb,U.tail=bw,U.unique=C,U.unzip=I,bL(U),U.clone=function(Y,v,y,w){return typeof v!="boolean"&&null!=v&&(w=y,y=v,v=false),bl(Y,v,typeof y=="function"&&br(y,w,1))
},U.cloneDeep=function(y,v,w){return bl(y,true,typeof v=="function"&&br(v,w,1))
},U.contains=A,U.escape=function(v){return null==v?"":bM(v).replace(bU,bI)
},U.every=bs,U.find=b1,U.findIndex=function(be,w,Y){var y=-1,v=be?be.length:0;
for(w=U.createCallback(w,Y,3);
++y<v;
){if(w(be[y],y,be)){return y
}}return -1
},U.findKey=function(Y,v,y){var w;
return v=U.createCallback(v,y,3),b2(Y,function(cl,bt,be){return v(cl,bt,be)?(w=bt,false):void 0
}),w
},U.findLast=function(Y,v,y){var w;
return v=U.createCallback(v,y,3),Q(Y,function(cl,bt,be){return v(cl,bt,be)?(w=cl,false):void 0
}),w
},U.findLastIndex=function(Y,v,y){var w=Y?Y.length:0;
for(v=U.createCallback(v,y,3);
w--;
){if(v(Y[w],w,Y)){return w
}}return -1
},U.findLastKey=function(Y,v,y){var w;
return v=U.createCallback(v,y,3),u(Y,function(cl,bt,be){return v(cl,bt,be)?(w=bt,false):void 0
}),w
},U.has=function(w,v){return w?g.call(w,v):false
},U.identity=ba,U.indexOf=i,U.isArguments=bK,U.isArray=r,U.isBoolean=function(v){return true===v||false===v||v&&typeof v=="object"&&bP.call(v)==ao||false
},U.isDate=function(v){return v&&typeof v=="object"&&bP.call(v)==aE||false
},U.isElement=function(v){return v&&1===v.nodeType||false
},U.isEmpty=function(Y){var v=true;
if(!Y){return v
}var y=bP.call(Y),w=Y.length;
return y==aD||y==an||(bZ.argsClass?y==ag:bK(Y))||y==au&&typeof w=="number"&&l(Y.splice)?!w:(b2(Y,function(){return v=false
}),v)
},U.isEqual=function(Y,v,y,w){return bE(Y,v,typeof y=="function"&&br(y,w,2))
},U.isFinite=function(v){return cj(v)&&!ca(parseFloat(v))
},U.isFunction=l,U.isNaN=function(v){return b9(v)&&v!=+v
},U.isNull=function(v){return null===v
},U.isNumber=b9,U.isObject=z,U.isPlainObject=bo,U.isRegExp=function(v){return v&&ac[typeof v]&&bP.call(v)==aq||false
},U.isString=bk,U.isUndefined=function(v){return typeof v=="undefined"
},U.lastIndexOf=function(Y,v,y){var w=Y?Y.length:0;
for(typeof y=="number"&&(w=(0>y?a9(0,w+y):bX(y,w-1))+1);
w--;
){if(Y[w]===v){return w
}}return -1
},U.mixin=bL,U.noConflict=function(){return bd._=bW,this
},U.noop=by,U.now=W,U.parseInt=bF,U.random=function(be,w,Y){var y=null==be,v=null==w;
return null==Y&&(typeof be=="boolean"&&v?(Y=be,be=1):v||typeof w!="boolean"||(Y=w,v=true)),y&&v&&(w=1),be=+be||0,v?(w=be,be=0):w=+w||0,Y||be%1||w%1?(Y=bg(),bX(be+Y*(w-be+parseFloat("1e-"+((Y+"").length-1))),w)):b3(be,w)
},U.reduce=Z,U.reduceRight=m,U.result=function(y,v){if(y){var w=y[v];
return l(w)?y[v]():w
}},U.runInContext=aY,U.size=function(w){var v=w?w.length:0;
return typeof v=="number"?v:q(w).length
},U.some=bS,U.sortedIndex=h,U.template=function(Y,cp,cm){var v=U.templateSettings;
Y=bM(Y||""),cm=x({},cm,v);
var co,y=x({},cm.imports,v.imports),v=q(y),y=d(y),bt=0,be=cm.interpolate||am,cl="__p+='",be=bb((cm.escape||am).source+"|"+be.source+"|"+(be===ar?al:am).source+"|"+(cm.evaluate||am).source+"|$","g");
Y.replace(be,function(cr,ct,cs,cu,cq,cv){return cs||(cs=cu),cl+=Y.slice(bt,cv).replace(ak,a5),ct&&(cl+="'+__e("+ct+")+'"),cq&&(co=true,cl+="';"+cq+";\n__p+='"),cs&&(cl+="'+((__t=("+cs+"))==null?'':__t)+'"),bt=cv+cr.length,cr
}),cl+="';",be=cm=cm.variable,be||(cm="obj",cl="with("+cm+"){"+cl+"}"),cl=(co?cl.replace(aG,""):cl).replace(ay,"$1").replace(aw,"$1;"),cl="function("+cm+"){"+(be?"":cm+"||("+cm+"={});")+"var __t,__p='',__e=_.escape"+(co?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+cl+"return __p}";
try{var cn=bC(v,"return "+cl).apply(aX,y)
}catch(w){throw w.source=cl,w
}return cp?cn(cp):(cn.source=cl,cn)
},U.unescape=function(v){return null==v?"":bM(v).replace(bi,bQ)
},U.uniqueId=function(w){var v=++aS;
return bM(null==w?"":w)+v
},U.all=bs,U.any=bS,U.detect=b1,U.findWhere=b1,U.foldl=Z,U.foldr=m,U.include=A,U.inject=Z,bL(function(){var v={};
return b2(U,function(w,y){U.prototype[y]||(v[y]=w)
}),v
}(),false),U.first=bp,U.last=function(bt,w,Y){var y=0,v=bt?bt.length:0;
if(typeof w!="number"&&null!=w){var be=v;
for(w=U.createCallback(w,Y,3);
be--&&w(bt[be],be,bt);
){y++
}}else{if(y=w,null==y||Y){return bt?bt[v-1]:aX
}}return aL(bt,a9(0,v-y))
},U.sample=function(y,v,w){return y&&typeof y.length!="number"?y=d(y):bZ.unindexedChars&&bk(y)&&(y=y.split("")),null==v||w?y?y[b3(0,y.length-1)]:aX:(y=f(y),y.length=bX(a9(0,v),y.length),y)
},U.take=bp,U.head=bp,b2(U,function(y,v){var w="sample"!==v;
U.prototype[v]||(U.prototype[v]=function(be,bt){var Y=this.__chain__,cl=y(this.__wrapped__,be,bt);
return Y||null!=be&&(!bt||w&&typeof be=="function")?new R(cl,Y):cl
})
}),U.VERSION="2.4.0",U.prototype.chain=function(){return this.__chain__=true,this
},U.prototype.toString=function(){return bM(this.__wrapped__)
},U.prototype.value=p,U.prototype.valueOf=p,bH(["join","pop","shift"],function(w){var v=cc[w];
U.prototype[w]=function(){var Y=this.__chain__,y=v.apply(this.__wrapped__,arguments);
return Y?new R(y,Y):y
}
}),bH(["push","reverse","sort","unshift"],function(w){var v=cc[w];
U.prototype[w]=function(){return v.apply(this.__wrapped__,arguments),this
}
}),bH(["concat","slice","splice"],function(w){var v=cc[w];
U.prototype[w]=function(){return new R(v.apply(this.__wrapped__,arguments),this.__chain__)
}
}),bZ.spliceObjects||bH(["pop","shift","splice"],function(y){var v=cc[y],w="splice"==y;
U.prototype[y]=function(){var bt=this.__chain__,be=this.__wrapped__,Y=v.apply(be,arguments);
return 0===be.length&&delete be[0],bt||w?new R(Y,bt):Y
}
}),U
}var aX,aI=[],aF=[],aS=0,a2={},a4=+new Date+"",a6=75,aH=40,aV=" \t\x0B\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",aG=/\b__p\+='';/g,ay=/\b(__p\+=)''\+/g,aw=/(__e\(.*?\)|\b__t\))\+'';/g,al=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ah=/\w*$/,aA=/^\s*function[ \n\r\t]+\w/,ar=/<%=([\s\S]+?)%>/g,ax=RegExp("^["+aV+"]*0+(?=.$)"),am=/($^)/,az=/\bthis\b/,ak=/['\n\r\t\u2028\u2029\\]/g,ai="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),av="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),ag="[object Arguments]",aD="[object Array]",ao="[object Boolean]",aE="[object Date]",aN="[object Error]",ap="[object Function]",ad="[object Number]",au="[object Object]",aq="[object RegExp]",an="[object String]",ae={};
ae[ap]=false,ae[ag]=ae[aD]=ae[ao]=ae[aE]=ae[ad]=ae[au]=ae[aq]=ae[an]=true;
var at={leading:false,maxWait:0,trailing:false},af={configurable:false,enumerable:false,value:null,writable:false},aj={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:false},ac={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false},ab={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},aa=ac[typeof window]&&window||this,aU=ac[typeof exports]&&exports&&!exports.nodeType&&exports,aZ=ac[typeof module]&&module&&!module.nodeType&&module,aO=aZ&&aZ.exports===aU&&aU,aB=ac[typeof global]&&global;
!aB||aB.global!==aB&&aB.window!==aB||(aa=aB);
var aC=aY();
typeof define=="function"&&typeof define.amd=="object"&&define.amd?(aa._=aC,define(function(){return aC
})):aU&&aZ?aO?(aZ.exports=aC)._=aC:aU._=aC:aa._=aC
}).call(this);
if(!String.prototype.contains){String.prototype.contains=function(){return String.prototype.indexOf.apply(this,arguments)!==-1
}
}if(!Date.now){Date.now=function now(){return new Date().getTime()
}
}(function(b){b.isScrollToFixed=function(c){return !!b(c).data("ScrollToFixed")
};
b.ScrollToFixed=function(f,l){var p=this;
p.$el=b(f);
p.el=f;
p.$el.data("ScrollToFixed",p);
var d=false;
var K=p.$el;
var L;
var I;
var n;
var g;
var C;
var H=0;
var u=0;
var m=-1;
var h=-1;
var x=null;
var D;
var i;
function y(){K.trigger("preUnfixed.ScrollToFixed");
o();
K.trigger("unfixed.ScrollToFixed");
h=-1;
H=K.offset().top;
u=K.offset().left;
if(p.options.offsets){u+=(K.offset().left-K.position().left)
}if(m==-1){m=u
}L=K.css("position");
d=true;
if(p.options.bottom!=-1){K.trigger("preFixed.ScrollToFixed");
A();
K.trigger("fixed.ScrollToFixed")
}}function r(){var M=p.options.limit;
if(!M){return 0
}if(typeof(M)==="function"){return M.apply(K)
}return M
}function t(){return L==="fixed"
}function B(){return L==="absolute"
}function j(){return !(t()||B())
}function A(){if(!t()){var M=K[0].getBoundingClientRect();
x.css({display:K.css("display"),width:M.width,height:M.height,"float":K.css("float")});
cssOptions={"z-index":p.options.zIndex,position:"fixed",top:p.options.bottom==-1?w():"",bottom:p.options.bottom==-1?"":p.options.bottom,"margin-left":"0px"};
if(!p.options.dontSetWidth){cssOptions.width=K.css("width")
}K.css(cssOptions);
K.addClass(p.options.baseClassName);
if(p.options.className){K.addClass(p.options.className)
}L="fixed"
}}function c(){var N=r();
var M=u;
if(p.options.removeOffsets){M="";
N=N-H
}cssOptions={position:"absolute",top:N,left:M,"margin-left":"0px",bottom:""};
if(!p.options.dontSetWidth){cssOptions.width=K.css("width")
}K.css(cssOptions);
L="absolute"
}function o(){if(!j()){h=-1;
x.css("display","none");
K.css({"z-index":C,width:"",position:I,left:"",top:g,"margin-left":""});
K.removeClass("scroll-to-fixed-fixed");
if(p.options.className){K.removeClass(p.options.className)
}L=null
}}function z(M){if(M!=h){K.css("left",u-M);
h=M
}}function w(){var M=p.options.marginTop;
if(!M){return 0
}if(typeof(M)==="function"){return M.apply(K)
}return M
}function E(){if(!b.isScrollToFixed(K)||K.is(":hidden")){return
}var P=d;
var O=j();
if(!d){y()
}else{if(j()){H=K.offset().top;
u=K.offset().left
}}var M=b(window).scrollLeft();
var Q=b(window).scrollTop();
var N=r();
if(p.options.minWidth&&b(window).width()<p.options.minWidth){if(!j()||!P){s();
K.trigger("preUnfixed.ScrollToFixed");
o();
K.trigger("unfixed.ScrollToFixed")
}}else{if(p.options.maxWidth&&b(window).width()>p.options.maxWidth){if(!j()||!P){s();
K.trigger("preUnfixed.ScrollToFixed");
o();
K.trigger("unfixed.ScrollToFixed")
}}else{if(p.options.bottom==-1){if(N>0&&Q>=N-w()){if(!O&&(!B()||!P)){s();
K.trigger("preAbsolute.ScrollToFixed");
c();
K.trigger("unfixed.ScrollToFixed")
}}else{if(Q>=H-w()){if(!t()||!P){s();
K.trigger("preFixed.ScrollToFixed");
A();
h=-1;
K.trigger("fixed.ScrollToFixed")
}z(M)
}else{if(!j()||!P){s();
K.trigger("preUnfixed.ScrollToFixed");
o();
K.trigger("unfixed.ScrollToFixed")
}}}}else{if(N>0){if(Q+b(window).height()-K.outerHeight(true)>=N-(w()||-q())){if(t()){s();
K.trigger("preUnfixed.ScrollToFixed");
if(I==="absolute"){c()
}else{o()
}K.trigger("unfixed.ScrollToFixed")
}}else{if(!t()){s();
K.trigger("preFixed.ScrollToFixed");
A()
}z(M);
K.trigger("fixed.ScrollToFixed")
}}else{z(M)
}}}}}function q(){if(!p.options.bottom){return 0
}return p.options.bottom
}function s(){var M=K.css("position");
if(M=="absolute"){K.trigger("postAbsolute.ScrollToFixed")
}else{if(M=="fixed"){K.trigger("postFixed.ScrollToFixed")
}else{K.trigger("postUnfixed.ScrollToFixed")
}}}var G=function(M){if(K.is(":visible")){d=false;
E()
}};
var J=function(M){(!!window.requestAnimationFrame)?requestAnimationFrame(E):E()
};
var F=function(){var N=document.body;
if(document.createElement&&N&&N.appendChild&&N.removeChild){var P=document.createElement("div");
if(!P.getBoundingClientRect){return null
}P.innerHTML="x";
P.style.cssText="position:fixed;top:100px;";
N.appendChild(P);
var Q=N.style.height,R=N.scrollTop;
N.style.height="3000px";
N.scrollTop=500;
var M=P.getBoundingClientRect().top;
N.style.height=Q;
var O=(M===100);
N.removeChild(P);
N.scrollTop=R;
return O
}return null
};
var v=function(M){M=M||window.event;
if(M.preventDefault){M.preventDefault()
}M.returnValue=false
};
p.init=function(){p.options=b.extend({},b.ScrollToFixed.defaultOptions,l);
C=K.css("z-index");
p.$el.css("z-index",p.options.zIndex);
x=b("<div />");
L=K.css("position");
I=K.css("position");
n=K.css("float");
g=K.css("top");
if(j()){p.$el.after(x)
}b(window).bind("resize.ScrollToFixed",G);
b(window).bind("scroll.ScrollToFixed",J);
if("ontouchmove" in window){b(window).bind("touchmove.ScrollToFixed",E)
}if(p.options.preFixed){K.bind("preFixed.ScrollToFixed",p.options.preFixed)
}if(p.options.postFixed){K.bind("postFixed.ScrollToFixed",p.options.postFixed)
}if(p.options.preUnfixed){K.bind("preUnfixed.ScrollToFixed",p.options.preUnfixed)
}if(p.options.postUnfixed){K.bind("postUnfixed.ScrollToFixed",p.options.postUnfixed)
}if(p.options.preAbsolute){K.bind("preAbsolute.ScrollToFixed",p.options.preAbsolute)
}if(p.options.postAbsolute){K.bind("postAbsolute.ScrollToFixed",p.options.postAbsolute)
}if(p.options.fixed){K.bind("fixed.ScrollToFixed",p.options.fixed)
}if(p.options.unfixed){K.bind("unfixed.ScrollToFixed",p.options.unfixed)
}if(p.options.spacerClass){x.addClass(p.options.spacerClass)
}K.bind("resize.ScrollToFixed",function(){x.height(K.height())
});
K.bind("scroll.ScrollToFixed",function(){K.trigger("preUnfixed.ScrollToFixed");
o();
K.trigger("unfixed.ScrollToFixed");
E()
});
K.bind("detach.ScrollToFixed",function(M){v(M);
K.trigger("preUnfixed.ScrollToFixed");
o();
K.trigger("unfixed.ScrollToFixed");
b(window).unbind("resize.ScrollToFixed",G);
b(window).unbind("scroll.ScrollToFixed",J);
K.unbind(".ScrollToFixed");
x.remove();
p.$el.removeData("ScrollToFixed")
});
G()
};
p.init()
};
b.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1000,baseClassName:"scroll-to-fixed-fixed"};
b.fn.scrollToFixed=function(c){return this.each(function(){(new b.ScrollToFixed(this,c))
})
}
})(jQuery);
/*! Hammer.JS - v2.0.4 - 2014-12-30
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */
(function(bg,ao,a3,E){var w=["","webkit","moz","MS","ms","o"];
var H=ao.createElement("div");
var ab="function";
var W=Math.round;
var al=Math.abs;
var bh=Date.now||function(){return new Date().getTime()
};
function n(bw,bx,bv){return setTimeout(L(bw,bv),bx)
}function f(bv){if(Array.isArray){return Array.isArray(bv)
}return Object.prototype.toString.call(bv)==="[object Array]"
}function af(bv,bx,bw){if(f(bv)){bt(bv,bw[bx],bw);
return true
}return false
}function bt(by,bx,bw){var bv;
if(!by){return
}if(by.forEach){by.forEach(bx,bw)
}else{if(by.length!==E){bv=0;
while(bv<by.length){bx.call(bw,by[bv],bv,by);
bv++
}}else{for(bv in by){by.hasOwnProperty(bv)&&bx.call(bw,by[bv],bv,by)
}}}}function y(bx){if(Object.keys){return Object.keys(bx)
}var bw=Object.prototype.hasOwnProperty,by,bv=[];
for(by in bx){if(bw.call(bx,by)){bv.push(by)
}}return bv
}function P(bx){if(Object.create){return Object.create(bx)
}var bw=function(){};
bw.prototype=bx;
var bv=new bw();
bw.prototype=null;
return bv
}function aN(bv,by,bz){var bx=y(by);
var bw=0;
while(bw<bx.length){if(!bz||(bz&&bv[bx[bw]]===E)){bv[bx[bw]]=by[bx[bw]]
}bw++
}return bv
}function I(bv,bw){return aN(bv,bw,true)
}function J(bz,bx,bw){var bv=bx.prototype,by;
by=bz.prototype=P(bv);
by.constructor=bz;
by._super=bv;
if(bw){aN(by,bw)
}}function L(bx,bv){return function bw(){return bx.apply(bv,arguments)
}
}function aq(bw,bv){if(typeof bw==ab){return bw.apply(bv?bv[0]||E:E,bv)
}return bw
}function aL(bw,bv){return(bw===E)?bv:bw
}function aM(bx,bv,bw){bt(aZ(bv),function(by){if(bx.addEventListener){bx.addEventListener(by,bw,false)
}else{if(bx.attachEvent){bx.attachEvent("on"+by,bw,false)
}}})
}function R(bx,bv,bw){bt(aZ(bv),function(by){if(bx.removeEventListener){bx.removeEventListener(by,bw,false)
}else{if(bx.detachEvent){bx.detachEvent("on"+by,bw,false)
}}})
}function q(bw,bv){while(bw){if(bw==bv){return true
}bw=bw.parentNode
}return false
}function m(bw,bv){return bw.indexOf(bv)>-1
}function aZ(bv){return bv.trim().split(/\s+/g)
}function D(by,bx,bw){if(by.indexOf&&!bw){return by.indexOf(bx)
}else{var bv=0;
while(bv<by.length){if((bw&&by[bv][bw]==bx)||(!bw&&by[bv]===bx)){return bv
}bv++
}return -1
}}function ac(bv){return Array.prototype.slice.call(bv,0)
}function bj(bC,bz,by){var bx=[];
var bv=[];
var bw=0;
while(bw<bC.length){var bB=bz?bC[bw][bz]:bC[bw];
if(D(bv,bB)<0){bx.push(bC[bw])
}bv[bw]=bB;
bw++
}if(by){if(!bz){bx=bx.sort()
}else{bx=bx.sort(function bA(bE,bD){return bE[bz]>bD[bz]
})
}}return bx
}function av(bz,by){var bx,bA;
var bv=by[0].toUpperCase()+by.slice(1);
var bw=0;
while(bw<w.length){bx=w[bw];
bA=(bx)?bx+bv:by;
if(bA in bz){return bA
}bw++
}return E
}var v=1;
function aO(){return v++
}function N(bv){var bw=bv.ownerDocument||bv;
return(bw.defaultView||bw.parentWindow||bg)
}var aj=bg.navigator.userAgent.indexOf("MSIE 8")>0;
var x=/mobile|tablet|ip(ad|hone|od)|android/i;
var c=("ontouchstart" in bg);
var ak=av(bg,"PointerEvent")!==E;
var aF=c&&x.test(navigator.userAgent);
var aJ="touch";
var s="pen";
var T="mouse";
var X="kinect";
var bo=25;
var bb=1;
var a7=2;
var i=4;
var z=8;
var aE=1;
var o=2;
var F=4;
var ai=8;
var a8=16;
var bk=o|F;
var aD=ai|a8;
var S=bk|aD;
var am=["x","y"];
var au=["clientX","clientY"];
function b(bw,bx){var bv=this;
this.manager=bw;
this.callback=bx;
this.element=bw.element;
this.target=bw.options.inputTarget;
this.domHandler=function(by){if(aq(bw.options.enable,[bw])){bv.handler(by)
}};
this.init()
}b.prototype={handler:function(){},init:function(){this.evEl&&aM(this.element,this.evEl,this.domHandler);
this.evTarget&&aM(this.target,this.evTarget,this.domHandler);
this.evWin&&aM(N(this.element),this.evWin,this.domHandler);
this.evDoc&&aM(ao,this.evDoc,this.domHandler);
this.evBody&&aM(ao.body,this.evBody,this.domHandler)
},destroy:function(){this.evEl&&R(this.element,this.evEl,this.domHandler);
this.evTarget&&R(this.target,this.evTarget,this.domHandler);
this.evWin&&R(N(this.element),this.evWin,this.domHandler);
this.evDoc&&R(ao,this.evDoc,this.domHandler);
this.evBody&&R(ao.body,this.evBody,this.domHandler)
}};
function B(bx){var bw;
var bv=bx.options.inputClass;
if(bv){bw=bv
}else{if(ak){bw=aU
}else{if(aF){bw=aB
}else{if(!c){bw=aC
}else{bw=bm
}}}}return new (bw)(bx,aA)
}function aA(bA,bz,bx){var bw=bx.pointers.length;
var by=bx.changedPointers.length;
var bv=(bz&bb&&(bw-by===0));
var bB=(bz&(i|z)&&(bw-by===0));
bx.isFirst=!!bv;
bx.isFinal=!!bB;
if(bv){bA.session={}
}bx.eventType=bz;
bc(bA,bx);
bA.emit("hammer.input",bx);
bA.recognize(bx);
bA.session.prevInput=bx
}function bc(by,bD){var bB=by.session;
var bE=bD.pointers;
var bC=bE.length;
if(!bB.firstInput){bB.firstInput=r(bD)
}if(bC>1&&!bB.firstMultiple){bB.firstMultiple=r(bD)
}else{if(bC===1){bB.firstMultiple=false
}}var bx=bB.firstInput;
var bz=bB.firstMultiple;
var bw=bz?bz.center:bx.center;
var bv=bD.center=V(bE);
bD.timeStamp=bh();
bD.deltaTime=bD.timeStamp-bx.timeStamp;
bD.angle=ax(bw,bv);
bD.distance=bp(bw,bv);
az(bB,bD);
bD.offsetDirection=aR(bD.deltaX,bD.deltaY);
bD.scale=bz?h(bz.pointers,bE):1;
bD.rotation=bz?bi(bz.pointers,bE):0;
ad(bB,bD);
var bA=by.element;
if(q(bD.srcEvent.target,bA)){bA=bD.srcEvent.target
}bD.target=bA
}function az(bz,bx){var bw=bx.center;
var bA=bz.offsetDelta||{};
var bv=bz.prevDelta||{};
var by=bz.prevInput||{};
if(bx.eventType===bb||by.eventType===i){bv=bz.prevDelta={x:by.deltaX||0,y:by.deltaY||0};
bA=bz.offsetDelta={x:bw.x,y:bw.y}
}bx.deltaX=bv.x+(bw.x-bA.x);
bx.deltaY=bv.y+(bw.y-bA.y)
}function ad(bz,bC){var bF=bz.lastInterval||bC,by=bC.timeStamp-bF.timeStamp,bw,bD,bA,bB;
if(bC.eventType!=z&&(by>bo||bF.velocity===E)){var bx=bF.deltaX-bC.deltaX;
var bv=bF.deltaY-bC.deltaY;
var bE=Z(by,bx,bv);
bD=bE.x;
bA=bE.y;
bw=(al(bE.x)>al(bE.y))?bE.x:bE.y;
bB=aR(bx,bv);
bz.lastInterval=bC
}else{bw=bF.velocity;
bD=bF.velocityX;
bA=bF.velocityY;
bB=bF.direction
}bC.velocity=bw;
bC.velocityX=bD;
bC.velocityY=bA;
bC.direction=bB
}function r(bw){var bv=[];
var bx=0;
while(bx<bw.pointers.length){bv[bx]={clientX:W(bw.pointers[bx].clientX),clientY:W(bw.pointers[bx].clientY)};
bx++
}return{timeStamp:bh(),pointers:bv,center:V(bv),deltaX:bw.deltaX,deltaY:bw.deltaY}
}function V(bx){var bw=bx.length;
if(bw===1){return{x:W(bx[0].clientX),y:W(bx[0].clientY)}
}var bv=0,bz=0,by=0;
while(by<bw){bv+=bx[by].clientX;
bz+=bx[by].clientY;
by++
}return{x:W(bv/bw),y:W(bz/bw)}
}function Z(bw,bv,bx){return{x:bv/bw||0,y:bx/bw||0}
}function aR(bv,bw){if(bv===bw){return aE
}if(al(bv)>=al(bw)){return bv>0?o:F
}return bw>0?ai:a8
}function bp(by,bx,bw){if(!bw){bw=am
}var bv=bx[bw[0]]-by[bw[0]],bz=bx[bw[1]]-by[bw[1]];
return Math.sqrt((bv*bv)+(bz*bz))
}function ax(by,bx,bw){if(!bw){bw=am
}var bv=bx[bw[0]]-by[bw[0]],bz=bx[bw[1]]-by[bw[1]];
return Math.atan2(bz,bv)*180/Math.PI
}function bi(bw,bv){return ax(bv[1],bv[0],au)-ax(bw[1],bw[0],au)
}function h(bw,bv){return bp(bv[0],bv[1],au)/bp(bw[0],bw[1],au)
}var a0={mousedown:bb,mousemove:a7,mouseup:i};
var G="mousedown";
var A="mousemove mouseup";
function aC(){this.evEl=G;
if(aj){this.evDoc=A
}else{this.evWin=A
}this.allow=true;
this.pressed=false;
b.apply(this,arguments)
}J(aC,b,{handler:function Y(bw){var bv=a0[bw.type];
var bx=0;
if(aj){bx=1
}if(bv&bb&&bw.button===bx){this.pressed=true
}if(bv&a7&&bw.button!==bx){bv=i
}if(!this.pressed||!this.allow){return
}if(bv&i){this.pressed=false
}this.callback(this.manager,bv,{pointers:[bw],changedPointers:[bw],pointerType:T,srcEvent:bw})
}});
var aP={pointerdown:bb,pointermove:a7,pointerup:i,pointercancel:z,pointerout:z};
var K={2:aJ,3:s,4:T,5:X};
var bf="pointerdown";
var j="pointermove pointerup pointercancel";
if(bg.MSPointerEvent){bf="MSPointerDown";
j="MSPointerMove MSPointerUp MSPointerCancel"
}function aU(){this.evEl=bf;
this.evWin=j;
b.apply(this,arguments);
this.store=(this.manager.session.pointerEvents=[])
}J(aU,b,{handler:function ba(bA){var by=this.store;
var bC=false;
var bx=bA.type.toLowerCase().replace("ms","");
var bz=aP[bx];
var bv=K[bA.pointerType]||bA.pointerType;
var bw=(bv==aJ);
var bB=D(by,bA.pointerId,"pointerId");
if(bz&bb&&(bA.button===0||bw)){if(bB<0){by.push(bA);
bB=by.length-1
}}else{if(bz&(i|z)){bC=true
}}if(bB<0){return
}by[bB]=bA;
this.callback(this.manager,bz,{pointers:by,changedPointers:[bA],pointerType:bv,srcEvent:bA});
if(bC){by.splice(bB,1)
}}});
var ap={touchstart:bb,touchmove:a7,touchend:i,touchcancel:z};
var aS="touchstart";
var aW="touchstart touchmove touchend touchcancel";
function C(){this.evTarget=aS;
this.evWin=aW;
this.started=false;
b.apply(this,arguments)
}J(C,b,{handler:function aT(bw){var bv=ap[bw.type];
if(bv===bb){this.started=true
}if(!this.started){return
}var bx=d.call(this,bw,bv);
if(bv&(i|z)&&bx[0].length-bx[1].length===0){this.started=false
}this.callback(this.manager,bv,{pointers:bx[0],changedPointers:bx[1],pointerType:aJ,srcEvent:bw})
}});
function d(bx,bw){var bv=ac(bx.touches);
var by=ac(bx.changedTouches);
if(bw&(i|z)){bv=bj(bv.concat(by),"identifier",true)
}return[bv,by]
}var aX={touchstart:bb,touchmove:a7,touchend:i,touchcancel:z};
var aH="touchstart touchmove touchend touchcancel";
function aB(){this.evTarget=aH;
this.targetIds={};
b.apply(this,arguments)
}J(aB,b,{handler:function aa(bw){var bv=aX[bw.type];
var bx=aI.call(this,bw,bv);
if(!bx){return
}this.callback(this.manager,bv,{pointers:bx[0],changedPointers:bx[1],pointerType:aJ,srcEvent:bw})
}});
function aI(bB,bA){var bw=ac(bB.touches);
var bv=this.targetIds;
if(bA&(bb|a7)&&bw.length===1){bv[bw[0].identifier]=true;
return[bw,bw]
}var bx,bz,bC=ac(bB.changedTouches),bD=[],by=this.target;
bz=bw.filter(function(bE){return q(bE.target,by)
});
if(bA===bb){bx=0;
while(bx<bz.length){bv[bz[bx].identifier]=true;
bx++
}}bx=0;
while(bx<bC.length){if(bv[bC[bx].identifier]){bD.push(bC[bx])
}if(bA&(i|z)){delete bv[bC[bx].identifier]
}bx++
}if(!bD.length){return
}return[bj(bz.concat(bD),"identifier",true),bD]
}function bm(){b.apply(this,arguments);
var bv=L(this.handler,this);
this.touch=new aB(this.manager,bv);
this.mouse=new aC(this.manager,bv)
}J(bm,b,{handler:function a9(bw,bz,by){var bv=(by.pointerType==aJ),bx=(by.pointerType==T);
if(bv){this.mouse.allow=false
}else{if(bx&&!this.mouse.allow){return
}}if(bz&(i|z)){this.mouse.allow=true
}this.callback(bw,bz,by)
},destroy:function p(){this.touch.destroy();
this.mouse.destroy()
}});
var aw=av(H.style,"touchAction");
var br=aw!==E;
var bs="compute";
var ar="auto";
var bn="manipulation";
var l="none";
var a5="pan-x";
var a4="pan-y";
function bq(bv,bw){this.manager=bv;
this.set(bw)
}bq.prototype={set:function(bv){if(bv==bs){bv=this.compute()
}if(br&&this.manager.element.style){this.manager.element.style[aw]=bv
}this.actions=bv.toLowerCase().trim()
},update:function(){this.set(this.manager.options.touchAction)
},compute:function(){var bv=[];
bt(this.manager.recognizers,function(bw){if(aq(bw.options.enable,[bw])){bv=bv.concat(bw.getTouchAction())
}});
return bu(bv.join(" "))
},preventDefaults:function(bv){if(br){return
}var bx=bv.srcEvent;
var bz=bv.offsetDirection;
if(this.manager.session.prevented){if(bx.preventDefault){bx.preventDefault()
}else{bx.returnValue=false
}return
}var bA=this.actions;
var bB=m(bA,l);
var bw=m(bA,a4);
var by=m(bA,a5);
if(bB||(bw&&bz&bk)||(by&&bz&aD)){if(this.allowDefaults(bv)){return
}return this.preventSrc(bx)
}},allowDefaults:function(){return false
},preventSrc:function(bv){this.manager.session.prevented=true;
if(bv.preventDefault){bv.preventDefault()
}else{bv.returnValue=false
}}};
function bu(bx){if(m(bx,l)){return l
}var bw=m(bx,a5);
var bv=m(bx,a4);
if(bw&&bv){return a5+" "+a4
}if(bw||bv){return bw?a5:a4
}if(m(bx,bn)){return bn
}return ar
}var ag=1;
var at=2;
var an=4;
var aV=8;
var u=aV;
var Q=16;
var aQ=32;
function O(bv){this.id=aO();
this.manager=null;
this.options=I(bv||{},this.defaults);
this.options.enable=aL(this.options.enable,true);
this.state=ag;
this.simultaneous={};
this.requireFail=[]
}O.prototype={defaults:{},set:function(bv){aN(this.options,bv);
this.manager&&this.manager.touchAction.update();
return this
},recognizeWith:function(bv){if(af(bv,"recognizeWith",this)){return this
}var bw=this.simultaneous;
bv=ah(bv,this);
if(!bw[bv.id]){bw[bv.id]=bv;
bv.recognizeWith(this)
}return this
},dropRecognizeWith:function(bv){if(af(bv,"dropRecognizeWith",this)){return this
}bv=ah(bv,this);
delete this.simultaneous[bv.id];
return this
},requireFailure:function(bv){if(af(bv,"requireFailure",this)){return this
}var bw=this.requireFail;
bv=ah(bv,this);
if(D(bw,bv)===-1){bw.push(bv);
bv.requireFailure(this)
}return this
},dropRequireFailure:function(bw){if(af(bw,"dropRequireFailure",this)){return this
}bw=ah(bw,this);
var bv=D(this.requireFail,bw);
if(bv>-1){this.requireFail.splice(bv,1)
}return this
},hasRequireFailures:function(){return this.requireFail.length>0
},canRecognizeWith:function(bv){return !!this.simultaneous[bv.id]
},emit:function(bw){var bv=this;
var by=this.state;
function bx(bz){bv.manager.emit(bv.options.event+(bz?be(by):""),bw)
}if(by<aV){bx(true)
}bx();
if(by>=aV){bx(true)
}},tryEmit:function(bv){if(this.canEmit()){return this.emit(bv)
}this.state=aQ
},canEmit:function(){var bv=0;
while(bv<this.requireFail.length){if(!(this.requireFail[bv].state&(aQ|ag))){return false
}bv++
}return true
},recognize:function(bv){var bw=aN({},bv);
if(!aq(this.options.enable,[this,bw])){this.reset();
this.state=aQ;
return
}if(this.state&(u|Q|aQ)){this.state=ag
}this.state=this.process(bw);
if(this.state&(at|an|aV|Q)){this.tryEmit(bw)
}},process:function(bv){},getTouchAction:function(){},reset:function(){}};
function be(bv){if(bv&Q){return"cancel"
}else{if(bv&aV){return"end"
}else{if(bv&an){return"move"
}else{if(bv&at){return"start"
}}}}return""
}function a6(bv){if(bv==a8){return"down"
}else{if(bv==ai){return"up"
}else{if(bv==o){return"left"
}else{if(bv==F){return"right"
}}}}return""
}function ah(bx,bv){var bw=bv.manager;
if(bw){return bw.get(bx)
}return bx
}function aG(){O.apply(this,arguments)
}J(aG,O,{defaults:{pointers:1},attrTest:function(bv){var bw=this.options.pointers;
return bw===0||bv.pointers.length===bw
},process:function(bw){var by=this.state;
var bx=bw.eventType;
var bv=by&(at|an);
var bz=this.attrTest(bw);
if(bv&&(bx&z||!bz)){return by|Q
}else{if(bv||bz){if(bx&i){return by|aV
}else{if(!(by&at)){return at
}}return by|an
}}return aQ
}});
function t(){aG.apply(this,arguments);
this.pX=null;
this.pY=null
}J(t,aG,{defaults:{event:"pan",threshold:10,pointers:1,direction:S},getTouchAction:function(){var bv=this.options.direction;
var bw=[];
if(bv&bk){bw.push(a5)
}if(bv&aD){bw.push(a4)
}return bw
},directionTest:function(bx){var by=this.options;
var bw=true;
var bB=bx.distance;
var bz=bx.direction;
var bv=bx.deltaX;
var bA=bx.deltaY;
if(!(bz&by.direction)){if(by.direction&bk){bz=(bv===0)?aE:(bv<0)?o:F;
bw=bv!=this.pX;
bB=Math.abs(bx.deltaX)
}else{bz=(bA===0)?aE:(bA<0)?ai:a8;
bw=bA!=this.pY;
bB=Math.abs(bx.deltaY)
}}bx.direction=bz;
return bw&&bB>by.threshold&&bz&by.direction
},attrTest:function(bv){return aG.prototype.attrTest.call(this,bv)&&(this.state&at||(!(this.state&at)&&this.directionTest(bv)))
},emit:function(bv){this.pX=bv.deltaX;
this.pY=bv.deltaY;
var bw=a6(bv.direction);
if(bw){this.manager.emit(this.options.event+bw,bv)
}this._super.emit.call(this,bv)
}});
function bd(){aG.apply(this,arguments)
}J(bd,aG,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[l]
},attrTest:function(bv){return this._super.attrTest.call(this,bv)&&(Math.abs(bv.scale-1)>this.options.threshold||this.state&at)
},emit:function(bw){this._super.emit.call(this,bw);
if(bw.scale!==1){var bv=bw.scale<1?"in":"out";
this.manager.emit(this.options.event+bv,bw)
}}});
function aY(){O.apply(this,arguments);
this._timer=null;
this._input=null
}J(aY,O,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[ar]
},process:function(bw){var bx=this.options;
var bz=bw.pointers.length===bx.pointers;
var bv=bw.distance<bx.threshold;
var by=bw.deltaTime>bx.time;
this._input=bw;
if(!bv||!bz||(bw.eventType&(i|z)&&!by)){this.reset()
}else{if(bw.eventType&bb){this.reset();
this._timer=n(function(){this.state=u;
this.tryEmit()
},bx.time,this)
}else{if(bw.eventType&i){return u
}}}return aQ
},reset:function(){clearTimeout(this._timer)
},emit:function(bv){if(this.state!==u){return
}if(bv&&(bv.eventType&i)){this.manager.emit(this.options.event+"up",bv)
}else{this._input.timeStamp=bh();
this.manager.emit(this.options.event,this._input)
}}});
function aK(){aG.apply(this,arguments)
}J(aK,aG,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[l]
},attrTest:function(bv){return this._super.attrTest.call(this,bv)&&(Math.abs(bv.rotation)>this.options.threshold||this.state&at)
}});
function a1(){aG.apply(this,arguments)
}J(a1,aG,{defaults:{event:"swipe",threshold:10,velocity:0.65,direction:bk|aD,pointers:1},getTouchAction:function(){return t.prototype.getTouchAction.call(this)
},attrTest:function(bv){var bx=this.options.direction;
var bw;
if(bx&(bk|aD)){bw=bv.velocity
}else{if(bx&bk){bw=bv.velocityX
}else{if(bx&aD){bw=bv.velocityY
}}}return this._super.attrTest.call(this,bv)&&bx&bv.direction&&bv.distance>this.options.threshold&&al(bw)>this.options.velocity&&bv.eventType&i
},emit:function(bv){var bw=a6(bv.direction);
if(bw){this.manager.emit(this.options.event+bw,bv)
}this.manager.emit(this.options.event,bv)
}});
function ay(){O.apply(this,arguments);
this.pTime=false;
this.pCenter=false;
this._timer=null;
this._input=null;
this.count=0
}J(ay,O,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[bn]
},process:function(bx){var bz=this.options;
var bC=bx.pointers.length===bz.pointers;
var bw=bx.distance<bz.threshold;
var by=bx.deltaTime<bz.time;
this.reset();
if((bx.eventType&bb)&&(this.count===0)){return this.failTimeout()
}if(bw&&by&&bC){if(bx.eventType!=i){return this.failTimeout()
}var bB=this.pTime?(bx.timeStamp-this.pTime<bz.interval):true;
var bA=!this.pCenter||bp(this.pCenter,bx.center)<bz.posThreshold;
this.pTime=bx.timeStamp;
this.pCenter=bx.center;
if(!bA||!bB){this.count=1
}else{this.count+=1
}this._input=bx;
var bv=this.count%bz.taps;
if(bv===0){if(!this.hasRequireFailures()){return u
}else{this._timer=n(function(){this.state=u;
this.tryEmit()
},bz.interval,this);
return at
}}}return aQ
},failTimeout:function(){this._timer=n(function(){this.state=aQ
},this.options.interval,this);
return aQ
},reset:function(){clearTimeout(this._timer)
},emit:function(){if(this.state==u){this._input.tapCount=this.count;
this.manager.emit(this.options.event,this._input)
}}});
function U(bw,bv){bv=bv||{};
bv.recognizers=aL(bv.recognizers,U.defaults.preset);
return new bl(bw,bv)
}U.VERSION="2.0.4";
U.defaults={domEvents:false,touchAction:bs,enable:true,inputTarget:null,inputClass:null,preset:[[aK,{enable:false}],[bd,{enable:false},["rotate"]],[a1,{direction:bk}],[t,{direction:bk},["swipe"]],[ay],[ay,{event:"doubletap",taps:2},["tap"]],[aY]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};
var M=1;
var a2=2;
function bl(bw,bv){bv=bv||{};
this.options=I(bv,U.defaults);
this.options.inputTarget=this.options.inputTarget||bw;
this.handlers={};
this.session={};
this.recognizers=[];
this.element=bw;
this.input=B(this);
this.touchAction=new bq(this,this.options.touchAction);
ae(this,true);
bt(bv.recognizers,function(by){var bx=this.add(new (by[0])(by[1]));
by[2]&&bx.recognizeWith(by[2]);
by[3]&&bx.requireFailure(by[3])
},this)
}bl.prototype={set:function(bv){aN(this.options,bv);
if(bv.touchAction){this.touchAction.update()
}if(bv.inputTarget){this.input.destroy();
this.input.target=bv.inputTarget;
this.input.init()
}return this
},stop:function(bv){this.session.stopped=bv?a2:M
},recognize:function(bz){var bA=this.session;
if(bA.stopped){return
}this.touchAction.preventDefaults(bz);
var bv;
var bw=this.recognizers;
var by=bA.curRecognizer;
if(!by||(by&&by.state&u)){by=bA.curRecognizer=null
}var bx=0;
while(bx<bw.length){bv=bw[bx];
if(bA.stopped!==a2&&(!by||bv==by||bv.canRecognizeWith(by))){bv.recognize(bz)
}else{bv.reset()
}if(!by&&bv.state&(at|an|aV)){by=bA.curRecognizer=bv
}bx++
}},get:function(bv){if(bv instanceof O){return bv
}var bw=this.recognizers;
for(var bx=0;
bx<bw.length;
bx++){if(bw[bx].options.event==bv){return bw[bx]
}}return null
},add:function(bv){if(af(bv,"add",this)){return this
}var bw=this.get(bv.options.event);
if(bw){this.remove(bw)
}this.recognizers.push(bv);
bv.manager=this;
this.touchAction.update();
return bv
},remove:function(bv){if(af(bv,"remove",this)){return this
}var bw=this.recognizers;
bv=this.get(bv);
bw.splice(D(bw,bv),1);
this.touchAction.update();
return this
},on:function(bw,bx){var bv=this.handlers;
bt(aZ(bw),function(by){bv[by]=bv[by]||[];
bv[by].push(bx)
});
return this
},off:function(bw,bx){var bv=this.handlers;
bt(aZ(bw),function(by){if(!bx){delete bv[by]
}else{bv[by].splice(D(bv[by],bx),1)
}});
return this
},emit:function(bx,by){if(this.options.domEvents){g(bx,by)
}var bv=this.handlers[bx]&&this.handlers[bx].slice();
if(!bv||!bv.length){return
}by.type=bx;
by.preventDefault=function(){if(by.srcEvent.preventDefault){by.srcEvent.preventDefault()
}else{by.srcEvent.returnValue=false
}};
var bw=0;
while(bw<bv.length){bv[bw](by);
bw++
}},destroy:function(){this.element&&ae(this,false);
this.handlers={};
this.session={};
this.input.destroy();
this.element=null
}};
function ae(bw,bx){var bv=bw.element;
if(!bv.style){return
}bt(bw.options.cssProps,function(bz,by){bv.style[av(bv.style,by)]=bx?bz:""
})
}function g(bv,bw){var bx=ao.createEvent("Event");
bx.initEvent(bv,true,true);
bx.gesture=bw;
bw.target.dispatchEvent(bx)
}aN(U,{INPUT_START:bb,INPUT_MOVE:a7,INPUT_END:i,INPUT_CANCEL:z,STATE_POSSIBLE:ag,STATE_BEGAN:at,STATE_CHANGED:an,STATE_ENDED:aV,STATE_RECOGNIZED:u,STATE_CANCELLED:Q,STATE_FAILED:aQ,DIRECTION_NONE:aE,DIRECTION_LEFT:o,DIRECTION_RIGHT:F,DIRECTION_UP:ai,DIRECTION_DOWN:a8,DIRECTION_HORIZONTAL:bk,DIRECTION_VERTICAL:aD,DIRECTION_ALL:S,Manager:bl,Input:b,TouchAction:bq,TouchInput:aB,MouseInput:aC,PointerEventInput:aU,TouchMouseInput:bm,SingleTouchInput:C,Recognizer:O,AttrRecognizer:aG,Tap:ay,Pan:t,Swipe:a1,Pinch:bd,Rotate:aK,Press:aY,on:aM,off:R,each:bt,merge:I,extend:aN,inherit:J,bindFn:L,prefixed:av});
if(typeof define==ab&&define.amd){define(function(){return U
})
}else{if(typeof module!="undefined"&&module.exports){module.exports=U
}else{bg[a3]=U
}}})(window,document,"Hammer");
window.isMobileOrTablet=function(){var b=false;
(function(c){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,4))){b=true
}})(navigator.userAgent||navigator.vendor||window.opera);
return b
};
/*!
 * 15.10.2015 - changed regexp for multiple highlight effect at line 429
 * new RegExp(regexStr.replace(/\s+/g,'.*')
 *
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(b,c){if(typeof define==="function"&&define.amd){define("typeahead.js",["jquery"],function(d){return c(d)
})
}else{if(typeof exports==="object"){module.exports=c(require("jquery"))
}else{c(jQuery)
}}})(this,function(f){var l=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false
},isBlankString:function(q){return !q||/^\s*$/.test(q)
},escapeRegExChars:function(q){return q.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")
},isString:function(q){return typeof q==="string"
},isNumber:function(q){return typeof q==="number"
},isArray:f.isArray,isFunction:f.isFunction,isObject:f.isPlainObject,isUndefined:function(q){return typeof q==="undefined"
},isElement:function(q){return !!(q&&q.nodeType===1)
},isJQuery:function(q){return q instanceof f
},toStr:function p(q){return l.isUndefined(q)||q===null?"":q+""
},bind:f.proxy,each:function(s,q){f.each(s,r);
function r(t,u){return q(u,t)
}},map:f.map,filter:f.grep,every:function(r,s){var q=true;
if(!r){return q
}f.each(r,function(t,u){if(!(q=s.call(null,u,t,r))){return false
}});
return !!q
},some:function(r,s){var q=false;
if(!r){return q
}f.each(r,function(t,u){if(q=s.call(null,u,t,r)){return false
}});
return !!q
},mixin:f.extend,identity:function(q){return q
},clone:function(q){return f.extend(true,{},q)
},getIdGenerator:function(){var q=0;
return function(){return q++
}
},templatify:function o(r){return f.isFunction(r)?r:q;
function q(){return String(r)
}},defer:function(q){setTimeout(q,0)
},debounce:function(s,u,r){var t,q;
return function(){var y=this,x=arguments,w,v;
w=function(){t=null;
if(!r){q=s.apply(y,x)
}};
v=r&&!t;
clearTimeout(t);
t=setTimeout(w,u);
if(v){q=s.apply(y,x)
}return q
}
},throttle:function(v,x){var t,s,w,q,u,r;
u=0;
r=function(){u=new Date();
w=null;
q=v.apply(t,s)
};
return function(){var y=new Date(),z=x-(y-u);
t=this;
s=arguments;
if(z<=0){clearTimeout(w);
w=null;
u=y;
q=v.apply(t,s)
}else{if(!w){w=setTimeout(r,z)
}}return q
}
},stringify:function(q){return l.isString(q)?q:JSON.stringify(q)
},noop:function(){}}
}();
var m=function(){var r={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};
return q;
function q(v){var u,t;
t=l.mixin({},r,v);
u={css:o(),classes:t,html:s(t),selectors:p(t)};
return{css:u.css,html:u.html,classes:u.classes,selectors:u.selectors,mixin:function(w){l.mixin(w,u)
}}
}function s(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}
}function p(u){var t={};
l.each(u,function(x,w){t[w]="."+x
});
return t
}function o(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};
if(l.isMsie()){l.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})
}return t
}}();
var h=function(){var q,p;
q="typeahead:";
p={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};
function o(r){if(!r||!r.el){f.error("EventBus initialized without el")
}this.$el=f(r.el)
}l.mixin(o.prototype,{_trigger:function(t,s){var r;
r=f.Event(q+t);
(s=s||[]).unshift(r);
this.$el.trigger.apply(this.$el,s);
return r
},before:function(t){var s,r;
s=[].slice.call(arguments,1);
r=this._trigger("before"+t,s);
return r.isDefaultPrevented()
},trigger:function(s){var r;
this._trigger(s,[].slice.call(arguments,1));
if(r=p[s]){this._trigger(r,[].slice.call(arguments,1))
}}});
return o
}();
var n=function(){var q=/\s+/,u=o();
return{onSync:v,onAsync:p,off:r,trigger:s};
function w(C,A,y,z){var B;
if(!y){return this
}A=A.split(q);
y=z?x(y,z):y;
this._callbacks=this._callbacks||{};
while(B=A.shift()){this._callbacks[B]=this._callbacks[B]||{sync:[],async:[]};
this._callbacks[B][C].push(y)
}return this
}function p(A,y,z){return w.call(this,"async",A,y,z)
}function v(A,y,z){return w.call(this,"sync",A,y,z)
}function r(y){var z;
if(!this._callbacks){return this
}y=y.split(q);
while(z=y.shift()){delete this._callbacks[z]
}return this
}function s(z){var A,B,y,C,D;
if(!this._callbacks){return this
}z=z.split(q);
y=[].slice.call(arguments,1);
while((A=z.shift())&&(B=this._callbacks[A])){C=t(B.sync,this,[A].concat(y));
D=t(B.async,this,[A].concat(y));
C()&&u(D)
}return this
}function t(B,A,z){return y;
function y(){var E;
for(var D=0,C=B.length;
!E&&D<C;
D+=1){E=B[D].apply(A,z)===false
}return !E
}}function o(){var z;
if(window.setImmediate){z=function A(B){setImmediate(function(){B()
})
}
}else{z=function y(B){setTimeout(function(){B()
},0)
}
}return z
}function x(z,y){return z.bind?z.bind(y):function(){z.apply(y,[].slice.call(arguments,0))
}
}}();
var c=function(r){var q={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};
return function p(x){var t;
x=l.mixin({},q,x);
if(!x.node||!x.pattern){return
}x.pattern=l.isArray(x.pattern)?x.pattern:[x.pattern];
t=o(x.pattern,x.caseSensitive,x.wordsOnly);
u(x.node,w);
function w(C){var E,A,y,z=true,B=C.data,D=[];
l.each(t,function(F){if(F.exec(B)){y=F.exec(B);
D.push({index:y.index,length:y[0].length});
B=B.substr(0,y.index)+s(y[0].length)+B.substr(y.index+y[0].length)
}else{z=false;
return false
}});
if(z){D.sort(v);
l.each(D,function(F){E=C.splitText(F.index);
E.splitText(F.length);
A=r.createElement(x.tagName);
A.appendChild(E.cloneNode(true));
E.parentNode.replaceChild(A,E)
})
}return !!z
}function s(z){var A="",y;
for(y=0;
y<z;
y++){A=A+"|"
}return A
}function v(z,y){return z.index>y.index?-1:1
}function u(B,C){var z,A=3;
for(var y=0;
y<B.childNodes.length;
y++){z=B.childNodes[y];
if(z.nodeType===A){y+=C(z)?1:0
}else{u(z,C)
}}}};
function o(w,u,z){var y=[],x,t;
for(var v=0,s=w.length;
v<s;
v++){y.push(l.escapeRegExChars(w[v]))
}x=y[0];
t=x.trim().split(/\s+/g);
l.each(t,function(B,A){B=z?"\\b("+B+")\\b":"("+B+")";
t[A]=u?new RegExp(B):new RegExp(B,"i")
});
return t
}}(window.document);
var i=function(){var M;
M={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};
function I(R,Q){R=R||{};
if(!R.input){f.error("input is missing")
}Q.mixin(this);
this.$hint=f(R.hint);
this.$input=f(R.input);
this.query=this.$input.val();
this.queryWhenFocused=this.hasFocus()?this.query:null;
this.$overflowHelper=B(this.$input);
this._checkLanguageDirection();
if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=l.noop
}}I.normalizeQuery=function(Q){return l.toStr(Q).replace(/^\s*/g,"").replace(/\s{2,}/g," ")
};
l.mixin(I.prototype,n,{_onBlur:function z(){this.resetInputValue();
this.trigger("blurred")
},_onFocus:function u(){this.queryWhenFocused=this.query;
this.trigger("focused")
},_onKeydown:function O(Q){var R=M[Q.which||Q.keyCode];
this._managePreventDefault(R,Q);
if(R&&this._shouldTrigger(R,Q)){this.trigger(R+"Keyed",Q)
}},_onInput:function q(){this._setQuery(this.getInputValue());
this.clearHintIfInvalid();
this._checkLanguageDirection()
},_managePreventDefault:function w(S,R){var Q;
switch(S){case"up":case"down":Q=!C(R);
break;
default:Q=false
}Q&&R.preventDefault()
},_shouldTrigger:function P(S,R){var Q;
switch(S){case"tab":Q=!C(R);
break;
default:Q=true
}return Q
},_checkLanguageDirection:function p(){var Q=(this.$input.css("direction")||"ltr").toLowerCase();
if(this.dir!==Q){this.dir=Q;
this.$hint.attr("dir",Q);
this.trigger("langDirChanged",Q)
}},_setQuery:function E(T,R){var Q,S;
Q=y(T,this.query);
S=Q?this.query.length!==T.length:false;
this.query=T;
if(!R&&!Q){this.trigger("queryChanged",this.query)
}else{if(!R&&S){this.trigger("whitespaceChanged",this.query)
}}},bind:function(){var T=this,U,Q,S,R;
U=l.bind(this._onBlur,this);
Q=l.bind(this._onFocus,this);
S=l.bind(this._onKeydown,this);
R=l.bind(this._onInput,this);
this.$input.on("blur.tt",U).on("focus.tt",Q).on("keydown.tt",S);
if(!l.isMsie()||l.isMsie()>9){this.$input.on("input.tt",R)
}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(V){if(M[V.which||V.keyCode]){return
}l.defer(l.bind(T._onInput,T,V))
})
}return this
},focus:function D(){this.$input.focus()
},blur:function J(){this.$input.blur()
},getLangDir:function H(){return this.dir
},getQuery:function F(){return this.query||""
},setQuery:function E(R,Q){this.setInputValue(R);
this._setQuery(R,Q)
},hasQueryChangedSinceLastFocus:function K(){return this.query!==this.queryWhenFocused
},getInputValue:function v(){return this.$input.val()
},setInputValue:function x(Q){this.$input.val(Q);
this.clearHintIfInvalid();
this._checkLanguageDirection()
},resetInputValue:function t(){this.setInputValue(this.query)
},getHint:function r(){return this.$hint.val()
},setHint:function L(Q){this.$hint.val(Q)
},clearHint:function A(){this.setHint("")
},clearHintIfInvalid:function o(){var T,S,Q,R;
T=this.getInputValue();
S=this.getHint();
Q=T!==S&&S.indexOf(T)===0;
R=T!==""&&Q&&!this.hasOverflow();
!R&&this.clearHint()
},hasFocus:function s(){return this.$input.is(":focus")
},hasOverflow:function G(){var Q=this.$input.width()-2;
this.$overflowHelper.text(this.getInputValue());
return this.$overflowHelper.width()>=Q
},isCursorAtEnd:function(){var R,S,Q;
R=this.$input.val().length;
S=this.$input[0].selectionStart;
if(l.isNumber(S)){return S===R
}else{if(document.selection){Q=document.selection.createRange();
Q.moveStart("character",-R);
return R===Q.text.length
}}return true
},destroy:function N(){this.$hint.off(".tt");
this.$input.off(".tt");
this.$overflowHelper.remove();
this.$hint=this.$input=this.$overflowHelper=f("<div>")
}});
return I;
function B(Q){return f('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:Q.css("font-family"),fontSize:Q.css("font-size"),fontStyle:Q.css("font-style"),fontVariant:Q.css("font-variant"),fontWeight:Q.css("font-weight"),wordSpacing:Q.css("word-spacing"),letterSpacing:Q.css("letter-spacing"),textIndent:Q.css("text-indent"),textRendering:Q.css("text-rendering"),textTransform:Q.css("text-transform")}).insertAfter(Q)
}function y(R,Q){return I.normalizeQuery(R)===I.normalizeQuery(Q)
}function C(Q){return Q.altKey||Q.ctrlKey||Q.metaKey||Q.shiftKey
}}();
var b=function(){var z,C;
z={val:"tt-selectable-display",obj:"tt-selectable-object"};
C=l.getIdGenerator();
function K(M,L){M=M||{};
M.templates=M.templates||{};
M.templates.notFound=M.templates.notFound||M.templates.empty;
if(!M.source){f.error("missing source")
}if(!M.node){f.error("missing node")
}if(M.name&&!r(M.name)){f.error("invalid dataset name: "+M.name)
}L.mixin(this);
this.highlight=!!M.highlight;
this.name=M.name||C();
this.limit=M.limit||5;
this.displayFn=B(M.display||M.displayKey);
this.templates=s(M.templates,this.displayFn);
this.source=M.source.__ttAdapter?M.source.__ttAdapter():M.source;
this.async=l.isUndefined(M.async)?this.source.length>2:!!M.async;
this._resetLastSuggestion();
this.$el=f(M.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)
}K.extractData=function I(M){var L=f(M);
if(L.data(z.obj)){return{val:L.data(z.val)||"",obj:L.data(z.obj)||null}
}return null
};
l.mixin(K.prototype,n,{_overwrite:function p(M,L){L=L||[];
if(L.length){this._renderSuggestions(M,L)
}else{if(this.async&&this.templates.pending){this._renderPending(M)
}else{if(!this.async&&this.templates.notFound){this._renderNotFound(M)
}else{this._empty()
}}}this.trigger("rendered",this.name,L,false)
},_append:function G(M,L){L=L||[];
if(L.length&&this.$lastSuggestion.length){this._appendSuggestions(M,L)
}else{if(L.length){this._renderSuggestions(M,L)
}else{if(!this.$lastSuggestion.length&&this.templates.notFound){this._renderNotFound(M)
}}}this.trigger("rendered",this.name,L,true)
},_renderSuggestions:function A(M,L){var N;
N=this._getSuggestionsFragment(M,L);
this.$lastSuggestion=N.children().last();
this.$el.html(N).prepend(this._getHeader(M,L)).append(this._getFooter(M,L))
},_appendSuggestions:function q(M,L){var O,N;
O=this._getSuggestionsFragment(M,L);
N=O.children().last();
this.$lastSuggestion.after(O);
this.$lastSuggestion=N
},_renderPending:function u(M){var L=this.templates.pending;
this._resetLastSuggestion();
L&&this.$el.html(L({query:M,dataset:this.name}))
},_renderNotFound:function F(M){var L=this.templates.notFound;
this._resetLastSuggestion();
L&&this.$el.html(L({query:M,dataset:this.name}))
},_empty:function v(){this.$el.empty();
this._resetLastSuggestion()
},_getSuggestionsFragment:function o(P,L){var N=this,M;
M=document.createDocumentFragment();
l.each(L,function O(Q){var S,R;
R=N._injectQuery(P,Q);
S=f(N.templates.suggestion(R)).data(z.obj,Q).data(z.val,N.displayFn(Q)).addClass(N.classes.suggestion+" "+N.classes.selectable);
M.appendChild(S[0])
});
this.highlight&&c({className:this.classes.highlight,node:M,pattern:P});
return f(M)
},_getFooter:function x(M,L){return this.templates.footer?this.templates.footer({query:M,suggestions:L,dataset:this.name}):null
},_getHeader:function E(M,L){return this.templates.header?this.templates.header({query:M,suggestions:L,dataset:this.name}):null
},_resetLastSuggestion:function w(){this.$lastSuggestion=f()
},_injectQuery:function J(L,M){return l.isObject(M)?l.mixin({_query:L},M):M
},update:function t(R){var Q=this,M=false,L=false,S=0;
this.cancel();
this.cancel=function P(){M=true;
Q.cancel=f.noop;
Q.async&&Q.trigger("asyncCanceled",R)
};
this.source(R,O,N);
!L&&O([]);
function O(T){if(L){return
}L=true;
T=(T||[]).slice(0,Q.limit);
S=T.length;
Q._overwrite(R,T);
if(S<Q.limit&&Q.async){Q.trigger("asyncRequested",R)
}}function N(T){T=T||[];
if(!M&&S<Q.limit){Q.cancel=f.noop;
S+=T.length;
Q._append(R,T.slice(0,Q.limit-S));
Q.async&&Q.trigger("asyncReceived",R)
}}},cancel:f.noop,clear:function D(){this._empty();
this.cancel();
this.trigger("cleared")
},isEmpty:function y(){return this.$el.is(":empty")
},destroy:function H(){this.$el=f("<div>")
}});
return K;
function B(L){L=L||l.stringify;
return l.isFunction(L)?L:M;
function M(N){return N[L]
}}function s(M,N){return{notFound:M.notFound&&l.templatify(M.notFound),pending:M.pending&&l.templatify(M.pending),header:M.header&&l.templatify(M.header),footer:M.footer&&l.templatify(M.footer),suggestion:M.suggestion||L};
function L(O){return f("<div>").text(N(O))
}}function r(L){return/^[_a-zA-Z0-9-]+$/.test(L)
}}();
var g=function(){function q(M,J){var K=this;
M=M||{};
if(!M.node){f.error("node is required")
}J.mixin(this);
this.$node=f(M.node);
this.query=null;
this.datasets=l.map(M.datasets,L);
function L(O){var N=K.$node.find(O.node).first();
O.node=N.length?N:f("<div>").appendTo(K.$node);
return new b(O,J)
}}l.mixin(q.prototype,n,{_onSelectableClick:function C(J){this.trigger("selectableClicked",f(J.currentTarget))
},_onRendered:function p(L,M,J,K){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());
this.trigger("datasetRendered",M,J,K)
},_onCleared:function E(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());
this.trigger("datasetCleared")
},_propagate:function A(){this.trigger.apply(this,arguments)
},_allDatasetsEmpty:function r(){return l.every(this.datasets,J);
function J(K){return K.isEmpty()
}},_getSelectables:function F(){return this.$node.find(this.selectors.selectable)
},_removeCursor:function x(){var J=this.getActiveSelectable();
J&&J.removeClass(this.classes.cursor)
},_ensureVisible:function D(M){var J,L,K,N;
J=M.position().top;
L=J+M.outerHeight(true);
K=this.$node.scrollTop();
N=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);
if(J<0){this.$node.scrollTop(K+J)
}else{if(N<L){this.$node.scrollTop(K+(L-N))
}}},bind:function(){var K=this,J;
J=l.bind(this._onSelectableClick,this);
this.$node.on("click.tt",this.selectors.selectable,J);
l.each(this.datasets,function(L){L.onSync("asyncRequested",K._propagate,K).onSync("asyncCanceled",K._propagate,K).onSync("asyncReceived",K._propagate,K).onSync("rendered",K._onRendered,K).onSync("cleared",K._onCleared,K)
});
return this
},isOpen:function B(){return this.$node.hasClass(this.classes.open)
},open:function y(){this.$node.addClass(this.classes.open)
},close:function z(){this.$node.removeClass(this.classes.open);
this._removeCursor()
},setLanguageDirection:function I(J){this.$node.attr("dir",J)
},selectableRelativeToCursor:function o(N){var L,K,M,J;
K=this.getActiveSelectable();
L=this._getSelectables();
M=K?L.index(K):-1;
J=M+N;
J=(J+1)%(L.length+1)-1;
J=J<-1?L.length-1:J;
return J===-1?null:L.eq(J)
},setCursor:function H(J){this._removeCursor();
if(J=J&&J.first()){J.addClass(this.classes.cursor);
this._ensureVisible(J)
}},getSelectableData:function u(J){return J&&J.length?b.extractData(J):null
},getActiveSelectable:function t(){var J=this._getSelectables().filter(this.selectors.cursor).first();
return J.length?J:null
},getTopSelectable:function w(){var J=this._getSelectables().first();
return J.length?J:null
},update:function s(K){var J=K!==this.query;
if(J){this.query=K;
l.each(this.datasets,L)
}return J;
function L(M){M.update(K)
}},empty:function v(){l.each(this.datasets,J);
this.query=null;
this.$node.addClass(this.classes.empty);
function J(K){K.clear()
}},destroy:function G(){this.$node.off(".tt");
this.$node=f("<div>");
l.each(this.datasets,J);
function J(K){K.destroy()
}}});
return q
}();
var d=function(){var x=g.prototype;
function r(){g.apply(this,[].slice.call(arguments,0))
}l.mixin(r.prototype,g.prototype,{open:function t(){!this._allDatasetsEmpty()&&this._show();
return x.open.apply(this,[].slice.call(arguments,0))
},close:function w(){this._hide();
return x.close.apply(this,[].slice.call(arguments,0))
},_onRendered:function q(){if(this._allDatasetsEmpty()){this._hide()
}else{this.isOpen()&&this._show()
}return x._onRendered.apply(this,[].slice.call(arguments,0))
},_onCleared:function o(){if(this._allDatasetsEmpty()){this._hide()
}else{this.isOpen()&&this._show()
}return x._onCleared.apply(this,[].slice.call(arguments,0))
},setLanguageDirection:function p(s){this.$node.css(s==="ltr"?this.css.ltr:this.css.rtl);
return x.setLanguageDirection.apply(this,[].slice.call(arguments,0))
},_hide:function u(){this.$node.hide()
},_show:function v(){this.$node.css("display","block")
}});
return r
}();
var j=function(){function F(ab,ac){var ak,af,ae,ah,ag,aj,am,ai,an,al,ad;
ab=ab||{};
if(!ab.input){f.error("missing input")
}if(!ab.menu){f.error("missing menu")
}if(!ab.eventBus){f.error("missing event bus")
}ac.mixin(this);
this.eventBus=ab.eventBus;
this.minLength=l.isNumber(ab.minLength)?ab.minLength:1;
this.input=ab.input;
this.menu=ab.menu;
this.enabled=true;
this.active=false;
this.input.hasFocus()&&this.activate();
this.dir=this.input.getLangDir();
this._hacks();
this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);
ak=W(this,"activate","open","_onFocused");
af=W(this,"deactivate","_onBlurred");
ae=W(this,"isActive","isOpen","_onEnterKeyed");
ah=W(this,"isActive","isOpen","_onTabKeyed");
ag=W(this,"isActive","_onEscKeyed");
aj=W(this,"isActive","open","_onUpKeyed");
am=W(this,"isActive","open","_onDownKeyed");
ai=W(this,"isActive","isOpen","_onLeftKeyed");
an=W(this,"isActive","isOpen","_onRightKeyed");
al=W(this,"_openIfActive","_onQueryChanged");
ad=W(this,"_openIfActive","_onWhitespaceChanged");
this.input.bind().onSync("focused",ak,this).onSync("blurred",af,this).onSync("enterKeyed",ae,this).onSync("tabKeyed",ah,this).onSync("escKeyed",ag,this).onSync("upKeyed",aj,this).onSync("downKeyed",am,this).onSync("leftKeyed",ai,this).onSync("rightKeyed",an,this).onSync("queryChanged",al,this).onSync("whitespaceChanged",ad,this).onSync("langDirChanged",this._onLangDirChanged,this)
}l.mixin(F.prototype,{_hacks:function N(){var ac,ab;
ac=this.input.$input||f("<div>");
ab=this.menu.$node||f("<div>");
ac.on("blur.tt",function(ae){var ag,af,ad;
ag=document.activeElement;
af=ab.is(ag);
ad=ab.has(ag).length>0;
if(l.isMsie()&&(af||ad)){ae.preventDefault();
ae.stopImmediatePropagation();
l.defer(function(){ac.focus()
})
}});
ab.on("mousedown.tt",function(ad){ad.preventDefault()
})
},_onSelectableClicked:function C(ac,ab){this.select(ab)
},_onDatasetCleared:function y(){this._updateHint()
},_onDatasetRendered:function p(ad,ae,ab,ac){this._updateHint();
this.eventBus.trigger("render",ab,ac,ae)
},_onAsyncRequested:function E(ab,ad,ac){this.eventBus.trigger("asyncrequest",ac,ad)
},_onAsyncCanceled:function J(ab,ad,ac){this.eventBus.trigger("asynccancel",ac,ad)
},_onAsyncReceived:function r(ab,ad,ac){this.eventBus.trigger("asyncreceive",ac,ad)
},_onFocused:function Y(){this._minLengthMet()&&this.menu.update(this.input.getQuery())
},_onBlurred:function B(){if(this.input.hasQueryChangedSinceLastFocus()){this.eventBus.trigger("change",this.input.getQuery())
}},_onEnterKeyed:function u(ad,ac){var ab;
if(ab=this.menu.getActiveSelectable()){this.select(ab)&&ac.preventDefault()
}},_onTabKeyed:function x(ad,ac){var ab;
if(ab=this.menu.getActiveSelectable()){this.select(ab)&&ac.preventDefault()
}else{if(ab=this.menu.getTopSelectable()){this.autocomplete(ab)&&ac.preventDefault()
}}},_onEscKeyed:function K(){this.close()
},_onUpKeyed:function S(){this.moveCursor(-1)
},_onDownKeyed:function X(){this.moveCursor(+1)
},_onLeftKeyed:function L(){if(this.dir==="rtl"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getTopSelectable())
}},_onRightKeyed:function M(){if(this.dir==="ltr"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getTopSelectable())
}},_onQueryChanged:function A(ac,ab){this._minLengthMet(ab)?this.menu.update(ab):this.menu.empty()
},_onWhitespaceChanged:function aa(){this._updateHint()
},_onLangDirChanged:function V(ac,ab){if(this.dir!==ab){this.dir=ab;
this.menu.setLanguageDirection(ab)
}},_openIfActive:function U(){this.isActive()&&this.open()
},_minLengthMet:function Z(ab){ab=l.isString(ab)?ab:this.input.getQuery()||"";
return ab.length>=this.minLength
},_updateHint:function H(){var ac,ag,ah,af,ae,ab,ad;
ac=this.menu.getTopSelectable();
ag=this.menu.getSelectableData(ac);
ah=this.input.getInputValue();
if(ag&&!l.isBlankString(ah)&&!this.input.hasOverflow()){af=i.normalizeQuery(ah);
ae=l.escapeRegExChars(af);
ab=new RegExp("^(?:"+ae+")(.+$)","i");
ad=ab.exec(ag.val);
ad&&this.input.setHint(ah+ad[1])
}else{this.input.clearHint()
}},isEnabled:function R(){return this.enabled
},enable:function w(){this.enabled=true
},disable:function v(){this.enabled=false
},isActive:function T(){return this.active
},activate:function z(){if(this.isActive()){return true
}else{if(!this.isEnabled()||this.eventBus.before("active")){return false
}else{this.active=true;
this.eventBus.trigger("active");
return true
}}},deactivate:function s(){if(!this.isActive()){return true
}else{if(this.eventBus.before("idle")){return false
}else{this.active=false;
this.close();
this.eventBus.trigger("idle");
return true
}}},isOpen:function q(){return this.menu.isOpen()
},open:function G(){if(!this.isOpen()&&!this.eventBus.before("open")){this.menu.open();
this._updateHint();
this.eventBus.trigger("open")
}return this.isOpen()
},close:function O(){if(this.isOpen()&&!this.eventBus.before("close")){this.menu.close();
this.input.clearHint();
this.input.resetInputValue();
this.eventBus.trigger("close")
}return !this.isOpen()
},setVal:function I(ab){this.input.setQuery(l.toStr(ab))
},getVal:function D(){return this.input.getQuery()
},select:function Q(ab){var ac=this.menu.getSelectableData(ab);
if(ac&&!this.eventBus.before("select",ac.obj)){this.input.setQuery(ac.val,true);
this.eventBus.trigger("select",ac.obj);
this.close();
return true
}return false
},autocomplete:function t(ab){var ad,ac,ae;
ad=this.input.getQuery();
ac=this.menu.getSelectableData(ab);
ae=ac&&ad!==ac.val;
if(ae&&!this.eventBus.before("autocomplete",ac.obj)){this.input.setQuery(ac.val);
this.eventBus.trigger("autocomplete",ac.obj);
return true
}return false
},moveCursor:function o(ag){var ae,ab,ad,af,ac;
ae=this.input.getQuery();
ab=this.menu.selectableRelativeToCursor(ag);
ad=this.menu.getSelectableData(ab);
af=ad?ad.obj:null;
ac=this._minLengthMet()&&this.menu.update(ae);
if(!ac&&!this.eventBus.before("cursorchange",af)){this.menu.setCursor(ab);
if(ad){this.input.setInputValue(ad.val)
}else{this.input.resetInputValue();
this._updateHint()
}this.eventBus.trigger("cursorchange",af);
return true
}return false
},destroy:function P(){this.input.destroy();
this.menu.destroy()
}});
return F;
function W(ab){var ac=[].slice.call(arguments,1);
return function(){var ad=[].slice.call(arguments);
l.each(ac,function(ae){return ab[ae].apply(ab,ad)
})
}
}}();
(function(){var o,A,G;
o=f.fn.typeahead;
A={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};
G={initialize:function p(Q,P){var O;
P=l.isArray(P)?P:[].slice.call(arguments,1);
Q=Q||{};
O=m(Q.classNames);
return this.each(N);
function N(){var Y,X,V,R,U,ab,aa,Z,S,W,T;
l.each(P,function(ac){ac.highlight=!!Q.highlight
});
Y=f(this);
X=f(O.html.wrapper);
V=J(Q.hint);
R=J(Q.menu);
U=Q.hint!==false&&!V;
ab=Q.menu!==false&&!R;
U&&(V=u(Y,O));
ab&&(R=f(O.html.menu).css(O.css.menu));
V&&V.val("");
Y=E(Y,O);
if(U||ab){X.css(O.css.wrapper);
Y.css(U?O.css.input:O.css.inputWithNoHint);
Y.wrap(X).parent().prepend(U?V:null).append(ab?R:null)
}T=ab?d:g;
aa=new h({el:Y});
Z=new i({hint:V,input:Y},O);
S=new T({node:R,datasets:P},O);
W=new j({input:Z,menu:S,eventBus:aa,minLength:Q.minLength},O);
Y.data(A.www,O);
Y.data(A.typeahead,W)
}},isEnabled:function I(){var N;
v(this.first(),function(O){N=O.isEnabled()
});
return N
},enable:function y(){v(this,function(N){N.enable()
});
return this
},disable:function s(){v(this,function(N){N.disable()
});
return this
},isActive:function F(){var N;
v(this.first(),function(O){N=O.isActive()
});
return N
},activate:function t(){v(this,function(N){N.activate()
});
return this
},deactivate:function r(){v(this,function(N){N.deactivate()
});
return this
},isOpen:function C(){var N;
v(this.first(),function(O){N=O.isOpen()
});
return N
},open:function z(){v(this,function(N){N.open()
});
return this
},close:function B(){v(this,function(N){N.close()
});
return this
},select:function D(O){var P=false,N=f(O);
v(this.first(),function(Q){P=Q.select(N)
});
return P
},autocomplete:function K(O){var P=false,N=f(O);
v(this.first(),function(Q){P=Q.autocomplete(N)
});
return P
},moveCursor:function w(O){var N=false;
v(this.first(),function(P){N=P.moveCursor(O)
});
return N
},val:function M(N){var O;
if(!arguments.length){v(this.first(),function(P){O=P.getVal()
});
return O
}else{v(this,function(P){P.setVal(N)
});
return this
}},destroy:function H(){v(this,function(N,O){q(O);
N.destroy()
});
return this
}};
f.fn.typeahead=function(N){if(G[N]){return G[N].apply(this,[].slice.call(arguments,1))
}else{return G.initialize.apply(this,arguments)
}};
f.fn.typeahead.noConflict=function L(){f.fn.typeahead=o;
return this
};
function v(O,N){O.each(function(){var Q=f(this),P;
(P=Q.data(A.typeahead))&&N(P,Q)
})
}function u(O,N){return O.clone().addClass(N.classes.hint).removeData().css(N.css.hint).css(x(O)).prop("readonly",true).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})
}function E(P,N){P.data(A.attrs,{dir:P.attr("dir"),autocomplete:P.attr("autocomplete"),spellcheck:P.attr("spellcheck"),style:P.attr("style")});
P.addClass(N.classes.input).attr({autocomplete:"off",spellcheck:false});
try{!P.attr("dir")&&P.attr("dir","auto")
}catch(O){}return P
}function x(N){return{backgroundAttachment:N.css("background-attachment"),backgroundClip:N.css("background-clip"),backgroundColor:N.css("background-color"),backgroundImage:N.css("background-image"),backgroundOrigin:N.css("background-origin"),backgroundPosition:N.css("background-position"),backgroundRepeat:N.css("background-repeat"),backgroundSize:N.css("background-size")}
}function q(P){var N,O;
N=P.data(A.www);
O=P.parent().filter(N.selectors.wrapper);
l.each(P.data(A.attrs),function(R,Q){l.isUndefined(R)?P.removeAttr(Q):P.attr(Q,R)
});
P.removeData(A.typeahead).removeData(A.www).removeData(A.attr).removeClass(N.classes.input);
if(O.length){P.detach().insertAfter(O);
O.remove()
}}function J(P){var O,N;
O=l.isJQuery(P)||l.isElement(P);
N=O?f(P).first():[];
return N.length?N:null
}})()
});
(function(b,c){if(typeof module==="object"&&module.exports){module.exports=c()
}else{if(typeof define==="function"&&define.amd){define(c)
}else{b.findAndReplaceDOMText=c()
}}}(this,function factory(){var l="retain";
var b="first";
var j=document;
var i={}.hasOwnProperty;
function g(m){return String(m).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")
}function h(){return f.apply(null,arguments)||c.apply(null,arguments)
}function f(s,r,p,n,q){if((r&&!r.nodeType)&&arguments.length<=2){return false
}var o=typeof p=="function";
if(o){p=(function(t){return function(v,u){return t(v.text,u.startIndex)
}
}(p))
}var m=c(r,{find:s,wrap:o?null:p,replace:o?p:"$"+(n||"&"),prepMatch:function(t,u){if(!t[0]){throw"findAndReplaceDOMText cannot handle zero-length matches"
}if(n>0){var v=t[n];
t.index+=t[0].indexOf(v);
t[0]=v
}t.endIndex=t.index+t[0].length;
t.startIndex=t.index;
t.index=u;
return t
},filterElements:q});
h.revert=function(){return m.revert()
};
return true
}function c(n,m){return new d(n,m)
}h.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1};
h.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1};
h.NON_INLINE_PROSE=function(m){return i.call(h.NON_CONTIGUOUS_PROSE_ELEMENTS,m.nodeName.toLowerCase())
};
h.PRESETS={prose:{forceContext:h.NON_INLINE_PROSE,filterElements:function(m){return !i.call(h.NON_PROSE_ELEMENTS,m.nodeName.toLowerCase())
}}};
h.Finder=d;
function d(p,m){var o=m.preset&&h.PRESETS[m.preset];
m.portionMode=m.portionMode||l;
if(o){for(var n in o){if(i.call(o,n)&&!i.call(m,n)){m[n]=o[n]
}}}this.node=p;
this.options=m;
this.prepMatch=m.prepMatch||this.prepMatch;
this.reverts=[];
this.matches=this.search();
if(this.matches.length){this.processMatches()
}}d.prototype={search:function(){var p;
var m=0;
var t=0;
var r=this.options.find;
var q=this.getAggregateText();
var s=[];
var o=this;
r=typeof r==="string"?RegExp(g(r),"g"):r;
n(q);
function n(w){for(var v=0,u=w.length;
v<u;
++v){var x=w[v];
if(typeof x!=="string"){n(x);
continue
}if(r.global){while(p=r.exec(x)){s.push(o.prepMatch(p,m++,t))
}}else{if(p=x.match(r)){s.push(o.prepMatch(p,0,t))
}}t+=x.length
}}return s
},prepMatch:function(o,m,n){if(!o[0]){throw new Error("findAndReplaceDOMText cannot handle zero-length matches")
}o.endIndex=n+o.index+o[0].length;
o.startIndex=n+o.index;
o.index=m;
return o
},getAggregateText:function(){var o=this.options.filterElements;
var n=this.options.forceContext;
return m(this.node);
function m(r){if(r.nodeType===3){return[r.data]
}if(o&&!o(r)){return[]
}var p=[""];
var q=0;
if(r=r.firstChild){do{if(r.nodeType===3){p[q]+=r.data;
continue
}var s=m(r);
if(n&&r.nodeType===1&&(n===true||n(r))){p[++q]=s;
p[++q]=""
}else{if(typeof s[0]==="string"){p[q]+=s.shift()
}if(s.length){p[++q]=s;
p[++q]=""
}}}while(r=r.nextSibling)
}return p
}},processMatches:function(){var r=this.matches;
var n=this.node;
var y=this.options.filterElements;
var p,w,m=[],o=n,s=r.shift(),t=0,x=0,u=0,v,q=[n];
out:while(true){if(o.nodeType===3){if(!w&&o.length+t>=s.endIndex){w={node:o,index:u++,text:o.data.substring(s.startIndex-t,s.endIndex-t),indexInMatch:t-s.startIndex,indexInNode:s.startIndex-t,endIndexInNode:s.endIndex-t,isEnd:true}
}else{if(p){m.push({node:o,index:u++,text:o.data,indexInMatch:t-s.startIndex,indexInNode:0})
}}if(!p&&o.length+t>s.startIndex){p={node:o,index:u++,indexInMatch:0,indexInNode:s.startIndex-t,endIndexInNode:s.endIndex-t,text:o.data.substring(s.startIndex-t,s.endIndex-t)}
}t+=o.data.length
}v=o.nodeType===1&&y&&!y(o);
if(p&&w){o=this.replaceMatch(s,p,m,w);
t-=(w.node.data.length-w.endIndexInNode);
p=null;
w=null;
m=[];
s=r.shift();
u=0;
x++;
if(!s){break
}}else{if(!v&&(o.firstChild||o.nextSibling)){if(o.firstChild){q.push(o);
o=o.firstChild
}else{o=o.nextSibling
}continue
}}while(true){if(o.nextSibling){o=o.nextSibling;
break
}o=q.pop();
if(o===n){break out
}}}},revert:function(){for(var m=this.reverts.length;
m--;
){this.reverts[m]()
}this.reverts=[]
},prepareReplacementString:function(o,n,m){var p=this.options.portionMode;
if(p===b&&n.indexInMatch>0){return""
}o=o.replace(/\$(\d+|&|`|')/g,function(q,r){var s;
switch(r){case"&":s=m[0];
break;
case"`":s=m.input.substring(0,m.startIndex);
break;
case"'":s=m.input.substring(m.endIndex);
break;
default:s=m[+r]
}return s
});
if(p===b){return o
}if(n.isEnd){return o.substring(n.indexInMatch)
}return o.substring(n.indexInMatch,n.indexInMatch+n.text.length)
},getPortionReplacementNode:function(n,m){var p=this.options.replace||"$&";
var r=this.options.wrap;
if(r&&r.nodeType){var q=j.createElement("div");
q.innerHTML=r.outerHTML||new XMLSerializer().serializeToString(r);
r=q.firstChild
}if(typeof p=="function"){p=p(n,m);
if(p&&p.nodeType){return p
}return j.createTextNode(String(p))
}var o=typeof r=="string"?j.createElement(r):r;
p=j.createTextNode(this.prepareReplacementString(p,n,m));
if(!p.data){return p
}if(!o){return p
}o.appendChild(p);
return o
},replaceMatch:function(w,v,o,y){var p=v.node;
var A=y.node;
var u;
var r;
if(p===A){var q=p;
if(v.indexInNode>0){u=j.createTextNode(q.data.substring(0,v.indexInNode));
q.parentNode.insertBefore(u,q)
}var z=this.getPortionReplacementNode(y,w);
q.parentNode.insertBefore(z,q);
if(y.endIndexInNode<q.length){r=j.createTextNode(q.data.substring(y.endIndexInNode));
q.parentNode.insertBefore(r,q)
}q.parentNode.removeChild(q);
this.reverts.push(function(){if(u===z.previousSibling){u.parentNode.removeChild(u)
}if(r===z.nextSibling){r.parentNode.removeChild(r)
}z.parentNode.replaceChild(q,z)
});
return z
}else{u=j.createTextNode(p.data.substring(0,v.indexInNode));
r=j.createTextNode(A.data.substring(y.endIndexInNode));
var m=this.getPortionReplacementNode(v,w);
var x=[];
for(var t=0,s=o.length;
t<s;
++t){var C=o[t];
var B=this.getPortionReplacementNode(C,w);
C.node.parentNode.replaceChild(B,C.node);
this.reverts.push((function(D,E){return function(){E.parentNode.replaceChild(D.node,E)
}
}(C,B)));
x.push(B)
}var n=this.getPortionReplacementNode(y,w);
p.parentNode.insertBefore(u,p);
p.parentNode.insertBefore(m,p);
p.parentNode.removeChild(p);
A.parentNode.insertBefore(n,A);
A.parentNode.insertBefore(r,A);
A.parentNode.removeChild(A);
this.reverts.push(function(){u.parentNode.removeChild(u);
m.parentNode.replaceChild(p,m);
r.parentNode.removeChild(r);
n.parentNode.replaceChild(A,n)
});
return n
}}};
window.findAndReplaceDOMText=c;
return h
}));
(function(h){if("undefined"===typeof h){if("console" in window){window.console.info("Too much lightness, Featherlight needs jQuery.")
}return
}function b(m,l){if(this instanceof b){this.id=b.id++;
this.setup(m,l);
this.chainCallbacks(b._callbackChain)
}else{var n=new b(m,l);
n.open();
return n
}}var i=[],j=function(l){i=h.grep(i,function(m){return m!==l&&m.$instance.closest("body").length>0
});
return i
};
var c=function(r,q){var l={},p=new RegExp("^"+q+"([A-Z])(.*)");
for(var n in r){var m=n.match(p);
if(m){var o=(m[1]+m[2].replace(/([A-Z])/g,"-$1")).toLowerCase();
l[o]=r[n]
}}return l
};
var g={keyup:"onKeyUp",resize:"onResize"};
var d=function(l){h.each(b.opened().reverse(),function(){if(!l.isDefaultPrevented()){if(false===this[g[l.type]](l)){l.preventDefault();
l.stopPropagation();
return false
}}})
};
var f=function(m){if(m!==b._globalHandlerInstalled){b._globalHandlerInstalled=m;
var l=h.map(g,function(o,n){return n+"."+b.prototype.namespace
}).join(" ");
h(window)[m?"on":"off"](l,d)
}};
b.prototype={constructor:b,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:false,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:true,closeIcon:"&#10005;",loading:"",persist:false,otherClose:null,beforeOpen:h.noop,beforeContent:h.noop,beforeClose:h.noop,afterOpen:h.noop,afterContent:h.noop,afterClose:h.noop,onKeyUp:h.noop,onResize:h.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(q,o){if(typeof q==="object"&&q instanceof h===false&&!o){o=q;
q=undefined
}var m=h.extend(this,o,{target:q}),p=!m.resetCss?m.namespace:m.namespace+"-reset",n=h(m.background||['<div class="'+p+"-loading "+p+'">','<div class="'+p+'-content">','<span class="'+p+"-close-icon "+m.namespace+'-close">',m.closeIcon,"</span>",'<div class="'+m.namespace+'-inner">'+m.loading+"</div>","</div>","</div>"].join("")),l="."+m.namespace+"-close"+(m.otherClose?","+m.otherClose:"");
m.$instance=n.clone().addClass(m.variant);
m.$instance.on(m.closeTrigger+"."+m.namespace,function(s){var r=h(s.target);
if(("background"===m.closeOnClick&&r.is("."+m.namespace))||"anywhere"===m.closeOnClick||r.closest(l).length){m.close(s);
s.preventDefault()
}});
return this
},getContent:function(){if(this.persist!==false&&this.$content){return this.$content
}var m=this,q=this.constructor.contentFilters,l=function(t){return m.$currentTarget&&m.$currentTarget.attr(t)
},p=l(m.targetAttr),r=m.target||p||"";
var o=q[m.type];
if(!o&&r in q){o=q[r];
r=m.target&&p
}r=r||l("href")||"";
if(!o){for(var n in q){if(m[n]){o=q[n];
r=m[n]
}}}if(!o){var s=r;
r=null;
h.each(m.contentFilters,function(){o=q[this];
if(o.test){r=o.test(s)
}if(!r&&o.regex&&s.match&&s.match(o.regex)){r=s
}return !r
});
if(!r){if("console" in window){window.console.error("Featherlight: no content filter found "+(s?' for "'+s+'"':" (no target specified)"))
}return false
}}return o.process.call(m,r)
},setContent:function(m){var l=this;
if(m.is("iframe")||h("iframe",m).length>0){l.$instance.addClass(l.namespace+"-iframe")
}l.$instance.removeClass(l.namespace+"-loading");
l.$instance.find("."+l.namespace+"-inner").not(m).slice(1).remove().end().replaceWith(h.contains(l.$instance[0],m[0])?"":m);
l.$content=m.addClass(l.namespace+"-inner");
return l
},open:function(n){var l=this;
l.$instance.hide().appendTo(l.root);
if((!n||!n.isDefaultPrevented())&&l.beforeOpen(n)!==false){if(n){n.preventDefault()
}var m=l.getContent();
if(m){i.push(l);
f(true);
l.$instance.fadeIn(l.openSpeed);
l.beforeContent(n);
return h.when(m).always(function(o){l.setContent(o);
l.afterContent(n)
}).then(l.$instance.promise()).done(function(){l.afterOpen(n)
})
}}l.$instance.detach();
return h.Deferred().reject().promise()
},close:function(n){var m=this,l=h.Deferred();
if(m.beforeClose(n)===false){l.reject()
}else{if(0===j(m).length){f(false)
}m.$instance.fadeOut(m.closeSpeed,function(){m.$instance.detach();
m.afterClose(n);
l.resolve()
})
}return l.promise()
},resize:function(l,n){if(l&&n){this.$content.css("width","").css("height","");
var m=Math.max(l/parseInt(this.$content.parent().css("width"),10),n/parseInt(this.$content.parent().css("height"),10));
if(m>1){this.$content.css("width",""+l/m+"px").css("height",""+n/m+"px")
}}},chainCallbacks:function(m){for(var l in m){this[l]=h.proxy(m[l],this,h.proxy(this[l],this))
}}};
h.extend(b,{id:0,autoBind:"[data-featherlight]",defaults:b.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(l){return l instanceof h&&l
},process:function(l){return this.persist!==false?h(l):h(l).clone(true)
}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(o){var n=this,m=h.Deferred(),l=new Image(),p=h('<img src="'+o+'" alt="" class="'+n.namespace+'-image" />');
l.onload=function(){p.naturalWidth=l.width;
p.naturalHeight=l.height;
m.resolve(p)
};
l.onerror=function(){m.reject(p)
};
l.src=o;
return m.promise()
}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(l){return h(l)
}},ajax:{regex:/./,process:function(n){var m=this,l=h.Deferred();
var o=h("<div></div>").load(n,function(q,p){if(p!=="error"){l.resolve(o.contents())
}l.fail()
});
return l.promise()
}},iframe:{process:function(n){var l=new h.Deferred();
var m=h("<iframe/>").hide().attr("src",n).css(c(this,"iframe")).on("load",function(){l.resolve(m.show())
}).appendTo(this.$instance.find("."+this.namespace+"-content"));
return l.promise()
}},text:{process:function(l){return h("<div>",{text:l})
}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(m,n){var o=this,p=new RegExp("^data-"+n+"-(.*)"),l={};
if(m&&m.attributes){h.each(m.attributes,function(){var r=this.name.match(p);
if(r){var t=this.value,q=h.camelCase(r[1]);
if(h.inArray(q,o.functionAttributes)>=0){t=new Function(t)
}else{try{t=h.parseJSON(t)
}catch(s){}}l[q]=t
}})
}return l
},extend:function(n,m){var l=function(){this.constructor=n
};
l.prototype=this.prototype;
n.prototype=new l();
n.__super__=this.prototype;
h.extend(n,this,m);
n.defaults=n.prototype;
return n
},attach:function(r,m,l){var p=this;
if(typeof m==="object"&&m instanceof h===false&&!l){l=m;
m=undefined
}l=h.extend({},l);
var n=l.namespace||p.defaults.namespace,o=h.extend({},p.defaults,p.readElementConfig(r[0],n),l),q;
r.on(o.openTrigger+"."+o.namespace,o.filter,function(t){var s=h.extend({$source:r,$currentTarget:h(this)},p.readElementConfig(r[0],o.namespace),p.readElementConfig(this,o.namespace),l);
var u=q||h(this).data("featherlight-persisted")||new p(m,s);
if(u.persist==="shared"){q=u
}else{if(u.persist!==false){h(this).data("featherlight-persisted",u)
}}s.$currentTarget.blur();
u.open(t)
});
return r
},current:function(){var l=this.opened();
return l[l.length-1]||null
},opened:function(){var l=this;
j();
return h.grep(i,function(m){return m instanceof l
})
},close:function(l){var m=this.current();
if(m){return m.close(l)
}},_onReady:function(){var l=this;
if(l.autoBind){h(l.autoBind).each(function(){l.attach(h(this))
});
h(document).on("click",l.autoBind,function(m){if(m.isDefaultPrevented()||m.namespace==="featherlight"){return
}m.preventDefault();
l.attach(h(m.currentTarget));
h(m.target).trigger("click.featherlight")
})
}},_callbackChain:{onKeyUp:function(m,l){if(27===l.keyCode){if(this.closeOnEsc){h.featherlight.close(l)
}return false
}else{return m(l)
}},onResize:function(m,l){this.resize(this.$content.naturalWidth,this.$content.naturalHeight);
return m(l)
},afterContent:function(n,m){var l=n(m);
this.onResize(m);
return l
}}});
h.featherlight=b;
h.fn.featherlight=function(m,l){return b.attach(this,m,l)
};
h(document).ready(function(){b._onReady()
})
}(jQuery));
var fakeLocalStorage=function(){var b={};
var d;
if(window.Storage&&window.localStorage){d=window.Storage.prototype
}else{window.localStorage={};
d=window.localStorage
}if(!window.location.origin){window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")
}var c=function(h,j){var g=(h==null)?null:d.getItem(h);
var f=location.href.substr(location.origin.length);
var i=document.createEvent("StorageEvent");
i.initStorageEvent("storage",false,false,h,g,j,f,null);
window.dispatchEvent(i)
};
d.key=function(g){var f=Object.keys(b)[g];
return typeof f==="string"?f:null
};
d.getItem=function(f){return typeof b[f]==="string"?b[f]:null
};
d.setItem=function(f,g){c(f,g);
b[f]=String(g)
};
d.removeItem=function(f){c(f,null);
delete b[f]
};
d.clear=function(){c(null,null);
b={}
}
};
if(typeof window.localStorage==="object"){try{localStorage.setItem("localStorageTest",1);
localStorage.removeItem("localStorageTest")
}catch(e){fakeLocalStorage()
}}else{fakeLocalStorage()
}(function(f){var c,h,g,b,d;
c={s:[],g:[],j:2000,K:[],o:null};
h=function(){function j(l){i.push(l)
}var i=[];
return{T:function(l){l();
return function(){}
},X:j,G:function(){for(;
0<i.length;
){var m=i.shift();
try{m()
}catch(l){}}},ha:function(t,x){var w=!1;
try{if(i=[],0!==t.length){for(var s=!1,v=function(){s||(x(),s=!0)
},o=t.length,y=function(){0<o&&0===--o&&v()
},w=!0,p=0;
p<t.length;
p++){try{var m=(0,t[p])(y);
j(m)
}catch(q){}}j(v)
}}catch(q){}finally{w||x()
}}}
}(c);
g=function(){return{f:[],A:[],U:function(i){return{W:i,B:[],ga:function(j,m){for(var l=0;
l<m.length;
l++){this.B[j+l]=m[l]
}},R:function(j){this.ga(this.B.length,j)
},Y:function(){for(var v=this.B,s=this.W.toString(),w=0;
w<v.length;
w++){try{for(var u=s+="&",p=""+v[w](),t="",m=/[%&]+/g,q=0,o=void 0;
o=m.exec(p);
q=m.lastIndex){t+=p.substring(q,o.index)+encodeURIComponent(o[0])
}t+=p.substring(q);
s=u+t
}catch(j){}}return s
}}
}}
}();
b=function(j){function i(n){if(!l.test(n)){throw Error()
}n=n.split(".");
for(var o=window,m=0;
m<n.length;
m++){o=o[n[m]]
}return o
}var l=/^[^.]+(?:\.[^.]+)*$/;
return{P:j,startsWith:function(m,n){return"string"===typeof m&&"string"===typeof n&&m.length>=n.length?m.substr(0,n.length)===n:!1
},v:function(m){for(var p=0;
p<m.length;
p++){try{var n=i(m[p]);
if(n){return n
}}catch(o){}}return""
},a:i,H:function(m){m.match("^//")&&(m=document.URL.match(/^[^:]+:/)[0]+m);
var n=/^https?:\/\/[^/]+/;
m=m.match(n);
if(null===m){return !0
}n=document.URL.match(n);
return null!==n&&n[0]===m[0]
},F:function(){var m=navigator.userAgent;
if(m.match(/ Trident\/7\.0;.* rv:11\.0/)){return 11
}var n;
return(n=m.match(/ MSIE (\d+)/))?parseInt(n[1]):null
},fa:function(o,s,m){var r=!1;
try{var q=!1,p=function(){o.onload=o.onerror=o.ontimeout=null;
q=!0
};
o.onload=function(){q||(p(),o=null,m(!0))
};
o.onerror=o.ontimeout=function(){q||(p(),o=null,m(!1))
};
o.timeout=s;
o.send();
r=!0
}catch(n){p(),o=null
}finally{r||m(!1)
}},I:function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")
},S:function(w,u,v){var s=!1,q=!1,p=!1;
try{var n=null,m=!1,o=function(){w.onreadystatechange=null;
null!==n&&(clearTimeout(n),n=null);
m=!0
};
w.onreadystatechange=function(){m||4!=w.readyState||(o(),w=null,v(q,p))
};
0!==u&&(n=setTimeout(function(){m||(q=!0,o(),w.abort(),w=null,v(q,p))
},u));
w.send();
s=!0
}catch(x){p=!0,o(),w=null
}finally{s||v(q,p)
}},w:function(n,p,m,o){"boolean"===typeof o&&o?p=n.split(p):(o=n.indexOf(p),p=-1===o?[n]:[n.substring(0,o),n.substring(o+p.length)]);
n=p[0];
for(o=1;
o<p.length;
o++){n+=m+p[o]
}return n
},ca:function(n){if(!n){return 0
}if(Array.prototype.reduce){return n.split("").reduce(function(q,r){q=(q<<5)-q+r.charCodeAt(0);
return q&q
},0)
}for(var p=0,m=0,o=n.length;
m<o;
m++){p=(p<<5)-p+n.charCodeAt(m),p=p&p
}return p
}}
}(function(m){var i;
try{i=document.getElementById(m)
}catch(o){}if(null===i||"undefined"===typeof i){try{i=document.getElementsByName(m)[0]
}catch(o){}}if(null===i||"undefined"===typeof i){for(var n=0;
n<document.forms.length;
n++){for(var j=document.forms[n],p=0;
p<j.elements.length;
p++){var l=j[p];
if(l.name===m||l.id===m){return l
}}}}return i
});
d=function(ag,ak,ah,al,aj,ae,ai){function aa(p){ak.G();
try{if(!p){return V()
}var n;
n=al.P(p);
if(null!==n){try{n.value=V()
}catch(l){n.value=escape(l.message)
}}}catch(l){}}function Q(p){function t(){null!==l&&(clearTimeout(l),l=null);
r=!0;
n&&(n=!1,p())
}var n=!1,r=!1;
s="";
var l=null;
try{navigator.getBattery().then(function(m){r||(s=[m.charging,m.chargingTime,m.dischargingTime,m.level].join(),n=!1,p())
}),l=setTimeout(t,ae.j),n=!0
}catch(q){}finally{return n||p(),t
}}function ac(v,w){function u(){r=!0
}var l=!1,r=!1;
try{if(P="",U=null,v){var q=!al.H(v);
if(q){var p=al.F();
if(null!==p&&10>p){N=8;
return
}}var n=null;
try{n=al.I()
}catch(x){N=9;
return
}try{n.open("GET",v,!0)
}catch(x){N=1;
return
}al.S(n,ae.j,function(I,G){try{if(r){N=5
}else{if(I){N=2
}else{if(G){N=6
}else{var B=n,am=["","",""];
try{j=B.getResponseHeader("cache-control");
for(var D=B.getAllResponseHeaders().toLowerCase().split("\n"),F=["warning","x-cache","via"],M=0;
M<F.length;
M++){for(var L=0;
L<D.length;
L++){if(al.startsWith(D[L],F[M]+":")){am[M]=B.getResponseHeader(F[M]);
break
}}}}catch(C){}i=am[0];
H=am[1];
Y=am[2];
N=n.status;
if(200===n.status){var z;
if(!(z=n.getResponseHeader("Last-Modified"))){var y=n.getResponseHeader("Expires");
if(y){var A=new Date(y);
A.setTime(A.getTime()-31536000000);
z=A.toUTCString()
}else{z=void 0
}}(P=z||"")?U=q:N=7
}}}}}catch(C){N=6
}finally{w()
}});
l=!0
}else{N=4
}}catch(x){N=6
}finally{return l||w(),u
}}function V(){T=new Date;
for(var z="Acrobat;Flash;QuickTime;Java Plug-in;Director;Office".split(";"),x=0;
x<z.length;
x++){var y=z[x],q=y,v=y,y="";
try{if(navigator.plugins&&navigator.plugins.length){for(var w=new RegExp(v+".* ([0-9._]+)"),v=0;
v<navigator.plugins.length;
v++){var u=w.exec(navigator.plugins[v].name);
null===u&&(u=w.exec(navigator.plugins[v].description));
u&&(y=u[1])
}}else{if(window.ActiveXObject&&o[v]){try{var A=new ActiveXObject(o[v][0]),y=o[v][1](A)
}catch(n){y=""
}}}}catch(n){y=n.message
}W[q]=y
}z="";
for(x=0;
x<ai.f.length;
x++){var r;
try{r=ai.f[x]()
}catch(n){r=""
}z+=escape(r);
z+=";"
}z+=escape(ae.o.Y())+";";
for(x=0;
x<ai.A.length;
x++){z=ai.A[x](z)
}return J?ah.M(z):z
}function ad(p){try{if(navigator.plugins&&navigator.plugins.length){for(var q=0;
q<navigator.plugins.length;
q++){var n=navigator.plugins[q];
if(0<=n.name.indexOf(p)){return n.name+(n.description?"|"+n.description:"")
}}}}catch(l){}return""
}function S(l){var m=Math.min(O,Z);
return 0!==Math.abs(O-Z)&&l.getTimezoneOffset()===m
}function af(m){var n="";
try{"undefined"!==typeof K.u.getComponentVersion&&(n=K.u.getComponentVersion(m,"ComponentID"))
}catch(l){m=l.message.length,n=escape(l.message.substr(0,40<m?40:m))
}return n
}function ab(l){return function(){return l
}
}var J=!0,K={},P="",U=null,O=(new Date(2005,0,15)).getTimezoneOffset(),Z=(new Date(2005,6,15)).getTimezoneOffset(),N=3,j="",i="",H="",Y="",s="",X=ab(""),o={Flash:["ShockwaveFlash.ShockwaveFlash",function(l){return l.getVariable("$version")
}],Director:["SWCtl.SWCtl",function(l){return l.ShockwaveVersion("")
}]};
try{K.u=document.createElement("span"),"undefined"!==typeof K.u.addBehavior&&K.u.addBehavior("#default#clientCaps")
}catch(R){}var W={};
ae.o=new ai.U(2);
ae.o.R([function(){return s
},function(){return j
},function(){return i.replace(/ *(\d{3}) [^ ]*( "[^"\\]*(\\(.|\n)[^"\\]*)*"){1,2} */g,function(l,m){return m
})
},function(){return H
},function(){return Y
},function(){var l=ag.Z();
return"boolean"===typeof l?0+l:""
},function(){return al.a("devicePixelRatio")
},function(){return Math.round(window.screen.width*aj.O())
},function(){return Math.round(window.screen.height*aj.O())
},function(){return al.a("screen.left")
},function(){return al.a("screen.top")
},function(){return al.a("innerWidth")
},function(){return al.a("outerWidth")
},function(){return aj.zoom()
}]);
var T;
ai.f=[ab("TF1"),ab("026"),function(){return ScriptEngineMajorVersion()
},function(){return ScriptEngineMinorVersion()
},function(){return ScriptEngineBuildVersion()
},function(){return af("{7790769C-0471-11D2-AF11-00C04FA35D02}")
},function(){return af("{89820200-ECBD-11CF-8B85-00AA005B4340}")
},function(){return af("{283807B5-2C60-11D0-A31D-00AA00B92C03}")
},function(){return af("{4F216970-C90C-11D1-B5C7-0000F8051515}")
},function(){return af("{44BBA848-CC51-11CF-AAFA-00AA00B6015C}")
},function(){return af("{9381D8F2-0288-11D0-9501-00AA00B911A5}")
},function(){return af("{4F216970-C90C-11D1-B5C7-0000F8051515}")
},function(){return af("{5A8D6EE0-3E18-11D0-821E-444553540000}")
},function(){return af("{89820200-ECBD-11CF-8B85-00AA005B4383}")
},function(){return af("{08B0E5C0-4FCB-11CF-AAA5-00401C608555}")
},function(){return af("{45EA75A0-A269-11D1-B5BF-0000F8051515}")
},function(){return af("{DE5AED00-A4BF-11D1-9948-00C04F98BBC9}")
},function(){return af("{22D6F312-B0F6-11D0-94AB-0080C74C7E95}")
},function(){return af("{44BBA842-CC51-11CF-AAFA-00AA00B6015B}")
},function(){return af("{3AF36230-A269-11D1-B5BF-0000F8051515}")
},function(){return af("{44BBA840-CC51-11CF-AAFA-00AA00B6015C}")
},function(){return af("{CC2A9BA0-3BDD-11D0-821E-444553540000}")
},function(){return af("{08B0E5C0-4FCB-11CF-AAA5-00401C608500}")
},function(){return al.a("navigator.appCodeName")
},function(){return al.a("navigator.appName")
},function(){return al.a("navigator.appVersion")
},function(){return al.v(["navigator.productSub","navigator.appMinorVersion"])
},function(){return al.a("navigator.browserLanguage")
},function(){return al.a("navigator.cookieEnabled")
},function(){return al.v(["navigator.oscpu","navigator.cpuClass"])
},function(){return al.a("navigator.onLine")
},function(){return al.a("navigator.platform")
},function(){return al.a("navigator.systemLanguage")
},function(){return al.a("navigator.userAgent")
},function(){return al.v(["navigator.language","navigator.userLanguage"])
},function(){return al.a("document.defaultCharset")
},function(){return al.a("document.domain")
},function(){return al.a("screen.deviceXDPI")
},function(){return al.a("screen.deviceYDPI")
},function(){return al.a("screen.fontSmoothingEnabled")
},function(){return al.a("screen.updateInterval")
},function(){return 0!==Math.abs(O-Z)
},function(){return S(T)
},function(){return"@UTC@"
},function(){var l=0,l=0;
S(T)&&(l=Math.abs(O-Z));
return l=-(T.getTimezoneOffset()+l)/60
},function(){return(new Date(2005,5,7,21,33,44,888)).toLocaleString()
},function(){return al.a("screen.width")
},function(){return al.a("screen.height")
},function(){return W.Acrobat
},function(){return W.Flash
},function(){return W.QuickTime
},function(){return W["Java Plug-in"]
},function(){return W.Director
},function(){return W.Office
},function(){return"@CT@"
},function(){return O
},function(){return Z
},function(){return T.toLocaleString()
},function(){return al.a("screen.colorDepth")
},function(){return al.a("screen.availWidth")
},function(){return al.a("screen.availHeight")
},function(){return al.a("screen.availLeft")
},function(){return al.a("screen.availTop")
},function(){return ad("Acrobat")
},function(){return ad("Adobe SVG")
},function(){return ad("Authorware")
},function(){return ad("Citrix ICA")
},function(){return ad("Director")
},function(){return ad("Flash")
},function(){return ad("MapGuide")
},function(){return ad("MetaStream")
},function(){return ad("PDF Viewer")
},function(){return ad("QuickTime")
},function(){return ad("RealOne")
},function(){return ad("RealPlayer Enterprise")
},function(){return ad("RealPlayer Plugin")
},function(){return ad("Seagate Software Report")
},function(){return ad("Silverlight")
},function(){return ad("Windows Media")
},function(){return ad("iPIX")
},function(){return ad("nppdf.so")
},function(){var l=document.createElement("span");
l.innerHTML="&nbsp;";
l.style.position="absolute";
l.style.left="-9999px";
document.body.appendChild(l);
var m=l.offsetHeight;
document.body.removeChild(l);
return m
},X,X,X,X,X,X,X,X,X,X,X,X,X,X,function(){return"6.7.0-1"
},X,function(){return P
},X,X,X,X,X,function(){return"boolean"===typeof U?0+U:""
},function(){return N
},function(){return"0"
},X,X,X,X,function(){var p="";
if(navigator.plugins&&navigator.plugins.length){for(var n=0;
n<navigator.plugins.length;
n++){var l=navigator.plugins[n];
l&&(p+=l.name+l.filename+l.description+l.version)
}}return(al.ca(p)>>>0).toString(16)+""
},function(){return al.v(["navigator.doNotTrack","navigator.msDoNotTrack"])
}];
ai.A=[function(l){return al.w(l,escape("@UTC@"),(new Date).getTime())
},function(l){return al.w(l,escape("@CT@"),(new Date).getTime()-T.getTime())
}];
ae.g.push(function(l){var m=ae.s[0];
return void 0===m?(N=4,ak.T(l)):ac(m,l)
});
navigator.getBattery&&ae.g.push(Q);
ae.g.push(ag.ia);
K.idcarpal=aa;
K.f1b5=ah.M;
K.razepme=function(n,p){ak.G();
var l=Math.random()+1&&["https://globalsiteanalytics.com/resource/resource.png","https://globalsiteanalytics.com/service/hdim","user_prefs2"];
ae.s=p?p:"string"!==typeof l?l:[];
ak.ha(ae.g,function(){"function"===typeof n&&setTimeout(n,0)
});
for(l=0;
l<ae.K.length;
l++){ae.K[l]()
}};
K.citya=function(u,l,t){ak.G();
if(2<arguments.length){var p=ac(u,function(){"function"===typeof t&&setTimeout(t,0)
});
ak.X(p)
}else{try{P="";
U=null;
if(p=!al.H(u)){var r=al.F();
if(null!==r&&10>r){return
}}var n=al.I();
n.open("GET",u,!1);
n.send();
r=function(){var m=n.getResponseHeader("Expires");
if(m){return m=new Date(m),m.setTime(m.getTime()-31536000000),m.toUTCString()
}};
200===n.status&&(P=n.getResponseHeader("Last-Modified")||r()||"")&&(U=p)
}catch(q){}}};
return function(l){l=l||{};
var m=l.ctx||window;
J=l.hasOwnProperty("compress")?l.compress:!0;
m.content=K;
J&&(l=navigator.userAgent.toLowerCase(),"Gecko"===navigator.product&&2>=parseInt(l.substring(l.indexOf("rv:")+3,l.indexOf(")",l.indexOf("rv:")+3)).split(".")[0])&&aa())
}
}(function(j){var i=null;
return{ia:function(o){function l(){p||(p=!0,null!==m&&(clearTimeout(m),m=null),r&&(r.parentNode&&r.parentNode.removeChild(r),r=null),o())
}i=null;
var r,m=null,p=!1,q=!1;
try{r=document.createElement("div"),r.setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links adsbox"),r.setAttribute("style",j.w("width:1px;height:1px;position:absolute;left:-10000px;right:-1000px;",";","!important;",!0)),document.body.appendChild(r),m=setTimeout(function(){m=null;
p||(i=!(r&&r.parentNode&&!r.getAttribute("abp")&&r.offsetParent&&0!==r.offsetWidth&&0!==r.offsetHeight&&0!==r.clientWidth&&0!==r.clientHeight),l())
},100),q=!0
}finally{return q||l(),l
}},Z:function(){return i
}}
}(b,c),h,function(){function l(o){var n;
37>o?11>o?o?n=o+47:n=46:n=o+54:38>o?n=95:n=o+59;
return String.fromCharCode(n)
}function i(q){function o(n){t=t<<n[0]|n[1];
for(r+=n[0];
6<=r;
){n=t>>r-6&63,s+=l(n),r-=6,t^=n<<r
}}var s="",t=0,r=0;
o([6,(q.length&7)<<3|0]);
o([6,q.length&56|1]);
for(var p=0;
p<q.length;
p++){if(void 0===m[q.charCodeAt(p)]){return
}o(m[q.charCodeAt(p)])
}o(m[0]);
0<r&&o([6-r,0]);
return s
}var m={1:[4,15],110:[8,239],74:[8,238],57:[7,118],56:[7,117],71:[8,233],25:[8,232],101:[5,28],104:[7,111],4:[7,110],105:[6,54],5:[7,107],109:[7,106],103:[9,423],82:[9,422],26:[8,210],6:[7,104],46:[6,51],97:[6,50],111:[6,49],7:[7,97],45:[7,96],59:[5,23],15:[7,91],11:[8,181],72:[8,180],27:[8,179],28:[8,178],16:[7,88],88:[10,703],113:[11,1405],89:[12,2809],107:[13,5617],90:[14,11233],42:[15,22465],64:[16,44929],0:[16,44928],81:[9,350],29:[8,174],118:[8,173],30:[8,172],98:[8,171],12:[8,170],99:[7,84],117:[6,41],112:[6,40],102:[9,319],68:[9,318],31:[8,158],100:[7,78],84:[6,38],55:[6,37],17:[7,73],8:[7,72],9:[7,71],77:[7,70],18:[7,69],65:[7,68],48:[6,33],116:[6,32],10:[7,63],121:[8,125],78:[8,124],80:[7,61],69:[7,60],119:[7,59],13:[8,117],79:[8,116],19:[7,57],67:[7,56],114:[6,27],83:[6,26],115:[6,25],14:[6,24],122:[8,95],95:[8,94],76:[7,46],24:[7,45],37:[7,44],50:[5,10],51:[5,9],108:[6,17],22:[7,33],120:[8,65],66:[8,64],21:[7,31],106:[7,30],47:[6,14],53:[5,6],49:[5,5],86:[8,39],85:[8,38],23:[7,18],75:[7,17],20:[7,16],2:[5,3],73:[8,23],43:[9,45],87:[9,44],70:[7,10],3:[6,4],52:[5,1],54:[5,0]},j="%20 ;;; %3B %2C und fin ed; %28 %29 %3A /53 ike Web 0; .0 e; on il ck 01 in Mo fa 00 32 la .1 ri it %u le".split(" ");
return{M:function(r){for(var o=r,p=0;
j[p];
p++){o=o.split(j[p]).join(String.fromCharCode(p+1))
}o=i(o);
if(void 0===o){return r
}for(var p=65535,q=0;
q<r.length;
q++){p=(p>>>8|p<<8)&65535,p^=r.charCodeAt(q)&255,p^=(p&255)>>4,p^=p<<12&65535,p^=(p&255)<<5&65535
}p&=65535;
r=""+l(p>>>12);
r+=l(p>>>6&63);
r+=l(p&63);
return o+r
}}
}(),b,function(){function s(){if(!q){q=o;
try{isNaN(screen.logicalXDPI)||isNaN(screen.systemXDPI)?window.navigator.msMaxTouchPoints?q=m:!window.chrome||window.opera||0<=navigator.userAgent.indexOf(" Opera")?0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?q=j:"orientation" in window&&"webkitRequestAnimationFrame" in window?q=w:"webkitRequestAnimationFrame" in window?q=p:0<=navigator.userAgent.indexOf("Opera")?q=v:window.devicePixelRatio?q=z:0.001<x().zoom&&(q=x):q=A:q=i
}catch(l){}}return q()
}function y(){function n(D,G,F){var E=(D+G)/2;
return 0>=F||0.0001>G-D?E:C("(min--moz-device-pixel-ratio:"+E+")").matches?n(E,G,F-1):n(D,E,F-1)
}var C,l,u,t;
window.matchMedia?C=window.matchMedia:(l=document.getElementsByTagName("head")[0],u=document.createElement("style"),l.appendChild(u),t=document.createElement("div"),t.className="mediaQueryBinarySearch",t.style.display="none",document.body.appendChild(t),C=function(D){u.sheet.insertRule("@media "+D+"{.mediaQueryBinarySearch {text-decoration: underline} }",0);
D="underline"==getComputedStyle(t,null).textDecoration;
u.sheet.deleteRule(0);
return{matches:D}
});
var r=n(0,10,20);
t&&(l.removeChild(u),document.body.removeChild(t));
return r
}function v(){var l=window.top.outerWidth/window.top.innerWidth,l=Math.round(100*l)/100;
return{zoom:l,c:l*B()}
}function z(){return{zoom:x().zoom,c:B()}
}function x(){var l=y(),l=Math.round(100*l)/100;
return{zoom:l,c:l}
}function p(){var l=document.createElement("div");
l.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0";
l.setAttribute("style","font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;".replace(/;/g," !important;"));
var n=document.createElement("div");
n.setAttribute("style","width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;".replace(/;/g," !important;"));
n.appendChild(l);
document.body.appendChild(n);
l=1000/l.clientHeight;
l=Math.round(100*l)/100;
document.body.removeChild(n);
return{zoom:l,c:l*B()}
}function w(){var l=(90==Math.abs(window.orientation)?screen.height:screen.width)/window.innerWidth;
return{zoom:l,c:l*B()}
}function j(){var l=Math.round(document.documentElement.clientWidth/window.innerWidth*100)/100;
return{zoom:l,c:l*B()}
}function A(){var l=Math.round(window.outerWidth/window.innerWidth*100)/100;
return{zoom:l,c:l*B()}
}function m(){var l=Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;
return{zoom:l,c:l*B()}
}function i(){var l=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;
return{zoom:l,c:l*B()}
}function o(){return{zoom:1,c:1}
}function B(){return window.devicePixelRatio||1
}var q;
return{zoom:function(){return s().zoom
},O:function(){return s().c
}}
}(),c,g);
(function(i){"undefined"!==typeof f?i(f):i()
})(function(q,w,s,x,v,p,t){function j(H,G,F){function E(){C=!0
}var D=!1,C=!1;
try{var B=!1;
if(!x.H(H)){var A=x.F();
if(null!==A){if(8>A){return
}if(10>A){if(!window.XDomainRequest){return
}B=!0
}}}var z;
(function(l,n){B?(z=new XDomainRequest,z.open("POST",l),x.fa(z,v.j,n)):(z=x.I(),z.open("POST",l,!0),x.S(z,v.j,function(){n(200===z.status)
}))
})(H,function(I){try{var l=new Date;
if(!C&&I&&z.responseText){var r=z.responseText.replace(/[^ -~](?:.|\n)*/,"");
x.P(G).value=r;
y=l
}}catch(n){}finally{F()
}});
D=!0
}catch(u){}finally{return D||F(),E
}}var y=null,m="",i="",o=null;
w.A[0]=function(l){return x.w(l,escape("@UTC@"),(y||new Date).getTime())
};
w.f[106]=function(){return"1"
};
w.f[108]=function(){return m
};
w.f[109]=function(){return i
};
w.f[110]=function(){return p((new Date).getTime())
};
v.o.R([function(){return o||""
}]);
v.g.push(function(n){var l=v.s,r=l[1],l=l[2];
return void 0===r||void 0===l?q.T(n):j(r,l,n)
});
v.g.push(function(n){function l(){z&&z.da()
}var z=o=null,u=!1;
try{var z=new t.V,r=function(){z=z.oncomplete=z.ontimeout=z.onerror=z.J=null;
n()
};
z.oncomplete=z.ontimeout=z.onerror=function(){try{for(var B=z.L,E=o="",A=0;
A<B.length;
A++){try{var D=B[A].replace(/^[^:]*:/,"").split(/ /);
8<=D.length&&(o+=E+D[4]+" "+D[7],E=",")
}catch(C){}}}catch(C){}r()
};
z.J=r;
z.timeout=v.j;
z.start();
u=!0
}finally{return u||n(),l
}});
v.K.push(function(){m=i="";
var n=v.s,l=n[3];
if(l){n=n[4];
n:{for(var A=l+"=",z=document.cookie.split(/; */g),u=0;
u<z.length;
u++){var r=z[u];
if(0===r.indexOf(A)){i=r.substring(A.length,r.length);
break n
}}i=""
}i?m="0":(A=(new Date).getTime(),i=p(A),document.cookie=l+"="+i+"; expires="+(new Date(A+63072000000)).toUTCString()+(n?"; domain=."+n:"")+"; path=/",m="1")
}});
return function(l){s(l)
}
}(h,g,d,b,c,function(){var i=/[xy]/g;
return function(j){return("0000000"+((j/1000|0)>>>0).toString(16)).slice(-8)+"-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(i,function(l){var m=16*Math.random()|0;
"y"===l&&(m=m&3|8);
return m.toString(16)
})
}
}(),function(){var i=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection;
return{V:function(){if(!i){throw Error()
}return{h:0,b:null,m:null,i:null,L:[],timeout:0,oncomplete:null,ontimeout:null,J:null,onerror:null,start:function(){var j=this;
if(0!==j.h){throw Error()
}try{j.$(),0<j.timeout&&(j.i=setTimeout(function(){j.i=null;
j.l(j.ontimeout)
},j.timeout)),j.h=1
}catch(l){j.l(j.onerror)
}},da:function(){if(0===this.h){throw Error()
}this.l(this.J)
},$:function(){try{this.ba()
}catch(j){this.aa()
}},ba:function(){var j=this;
try{j.N(),j.b.createOffer().then(function(m){return j.b.setLocalDescription(m)
},j.C)
}catch(l){throw j.D(),l
}},aa:function(){var j=this;
try{j.N(),j.b.createOffer(function(m){j.b.setLocalDescription(m,function(){},j.C)
},j.C)
}catch(l){throw j.D(),l
}},N:function(){var j=this;
j.b=new i({iceServers:[]});
j.m=j.b.createDataChannel("",{reliable:!1});
j.b.onicecandidate=function(l){j.ea(l.candidate)
}
},D:function(){this.b&&(this.b.onicecandidate=null);
this.m&&(this.m.close(),this.m=null);
this.b&&(this.b.close(),this.b=null)
},ea:function(j){j?this.L.push(j.candidate):this.l(this.oncomplete)
},C:function(){this.l(this.onerror)
},l:function(j){2!==this.h&&(this.D(),this.i&&(clearTimeout(this.i),this.i=null),this.h=2,j&&setTimeout(j,0))
}}
}}
}(c)))
})();
(function(){window.COGjQuery=jQuery.noConflict(true);
window.COGjQuery("html").removeClass("no-js")
}(jQuery,window));
window.cogbts="2.45-RC1 20190219113401";
var Cog=(function(K,i){var j={};
j.component={};
var L={noOperation:K.noop,emptyArray:[],initializedClass:"initialized",initializedSelector:".initialized",globalScopeSelector:"body",modulesGroupSize:50};
var X=(function(){var ah=Object.prototype.constructor;
function am(ar,at){at=at||{};
ar=ar||Object;
var ap=at.constructor!=ah?at.constructor:function(){ar.apply(this,arguments)
};
var ao=ar.prototype;
var aq=function(){};
aq.prototype=ao;
var an=_.extend(new aq(),at);
an.constructor=ap;
ap.prototype=an;
ap.superclass=ao;
return ap
}function al(an){return am(null,an)
}function ak(ao,an){var ap={};
ap.instance=function(){return an
};
ap.superclass=ao.superclass;
return ap
}function ai(an){var ao=am(an,{constructor:function(ap){ao.superclass.constructor.apply(this,ap)
}});
return ao
}function aj(an){var ao={};
ao.create=function(){var ap=ai(an);
return ak(an,new ap(arguments))
};
return ao
}return{define:al,extend:am,asSingleton:aj}
}());
var w=X.define({eventManager:null,addModule:function(ah){},queueInitTask:function(){},queueFinalizeTask:function(){},isValidModuleConfig:function(){},isReady:function(){},whenReady:function(){}});
var N=X.define({dispatcherFor:function(ai,ah){}});
var Q=X.define({dependencyGraph:null,modules:null,staticModuleRegistry:null,dynamicModuleRegistry:null,add:function(ah){}});
var x=X.define({initStaticModule:null,initDynamicModules:null,finalizeDynamicModules:null});
var q={off:1,error:2,info:3,debug:4,trace:5};
var d=X.define({level:q.off,source:null,constructor:function(ai,ah){this.source=ai;
this.level=ah||q.off
},error:function(ah){},info:function(ah){},debug:function(ah){},trace:function(ah){},isEnabled:function(ah){return ah<=this.level
}});
var Z={level:q.off};
var f=X.define({constructor:function(ah){},create:function(ah,ai){}});
var V=X.asSingleton(X.extend(f,{logger:new d(),create:function(ah,ai){return this.logger
}})).create().instance();
var c=X.define({items:null,ids:null,map:null,constructor:function(){this.items=[];
this.ids=[];
this.map={}
},add:function(ai,ah){if(!this.map[ai]){this.map[ai]=ah;
this.ids.push(ai);
this.items.push(ah)
}},count:function(){return this.items.length
},get:function(ah){return this.map[ah]||null
},has:function(ah){return this.map.hasOwnProperty(ah)
},select:function(aj){var ah=new c(),al=this.map,ak=this.filterIds(aj),am,ai;
for(ai=0;
ai<ak.length;
ai++){am=ak[ai];
ah.add(am,al[am])
}return ah
},selectValues:function(aj){var ah={},al=this.map,ak=this.filterIds(aj),am,ai;
for(ai=0;
ai<ak.length;
ai++){am=ak[ai];
ah[am]=al[am]
}return ah
},filterIds:function(aj){var ah=[],ak=this.uniqueIds(aj),al=this.map,ai;
for(ai=0;
ai<ak.length;
ai++){if(al.hasOwnProperty(ak[ai])){ah.push(ak[ai])
}}return ah
},uniqueIds:function(ak){var ah=[],ai={},al,aj;
for(aj=0;
aj<ak.length;
aj++){al=ak[aj];
if(!ai[al]){ai[al]=true;
ah.push(al)
}}return this.sortedIds(ah)
},sortedIds:function(ai){var ah=this.uniqueIdsSorter.bind(this,this.ids);
ai.sort(ah);
return ai
},uniqueIdsSorter:function(ai,aj,ah){return _.indexOf(ai,aj)-_.indexOf(ai,ah)
}});
var b=X.define({current:0,next:function(ai,ah){this.current++;
return this.current
}});
var t=X.asSingleton(X.define({indexOfElement:function(ak,ah){var ai=-1,aj;
for(aj=0;
ai<0&&aj<ak.length;
aj++){if(ah.is(ak[aj])){ai=aj
}}return ai
},find:function(aj,ah){var ak=aj.find(ah),ai=aj.filter(ah);
return ai.length>0?ak.add(ai):ak
},isInScope:function(ai,ah){return ai!=null&&ah!=null&&ah.parents().is(ai)
}})).create().instance();
var s=X.asSingleton(X.define({defaults:{itemsPerGroup:1},groupItems:function(ai,al){var ak,ah=al>0?al:this.defaults.itemsPerGroup,aj=this.createContext(ah),am=aj.group;
for(ak in ai){if(ai.hasOwnProperty(ak)){am[ak]=ai[ak];
am=this.update(aj)
}}this.flush(aj);
return aj.groups
},createContext:function(ah){return{group:{},groups:[],counter:ah,groupSize:ah}
},update:function(ah){ah.counter--;
if(ah.counter<1){ah.counter=ah.groupSize;
ah.groups.push(ah.group);
ah.group={}
}return ah.group
},flush:function(ah){if(ah.counter!==ah.groupSize){ah.groups.push(ah.group)
}}})).create().instance();
var o=X.asSingleton(X.define({create:function(aj,al){var ak={},ah,ai;
for(ai=0;
ai<al.length;
ai++){ah=al[ai];
if(K.isFunction(aj[ah])){ak[ah]=K.proxy(aj[ah],aj)
}}return ak
}})).create().instance();
var P=X.define({id:null,isProcessed:false,resolved:false,dependencies:null,requiredBy:null,constructor:function(ah){this.id=ah;
this.dependencies=[];
this.requiredBy=[]
},isResolved:function(){return this.resolved
},resolveIfRequired:function(){if(!this.resolved){this.resolve()
}},resolve:function(){var ai=this.dependencies,aj=true,ah;
for(ah=0;
aj&&ah<ai.length;
ah++){aj=ai[ah].resolved
}this.resolved=aj
},resolveAllPredecessors:function(){var ah=[],ai=this.unresolvedPredecessor();
if(ai.length){this.resolvePredecessors(ai,ah)
}return ah
},unresolvedPredecessor:function(){var ah=[],ai=this.requiredBy,ak,aj;
for(aj=0;
aj<ai.length;
aj++){ak=ai[aj];
if(!ak.resolved){ah.push(ak)
}}return ah
},resolvePredecessors:function(ai,ah){var aj;
while(ai.length>0){aj=ai.shift();
aj.resolve();
if(aj.resolved){ai.push.apply(ai,aj.unresolvedPredecessor());
ah.push(aj.id)
}}}});
var af=X.define({id:function(ah){},dependencies:function(ah){},dependencyId:function(ah){}});
var S=X.define({adapter:null,nodes:null,constructor:function(ah){this.adapter=ah;
this.nodes={}
},resolve:function(aj){var ah=null,ai=this.getNode(this.adapter.id(aj));
if(!ai.isProcessed){this.processDependencies(ai,this.adapter.dependencies(aj))
}ai.resolveIfRequired();
if(ai.isResolved()){ah=ai.resolveAllPredecessors();
ah.unshift(ai.id)
}return ah
},hasNode:function(ai){var ah=this.nodes[this.adapter.id(ai)];
return ah&&ah.isProcessed
},getNode:function(ah){if(this.nodes[ah]==null){this.nodes[ah]=new P(ah)
}return this.nodes[ah]
},processDependencies:function(aj,ak){var ai,ah;
for(ah=0;
ah<ak.length;
ah++){ai=this.getNode(this.adapter.dependencyId(ak[ah]));
aj.dependencies.push(ai);
ai.requiredBy.push(aj)
}aj.isProcessed=true
}});
var m=X.define({id:null,delegate:null,scope:null,params:null,disposable:false,constructor:function(ai,aj,ah){this.id=ai.id;
this.delegate=aj||L.noOperation;
this.params={data:{},eventData:{}};
if(ah){this.processOptions(ah)
}},isDisposable:function(){return this.disposable
},processOptions:function(ah){if(ah.scope){this.scope=ah.scope
}if(ah.data){this.params.data=ah.data
}this.disposable=ah.disposable===true
}});
var C=X.asSingleton(X.define({create:function(ah,ai,aj){return{module:ah,event:ai,id:aj}
}})).create();
var Y=X.define({asyncDelegatesCount:L.modulesGroupSize,moduleName:null,eventName:null,handlers:null,ids:null,metadataFactory:null,constructor:function(ai,ah){this.moduleName=ai;
this.eventName=ah;
this.metadataFactory=C.instance();
this.handlers=[];
this.ids={}
},addHandler:function(ak,ah){var ai=null,aj,al;
if(K.isFunction(ak)){al=this.generateUniqueId();
this.ids[al]=true;
ai=this.metadataFactory.create(this.moduleName,this.eventName,al);
aj=new m(ai,ak,ah);
if(aj.isDisposable()){aj.delegate=this.disposableHandler(aj)
}this.handlers.push(aj)
}return ai
},removeHandler:function(aj){var ah=this.indexOfHandler(aj),ai=ah>-1;
if(ah>-1){delete this.ids[aj];
this.handlers.splice(ah,1)
}return ai
},dispatch:function(ak){var ah=this.handlers.slice(0),aj,al,ai;
for(ai=0;
ai<ah.length;
ai++){aj=ah[ai];
al=K.extend({},aj.params);
if(ak){al.eventData=ak
}aj.delegate.call(aj.scope,al)
}},dispatchAsync:function(ak){var aj=this.createDelegates(ak),ah=Math.ceil(aj.length/this.asyncDelegatesCount),ai;
for(ai=0;
ai<ah;
ai++){setTimeout(K.proxy(this.executeAsync,this,aj,ai))
}},createDelegates:function(al){var ah=this.handlers.slice(0),ak,am,aj=[],ai;
for(ai=0;
ai<ah.length;
ai++){ak=ah[ai];
am=K.extend({},ak.params);
if(al){am.eventData=al
}aj.push({handler:ak,params:am})
}return aj
},executeAsync:function(aj,am){var an=am*this.asyncDelegatesCount,ah=Math.min(an+this.asyncDelegatesCount,aj.length),ak,al,ai;
for(ai=an;
ai<ah;
ai++){al=aj[ai];
ak=al.handler;
ak.delegate.call(ak.scope,al.params)
}},disposableHandler:function(aj){var ai=aj.delegate,ah=this;
return function(ak){ai.call(aj.scope,ak);
ah.removeHandler(aj.id)
}
},indexOfHandler:function(ak){var ah=this.handlers,ai=-1,aj;
for(aj=0;
ai<0&&aj<ah.length;
aj++){if(ah[aj].id===ak){ai=aj
}}return ai
},generateUniqueId:function(){var ah=this.ids,ai;
do{ai=Math.round(new Date().getTime()*Math.random())
}while(ah[ai]!=null);
return ai
}});
var ag=X.define({hasNext:function(){},next:function(){},nextId:function(){},last:function(){},lastId:function(){},add:function(ah){}});
var O=X.extend(ag,{queues:null,constructor:function(){this.queues=[]
},hasNext:function(){var aj=this.queues,ah=false,ai;
for(ai=0;
!ah&&ai<aj.length;
ai++){ah=aj[ai].hasNext()
}return ah
},next:function(){var ah=this.nextQueue();
return ah!=null?ah.next():null
},nextId:function(){var ah=this.nextQueue();
return ah!=null?ah.nextId():null
},last:function(){var ah=this.lastQueue();
return ah!=null?ah.last():null
},lastId:function(){var ah=this.lastQueue();
return ah!=null?ah.lastId():null
},addQueue:function(ah){this.queues.push(ah)
},nextQueue:function(){var aj=this.queues,ah=null,al=Number.MAX_VALUE,ak,ai;
for(ai=0;
ai<aj.length;
ai++){ak=aj[ai].nextId();
if(ak!==null&&ak<al){al=ak;
ah=aj[ai]
}}return ah
},lastQueue:function(){var aj=this.queues,ah=null,ak=Number.MIN_VALUE,al,ai;
for(ai=0;
ai<aj.length;
ai++){al=aj[ai].nextId();
if(al!==null&&al>ak){ak=al;
ah=aj[ai]
}}return ah
}});
var J=X.define({logger:V.create("Task"),counter:new b(),id:null,deferred:null,promise:null,constructor:function(){this.id=this.counter.next();
this.deferred=K.Deferred();
this.promise=this.deferred.promise();
if(this.logger.isEnabled(q.info)){this.promise.done(K.proxy(this.onExecuted,this)).fail(K.proxy(this.onAborted,this));
this.logger.debug("created",this.id)
}},execute:function(){},onExecuted:function(){this.logger.debug("executed",this.id)
},onAborted:function(){this.logger.debug("aborted",this.id)
}});
var U=X.extend(ag,{logger:V.create("TaskQueue"),tasks:null,constructor:function(){this.tasks=[]
},hasNext:function(){return this.tasks.length>0
},next:function(){return this.hasNext()?this.tasks.shift():null
},nextId:function(){return this.hasNext()?this.tasks[0].id:null
},last:function(){return this.hasNext()?this.tasks.pop():null
},lastId:function(){var ai=null;
if(this.hasNext()){var ah=this.tasks;
ai=ah[ah.length-1]
}return ai
},add:function(ah){var ai=this.logger;
ai.debug("adding task",ah.id);
if(this.accepts(ah)){ai.debug("task accepted",ah.id);
this.process(ah)
}else{ai.debug("task rejected",ah.id);
ah.deferred.reject()
}},accepts:function(ah){return true
},process:function(ah){this.tasks.push(ah)
}});
var I=X.define({logger:V.create("TaskRunner"),delay:0,queues:null,locked:false,constructor:function(ah){this.queues=[];
if(ah>0){this.delay=ah
}},executeNext:function(){var ai=this.logger,ah=!this.locked?this.findNext():null;
if(ah!=null){this.locked=true;
ai.trace("locked");
ah.promise.always(K.proxy(this.unlock,this));
ai.debug("execute",ah.id);
this.executeAsync(ah)
}},findNext:function(){var ak=this.queues,ah,ai,aj;
for(aj=0;
ai==null&&aj<ak.length;
aj++){ah=ak[aj];
ai=ah.next()
}return ai
},addQueue:function(ah){this.queues.push(ah)
},unlock:function(){this.locked=false;
this.logger.trace("unlocked");
this.executeNext()
},executeAsync:function(ah){setTimeout(K.proxy(ah.execute,ah),this.delay)
}});
var v=X.define({logger:V.create("ObjectIterator"),items:null,constructor:function(ah){this.items=ah||{}
},eachItem:function(ak,ai){var ah=K.Deferred();
try{this.executeOnEach(ak,ai)
}catch(aj){this.logger.error("error has occured",aj);
ah.rejectWith(ai,[aj])
}finally{this.logger.trace("processing finished");
ah.resolveWith(ai)
}return ah.promise()
},executeOnEach:function(al,ak){var ai=this.logger,ah=this.items,aj;
for(aj in ah){if(ah.hasOwnProperty(aj)){ai.trace("processing",aj);
if(al.call(ak,ah[aj])===false){ai.trace("processing aborted by itemProcessor");
break
}}}}});
var h=X.define({itemProcessor:null,scope:null,aborted:false,deferred:null,constructor:function(ai,ah){this.itemProcessor=ai;
this.scope=ah;
this.aborted=false;
this.deferred=K.Deferred();
if(!K.isFunction(ai)){this.abort()
}},isAborted:function(){return this.aborted
},abort:function(){this.aborted=true
},resolve:function(){return this.deferred.resolveWith(this.scope)
},reject:function(ah){this.abort();
return this.deferred.rejectWith(this.scope,[ah])
},promise:function(){return this.deferred.promise()
},processItem:function(ai){var ah=this.itemProcessor.call(this.scope,ai);
if(ah===false){this.abort()
}return ah
}});
var aa=X.extend(v,{logger:V.create("AsyncObjectIterator"),defaults:{timeout:0,itemsPerExecution:1},itemsPerExecution:null,timeout:null,allItems:null,constructor:function(ah,ai,aj){aa.superclass.constructor.call(this,null);
var ak=this.defaults;
this.allItems=ah;
this.itemsPerExecution=this.isNonNegative(ai)?ai:ak.itemsPerExecution;
this.timeout=this.isNonNegative(aj)?aj:ak.timeout
},eachItem:function(al,ak){var aj,ai=new h(al,ak),ah=s.groupItems(this.allItems,this.itemsPerExecution);
if(this.logger.isEnabled(q.trace)){this.logger.trace("iterating",{groupsCount:ah.length,maxGroupSize:this.itemsPerExecution,timeout:this.timeout})
}this.eachItemsGroup(ai,ah);
return ai.promise()
},isNonNegative:function(ah){return isFinite(ah)&&ah>=0
},eachItemsGroup:function(ai,ah){if(!ai.isAborted()&&ah.length>0){this.logger.trace("iterating over group");
var ak=ah.shift();
var aj=this;
setTimeout(function(){aj.items=ak;
aa.superclass.eachItem.call(aj,ai.processItem,ai).fail(K.proxy(ai.reject,ai));
aj.eachItemsGroup(ai,ah)
},this.timeout)
}else{ai.resolve()
}}});
var n=X.define({initializedSelector:L.initializedSelector,notInitializedSelector:":not("+L.initializedSelector+")",execute:function(ai,ah){return null
}});
var p=X.extend(n,{logger:V.create("SelectElementsDefaultStrategy"),execute:function(aj,ai){this.logger.trace("executing");
var ah=this.createSelector(ai),ak=ah?t.find(aj,ah).not(this.initializedSelector):null;
this.logger.trace("executed");
return(ak&&ak.length>0)?ak:null
},createSelector:function(ah){var al=[],ai=ah.items,ak,aj;
for(aj=0;
aj<ai.length;
aj++){ak=ai[aj];
if(ak.selector){this.processSelector(ak.selector,al)
}}return al.join(",")
},processSelector:function(ah,ak){var ai=ah.split(","),aj;
for(aj=0;
aj<ai.length;
aj++){ak.push(ai[aj])
}}});
var r=X.extend(n,{logger:V.create("SelectElementsPrefetchStrategy"),tagNamePattern:/^\w+/i,execute:function(ai,ah){this.logger.trace("executing");
var aj=this.createSelectors(ah);
var ak=null;
if(aj.prefetch){ak=t.find(ai,aj.prefetch).not(this.initializedSelector)
}this.logger.trace("executed");
return(ak&&ak.length>0)?ak:null
},createSelectors:function(ai){var ah=this.initializeSelectors(),aj=ai.items,al,ak;
for(ak=0;
ak<aj.length;
ak++){al=aj[ak];
if(al.selector){this.processSelector(al.selector,ah)
}}ah.all=ah.all.join(",");
ah.prefetch=ah.prefetch.join(",");
return ah
},initializeSelectors:function(){return{all:[],prefetch:[],prefetchMap:{}}
},processSelector:function(ai,ah){var an=this.tagNamePattern,aj=ai.split(","),am,al,ak;
ah.all.push(ai);
for(ak=0;
ak<aj.length;
ak++){am=K.trim(aj[ak]);
al=an.exec(am);
al=(al&&al.length)?al[0]:null;
if(al!=null){am=al
}if(!ah.prefetchMap[am]){ah.prefetch.push(am);
ah.prefetchMap[am]=true
}}}});
var D=X.extend(U,{relatedQueue:null,constructor:function(ah){D.superclass.constructor.call(this);
this.relatedQueue=ah||new U()
},process:function(ah){var ai=this.joinIndex(ah);
if(ai!==null){this.join(ah,ai)
}else{D.superclass.process.call(this,ah)
}},join:function(ah,ai){},joinIndex:function(ah){var ai=null;
if(this.tasks.length>0){var aj=this.relatedQueue.lastId();
ai=(aj!==null)?this.nextJoinIndex(aj):0
}return ai
},nextJoinIndex:function(aj){var ah=null,ak=this.tasks,ai;
for(ai=0;
ah!==null&&ai<ak.length;
ai++){if(ak[ai].id>aj){ah=ai
}}return ah
}});
var T=X.extend(J,{logger:V.create("FinalizeModulesTask"),maxGroupSize:L.modulesGroupSize,$scope:null,$elements:null,modules:null,constructor:function(ah,ai){T.superclass.constructor.call(this);
this.modules=ai;
this.$scope=ah
},execute:function(){var ai=this.logger,ak=t.find(this.$scope,L.initializedSelector);
var ah=this.deferred;
if(ak.length>0){ai.info("executing",this.id);
this.$elements=ak;
var aj=new aa(this.modules.map,this.maxGroupSize);
aj.eachItem(this.itemProcessor,this).always(K.proxy(ah.resolve,ah))
}else{ai.info("nothing to do",this.id);
ah.resolve()
}},itemProcessor:function(ah){var ai=this.$elements.filter(ah.$elements);
if(ai.length>0){this.logger.trace("elements found",ah.name,ai.length);
this.$elements=this.$elements.not(ai);
ah.$elements=ah.$elements.not(ai);
this.finalizeElements(ah,ai)
}return this.$elements.length>0
},finalizeElements:function(ai,aj){var ah;
for(ah=0;
ah<aj.length;
ah++){ai.finalize(aj.eq(ah))
}}});
var M=X.extend(D,{logger:V.create("FinalizeModulesTaskQueue"),accepts:function(ah){return ah.$scope&&ah.$scope.length
},join:function(ai,aj){var ak=this.tasks[aj];
ak.$scope=ak.$scope.add(ai.$scope);
this.logger.trace("join task",{source:ai.id,target:ak.id,targetIndex:aj});
var ah=ai.deferred;
ak.promise.always(K.proxy(ah.resolve,ah))
}});
var ac=X.extend(J,{notInitializedSelector:":not("+L.initializedSelector+")",logger:V.create("InitModulesTask"),maxGroupSize:L.modulesGroupSize,elementsStrategy:null,modules:null,moduleIds:null,targetModules:null,$scope:null,$elements:null,rejectDelegate:null,isPrefetchRequired:false,constructor:function(ai,ah,aj){ac.superclass.constructor.call(this);
this.isPrefetchRequired=!K.isFunction(i.getElementsByClassName);
if(this.isPrefetchRequired){this.maxGroupSize=1
}this.elementsStrategy=this.selectElementsStrategy();
this.$scope=ai;
this.moduleIds=ah?aj.filterIds(ah):null;
this.modules=aj
},selectElementsStrategy:function(){return this.isPrefetchRequired?new r():new p()
},processAllModules:function(){return this.moduleIds==null
},execute:function(){var ah=this.logger;
this.targetModules=this.processAllModules()?this.modules:this.modules.select(this.moduleIds);
if(this.targetModules.count()>0){ah.info("executing",this.id,{modulesCount:this.targetModules.count()});
this.$elements=this.elementsStrategy.execute(this.$scope,this.targetModules);
this.rejectDelegate=K.proxy(this.deferred.reject,this.deferred);
this.executeBeforeInit()
}else{ah.info("nothing to do",this.id);
this.deferred.resolve()
}},executeBeforeInit:function(){this.logger.trace("executing beforeInit()",this.id);
var ah=this.deferred;
var ai=new aa(this.targetModules.map,this.maxGroupSize);
ai.eachItem(this.beforeInitProcessor,this).done(K.proxy(this.executeInit,this)).fail(this.rejectDelegate)
},executeInit:function(){this.logger.trace("executing init()",this.id);
var ah=this.deferred;
var ai=new aa(this.targetModules.map,this.maxGroupSize);
ai.eachItem(this.initProcessor,this).done(K.proxy(ah.resolve,ah)).fail(this.rejectDelegate)
},beforeInitProcessor:function(ah){ah.beforeInit()
},initProcessor:function(ah){var ai=null;
if(this.$elements&&ah.selector){ai=this.$elements.filter(ah.selector).addClass(L.initializedClass)
}ah.init(ai||K())
}});
var H=X.extend(D,{logger:V.create("InitModulesTaskQueue"),accepts:function(ah){var ai=ah.$scope&&ah.$scope.length;
return ai&&(ah.moduleIds?ah.moduleIds.length>0:true)
},join:function(ah,ai){var aj=this.tasks[ai];
this.logger.trace("join task",{source:ah.id,target:aj.id,targetIndex:ai});
this.joinTasks(aj,ah)
},joinTasks:function(aj,ai){if(t.isInScope(ai.$scope,aj.$scope)){aj.$scope=ai.$scope
}else{if(!aj.$scope.is(ai.$scope)&&!t.isInScope(aj.$scope,ai.$scope)){aj.$scope=aj.$scope.add(ai.$scope)
}}if(!aj.processAllModules()&&ai.processAllModules()){aj.moduleIds=null
}else{if(!aj.processAllModules()&&!ai.processAllModules()){aj.moduleIds=this.joinModuleIds(aj.moduleIds,ai.moduleIds)
}}var ah=ai.deferred;
aj.promise.always(K.proxy(ah.resolve,ah))
},joinModuleIds:function(al,ah){var ak=al.length-ah.length,aj=ak>=0?al:ah,ai=ak<=0?ah:al;
this.addModuleIds(ai,aj);
return aj
},addModuleIds:function(aj,ak){var ai,ah;
for(ah=0;
ah<aj.length;
ah++){if(K.inArray(aj[ah],ak)<0){ak.push(aj[ah])
}}},joinIndex:function(ah){var ai=H.superclass.joinIndex.call(this,ah);
return ai!==null?this.findJoinIndex(ah,ai):null
},findJoinIndex:function(ah,ak){var ai=null,al=this.tasks,aj;
for(aj=ak;
ai===null&&aj<al.length;
aj++){if(this.isTaskJoinable(al[aj],ah)){ai=aj
}}return ai
},isTaskJoinable:function(aj,ai){var ah=ai.$scope.is(aj.$scope);
if(!ah){ah=ai.processAllModules()&&aj.processAllModules()
}if(!(ah||ai.processAllModules()||aj.processAllModules())){ah=this.equalModuleIds(ai.moduleIds,aj.moduleIds)
}return ah
},equalModuleIds:function(ak,ai){var ah=ak.length==ai.length,aj;
for(aj=0;
ah&&aj<ak.length;
aj++){ah=K.inArray(ak[aj],ai)>=0
}return ah
}});
var ab=X.define({defaults:{propertyName:"$scope",onUnregister:L.noOperation,onRegister:function(ah){return{$scope:ah}
},scope:null},components:null,config:null,constructor:function(ah){ah=ah||{};
this.components=[];
this.config=K.extend(true,{},this.defaults,ah);
if(!K.isFunction(this.config.onRegister)){this.config.onRegister=this.defaults.onRegister
}},register:function(ak){var ah,al=this.config.onRegister,aj=this.config.scope,ai;
for(ai=0;
ai<ak.length;
ai++){ah=al.call(aj,ak.eq(ai));
this.components.push(ah)
}},unregister:function(ah){var aj=this.indexOfComponent(ah),ai;
if(aj>=0){ai=this.components[aj];
this.components.splice(aj,1);
this.config.onUnregister.call(this.config.scope,ai)
}},indexOfComponent:function(ah){var aj=this.components,ai=this.config.propertyName;
if(aj!=null&&ai!=null){aj=this.selectProperty(ai)
}return t.indexOfElement(aj,ah)
},selectProperty:function(aj){var ai=this.components,ah=[],am={},al,ak;
for(ak=0;
ak<ai.length;
ak++){al=ai[ak]||am;
al=al[aj];
if(al){ah.push(al)
}}return ah
}});
var ad=X.define({name:null,api:null,sharedApi:null,externalApi:null,requires:null,constructor:function(ah){this.name=ah.name;
this.api=ah.api;
this.sharedApi=ah.sharedApi||null;
this.externalApi=ah.externalApi||{};
this.requires=ah.requires||L.emptyArray;
this.processApi();
this.updateRequiredModules()
},init:function(){this.api.init()
},updateRequiredModules:function(){var ai=this.requires,aj,ah;
for(ah=0;
ah<ai.length;
ah++){aj=ai[ah];
if(K.type(aj)==="string"){ai[ah]={name:aj}
}}},processApi:function(){this.api.init=this.processDelegate(this.api.init);
this.api.external=this.externalApi
},processDelegate:function(ah){return this.isValidDelegate(ah)?ah:L.noOperation
},isValidDelegate:function(ah){return K.isFunction(ah)
}});
var A=X.extend(ad,{$elements:null,selector:null,hasFinalize:false,constructor:function(ah){A.superclass.constructor.call(this,ah);
this.beforeInit=ah.api.beforeInit||L.noOperation;
this.selector=ah.selector||null;
if(this.isFinalizable()){this.$elements=K()
}},init:function(ah){if(this.isFinalizable()){this.$elements=this.$elements.add(ah)
}this.api.init(ah)
},beforeInit:function(){this.api.beforeInit()
},finalize:function(ah){if(this.hasFinalize){this.api.finalize(ah)
}},isFinalizable:function(){return this.hasFinalize
},processApi:function(){A.superclass.processApi.call(this);
var ah=this.api;
ah.beforeInit=this.processDelegate(ah.beforeInit);
this.hasFinalize=this.isValidDelegate(ah.finalize)
}});
var B=X.extend(A,{componentManager:null,constructor:function(ah){B.superclass.constructor.call(this,ah);
this.componentManager=new ab({onRegister:this.onRegister,onUnregister:this.api.onUnregister,scope:this})
},init:function(ah){if(ah.length>0){this.componentManager.register(ah)
}B.superclass.init.call(this,ah)
},onRegister:function(ah){var ai={$scope:ah};
this.api.onRegister(ai);
return ai
},finalize:function(ah){B.superclass.finalize.call(this,ah);
this.componentManager.unregister(ah)
},isFinalizable:function(){return true
},processApi:function(){B.superclass.processApi.call(this);
this.api.onRegister=this.processDelegate(this.api.onRegister);
this.api.onUnregister=this.processDelegate(this.api.onUnregister)
}});
var ae=X.extend(af,{id:function(ah){return ah.name
},dependencies:function(ah){return ah.requires
},dependencyId:function(ah){return ah.name
}});
var y=X.extend(J,{logger:V.create("InitStaticModuleTask"),maxGroupSize:L.modulesGroupSize,moduleIds:null,modules:null,constructor:function(ai,ah){y.superclass.constructor.call(this);
this.modules=ah;
this.moduleIds=[];
if(ai){this.moduleIds.push(ai)
}},execute:function(){var ai=this.modules.selectValues(this.moduleIds);
var aj=new aa(ai,this.maxGroupSize);
this.logger.trace("executing",this.id,this.moduleIds);
var ah=this.deferred;
aj.eachItem(this.itemProcessor,this).always(K.proxy(ah.resolve,ah))
},itemProcessor:function(ah){ah.init()
}});
var l=X.extend(U,{logger:V.create("InitStaticModuleTaskQueue"),accepts:function(ah){return ah.moduleIds.length
},process:function(ah){if(this.tasks.length>0){this.join(ah)
}else{l.superclass.process.call(this,ah)
}},join:function(aj){var ak=this.tasks[0];
this.logger.trace("join task",{source:aj.id,target:ak.id});
var ai=ak.moduleIds;
ai.push.apply(ai,aj.moduleIds);
var ah=aj.deferred;
ak.promise.always(K.proxy(ah.resolve,ah))
}});
var R=X.define({modules:null,constructor:function(){this.modules=new c()
},add:function(ah){this.modules.add(ah.name,ah)
}});
var W=X.extend(R,{taskRunner:null,taskQueue:null,constructor:function(ai,ah){W.superclass.constructor.call(this);
this.taskRunner=ai;
this.taskQueue=ah
},add:function(ah){W.superclass.add.call(this,ah);
this.taskQueue.add(new y(ah.name,this.modules));
this.taskRunner.executeNext()
}});
var g=X.extend(R,{finalizableModules:null,constructor:function(){g.superclass.constructor.call(this);
this.finalizableModules=new c()
},add:function(ah){g.superclass.add.call(this,ah);
if(ah.isFinalizable()){this.finalizableModules.add(ah.name,ah)
}}});
var z=X.extend(N,{events:null,constructor:function(){this.events={}
},dispatcherFor:function(ai,ah){var al=null,aj=this.events;
if(ai&&ah){var ak=aj[ai];
if(!(ak&&ak[ah])){this.addEvent(ai,ah)
}al=aj[ai][ah]
}return al
},addEvent:function(ai,ah){var aj=this.events;
if(!aj[ai]){aj[ai]={}
}var ak=aj[ai];
if(!ak[ah]){ak[ah]=new Y(ai,ah)
}}});
var F=X.extend(Q,{logger:V.create("ModuleManager"),dependencyGraph:null,modules:null,staticModuleRegistry:null,dynamicModuleRegistry:null,constructor:function(ai,ah){this.dependencyGraph=new S(new ae());
this.staticModuleRegistry=ai;
this.dynamicModuleRegistry=ah;
this.modules={}
},add:function(ai){var ah=this.logger;
ah.trace("trying add module",ai.name);
if(!this.dependencyGraph.hasNode(ai)){this.modules[ai.name]=ai;
ah.trace("module added",ai.name);
var aj=this.dependencyGraph.resolve(ai);
ah.debug("resolved module id's",aj);
if(aj!=null){this.initializeModules(aj)
}}},initializeModules:function(ak){var ah=this.modules,aj,ai;
for(ai=0;
ai<ak.length;
ai++){aj=ah[ak[ai]];
if(aj){this.initializeModule(aj)
}}},initializeModule:function(ai){this.injectApi(ai);
var ah=(ai instanceof A)?this.dynamicModuleRegistry:this.staticModuleRegistry;
ah.add(ai)
},injectApi:function(aj){var ah=this.modules,ak=aj.requires,am,al,ai;
for(ai=0;
ai<ak.length;
ai++){al=ak[ai];
am=ah[al.name];
if(al.apiId){aj.externalApi[al.apiId]=am.sharedApi||null
}}}});
var G=X.extend(x,{constructor:function(){this.initStaticModule=new l();
this.initializeDynamicModuleQueues()
},initializeDynamicModuleQueues:function(){var ah=new O();
this.initDynamicModules=new H();
var ai=new O();
this.finalizeDynamicModules=new M(ai);
ah.addQueue(this.finalizeDynamicModules);
ai.addQueue(this.initDynamicModules)
}});
var u=X.asSingleton(X.extend(w,{eventManager:null,taskQueues:null,taskRunner:null,moduleManager:null,dynamicModuleRegistry:null,ready:false,constructor:function(){this.eventManager=new z();
this.taskQueues=new G();
this.taskRunner=this.initializeTaskRunner();
this.moduleManager=this.initializeModuleManager();
this.dynamicModuleRegistry=this.moduleManager.dynamicModuleRegistry;
this.whenReady(K.proxy(this.onReady,this))
},isValidModuleConfig:function(ah){return ah&&ah.name&&ah.api
},addModule:function(ah){this.moduleManager.add(ah)
},queueInitTask:function(aj,ai){var ah=new ac(aj,ai,this.dynamicModuleRegistry.modules);
this.taskQueues.initDynamicModules.add(ah);
this.taskRunner.executeNext();
return ah.promise
},queueFinalizeTask:function(ai){var ah=new T(ai,this.dynamicModuleRegistry.finalizableModules);
this.taskQueues.finalizeDynamicModules.add(ah);
this.taskRunner.executeNext();
return ah.promise
},whenReady:function(ah){K(i).ready(ah)
},isReady:function(){return this.ready
},onReady:function(){this.ready=true
},initializeTaskRunner:function(){var ai=new I(),ah=this.taskQueues;
ai.addQueue(ah.initStaticModule);
var aj=new O();
aj.addQueue(ah.initDynamicModules);
aj.addQueue(ah.finalizeDynamicModules);
ai.addQueue(aj);
return ai
},initializeModuleManager:function(){var ah=new W(this.taskRunner,this.taskQueues.initStaticModule),ai=new g();
return new F(ah,ai)
}})).create().instance();
var E=V.create("CogJS",3);
j.Type={define:X.define,extend:X.extend,asSingleton:X.asSingleton};
j.registerStatic=function(ah){if(u.isValidModuleConfig(ah)){u.addModule(new ad(ah))
}else{E.error("Invalid StaticModule config",ah)
}};
j.register=function(ah){if(u.isValidModuleConfig(ah)){u.addModule(new A(ah))
}else{E.error("Invalid DynamicModule config",ah)
}};
j.registerComponent=function(ah){if(u.isValidModuleConfig(ah)&&K.isFunction(ah.api.onRegister)){u.addModule(new B(ah))
}else{E.error("Invalid ComponentModule config",ah)
}};
j.finalize=function(ah){return u.isReady()?u.queueFinalizeTask(ah||K(L.globalScopeSelector)):null
};
j.init=function(ak){var al=null;
if(u.isReady()){var aj=ak||{},ai=aj.$element||K(L.globalScopeSelector),ah=K.isArray(aj.modules)?aj.modules:null;
al=u.queueInitTask(ai,ah)
}return al
};
j.tcWrapper=function(ah){return function(){try{ah.apply(this,arguments)
}catch(ai){if(window.console){window.console.log(ai)
}}}
};
j.addListener=function(aj,ah,am,ai){var al=K.isFunction(am)?u.eventManager.dispatcherFor(aj,ah):null,ak=null;
if(al!=null){ak=al.addHandler(j.tcWrapper(am),ai)
}else{E.error("Invalid EventHandler config",arguments)
}return ak
};
j.addListener2=function(aj,ah,am,ai){var al=K.isFunction(am)?u.eventManager.dispatcherFor(aj,ah):null,ak=null;
if(al!=null){ak=al.addHandler(am,ai)
}else{E.error("Invalid EventHandler config",arguments)
}return ak
};
j.removeListener=function(ah){var ai=null,aj=false;
if(ah){ai=u.eventManager.dispatcherFor(ah.module,ah.event);
aj=ai.removeHandler(ah.id)
}return aj
};
j.fireEvent=function(ai,ah,ak){var aj=u.eventManager.dispatcherFor(ai,ah);
if(aj!=null){aj.dispatch(ak)
}};
j.fireEventAsync=function(ai,ah,ak){var aj=u.eventManager.dispatcherFor(ai,ah);
if(aj!=null){aj.dispatchAsync(ak)
}};
j.ready=function(ah){u.whenReady(ah)
};
j.isInScope=function(ai,ah){return t.isInScope(ai,ah)
};
j.find=function(ai,ah){return t.find(ai,ah)
};
j.jQuery=function(){return K
};
j.logger=function(ai,aj){var ah=null;
if(ai){ah=o.create(V.create(ai,aj),["error","debug","info"])
}return ah
};
j.show=function(ah){window.abElementsToShow=window.abElementsToShow||[];
window.abElementsToShow.push(ah)
};
j.remove=function(ah){window.abElementsToRemove=window.abElementsToRemove||[];
window.abElementsToRemove.push(ah)
};
j.Cookie={create:function(aj,ak,al){var ah="",ai;
if(al){ai=new Date();
ai.setTime(ai.getTime()+(al*24*60*60*1000));
ah="; expires="+ai.toGMTString()
}i.cookie=aj+"="+ak+ah+"; path=/"
},read:function(ai){var ak=ai+"=",ah=i.cookie.split(";"),al=null,aj;
for(aj=0;
aj<ah.length;
aj++){al=ah[aj];
while(al.charAt(0)==" "){al=al.substring(1,al.length)
}if(al.indexOf(ak)==0){return al.substring(ak.length,al.length)
}}return null
},erase:function(ah){j.Cookie.create(ah,"",-1)
}};
j.Analytics={data:[],update:function(){var ah=K("span[record*='pageLoadEvent']"),aj,ak=window.cogmappings,ai;
Cog.Analytics.data=[];
ah.each(function(){aj=JSON.parse(this.attributes[0].textContent.split(", ")[1].replace(/'/g,'"'));
ak.forEach(function(al){if(al.evarName==Object.keys(aj)[0]){ai={};
ai[al.bauName]=aj[al.evarName];
Cog.Analytics.data.push(ai)
}})
})
},get:function(ai){var ah=null;
Cog.Analytics.data.forEach(function(aj){if(aj[ai]){ah=aj[ai]
}});
return ah
}};
u.whenReady(j.init);
return j
}(COGjQuery,document));
(function(i,c){var g={},b={Handler:null,EventBinder:null,EventManager:null},f={};
function j(){b.Handler=Cog.Type.define({conditionDelegates:null,handlerDelegate:null,scope:null,constructor:function(l){this.conditionDelegates=[];
this.handlerDelegate=l
},when:function(l){if(i.isFunction(l)){this.conditionDelegates.push(l)
}return this
},withScope:function(l){this.scope=l;
return this
},executor:function(m){var l=this.scope;
if(this.canExecute(l,m)){this.handlerDelegate.call(l,m)
}},canExecute:function(p,q){var l=true,n=this.conditionDelegates,o,m;
for(m=0;
l===true&&m<n.length;
m++){o=n[m];
l=o.call(p,q)
}return l===true
}})
}function h(){b.EventBinder=Cog.Type.define({moduleName:null,eventName:null,handlers:null,data:null,eventScope:null,isDisposable:false,onBeforeBoundHandlers:null,onBoundHandlers:null,constructor:function(m,l){this.moduleName=m;
this.eventName=l;
this.onBoundHandlers=[];
this.onBeforeBoundHandlers=[];
this.handlers=[]
},execute:function(l){if(i.isFunction(l)&&this.handlers){this.handlers.push(l)
}return this
},withData:function(l){this.data=l;
return this
},withScope:function(l){this.eventScope=l;
return this
},disposable:function(){this.isDisposable=true;
return this
},beforeBound:function(m,l){this.createListener(m,l,this.onBeforeBoundHandlers);
return this
},whenBound:function(m,l){this.createListener(m,l,this.onBoundHandlers);
return this
},thenExecute:function(p){var l=new b.EventBinder(this.moduleName,this.eventName).beforeBound(this.bindHandlers,this),o=this.onBoundHandlers,n,m;
for(m=0;
m<o.length;
m++){n=o[m];
l.whenBound(n.delegate,n.scope)
}this.onBoundHandlers=[];
return l.execute(p)
},bind:function(){this.bindHandlers()
},bindHandlers:function(p){var n=this.moduleName,l=this.eventName,m=this.eventOptions(),o;
p=p||[];
this.notify(p,this.onBeforeBoundHandlers);
if(this.handlers){for(o=0;
o<this.handlers.length;
o++){p.push(Cog.addListener2(n,l,this.handlers[o],m))
}}this.notify(p,this.onBoundHandlers)
},eventOptions:function(){var l=null;
if(this.eventScope||this.data){l={scope:this.eventScope,data:this.data,disposable:this.isDisposable}
}return l
},notify:function(n,l){var o,m;
if(l){for(m=0;
m<l.length;
m++){o=l[m];
o.delegate.call(o.scope,n)
}}},createListener:function(m,l,n){if(n){n.push({delegate:m,scope:l})
}}})
}function d(){b.EventManager=Cog.Type.define({metadata:null,constructor:function(){this.metadata=[]
},on:function(m,l){return new b.EventBinder(m,l).whenBound(this.onBound,this)
},unbindAll:function(){var l;
for(l=0;
l<this.metadata.length;
l++){Cog.removeListener(this.metadata[l])
}},onBound:function(m){var l;
for(l=0;
l<m.length;
l++){this.metadata.push(m[l])
}}})
}g.init=function(){j();
h();
d()
};
Cog.registerStatic({name:"commons.eventsUtil",api:g,sharedApi:b})
}(COGjQuery,document));
(function(d,j){var h={},f={},i={bindingTypes:null},c;
function b(n){var p,o,m;
n=n.replace(/\s/g,"");
p=n.lastIndexOf(",");
o=n.slice(p+1);
if(o.length>6){m=o.slice(0,4)
}else{m=o.slice(0,3)
}return m
}function l(m,q,o){var p,n=0;
for(n;
n<m.length;
n++){p=m[n];
if(_.contains(p.config.analyticsFieldTrackingBindings,q)){o+=_.keys(p.data.children).length
}}return o
}function g(s){var u="Y",r,m="|",p=0,t=_.keys(s),q,o=0,n=0;
for(p;
p<t.length;
p++){r=s[p];
q=p<t.length?"|":"):";
o=l(r,c.ADDITIONAL_DRIVERS_CLAIMS,o);
n=l(r,c.ADDITIONAL_DRIVERS_CONVICTIONS,n)
}return u+m+t.length+m+o+m+n
}f.parseNumClaimsAndConvictionsPrimary=function(m,n){return["Claims: "+m,"Convictions: "+n].join("|")
};
f.parseAdditionalDriversInformation=function(m,n,o){return["additionalDrivers: "+m,"Claims: "+n,"Convictions: "+o].join("|")
};
f.parseVehicleDetails=function(o,n,m){return[o,n,m].join("|")
};
f.parseAge=function(n,o){var m;
if(o.getMonth()>n.getMonth()||(o.getMonth()===n.getMonth()&&o.getDate()>=n.getDate())){m=o.getYear()-n.getYear()
}else{m=o.getYear()-n.getYear()-1
}return m
};
f.parsePostCode=function(n){var o=new RegExp("^[a-zA-Z0-9,-;: ]{3,}$","g"),p,m="";
if(n){p=n.match(o);
if(p&&n==p[0]){m=b(n)
}}return m
};
f.parseGender=function(n){var m;
if(n.toLowerCase()==="m"){m="Male"
}else{m="Female"
}return m
};
f.parseNoClaimsOrConvitions=function(n){var m;
if(_.keys(n.children).length>0&&n.value!=="N"){m="YES|"+_.keys(n.children).length
}else{m="NO|0"
}return m
};
f.parseAdditionalDrivers=function(n){var m;
if(_.keys(n.children).length>0&&n.value!=="N"){m=g(n.children)
}else{m="N|0|0|0"
}return m
};
f.parseSinceWhenYouLivedInUk=function(p,o,q,n){var m;
if(o){m=p
}else{m=f.parseAge(q,n)
}return m
};
f.parseAncillaries=function(o){var m=[],p=[],n="",q=0;
_.forEach(o,function(r){if(r.data.selected.value===true){n=r.data.ancillaryName.value+"|"+r.data.ancillaryPrice.value;
p.push(n);
q=q+parseFloat(r.data.ancillaryPrice.value)
}});
if(p.length>0){m[0]={ancillariesChosen:p.join(",")}
}m.push({ancillaryTotalCost:q.toFixed(2)});
return m
};
f.parseDate=function(o,p,m){var n="";
if(m){if(m.length==1){n="0"
}n+=m+"/"
}if(p.length==1){n+="0"
}n+=p+"/"+o;
return n
};
f.parseCheckbox=function(o,m,n){return o?m:n
};
h.init=function(){c=i.bindingTypes.PREPROCESSOR_BINDING_TYPES
};
Cog.registerStatic({name:"commons.formDataParser",api:h,sharedApi:f,externalApi:i,requires:[{name:"analytics.preprocessorBindingTypes",apiId:"bindingTypes"}]})
}(COGjQuery,document));
(function(f,c){var d={},b={},h={formDataParser:null},g=null;
b.parseVehicleDetailsElement=function(i){var m,l,j;
if(i.find(".vehicle-select-manually").css("display")=="block"){m=i.find('select[id$=".manufacturer"]').val();
l=i.find('select[id$=".modelGen"]').val();
j=i.find('select[id$=".year"]').val()
}else{m=f.trim(i.find(".field-make").text());
l=f.trim(i.find(".field-model").text());
j=f.trim(i.find(".field-yearOfManufacture").text())
}return g.parseVehicleDetails(m,l,j)
};
b.parseNumClaimsAndConvictionsPrimaryElement=function(i){var j=0,l=0;
f("select").each(function(){if(f(this).attr("id")){if(f(this).attr("id").match(/accident.code_[0-9]$/)){j++
}if(f(this).attr("id").match(/conviction.code_[0-9]$/)){l++
}}});
return g.parseNumClaimsAndConvictionsPrimary(j,l)
};
b.parseValueDirectly=function(i,l){var j="";
if(c.getElementById(l)!=null){j=c.getElementById(l).value
}return j
};
b.parseAdditionalDriversInformationElement=function(j){var m=j.find('div[class*="additional-form"]').first(),i=0,l=0,n=0;
if(m.length>0){l=j.find('select[id*=".accident.code"]').length;
n=j.find('select[id*=".conviction.code"]').length;
i=m.siblings('div[class*="additional-form"]').length+1
}return g.parseAdditionalDriversInformation(i,l,n)
};
b.parseAgeElement=function(j,p,o){var l=c.getElementById(o+".day").value,n=c.getElementById(o+".month").value,m=c.getElementById(o+".year").value,i=new Date(m,n-1,l);
return g.parseAge(i,p)
};
b.parsePostCodeElement=function(j,l){var i=c.getElementById(l).value;
return g.parsePostCode(i)
};
d.init=function(){g=g||h.formDataParser
};
Cog.registerStatic({name:"commons.formElementParser",api:d,sharedApi:b,externalApi:h,requires:[{name:"commons.formDataParser",apiId:"formDataParser"}]})
}(COGjQuery,document));
(function(){var f={},b={},h=window.navigator.userAgent,d=h.indexOf("MSIE "),c=h.indexOf("Trident/"),g=h.indexOf("Edge/"),i=h.indexOf("rv:");
b.detectIe=function(){if(d>0){return parseInt(h.substring(d+5,h.indexOf(".",d)),10)
}if(c>0){return parseInt(h.substring(i+3,h.indexOf(".",i)),10)
}if(g>0){return parseInt(h.substring(g+5,h.indexOf(".",g)),10)
}return false
};
f.init=function(){};
Cog.registerStatic({name:"commons.ieVersionDetector",api:{},sharedApi:b})
}());
(function(g,c){var f={},b={GenericProcessor:null};
function d(){b.GenericProcessor=Cog.Type.define({items:null,constructor:function(){this.items=[]
},addItem:function(j,i,h){this.items.push({acceptor:j,processor:i,scope:h});
return this
},process:function(){var n=false,j=this.items,h,m,l;
for(l=0;
!n&&l<j.length;
l++){m=j[l];
if(m.acceptor.apply(m.scope,arguments)){h=m.processor.apply(m.scope,arguments);
n=true
}}return h
}})
}f.init=function(){d()
};
Cog.registerStatic({name:"commons.genericProcessor",api:f,sharedApi:b})
}(COGjQuery,document));
(function(g,c){var f={},b={UrlHelper:null};
function d(){b.UrlHelper=Cog.Type.define({defaults:{segmentSeparator:"/",querySeparator:"?",fragmentSeparator:"#",htmlExtensionPattern:/\.html$/i,fileExtensionPattern:/\.[^\.\/]+$/i,selectorsPattern:/(\.[^\.\/]+)+$/i},url:null,path:null,segments:null,lastSegment:null,extension:null,isQueryPreserved:false,isFragmentPreserved:false,constructor:function(h){this.url=h?g.url(h):null;
if(this.url){this.path=this.url.attr("path");
this.segments=this.removeSuffix(this.url.data.seg.path);
this.lastSegment=this.segments.pop();
this.extension=this.extractExtension()
}},addSelector:function(h){if(h&&this.url!=null){this.lastSegment+="."+h
}return this
},removeSelectors:function(){if(this.url!=null){this.lastSegment=this.lastSegment.replace(this.defaults.selectorsPattern,"")
}return this
},preserveFragment:function(){this.isFragmentPreserved=true;
return this
},preserveQuery:function(){this.isQueryPreserved=true;
return this
},getUrl:function(){var h=null;
if(this.url){h=this.url.attr("base")+this.getPath();
h=this.extension?h+this.extension:h;
h=this.isQueryPreserved?this.appendQuery(h):h;
h=this.isFragmentPreserved?this.appendFragment(h):h
}return h
},getPath:function(){var i,h;
if(this.url!=null){i=this.defaults.segmentSeparator;
h=this.segments.length?i+this.segments.join(i):"";
return h+i+this.lastSegment
}},getSelectors:function(){var i=null,h=null;
if(this.url!=null){if(this.defaults.selectorsPattern.test(this.lastSegment)){i=this.defaults.selectorsPattern.exec(this.lastSegment)[0];
h=i.substr(1).split(".")
}}return h
},getQuery:function(){var h=null;
if(this.url){h=this.url.attr("query")
}return h
},removeSuffix:function(l){var h=this.defaults.htmlExtensionPattern,j=-1,m;
l=l||[];
for(m=0;
j<0&&m<l.length;
m++){if(h.test(l[m])){j=m
}}if(j>0&&j<l.length){l=l.slice(0,j+1)
}return l
},appendFragment:function(i){var h=this.url.attr("fragment");
return h?i+this.defaults.fragmentSeparator+h:i
},appendQuery:function(h){var i=this.url.attr("query");
return i?h+this.defaults.querySeparator+i:h
},extractExtension:function(){var j=null,i=this.defaults,h=this.lastSegment;
if(i.htmlExtensionPattern.test(h)){j=i.fileExtensionPattern.exec(h);
j=j[0];
this.lastSegment=h.replace(i.htmlExtensionPattern,"")
}else{if(this.path.charAt(this.path.length-1)===i.segmentSeparator){j=i.segmentSeparator
}}return j
}});
b.adjustAggregatorSelector=function(i){var j=/\.([0-9]+)#/,h=i.attr("href"),l=j.exec(h);
if(l&&l[1]&&!i.data("selector")){h=h.replace("."+l[1]+"#","#");
i.attr("href",h);
i.data("selector","content."+l[1])
}}
}f.init=function(){d()
};
Cog.registerStatic({name:"commons.urlUtil",api:f,sharedApi:b})
}(COGjQuery,document));
(function(f,l){var j={},g={},m="sessionStartDate",b="analyticsStore";
function h(r){return r&&r<new Date().getTime()
}function p(r){var t=b+"-"+r,s;
if(Modernizr.localstorage){s=localStorage.getItem(t)
}else{s=window[b]
}return s?JSON.parse(s):{}
}function c(r,t){var s=b+"-"+r;
if(Modernizr.localstorage){localStorage.setItem(s,t)
}else{window[b]=t
}}function o(r,s,u){var t=p(r)||{};
t[s]=u;
c(r,JSON.stringify(t))
}function q(r,s){var u=p(r),t=null;
if(u&&u[s]){t=u[s]
}return t
}function n(r,s){var t=p(r);
if(t){delete t[s];
c(r,JSON.stringify(t))
}}function d(){var s,r,t=localStorage.length;
for(s=0;
s<t;
s++){r=localStorage.key(s);
if(r&&r.indexOf(b)===0){localStorage.removeItem(r)
}else{if(!r){window.console.log("DEBUG: ",localStorage)
}}}}function i(){if(Modernizr.localstorage){d()
}else{delete window[b]
}}g.putItem=function(s,t){var r=Cog.Cookie.read(m);
if(!h(r)){i();
r=new Date().getTime();
Cog.Cookie.create(m,r)
}o(r,s,t)
};
g.getItem=function(s){var r=Cog.Cookie.read(m);
if(!h(r)){i()
}return q(r,s)
};
g.removeItem=function(s){var r=Cog.Cookie.read(m);
if(!h(r)){d()
}n(r,s)
};
Cog.registerStatic({name:"commons.customStorage",api:j,sharedApi:g})
}(COGjQuery,document));
(function(d){var c={},b={};
c.init=function(){};
b.isRebranded=function(){return d("body").hasClass("new")
};
Cog.registerStatic({name:"commons.rebrand",api:c,sharedApi:b})
}(COGjQuery));
(function(d){var c={isEdit:null},b={};
c.init=function(){c.isEdit=window.CQ!==undefined&&window.CQ.WCM!==undefined&&window.CQ.WCM.isEditMode()
};
b.isEdit=function(){return c.isEdit
};
b.isNotEdit=function(){return !c.isEdit
};
Cog.statics=Cog.statics||{};
Cog.statics.wcmMode=b;
Cog.registerStatic({name:"commons.wcmMode",api:c,sharedApi:b})
}(COGjQuery));
(function(d){var c={},b={},g={customStorage:null,journeyContext:null},f={directlineBrandId:"0001",churchillBrandId:"0062",privilegeBrandId:"0003"};
c.getBrandId=function(){return d("#master").data("brand-id")
};
c.getSid=function(i){var h=g.journeyContext.current()||"none";
h=h+"."+i;
return h
};
c.getItem=function(h){if(window.sessionStorage){return JSON.parse(window.sessionStorage.getItem(c.getSid(h)))
}};
c.putItem=function(h,i){if(window.sessionStorage){return window.sessionStorage.setItem(c.getSid(h),JSON.stringify(i))
}};
c.removeItem=function(h){if(window.sessionStorage){return window.sessionStorage.removeItem(c.getSid(h))
}};
c.getItemCookie=function(h){var i=Cog.Cookie.read(h);
if(i){i=i.split(",")
}return i
};
c.putItemCookie=function(h,i){Cog.Cookie.create(h,i,365)
};
c.removeItemCookie=function(h){Cog.Cookie.erase(h)
};
c.isQnbPage=function(){return document.location.pathname.indexOf("/quote/")===0
};
c.isQpmPage=function(){return document.location.pathname.indexOf("/qpm/")===0
};
c.isNewQnbPage=function(){return c.isQnbPage()&&document.location.pathname.indexOf("/system-error/")===-1&&g.journeyContext.current()===""
};
c.isNewJourneyId=function(){var h=c.getItemCookie("visitedJourneyIds")||[];
return g.journeyContext.current()===""&&d.inArray(g.journeyContext.current(),h)===-1
};
b.isConfirmation=function(){return document.location.pathname.indexOf("confirmation")>-1
};
c.getId=function(){return c.isQpmPage()?"visitedQpmPages":"visitedJourneyPages"
};
b.clearVisitedPagesIfNewQnbPage=function(){if(c.isNewQnbPage()){c.removeItem("visitedJourneyPages");
c.removeItem("visitedContinueLightboxes")
}};
b.clearVisitedPagesIfQnbAndNewJourneyId=function(){if(c.isQnbPage&&c.isNewJourneyId()){c.removeItem("visitedJourneyPages");
c.removeItem("visitedContinueLightboxes")
}};
b.clearVisitedPagesIfConfirmation=function(){if(b.isConfirmation()){c.removeItem("visitedJourneyPages");
c.removeItem("visitedContinueLightboxes")
}};
b.clearFirstAccordionSentEvent=function(){if(c.isQnbPage&&c.isNewJourneyId()){g.customStorage.removeItem("firstAccordionSentEvent")
}};
b.isJourneyPage=function(){return c.isQpmPage||c.isQnbPage()
};
b.isPageVisited=function(){var h=c.getItem(c.getId())||[];
return d.inArray(document.location.pathname,h)>-1
};
b.setVisited=function(){var h=c.getItemCookie("visitedJourneyIds")||[],i=c.getItem(c.getId())||[];
if(d.inArray(document.location.pathname,i)===-1){i.unshift(document.location.pathname);
i=i.slice(0,19);
c.putItem(c.getId(),i)
}if(d.inArray(g.journeyContext.current(),h)===-1&&g.journeyContext.current()!==""){h.unshift(g.journeyContext.current());
h=h.slice(0,19);
c.putItemCookie("visitedJourneyIds",h)
}};
b.isChurchill=function(){return c.getBrandId()===f.churchillBrandId
};
b.isDirectline=function(){return c.getBrandId()===f.directlineBrandId
};
b.isSummaryPremium=function(){return d("body").hasClass("summary-premium")
};
b.isChurchillDetailsPage=function(h){return b.isChurchill()&&d("body").hasClass("details-page")
};
b.isDirectlineDetailsPage=function(h){return b.isDirectline()&&d("body").hasClass("details-page")
};
b.isChurchillQuickQuotePage=function(){return b.isChurchill()&&document.location.href.contains("quick")
};
b.isQuickQuotePage=function(){return document.location.href.contains("quick")
};
b.isReviewPage=function(){return d("body").hasClass("review-page")
};
b.isAggregatorJourney=function(){return document.location.href.toLowerCase().contains("/aggregators")
};
b.isPremiumPage=function(){return document.location.href.toLowerCase().contains("/premium/premium")||document.location.href.toLowerCase().contains("/premium/multicar-premium")
};
b.isPaymentPage=function(){return d("body").hasClass("payment-page")
};
b.isMulticarConfirmation=function(){return d("body").hasClass("multicar-confirmation")
};
b.isMulticarJourneyDetailsPage=function(){return !!d("form").find("input[name*='multicarJourney']").length
};
b.isDetailsPage=function(){return document.location.href.toLowerCase().contains("details/multicar-quote-details")||document.location.href.toLowerCase().contains("details/get-motor-quote-details")
};
b.isAdditionalCarPage=function(){return document.location.href.toLowerCase().contains("details/additional-car-details")||document.location.href.toLowerCase().contains("multicar-additional-car")
};
b.isMulticarJourney=function(){return document.location.href.toLowerCase().contains("details/multicar-quote-details")||sessionStorage.getItem("multicarJourney")=="true"
};
b.isChurchillAggregatorPremiumPage=function(){return d("body").hasClass("premium-page-aggregator")&&document.location.href.contains("churchill")
};
b.isChurchillAggregatorDetailsPage=function(){return document.location.href.toLowerCase().contains("/br0062/aggregators/details/get-motor-quote-details")
};
b.isRegistrationOptimisationEnabled=function(){return b.isChurchillAggregatorDetailsPage()&&d("form").find("input[name*='registrationOptimisation']").val()=="on"
};
b.is3dSecure=function(){return document.location.href.toLowerCase().contains("payment/3d-secure")
};
Modernizr.addTest("isios",function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)
});
c.init=function(){};
Cog.registerStatic({name:"component.pagesManager",api:c,sharedApi:b,externalApi:g,requires:[{name:"commons.customStorage",apiId:"customStorage"},{name:"elements.journeyContext",apiId:"journeyContext"}]});
Cog.statics=Cog.statics||{};
Cog.statics.pagesManager=b;
Cog.pages=b
}(COGjQuery));
(function(f,b){var c={},g=false,d=window.CQ&&window.CQ.WCM&&window.CQ.WCM.isEditMode();
c.processAbElements=function(i){var h;
if(i&&i.data=="allElementsUpdated"){h=f("body")
}else{h=i.eventData.scope
}_.each(window.abElementsToShow,function(j){this.find(j).removeClass("abHidden").show()
},h);
_.each(window.abElementsToRemove,function(j){this.find(j).remove()
},h);
if(!d){h.find(".abHidden").remove()
}};
c.init=function(){if(!g){Cog.addListener2("abTesting","domUpdated",c.processAbElements);
Cog.addListener2("elements.stateProvider","allElementsUpdated",c.processAbElements,{data:"allElementsUpdated"});
g=true
}};
Cog.registerStatic({name:"abTesting",api:c})
}(COGjQuery,document));
(function(g,b){var d={},h;
function f(j){var i=g("#call-us .analytics-phonelinktracking"),l=g("#call-us .analytics-phonelinktracking").data("analytics-uci"),m=l.split("|");
m.pop();
m.push(h["refphonetext"+j]);
i.data("analytics-uci",m.join("|"))
}function c(i){g("#call-us").find("em").text(h["reftext"+i]);
g("#call-us").find("a").attr("href","tel: "+h["refphonelink"+i]);
g("#call-us").find("a").text(h["refphonetext"+i]);
if(h["refhide"+i]){g("#call-us").addClass("hide-contact-details")
}}d.init=function(i){Cog.addListener2("elements.stateProvider","stateChanged",function(n){var m=n.eventData.state.pageData.sessionQuoteReferrer,l,j;
h=g("#call-us").data();
for(l in h){if(h.hasOwnProperty(l)&&h[l]===m){j=l.slice(-1);
f(j);
c(j)
}}g(".header-copy").show()
})
};
Cog.register({name:"callUs",api:d})
}(COGjQuery,document));
(function(f,j){var h={},d={statePovider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged",stateChanging:"stateChanging",elementUpdated:"elementUpdated",registerElement:"registerElement",unregisterElement:"unregisterElement",allElementsUpdated:"allElementsUpdated"}}},i={eventsUtil:null,loader:null,viewFactory:null},g={Element:null},b={ElementConfiguration:null};
function l(){b.ElementConfiguration=Cog.Type.define({configurationSelector:".componentConfiguration",data:null,id:null,state:null,stateScope:null,constructor:function(m){var n=null;
if(m){n=m.find(this.configurationSelector).data()||{}
}if(n){this.id=n.id;
this.state=n.state;
this.stateScope=n.stateScope
}this.data=n||{}
},getId:function(){return this.id
},hasState:function(){return this.state!=null
},getState:function(){return this.state
},getStateScope:function(){return this.stateScope
},get:function(){return this.data
}})
}function c(){var m=i.eventsUtil;
g.Element=Cog.Type.define({$scope:null,enabled:true,eventsManager:null,loader:null,loaderEnabled:true,configuration:null,viewFactory:null,constructor:function(n){this.$scope=n||f();
this.eventsManager=new m.EventManager();
this.configuration=new b.ElementConfiguration(n);
this.loader=i.loader;
this.viewFactory=new i.viewFactory.ViewFactory();
this.initialize();
if(this.configuration.state){this.processState(this.configuration.state)
}this.notify(d.statePovider.events.registerElement)
},initialize:function(){var o=d.statePovider,n=new m.Handler(this.onUpdate).when(this.isEnabled).when(this.isInStateScope).withScope(this);
this.eventsManager.on(o.name,o.events.stateChanged).execute(n.executor).withScope(n).thenExecute(this.onNotify).withScope(this).withData(o.events.elementUpdated).bind();
this.eventsManager.on(o.name,o.events.allElementsUpdated).execute(this.hideLoader).withScope(this).bind()
},initializeLoader:function(){var n=d.statePovider,o=new m.Handler(this.showLoader).when(this.isLoaderEnabled).when(this.isInStateScope).withScope(this);
this.eventsManager.on(n.name,n.events.stateChanging).execute(o.executor).withScope(o).bind()
},isInStateScope:function(n){return this.configuration.getStateScope()===n.eventData.scope
},isEnabled:function(){return this.enabled
},isLoaderEnabled:function(){return this.enabled&&this.loaderEnabled
},getScope:function(){return this.$scope
},update:function(n){this.processState(this.processData(n))
},enable:function(){this.enabled=true
},disable:function(){this.enabled=false
},enableLoader:function(){this.loaderEnabled=true
},disableLoader:function(){this.loaderEnabled=false
},unregister:function(){this.eventsManager.unbindAll();
this.notify(d.statePovider.events.unregisterElement)
},processData:function(n){return this.findState(n)
},processState:function(n){},findState:function(p){var n=(p&&p.componentStates)?p.componentStates:{},o=n[this.configuration.getId()];
return o||null
},onUpdate:function(n){this.update(n.eventData.state)
},onNotify:function(n){this.notify(n.data)
},notify:function(n){if(n){Cog.fireEvent(d.statePovider.name,n)
}},showLoader:function(){this.loader.show({$scope:this.$scope})
},hideLoader:function(){this.loader.hide(this.$scope)
},removeAutocomplete:function(){}})
}h.init=function(){l();
c()
};
Cog.registerStatic({name:"elements.element",api:h,externalApi:i,sharedApi:g,requires:["elements.registry",{name:"commons.eventsUtil",apiId:"eventsUtil"},{name:"elements.loader",apiId:"loader"},{name:"elements.stateProvider"},{name:"elements.viewFactory",apiId:"viewFactory"}]})
}(COGjQuery,document));
(function(g){var f={},b={},d,c;
b.getIpAddressValFromPageState=function(h){if(h.state&&h.state.pageData){d=h.state.pageData.ipaddress;
Cog.fireEvent("udp","dataObtained",{data:h.state.pageData});
return"'pageLoadEvent', {'ipAddress': '"+d+"'}"
}};
b.getIpAddressValFromServlet=function(h){g.getJSON("/bin/dlg/site/pageState2?path="+g.url().data.attr.path,function(i){Cog.fireEvent("udp","dataObtained",{data:i});
h("'pageLoadEvent', {'ipAddress': '"+i.ipaddress+"'}")
})
};
f.init=function(){};
Cog.registerStatic({name:"element.universalDataProvider",api:{},sharedApi:b})
}(COGjQuery));
(function(f,b){var c=/(iPad).*(?!.*AppleWebkit).*(?!.*Safari)/i.test(navigator.userAgent),d=(function(){var i={},g=false,j=false,l=function(){if(j){if(c&&g===false){window.location.reload()
}}else{j=true
}},h=function(m){if(c){i.hide(m)
}f(window).off("pageshow.handleIpad")
};
i.show=function(r){var q={$scope:null,height:null,isLoaderFixed:false},n=_.merge(q,r),m=n.$scope.find("> .ajax-loader"),p=n.height?n.height+"px":"100%",o="height: "+p;
if(m.length==0){m=f("<div/>",{"class":"ajax-loader",css:o}).appendTo(n.$scope);
if(n.isLoaderFixed){m.css({position:"fixed"})
}}f(window).on("pageshow.handleIpad",function(){h(n.$scope)
});
m.show()
};
i.hide=function(m){var n=m.find("> .ajax-loader");
n.hide();
g=true
};
window.onpageshow=l;
return i
}());
Cog.registerStatic({name:"elements.loader",api:{},sharedApi:d})
}(COGjQuery,document));
(function(f,j){var g={},d={moduleFullName:"elements.registry"},m={allInitialized:"allInitialized"},i={initialized:"initialized",register:"register"},c={stateProvider:{name:"elements.stateProvider",events:{requireState:"requireState"}}},h={registry:null},b=null;
function l(){var n=c.stateProvider;
Cog.fireEvent(n.name,n.events.requireState)
}g.init=function(){b.onInit()
};
g.beforeInit=function(){if(b===null){b=h.registry(d.moduleFullName);
Cog.addListener2(d.moduleFullName,m.allInitialized,l,{disposable:true})
}b.onBeforeInit()
};
Cog.register({name:d.moduleFullName,api:g,externalApi:h,requires:[{name:"registry.elementsRegistry",apiId:"registry"},{name:c.stateProvider.name}]})
}(COGjQuery,document));
(function(c,o){var m={},g={moduleName:"elements.stateProvider"},b={stateApplied:"stateApplied",stateChanging:"stateChanging",stateChanged:"stateChanged",allElementsUpdated:"allElementsUpdated",noElementsDetected:"noElementsDetected",stateRedirect:"stateRedirect"},p={addUrlParameter:"addUrlParameter",removeUrlParameter:"removeUrlParameter",elementUpdated:"elementUpdated",requireState:"requireState",registerElement:"registerElement",unregisterElement:"unregisterElement",disable:"disable"},r={errorPresenter:{name:"forms.validation.errorPresenter",events:{update:"update"}}},d={journeyContext:null,urlUtil:null,pageScroller:null},s=null;
function t(){var B={},F="/bin/dlg/site/pageState",y={journeyId:"jcid",path:"path",timestamp:"ts",md:"MD",ref:"ref"},w,v=0,L={},A=null,x={},G;
function E(M){var N=M.param();
return N[y.md]
}function K(Q,P,O){var N=F+"?",M=d.journeyContext.current();
x[y.journeyId]=M;
x[y.path]=Q;
x[y.timestamp]=new Date().getTime();
if(o.referrer&&!M){x[y.ref]=o.referrer
}if(O){x[y.md]=O
}if(P){N+=P+"&"
}N+=c.param(x);
return N
}function C(M,N,O){return O?K(O,N,E(M)):null
}function D(N){var M=null;
if(N.redirectPath){M=N.redirectPath
}else{if(N.type=="REDIRECT"){M=N.content.path
}}return M
}function J(P,O,N){var M=D(N);
G=P;
w=v;
N=N||{};
A=N.validation||{};
if(M){Cog.fireEvent(g.moduleName,b.stateRedirect);
window.location.href=M
}else{d.journeyContext.update(N[y.journeyId]);
Cog.fireEventAsync(g.moduleName,b.stateChanged,{state:N,scope:O,path:P});
L[P]=false
}}function z(){var M=c(".form-column form").data("timeout"),N=Number(M);
return N||60000
}function I(V,R,M,T,U,N){var Q=C(M,R,V),P,O=null,S=z();
if(Q!=null){L[V]=true;
if(T){O={selector:T.join(",")};
_.extend(O,c.url().param())
}if(U){O=O||{};
_.extend(O,U)
}P=N||c.MD5(V);
Cog.fireEvent(g.moduleName,b.stateChanging,{scope:P});
c.ajax({dataType:"json",url:Q,data:O,timeout:S,error:function(X,Z,Y){var W=c(".form-column form").data("errorPagePath")+"?pstimeout=true#"+d.journeyContext.current();
Cog.fireEvent("analytics.lastFieldInteracted","setTrackingEnabled",{isTrackingEnabled:false});
window.location=W
}}).done(c.proxy(J,null,V,P))
}}function H(){var M=r.errorPresenter,O=A.validationErrors,N=new d.pageScroller.PageScroller();
if(!c.isEmptyObject(O)){Cog.fireEvent(M.name,M.events.update,{errors:O,pageScroller:N});
N.execute(1000)
}}B.hasElements=function(){return v>0
};
B.load=function(Q,T,O){var N,U,M,S,P,R;
N=c.url();
U=Q||N.attr("path");
if(!U){d.journeyContext.clear()
}M=new d.urlUtil.UrlHelper(U);
P=M.getQuery();
U=M.removeSelectors().getPath();
S=new d.urlUtil.UrlHelper(window.location.href);
R=S.getSelectors();
if(!L[U]){I(U,P,N,R,T,O)
}};
B.addUrlParameter=function(M){if(M&&M.key&&M.value){x[M.key]=M.value
}};
B.removeUrlParameter=function(M){if(M&&M.key&&x[M.key]){delete x[M.key]
}};
B.registerElement=function(){v++
};
B.unregisterElement=function(){v--
};
B.elementUpdated=function(){w--;
if(w==0){Cog.fireEvent(g.moduleName,b.allElementsUpdated,{path:G});
H();
Cog.fireEvent(g.moduleName,b.stateApplied)
}};
return B
}function i(){if(s==null){s=t()
}}function q(v){i();
if(s.hasElements()){s.load(v.eventData.path,v.eventData.queryParams,v.eventData.stateScope)
}else{Cog.fireEvent(g.moduleName,b.allElementsUpdated);
Cog.fireEvent(g.moduleName,b.noElementsDetected)
}}function n(){i();
s.registerElement()
}function f(){if(s){s.unregisterElement()
}}function h(v){if(s&&v.eventData){s.addUrlParameter(v.eventData.additionalParameter)
}}function j(v){if(s&&v.eventData){s.removeUrlParameter(v.eventData.additionalParameter)
}}function u(){if(s){s.elementUpdated()
}}function l(x){var w=x.data,v;
for(v=0;
v<w.length;
v++){Cog.removeListener(w[v])
}}m.init=function(){var v=[];
v.push(Cog.addListener2(g.moduleName,p.requireState,q));
v.push(Cog.addListener2(g.moduleName,p.registerElement,n));
v.push(Cog.addListener2(g.moduleName,p.unregisterElement,f));
v.push(Cog.addListener2(g.moduleName,p.elementUpdated,u));
v.push(Cog.addListener2(g.moduleName,p.addUrlParameter,h));
v.push(Cog.addListener2(g.moduleName,p.removeUrlParameter,j));
Cog.addListener2(g.moduleName,p.disable,l,{data:v,disposable:true})
};
Cog.registerStatic({name:g.moduleName,api:m,externalApi:d,requires:[{name:"commons.urlUtil",apiId:"urlUtil"},{name:"elements.journeyContext",apiId:"journeyContext"},{name:"forms.form.pageScroller",apiId:"pageScroller"}]})
}(COGjQuery,document));
(function(d,h){var c={moduleName:"elements.journeyContext",fragmentAttribute:"fragment",fragmentPrefix:"#"},n={changed:"changed"},f={},o="";
function i(p){var r={},q;
p.split("&").filter(function(s){return s!==undefined&&s!==""
}).forEach(function(t,s){q=t.split("=");
r[q[0]]=q[1]
});
return r
}function g(){var p=d.url().attr(c.fragmentAttribute),q;
q=i(p);
return q.jcid||p
}function b(p){return d.map(p,function(r,q){return q+"="+r
}).join("&")
}function m(s,r){var p,q=s.indexOf(r);
if(q>=0){p=s.substring(0,q)
}else{p=s
}return p
}function l(p){return m(p,"#")
}function j(){var p=window.navigator?window.navigator.userAgent:null;
if(p&&String(p).toLowerCase().indexOf("firefox")>-1){d("link[rel*=icon]").detach().appendTo("head")
}}f.current=function(){return g()
};
f.update=function(p){var r,q;
if(p&&g()!==p){r=i(d.url().attr(c.fragmentAttribute));
r.jcid=p;
q=b(r);
window.location.replace(window.location.pathname+window.location.search+"#"+q);
j();
Cog.fireEvent(c.moduleName,n.changed)
}};
f.clear=function(){window.location.href=window.location.href.substr(0,window.location.href.indexOf("#"))
};
f.appendToUrl=function(q){var s=l(q),p=s?g():null,r=i(d.url(q).attr(c.fragmentAttribute));
if(p){r.jcid=p;
s=s+c.fragmentPrefix+b(r)
}return s
};
f.removeFromUrl=l;
f.getFragmentItem=function(p){return i(d.url().attr(c.fragmentAttribute))[p]
};
f.substringBeforeFirst=m;
Cog.registerStatic({name:c.moduleName,api:{},sharedApi:f})
}(COGjQuery,document));
(function(g,c){var h={moduleName:"elements.fragmentScroller",scrollTo:"scrollTo"},d={},f={},b={},i={journeyContext:null};
f.init=function(){var j=i.journeyContext.getFragmentItem(h.scrollTo),l;
if(j){l=g("#"+j)[0];
if(l){l.scrollIntoView()
}}};
Cog.register({name:h.moduleName,api:f,sharedApi:b,externalApi:i,requires:[{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document));
(function(h,c){var g={},i={moduleName:"elements.view"},d={initialized:"initialized",rendered:"rendered"},b={View:null};
function f(){b.View=Cog.Type.define({template:null,$template:null,$target:null,isInitializedOnRender:false,isNotificationEnabled:false,wasRenderedAtLeastOnce:false,constructor:function(j,m,l){this.$target=j||h();
this.$template=m||h();
l=l||{};
this.isInitializedOnRender=l.isInitializedOnRender===true;
this.isNotificationEnabled=l.isNotificationEnabled===true
},render:function(j){if(this.template==null){this.initializeTemplate()
}else{Cog.finalize(this.$target)
}this.$target.html(this.template.render(j));
this.wasRenderedAtLeastOnce=true;
this.notify(d.rendered);
this.initializeTarget()
},wasRendered:function(){return this.wasRenderedAtLeastOnce
},show:function(){this.$target.show()
},hide:function(){this.$target.hide()
},hasTarget:function(){return this.$target.length>0
},getTarget:function(){return this.$target
},getTemplateMetadata:function(){return this.$template.data()||{}
},initializeTarget:function(){if(this.isInitializedOnRender){Cog.init({$element:this.$target,force:true,sync:true}).done(h.proxy(this.notify,this,d.initialized))
}else{this.notify(d.initialized)
}},initializeTemplate:function(){var j=this.$template.html();
this.template=h.templates(j)
},notify:function(j){if(this.isNotificationEnabled){Cog.fireEvent(i.moduleName,j,this.$target)
}}})
}g.init=function(){f()
};
Cog.registerStatic({name:"elements.view",api:g,sharedApi:b})
}(COGjQuery,document));
(function(f,c){var d={},h={view:null},b={ViewBuilder:null,ViewBuilderFactory:null};
function g(){b.ViewBuilder=Cog.Type.define({defaults:{templateSelector:".template",targetSelector:".target"},$scope:null,templateSelector:null,targetSelector:null,isInitializedOnRender:true,isNotificationEnabled:true,constructor:function(i,j,l){this.$scope=i||f();
this.templateSelector=j;
this.targetSelector=l
},build:function(){var m=this.defaults,l=this.$scope.find(this.templateSelector||m.templateSelector).first(),i=this.$scope.find(this.targetSelector||m.targetSelector).first(),j={};
j.isInitializedOnRender=this.isInitializedOnRender;
j.isNotificationEnabled=this.isNotificationEnabled;
return new h.view.View(i,l,j)
},setTemplateSelector:function(i){this.templateSelector=i;
return this
},setTargetSelector:function(i){this.targetSelector=i;
return this
},initializedOnRender:function(i){this.isInitializedOnRender=i===true;
return this
},notifyOnRender:function(i){this.isNotificationEnabled=i===true;
return this
}})
}d.init=function(){g()
};
Cog.registerStatic({name:"elements.viewBuilder",api:d,externalApi:h,sharedApi:b,requires:[{name:"elements.view",apiId:"view"}]})
}(COGjQuery,document));
(function(f,c){var d={},g={viewBuilder:null},b={ViewBuilderFactory:null};
function h(){b.ViewFactory=Cog.Type.define({create:function(i){return this.createBuilder(i).build()
},createBuilder:function(i,j,l){return new g.viewBuilder.ViewBuilder(i,j,l)
}})
}d.init=function(){h()
};
Cog.registerStatic({name:"elements.viewFactory",api:d,externalApi:g,sharedApi:b,requires:[{name:"elements.viewBuilder",apiId:"viewBuilder"}]})
}(COGjQuery,document));
Cog.component.anchor=Cog.component.anchor||{};
(function(c,l){var g={},m=false,i={journeyStorage:null,journeyContext:null},j=null;
function f(q){var s="",r=window.location.pathname,t=r.indexOf(q);
if(r.length>0&&t>0){s=r.substring(t,r.length)
}return s
}function d(r,t){var s=null,q=[];
if(r.data("addSelector")){if(t.match(/\/premium\/premium[0-9]?$/)){s=f(".").split(".");
if(j){s.push(j)
}return s.join(".")
}else{s=f(".").split(".");
_.each(s,function(w,u){if(!w.match(/1[0-9][0-9][0-9]/)){q.push(w)
}});
return q.join(".")
}}else{return f(".html")
}}function p(q){var r=i.journeyContext.substringBeforeFirst;
return r(r(q,"#"),".")
}function b(q){if(q.indexOf("//")>-1){q=q.substr(q.indexOf("//")+3);
q=q.substr(q.indexOf("/"))
}return q
}function o(t,v){var q=c(v),s=b(q.attr("href")),u="#",w=p(s),r=c.url(s).attr("fragment");
if(s&&s.length>0&&q.attr("id")!="timeout-alert-alternative"){s=w+d(q,w)+u+r;
s=i.journeyContext.appendToUrl(s);
q.attr("href",s)
}}function n(r,s){var q=c(s);
q.on("click",function(){Cog.fireEvent("analytics.lastFieldInteracted","setTrackingEnabled",{isTrackingEnabled:false})
})
}function h(){var r=p(c.url().attr("path")),q=null;
if(r.match(/\/premium\/premium[0-9]?$/)){q=f(".").split(".");
i.journeyStorage.remove("premiumContentSelector");
_.each(q,function(t,s){if(t.match(/1[0-9][0-9][0-9]/)){i.journeyStorage.put("premiumContentSelector",t)
}},this)
}j=i.journeyStorage.get("premiumContentSelector")
}g.init=function(q){h();
q.each(o);
q.each(n)
};
g.beforeInit=function(){if(!m){m=true
}};
Cog.register({name:"anchor",api:g,selector:"a.journey-context-anchor, span.journey-context-anchor",externalApi:i,requires:[{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document));
Cog.component.carousel=(function(f,d){var i={},b=true,l=3000;
function h(){var p=f("ul.carousel-items").attr("data-transition-time");
if(p!==undefined){l=p*1000
}}function g(p){p.addClass("active");
p.removeClass("active").eq(0).addClass("active")
}function j(u,x,w,t,z){var q=f(".carousel-item.active",u),v=x.eq(w),r=f(".carousel-item-content-inner",u),y=f(".image",q),p=f(".image",v),s=q.width();
if(q.is(v)){return false
}if(t==="flow"){if(z){v.css({opacity:1,display:"block"});
p.css({left:s});
r.css({opacity:0});
y.css({left:-1*s});
p.css({left:0});
r.css({opacity:1});
q.removeClass("active").css({opacity:0,display:"none"});
v.addClass("active")
}else{r.animate({opacity:0},function(){f(".carousel .carousel-items").css({overflow:"hidden"});
v.css({opacity:1,display:"block"});
p.css({left:s});
y.animate({left:-1*s},500);
p.animate({left:0},700,function(){r.animate({opacity:1});
q.removeClass("active").css({opacity:0,display:"none"});
v.addClass("active");
f(".carousel .carousel-items").css({overflow:"visible"})
})
})
}}else{v.css({position:"absolute",display:"block"});
q.css({position:"relative"});
f(".carousel-item-content",v).addClass("trans");
v.animate({opacity:1},250,function(){v.css({position:"relative"});
q.css({position:"absolute"});
q.removeClass("active").css({opacity:0,display:"none"});
v.addClass("active");
f(".carousel-item-content",v).removeClass("trans")
})
}}function c(p,q){f("li",p).removeClass("active").eq(q).addClass("active")
}function o(q,w,v,u){var s=v||1,t=f(".carousel-item.active",q),p=f(".carousel-nav",q),r;
if(s===1){r=t.index()===w.length-1?0:t.index()+1
}else{if(s===-1){r=t.index()===0?w.length-1:t.index()-1
}else{return false
}}j(q,w,r,u);
c(p,r)
}function n(p,r,q){return window.setInterval(function(){if(!p.hasClass("hover")){o(p,r,1,q)
}},l)
}function m(r,x,p,q){var y=f(".carousel-nav",r),u="",t="",s,v,w;
if(x.length>1){u+='<div class="arrows-nav">';
u+='<a href="#" class="carousel-nav-arrow-prev"><span></span></a>';
u+='<a href="#" class="carousel-nav-arrow-next"><span></span></a>';
u+="</div>";
y.after(u);
s=f(".carousel-nav-arrow-prev",r);
v=f(".carousel-nav-arrow-next",r);
s.on("click",function(z){z.preventDefault();
o(r,x,-1)
});
v.on("click",function(z){z.preventDefault();
o(r,x,1)
});
y.append(t);
y.on("click","li",function(A){A.preventDefault();
var z=f(this).index();
clearInterval(p);
c(y,z);
j(r,x,z,q,true)
})
}if(!d.touch){r.hover(function(){clearInterval(p)
},function(){if(b&&x.length>1){p=n(r,x,q)
}})
}}i.init=function(p){h();
p.each(function(){var s=f(this),r=f(".carousel-items",s),v=f(".carousel-item",s),q=f(".carousel-nav",s),t=false,u;
if(r.data("animation")){t=r.data("animation");
if(t==="flow"){g(v);
l=10000
}}if(v.length>1){if(b){u=n(s,v,t)
}}else{q.hide()
}m(s,v,u,t)
})
};
return i
}(COGjQuery,Modernizr));
Cog.register({name:"carousel",api:Cog.component.carousel,selector:"div.carousel"});
Cog.component.multiPromo=(function(f,d){var h={},b=true,j=3000;
function g(){var o=f("ul.promo-items").attr("data-transition-time");
if(o!==undefined){j=o*1000
}}function i(p,s,q){var r=f(".promo-item.active",p),o=s.eq(q);
if(r.is(o)){return false
}o.css({position:"absolute",display:"block"});
r.css({position:"relative"});
f(".promo-item-content",o).addClass("trans");
o.animate({opacity:1},250,function(){o.css({position:"relative"});
r.css({position:"absolute"});
r.removeClass("active").css({opacity:0,display:"none"});
o.addClass("active");
f(".promo-item-content",o).removeClass("trans")
})
}function c(o,p){f("li",o).removeClass("active").eq(p).addClass("active");
f("li",o).find("a").blur()
}function n(p,u,t){var r=t||1,s=f(".promo-item.active",p),o=f(".promo-nav",p),q;
if(r===1){q=s.index()===u.length-1?0:s.index()+1
}else{if(r===-1){q=s.index()===0?u.length-1:s.index()-1
}else{return false
}}i(p,u,q);
c(o,q)
}function m(o,p){return window.setInterval(function(){if(!o.hasClass("hover")){n(o,p)
}},j)
}function l(r,t,s){var o=f(".promo-nav",r),q=f(".promo-nav-arrow-prev",r),p=f(".promo-nav-arrow-next",r);
o.on("click","li",function(v){v.preventDefault();
var u=f(this).index();
c(o,u);
i(r,t,u)
});
if(!d.touch){r.hover(function(){clearInterval(s)
},function(){if(b&&t.length>1){s=m(r,t)
}})
}q.on("click",function(u){u.preventDefault();
n(r,t,-1)
});
p.on("click",function(u){u.preventDefault();
n(r,t)
})
}h.init=function(o){g();
o.each(function(){var q=f(this),s=f(".promo-item",q),p=f(".promo-nav",q),r;
if(s.length>1){if(b){r=m(q,s)
}}else{p.hide()
}l(q,s,r)
})
};
return h
}(COGjQuery,Modernizr));
Cog.register({name:"multi-promo",api:Cog.component.multiPromo,selector:"div.multi-promo"});
Cog.component.componentToggle=(function(c){var b={};
function d(f){f.$btn.on("click",function(g){g.preventDefault();
f.$elem.toggleClass("component-hide")
})
}b.init=function(f){f.each(function(){var g=c(this),h={$elem:g,$btn:c(".component-toggle-btn",g),$icon:c(".component-toggle-icon",g)};
d(h)
})
};
return b
}(COGjQuery));
Cog.register({name:"componentToggle",api:Cog.component.componentToggle,selector:"nav.component-toggle"});
Cog.component.cookiePolicy=(function(){var b={},c={name:"cb-enabled",visible:"enabled",hidden:"accepted"};
b.showMessage=function(d,f){var g=10*365;
d.show();
d.find(".toggle").click(function(h){h.preventDefault();
d.hide();
Cog.fireEvent("cookiePolicy","hide");
Cog.Cookie.create(f,c.hidden,g)
})
};
b.init=function(d){if(!Cog.Cookie.read(c.name)||Cog.Cookie.read(c.name)===c.visible){b.showMessage(d,c.name)
}};
return b
}(COGjQuery));
Cog.register({name:"cookiePolicy",api:Cog.component.cookiePolicy,selector:"div.notice-cookie"});
Cog.component.vehicleType=(function(c){var b={};
b.init=function(){var f=c(".details-form"),g=f.find(".form-step :input"),h=f.find(".form-step .select"),j,i=f.find('input:radio[name="vehicle-type"]'),d=f.find(".vehicle-type-row");
c(document).on("change",i,function(){if(c("#van").is(":checked")){d.addClass("error");
g.each(function(){c(this).attr("disabled",true);
c(this).addClass("disabled")
});
h.each(function(){c(this).attr("disabled",true);
c(this).addClass("disabled")
});
j=f.find(".active");
j.addClass("disabled");
j.attr("disabled",true);
c("#van").attr("disabled",false);
c("#van").removeClass("disabled");
c("#car").attr("disabled",false);
c("#car").removeClass("disabled")
}if(c("#car").is(":checked")){d.removeClass("error");
g.each(function(){c(this).attr("disabled",false);
c(this).removeClass("disabled")
});
h.each(function(){c(this).attr("disabled",false);
c(this).removeClass("disabled")
});
j=f.find(".active");
j.removeClass("disabled");
j.attr("disabled",false);
c("#van").attr("disabled",false);
c("#van").removeClass("disabled");
c("#car").attr("disabled",false);
c("#car").removeClass("disabled")
}})
};
return b
}(COGjQuery));
Cog.register({name:"vehicleType",api:Cog.component.vehicleType,selector:"div.vehicle-type-row"});
Cog.component.toggleMenuOnMobile=(function(c){var b={};
function d(f){var h=c(".toggle",f),g;
h.on("click",function(j){j.preventDefault();
var i=c(this);
g=c(i.attr("href"));
if(i.hasClass("selected")){h.removeClass("selected");
c(".menu-show-mobile").removeClass("menu-show-mobile")
}else{c(".menu-show-mobile").removeClass("menu-show-mobile");
g.addClass("menu-show-mobile");
h.removeClass("selected").filter(i).addClass("selected")
}})
}b.init=function(f){f.each(function(){d(c(this))
})
};
return b
}(COGjQuery));
Cog.register({name:"toggleMenuOnMobile",api:Cog.component.toggleMenuOnMobile,selector:"nav.navigation-top"});
Cog.component.dropdownProducts=(function(c){var b={};
function d(){var g=c(".slide-trigger",".products, .homepage-products"),f,h;
g.click(function(){h=c(this);
f=h.next(".listnav, .slide-trigger-container");
f.toggle();
if(f.is(":visible")){h.addClass("open");
h.removeClass("close")
}else{h.addClass("close");
h.removeClass("open")
}return false
})
}b.init=function(f){f.each(function(){d()
})
};
return b
}(COGjQuery));
Cog.register({name:"dropdownProducts",api:Cog.component.dropdownProducts,selector:"div.product-list"});
Cog.component.equalHeights=(function(g,b){var f={};
function c(i){var h=-1,j=g(i);
j.each(function(){var m=g(this),l=m.find(".position-bottom");
if(m.outerHeight()>h){h=m.outerHeight();
if(l.length){h=m.outerHeight()+l.outerHeight(true)
}}});
if(h>0){j.css({"min-height":h,height:h})
}}function d(l){var j=-1,h,i;
for(h=0;
h<l.length;
h+=1){i=g(l[h]).offset().top;
if(i>j&&j!==-1){return h
}j=i
}return h
}f.init=function(h){h.each(function(){var i=g(this),l=g(".equal-heights-target",i),j=function(){var o=d(l),m=Math.ceil(l.length/o),n;
l.css({"min-height":"0",height:"auto"});
if(o>1){for(n=0;
n<m;
n+=1){c(l.slice(0,l.length))
}}Cog.fireEvent("equalHeights","/complete/")
};
g(window).on("resize",j);
if(window.CQ&&window.CQ.WCM&&window.CQ.WCM.isEditMode()){window.CQ.WCM.on("editablesready",j,this)
}else{g(b).ready(j)
}Cog.addListener2("equalHeights","/update/",j);
Cog.addListener2("elements.stateProvider","allElementsUpdated",j);
if(b.addEventListener){b.addEventListener("picturefill_ready",j,false);
b.addEventListener("picturefill_update",j,false)
}else{b.attachEvent("onpicturefill_ready",j);
b.attachEvent("onpicturefill_update",j)
}});
g(window).on("load resize",function(){Cog.fireEvent("equalHeights","/update/")
})
};
return f
}(COGjQuery,document));
Cog.register({name:"equalHeights",api:Cog.component.equalHeights,selector:"div.equal-heights, ul.equal-heights"});
Cog.component.equalPromoHeights=(function(g,b){var f={};
function c(i){var h=-1,j=-1;
g(i).each(function(){var l=g(this);
g(".product-promo-box-image",l).css({"min-height":"0",height:"auto"});
if(g(".product-promo-box-image",l).outerHeight()>h){h=g(".product-promo-box-image",l).outerHeight()
}});
if(h>0){g(i).each(function(){var l=g(this);
g(".product-promo-box-image",l).css({"min-height":h,height:h})
})
}g(i).each(function(){var l=g(this);
g(".product-promo-box-content",l).css({"min-height":"0",height:"auto"});
if(g(".product-promo-box-content",l).outerHeight()>j){j=g(".product-promo-box-content",l).outerHeight()
}});
if(j>0){g(i).each(function(){var l=g(this);
g(".product-promo-box-content",l).css({"min-height":j,height:j})
})
}}function d(l){var j=-1,h,i;
for(h=0;
h<l.length;
h+=1){i=g(l[h]).offset().top;
if(i>j&&j!==-1){return h
}j=i
}return h
}f.init=function(h){if(window.CQ!==undefined){return false
}h.each(function(){var i=g(this),l=g(".equal-heights-target",i),j=function(){var n=d(l),m;
if(n>1){for(m=0;
m<Math.ceil(l.length/n);
m+=1){c(l.slice(n*m,(n*m)+n))
}}Cog.fireEvent("equalPromoHeights","/complete/")
};
g(window).resize(j);
g(b).ready(j);
Cog.addListener2("equalPromoHeights","/update/",j);
if(b.addEventListener){b.addEventListener("picturefill_ready",j,false);
b.addEventListener("picturefill_update",j,false)
}else{b.attachEvent("onpicturefill_ready",j);
b.attachEvent("onpicturefill_update",j)
}})
};
return f
}(COGjQuery,document));
Cog.register({name:"equalPromoHeights",api:Cog.component.equalPromoHeights,selector:".equal-promo-heights"});
Cog.component.formElements=(function(c){var b={};
b.init=function(d){d.each(function(){var g=c(this),j=g.find(".field-help-icon"),f=g.find(".conditional-show-link"),l=g.find("[name=payment-type]"),i=g.find(".form-row input"),h=g.find(".conditional-form"),m;
j.on("click",function(){m=c(this).parent();
m.toggleClass("show-help")
});
j.on("mouseenter",function(){if(window.innerWidth<960||(window.innerWidth===undefined&&c(window).width()<960)){return false
}m=c(this).parent();
m.toggleClass("show-help")
});
j.on("mouseleave",function(){if(window.innerWidth<960||(window.innerWidth===undefined&&c(window).width()<960)){return false
}m=c(this).parent();
m.removeClass("show-help")
});
f.each(function(){c(this).on("click",function(n){n.preventDefault();
c(this).parent().next(h).slideToggle(600)
})
});
l.change(function(){h.slideUp();
if(c(this).is(":checked")){c(this).parent().next(h).slideToggle(600)
}});
i.each(function(){c(this).change(function(){var n=c(this).val();
if(n==="Yes"){c(this).parent().next(h).slideToggle(600)
}else{if(n==="No"){c(this).parent().next(h).slideUp()
}}})
})
})
};
return b
}(COGjQuery));
Cog.register({name:"formElements",api:Cog.component.formElements,selector:"div.form-block"});
Cog.component.formInput=(function(c){var b={};
b.init=function(d){c(d).each(function(){var g=c(this).find("input"),f=c(this).find("button");
f.click(function(){g.click()
})
})
};
return b
}(COGjQuery));
Cog.register({name:"formInput",api:Cog.component.formInput,selector:"div.input-button"});
Cog.component.formSidebar=(function(h){var l={},q={},D={},n=false;
function i(){var F=D.$sidebar.find(".snippetReference"),G=F.find(".image");
if(G.length){return G.parents(".snippetReference")
}else{return h()
}}function v(){D.$sidebar=h("aside.form-sidebar");
D={$sidebar:D.$sidebar,$basket:D.$sidebar.find(".premium-quote-summary"),$reassuringMessage:D.$sidebar.find(".reassuringMessage"),$snippetReference:i(),$policyDetails:D.$sidebar.find(".premium-quote-summary > .shoppingBasketPolicyDetails"),$progressBar:h(".progressBar"),$customerGreetings:h(".customerGreetings"),$detailsPlaceholder:null}
}function A(){if(D.$sidebar===undefined){v()
}}function B(){return window.matchMedia("(min-width: 1024px)").matches||h("html").hasClass("ie8")
}function x(){return window.matchMedia("(min-width: 768px)").matches||h("html").hasClass("ie8")
}function r(){return window.matchMedia("(max-width: 767px)").matches||h("html").hasClass("ie8")
}function w(){return window.matchMedia("(max-width: 414px)").matches||h("html").hasClass("ie8")
}function C(F,G){return F.indexOf(G)===0
}function m(G){var F=G;
if(!F){F="coverType"
}if(!C(F,".")&&!C(F,"#")){F="."+F
}return h(F)
}function j(){if(D.$snippetReference.length&&!D.$snippetReference.next().is(D.$progressBar)){D.$snippetReference.insertBefore(D.$progressBar)
}}function p(){if(D.$snippetReference.length&&!D.$snippetReference.parent().is(D.$customerGreetings)){D.$snippetReference.addClass("logo-tablet");
Cog.addListener2("elements.stateProvider","stateChanged",function(){D.$snippetReference.appendTo(D.$customerGreetings)
})
}if(D.$snippetReference.hasClass("logo-desktop")){D.$snippetReference.appendTo(D.$customerGreetings);
D.$snippetReference.removeClass("logo-desktop")
}}function t(){if(D.$snippetReference.hasClass("logo-tablet")){D.$customerGreetings.find(".logo-tablet").remove()
}D.$snippetReference.addClass("logo-desktop");
if(D.$snippetReference.length&&!D.$snippetReference.parent().is(D.$sidebar)){D.$snippetReference.insertBefore(D.$basket)
}}function b(){var F=h(".premiumPaymentSummary");
if(!F.prev().prev().hasClass("details-placeholder")){D.$detailsPlaceholder=h('<div class="form-sidebar details-placeholder"></div>');
D.$detailsPlaceholder.css({margin:0,padding:"0 0 20px"});
D.$detailsPlaceholder.insertBefore(F.prev())
}}function z(){if(!D.$policyDetailsPrev){D.$policyDetailsPrev=h('<span class="details-desktop-marker"></span>');
D.$policyDetailsPrev.insertBefore(D.$policyDetails)
}}function u(){if(!D.$policyDetails.parent().is(D.$detailsPlaceholder)){D.$detailsPlaceholder.append(D.$policyDetails)
}}function g(){if(!D.$policyDetails.prev().is(D.$policyDetailsPrev)){D.$policyDetails.insertAfter(D.$policyDetailsPrev)
}}function c(){A();
if(B()){t();
g()
}else{if(x()){p();
u()
}else{j();
u()
}}}function f(){var G,I,F,H;
if(D.$reassuringMessage.length){G=D.$reassuringMessage.find(".componentConfiguration").data("attachToClass");
H=m(G);
I=H.length?H.offset().top:0;
F=D.$basket.offset().top+D.$basket.outerHeight(true)+10;
if(I<F){I=F+500;
D.$reassuringMessage.addClass("fixed-to-min-offset-plus-500")
}D.$reassuringMessage.css({position:"absolute",top:I,width:D.$reassuringMessage.parent().width()});
D.$reassuringMessage.appendTo(D.$sidebar);
l.reassuringTop=D.$reassuringMessage.offset().top
}}function E(){var G={dl:"directline",ch:"churchill"},H,F;
if(window.CQ_Analytics){H=window.CQ_Analytics.PageDataMgr.initProperty.brandName;
if(H){if(H.toLowerCase()===G.dl||H.toLowerCase()===G.ch){F=true
}}}return F
}function o(){var F=E()&&!D.$reassuringMessage.length;
f();
if(window.isMobileOrTablet()&&w()){return
}D.$basket.scrollToFixed({marginTop:10,removeOffsets:F,dontCheckForPositionFixedSupport:true,limit:function(){var H=D.$reassuringMessage.length?l.reassuringTop:h("#footer").offset().top,G=H-D.$basket.outerHeight(true)-10;
return G
},zIndex:999});
if(D.$reassuringMessage.length){D.$reassuringMessage.scrollToFixed({marginTop:20,dontCheckForPositionFixedSupport:true,limit:function(){D.$reassuringMessage.css({width:D.$reassuringMessage.parent().width()});
var G=h("#footer").offset().top-D.$reassuringMessage.outerHeight(true)-10;
return G
},unfixed:function(){D.$reassuringMessage.css({width:D.$reassuringMessage.parent().width()})
},zIndex:1000})
}}function s(){setTimeout(o,600)
}function d(F){if(!n){var G=h("aside.form-sidebar");
if(!B()){return
}if(!G.length||G.data("noscroll")||h("html").hasClass("ie7")){return
}n=true;
if(F){Cog.addListener2("analytics.sitecatalyst.launcher","firedInstantly",s)
}else{o()
}}}function y(){h(".premium-page.new .form-sidebar .premium-quote-summary .quote-block").last().addClass("last")
}q.init=function(F){var G=window.CQ!==undefined&&window.CQ.WCM!==undefined&&window.CQ.WCM.isEditMode();
if(G){return
}A();
if(h("body").hasClass("new")){b();
z();
c();
h(window).on("resize",_.throttle(c,300));
h(window).on("orientationchange",c)
}d(true);
h(window).on("resize orientationchange",function(){setTimeout(d,100)
});
Cog.addListener2("premiumPage.sidebarChange","changed",function(){D.$basket.trigger("resize.ScrollToFixed")
});
y()
};
return q
}(COGjQuery));
Cog.register({name:"formSidebar",api:Cog.component.formSidebar,selector:"aside.form-sidebar"});
(function(h,b){var g={},c=false,f={HelpInfo:null};
function d(i){var j={$scope:null,$icon:null,$content:null,$target:null,eventType:null,iconSelector:".help-icon",contentSelector:".help-content",activeSelector:"help-information-active",arrowHeight:5,initialize:function(){this.$scope=i;
this.$icon=this.$scope.find(".help-icon");
this.$content=this.$scope.find(".help-content");
this.bindEvents()
},bindEvents:function(){var m=b.getElementById("content"),l=new Hammer(m,{touchAction:"auto"});
this.$icon.on("mousedown touchstart",function(n){n.preventDefault();
n.stopPropagation();
this.showTooltip(n)
}.bind(this));
this.$icon.on("keydown",function(n){if(n.keyCode===13){n.preventDefault();
n.stopPropagation();
this.showTooltip(n)
}});
this.$icon.on("mouseover",function(n){this.showTooltip(n)
}.bind(this));
this.$icon.on("focusout blur mouseout",function(n){this.hideTooltips()
}.bind(this));
l.on("tap",function(n){this.hideTooltips()
}.bind(this));
this.$icon.on("click",function(n){n.preventDefault();
n.stopPropagation();
this.hideTooltips()
}.bind(this))
},showTooltip:function(o){this.$target=h(o.currentTarget).parent();
this.eventType=o.type;
var m=this.$target.find(this.contentSelector),l=this.$target.find(this.iconSelector),n=l.position().top,p;
if(this.$target.hasClass(this.activeSelector)){this.$target.removeClass(this.activeSelector)
}else{this.hideTooltips();
this.$target.addClass(this.activeSelector);
p=n+l.height()*0.5-m.height()*0.5-this.arrowHeight;
p=this.calculateMaxValue(-150,p);
m.css({top:p})
}if(this.eventType=="mousedown"){this.$target.closest(".form-row").find("input").trigger("focus")
}},hideTooltips:function(){h("."+this.activeSelector).removeClass(this.activeSelector)
},calculateMaxValue:function(m,l){return m>l?m:l
}};
f.HelpInfo=j
}g.init=function(i){if(i.length){d(i);
f.HelpInfo.initialize();
c=true
}};
Cog.register({name:"helpInformation",api:g,selector:".help-information"})
}(COGjQuery,document));
(function(g,b){var f={},h={nBox:null,urlUtil:null};
function d(i){var j={$content:i,closable:true,isAjaxRequest:true,handler:false,shouldScroll:false};
h.nBox.create(j)
}function c(n){n.preventDefault();
h.urlUtil.adjustAggregatorSelector(g(this));
var j=g(this),m=j.attr("href"),i=j.data("selector")||"content",l=new h.urlUtil.UrlHelper(m).addSelector(i).preserveFragment().preserveQuery().getUrl();
if(j.data("video-category")){Cog.fireEvent("youTube.player","ligthbox-category",{category:j.data("video-category")})
}d(l)
}f.init=function(i){if(i.length){i.on("click",c)
}};
Cog.register({name:"lightboxLink",api:f,externalApi:h,requires:[{name:"nBox",apiId:"nBox"},{name:"commons.urlUtil",apiId:"urlUtil"}],selector:"a.lightbox-link"})
}(COGjQuery,document));
Cog.component.mainNavigation=(function(d,b,g){var c={},f={menuOpen:false};
c.init=function(h){if(window.top.location.host!==location.host){window.top.location.href=location.href
}h.find("li:has(ul)").each(function(){var j=d(this),i=j.find(">a:first-child");
j.addClass("has-dropdown");
i.on("click",function(l){if(!j.hasClass("sticky")){if(d(window).width()<640||(window.innerWidth===undefined&&d(window).width()<640)||g.touch){l.preventDefault()
}d("#navigation-header > ul li").removeClass("sticky").find("ul").removeClass("sticky").end().filter(j).addClass("sticky").find("ul").addClass("sticky");
f.menuOpen=true
}});
if(d(window).width()>=640||(window.innerWidth===undefined&&d(window).width()>=640)){i.on("focus",function(){d("#navigation-header > ul li").removeClass("sticky").find("ul").removeClass("sticky");
j.addClass("active").find("ul").addClass("active")
});
j.on("focusout",function(){d("#navigation-header > ul li").removeClass("sticky").find("ul").removeClass("sticky");
j.removeClass("active").find("ul").removeClass("active")
})
}});
h.find("li:not(.has-dropdown)").each(function(){var i=d(this);
i.on("click",function(){h.find("li:has(ul)").not(d(this)).removeClass("active").find("ul").removeClass("active")
})
});
d("body").on("click",function(i){if(f.menuOpen){if(h.has(i.target).length===0){h.find("li, li ul").removeClass("sticky");
f.menuOpen=false
}}})
};
return c
}(COGjQuery,document,Modernizr));
Cog.register({name:"mainNavigation",api:Cog.component.mainNavigation,selector:"nav.navigation-header"});
(function(c){var b={};
b.init=function(){var d=window.location.pathname;
if(d.lastIndexOf("//",0)===0){window.location=d.replace(/\/\/+/,"/")
}};
Cog.registerStatic({name:"multipleLeadingSlashesUrlRewriter",api:b})
}(COGjQuery));
Cog.component.placeholder=(function(c){var b={};
b.adjustLabels=function(i){var h=i.eventData.state.pageData.currentCar||"1",d=c.find(".dynamic-placeholder"),g,f;
if(d.length){c(d).each(function(){if(!c(this).hasClass("labels-adjusted")){g=c(this).text();
if(g.contains("{carNumber}")){f=g.replace("{carNumber}",h);
c(this).text(f)
}c(d).removeClass("hidden");
c(this).addClass("labels-adjusted")
}})
}};
b.init=function(){Cog.addListener2("elements.stateProvider","stateChanged",b.adjustLabels)
};
return b
}(COGjQuery));
Cog.registerStatic({name:"placeholder",api:Cog.component.placeholder,selector:".form-page"});
Cog.component.selectToggle=(function(d){var c={},b={};
c.init=function(f){f.each(function(){var g=d(this),h=g.find("select"),i,j=c.getMaxChars(g);
h.each(function(){c.updateLabelText(this,j)
});
h.on("change keydown keyup",function(){c.updateLabelText(this,j)
}).on("focus",function(){d(this).parent(".select").addClass("focus")
}).on("blur",function(){d(this).parent(".select").removeClass("focus")
}).on("mouseover",function(){d(this).parent(".select").addClass("hover")
}).on("mouseout",function(){d(this).parent(".select").removeClass("hover")
})
})
};
c.getMaxChars=function(f){return f.data("selectMaxChars")||10
};
c.getUpdatedLabelText=function(h,g){var f=d.trim(h);
return h.length>g?f.substring(0,g)+" ...":f
};
c.getCurrentLabelText=function(g){var h="",f=g.find("option:selected");
if(!f.length){f=g.find("option:first")
}if(f.length){h=f.text()
}return h
};
c.updateLabelText=function(f,i){var g=d(f),h=c.getCurrentLabelText(g);
g.prev("label").text(c.getUpdatedLabelText(h,i))
};
b.getUpdatedLabelText=function(h,f){var g=c.getMaxChars(h);
return c.getUpdatedLabelText(f,g)
};
Cog.register({name:"forms.elements.selectToggle",api:c,sharedApi:b,selector:"div.select"})
}(COGjQuery));
(function(h){var j={},d="div[data-picture]",f=0;
function c(){f--;
if(f===0){Cog.fireEvent("equalHeights","/update/")
}}function l(m,o){var n=m.find("img").first(),p=m.data("alt"),q=o[o.length-1].data("src");
if(o.length){if(!n.length){n=h("<img />");
n.appendTo(m)
}n.off("load").on("load",c).attr("alt",p).attr("src",q)
}else{c();
n.remove()
}}function g(m){var n=[];
m.find("div").each(function(){var p=h(this),o=p.data("media");
if(o===undefined||(window.matchMedia&&window.matchMedia(o).matches)){n.push(p)
}});
return n
}function i(m){f=m.length;
m.each(function(){var n=h(this),o=g(n);
if(o&&o.length){l(n,o)
}});
Cog.fireEvent("equalHeights","/update/")
}function b(n){var m=n.eventData.$scope;
if(m){i(m.find(d))
}}j.init=function(m){i(m);
h(window).resize(function(){i(m)
})
};
Cog.addListener2("responsiveImages","refreshImages",b);
Cog.register({name:"responsiveImages",api:j,selector:"div[data-picture]"})
}(COGjQuery));
(function(d,b){var f={keyCodes:null,keyExecutor:null};
function c(x,h){var q={},y=d("<ul/>",{"class":"completer"}),t={onItemSelected:[]},A={forward:{defaultItem:"$first",stepName:"next"},backward:{defaultItem:"$last",stepName:"prev"}},r=null,w=false,n=null,u=false,m=/id-[0-9]+/i;
function o(H,G,I){d.each(H,function(J,K){K(G,I)
})
}function p(G){return"id-"+G
}function g(G){var H=m.exec(G.attr("class"));
return H!=null&&H.length>0?H:null
}function v(G,H){var I=g(G);
if(I!=null){o(t.onItemSelected,r[I],H)
}}function s(G){v(d(this),G)
}function C(H){var G=y.find("li.active");
H.preventDefault();
if(G.length>0){v(G,H)
}}function F(){if(!w){y.find("li").removeClass("active");
d(this).addClass("active")
}}function j(H){var G=0,I;
q.hide();
if(H.length>0){x.show();
r={};
d.each(H,function(J,K){I=p(G);
d("<li/>",{html:K.decoratedText,"class":"entry "+I,mouseenter:F,mousedown:s}).appendTo(y);
r[I]=K;
G++
});
y.appendTo(x)
}}function E(G,H){if(G.index()*G.outerHeight()+H.height()>=H.scrollTop()+H.height()){H.scrollTop(G.position().top+G.outerHeight()-H.height()+H.scrollTop());
w=true;
if(n!==null){clearTimeout(n)
}n=setTimeout(function(){w=false
},300)
}else{if(G.index()*G.outerHeight()<=H.scrollTop()){H.scrollTop(G.position().top)
}}}function D(H){var G={$active:y.find("li.active"),$first:y.find("li:first"),$last:y.find("li:last")},I="active";
if(G.$active.length<1){G[H.defaultItem].addClass(I)
}else{if(G.$active[H.stepName]().length<1){G.$active.removeClass(I);
G[H.defaultItem].addClass(I);
E(G[H.defaultItem],x)
}else{G.$active.removeClass(I);
G.$active[H.stepName]().addClass(I);
E(G.$active[H.stepName](),x)
}}}function l(G){return function(){if(y.children().length>0){D(G)
}}
}function i(G){if(!x.is(G.target)&&!d.contains(G.target,x)){h.trigger("autocompleter-focusout");
u=false
}else{u=true
}}function B(){d(b).off(".autocompleter").on("mousedown.autocompleter",i)
}function z(){h.keyup(f.keyExecutor.onKey(l(A.backward),[f.keyCodes.keyUp]));
h.keyup(f.keyExecutor.onKey(l(A.forward),[f.keyCodes.keyDown]));
h.keypress(f.keyExecutor.onKey(C,[f.keyCodes.enter]));
h.keydown(f.keyExecutor.onKey(function(G){h.trigger("autocompleter-focusout")
},[f.keyCodes.tab]));
h.on({focus:B,focusout:function(){d(b).off(".autocompleter")
}});
x.on("mouseup",function(){h.focus()
})
}q.hide=function(){if(!u){x.hide();
y.empty();
y.detach();
r=null
}else{u=false
}};
q.show=function(G){if(d.isArray(G)){j(G)
}};
q.isVisible=function(){return r!=null
};
q.itemsCount=function(){return r.length
};
q.isFocused=function(){return x.is(":focus")
};
q.onItemSelected=function(G){t.onItemSelected.push(G)
};
z();
return q
}Cog.registerStatic({name:"autocompleterManager",api:{},sharedApi:c,externalApi:f,requires:[{name:"events.keyCodes",apiId:"keyCodes"},{name:"events.keyExecutor",apiId:"keyExecutor"}]})
}(COGjQuery,document));
(function(f,c){var d={config:{initialized:false,url:null,handler:null,closeHandler:null,meta:null,isClosable:true,shouldScrollAfterClose:false,shouldReinitializeButtons:false,focused:null,cssClass:null,offset:{top:null,left:null},lastFocusedInside:null,analyticsUci:null},variants:[{name:"free-rescue-lightbox",cssClass:"featherlight-inner-thiner"},{name:"contact-us-lightbox",cssClass:"featherlight-inner-thin"},{name:"quote-transfer-lightbox-content",cssClass:"queryLightbox"},{name:"pncd-lightbox",cssClass:"lightbox-bottom-buttons"},{name:"payment-summary-lightbox-container",cssClass:""}],$nbox:null,$nboxContent:null,$document:f(c),$window:f(window),$body:f("body"),bodyScrollTop:null,$content:null,$asideNav:f(".premium-quote-summary"),asideNavPosition:null,lightboxUrl:null,tabbes:"a[href], area[href], input:not([disabled]),select:not([disabled]), textarea:not([disabled]),button:not([disabled]), iframe, object, embed, *[tabindex],*[contenteditable]"},b={},g={cookieDrivenConditionalContainer:null,customLinkTracker:null,customStorage:null};
b.initialize=function(){d.config.initialized=true;
f.featherlight(d.$content,{namespace:"featherlight",targetAttr:"data-featherlight",variant:d.config.cssClass,resetCss:false,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:(d.config.isClosable?"background":false),closeOnEsc:d.config.isClosable,closeIcon:"",loading:"",persist:"shared",otherClose:null,beforeOpen:d.beforeOpen.bind(this),beforeContent:d.beforeContent.bind(this),beforeClose:d.beforeClose.bind(this),afterOpen:d.afterOpen.bind(this),afterContent:d.afterContent.bind(this),afterClose:d.afterClose.bind(this),onKeyUp:f.noop,onResize:f.noop,type:null,contentFilters:["html","ajax"]})
};
d.beforeContent=function(){f(".featherlight").data("context",{url:new g.urlUtil.UrlHelper(d.config.url).removeSelectors().getPath()})
};
d.beforeOpen=function(){if(!b.isNboxOpened()){d.$nbox=f(".featherlight");
if(d.$nbox.length>1){d.$nbox.not(".featherlight-loading").remove();
d.$nbox.splice(0,1)
}d.$nboxContent=d.$nbox.find(".featherlight-content");
if(d.config.additionalClass){d.$nboxContent.addClass(d.config.additionalClass)
}d.config.focused=c.activeElement;
d.bodyScrollTop=d.$body.scrollTop();
d.asideNavPosition=d.$asideNav.css("position")
}};
d.afterOpen=function(){d.hideChatInitiationOnMobile(true);
b.showLoader();
d.$body.removeClass("lightbox-loading");
d.$body.addClass("lightbox-fixed lightbox-open");
d.$masterClass=d.$nbox.find(".content").data("master-class");
d.bindLoader();
d.handleReinitializeComponents();
d.setLightboxSize();
d.handleCustomLightboxStyling();
d.updateClosable();
d.handleFocus();
d.checkIfMobile();
d.handleQueryButton();
d.bindExternalClose();
d.notifyLoaded();
d.getLightboxMetadata();
d.wrapCloseIcon();
if(b.isNboxOpened()){d.$window.on("resize",_.debounce(d.checkIfMobile,300))
}else{d.$window.off("resize",d.checkIfMobile)
}if(d.$masterClass&&d.$masterClass.length){d.$nbox.addClass(d.$masterClass)
}d.processOpenEvent();
Cog.fireEvent("abTesting","domUpdated",{scope:d.$nboxContent})
};
d.afterContent=function(){d.config.offset.top=d.$nbox.offset().top;
d.config.offset.left=d.$nbox.offset().left
};
d.processOpenEvent=function(){var h=d.$nbox.find('[data-track-open="true"]'),i;
if(h.length){i=h.data("track-open-type");
switch(i){case"standard":d.submitOpenEvent();
break;
case"pre-load":Cog.addListener2("analytics.sitecatalyst.launcher","fired",d.submitOpenEvent);
break;
default:break
}}};
d.submitOpenEvent=function(){var j=d.$nbox.find('[data-track-open="true"]'),h,i;
if(j.length&&window.s){window.CQ_Analytics.PageDataMgr.data.additionalEvent=null;
window.CQ_Analytics.PageDataMgr.data.link1=null;
window.CQ_Analytics.PageDataMgr.data.loadEvent=null;
window.s.events=null;
window.s.products=null;
window.s.list1=null;
window.s.clearVars();
i=g.customStorage.getItem("customLinkTracking");
if(i){window.s.events="event16";
window.s.prop16=i.eVarValue;
window.s.eVar16=i.eVarValue;
Cog.Cookie.erase("dlg.customLinkTracker");
g.customStorage.removeItem("customLinkTracking")
}h=window.s.pageName;
window.CQ_Analytics.PageDataMgr.data.pageName=j.data("openAnalyticsLabel");
window.s.tl();
window.CQ_Analytics.PageDataMgr.data.pageName=h
}};
d.beforeClose=function(m){d.config.lastFocusedInside=f(c.activeElement);
var h,i,l,j=d.$nbox.find('[data-track-close="true"]');
if(m&&f(m.target).is("button")){h=f(m.target).siblings().filter(".analytics-last-field").data("analytics-uci");
if(!h){h=f(m.target).data("analytics-value")
}}if(j.length&&window.sessionStorage){i=j.data("pageTitle")||"";
if(m&&f(m.target).is("span.featherlight-close")){h=j.data("closeButtonAnalyticsLabel")
}else{if(m&&f(m.target).is("div.featherlight")){h=j.data("backgroundCloseAnalyticsLabel")
}}l=i+"|"+h;
g.customLinkTracker.trackOnNextPage(l)
}d.config.analyticsUci=h;
if(d.config.closeHandler){d.config.closeHandler(m)
}if(d.$nbox.find(".nbox-close-link").length){window.location.href=d.$nbox.find(".nbox-close-link").attr("href")
}};
d.afterClose=function(){if(!b.isNboxOpened()){d.handleFocus();
d.$body.removeClass("lightbox-open").removeAttr("style");
d.config.initialized=false;
d.notifyClosed();
d.handleLastFieldInteracted();
if(d.asideNavPosition=="absolute"){d.$body.scrollTop(d.bodyScrollTop-d.$asideNav.height()/2);
setTimeout(function(){d.$body.scrollTop(d.bodyScrollTop)
},1)
}else{d.$body.scrollTop(d.bodyScrollTop)
}}d.hideChatInitiationOnMobile(false)
};
d.handleReinitializeComponents=function(){var h=d.$nbox.find(".cookieDrivenConditionalContainer"),i=d.$nbox.find(".actionButton");
if(h.length){g.cookieDrivenConditionalContainer.initialize(d.$nbox);
if(g.cookieDrivenConditionalContainer.isEmptyContainer()){b.destroy();
return
}}if(i.length&&d.config.shouldReinitializeButtons){Cog.fireEvent("nBox","reinitializeButtons",{$scope:d.$nbox})
}};
d.handleCustomLightboxStyling=function(){var i=d.$nbox.find(".featherlight-inner"),h={name:"free-rescue-lightbox",visible:"visible",hidden:"hidden"};
_.each(d.variants,function(j){d.$nbox.removeClass(j.name);
i.removeClass(j.cssClass);
if(d.$nbox.find("."+j.name).length){d.$nbox.addClass(j.name);
i.addClass(j.cssClass);
if(j.name==="free-rescue-lightbox"){g.journeyStorage.put(h.name,h.hidden)
}if(j.name==="pncd-lightbox"){d.handleBottomButtons();
d.$window.on("resize",_.debounce(d.handleBottomButtons,300))
}}})
};
d.notifyClosed=function(){Cog.fireEvent("nBox","closed");
Cog.fireEvent("premiumPage.sidebarChange","changed")
};
d.notifyLoaded=function(){Cog.fireEvent("nBox","loaded",{$scope:d.$nbox,lightboxUrl:d.lightboxUrl})
};
d.updateState=function(){Cog.fireEvent("elements.stateProvider","requireState",{path:d.config.url})
};
d.getLightboxMetadata=function(){var h=d.$nbox.find(".analytics-config-userjourneytracking");
d.config.meta=h.length?h.first().data("analyticsCustomParams"):"";
Cog.fireEvent("nBox","premiumPageLightbox",{meta:d.config.meta})
};
d.handleBottomButtons=function(){var i=0,l=0,j=d.$nbox.find(".bot"),h={width:0,height:0,offset:0};
if(d.$nbox.find(".lightbox-bottom-buttons")&&j.is(":visible")){j.css("position","static");
d.$nboxContent.css("padding-bottom",0);
h={width:d.$nboxContent.width(),height:d.$nboxContent.height(),offset:d.$nboxContent.offset().top-d.$window.scrollTop()};
j.css({"max-width":h.width,width:h.width,margin:"0 auto"});
i=j.outerHeight(true);
j.addClass("sticked-buttons");
l=h.height+h.offset-i;
d.$nboxContent.css("padding-bottom",i);
j.css({position:"absolute",top:l,"max-width":h.width,width:h.width,height:i,margin:"0 auto"})
}};
d.handleQueryButton=function(){d.$proceedButton=f('.button:contains("Yes"), button:contains("Add"), button:contains("OK"), button:contains("Accept"), a:contains("Accept"), .proceed',d.$nbox);
d.$cancelButton=f('.button:contains("No"), button:contains("Cancel")',d.$nbox);
d.$proceedButton.on("click",function(h){h.preventDefault();
if(d.config.handler){d.config.handler(h);
b.showLoader()
}else{b.destroy()
}});
d.$cancelButton.on("click",function(h){h.stopPropagation();
h.preventDefault();
b.destroy()
})
};
d.handleLastFieldInteracted=function(){if(d.config.analyticsUci){var h=d.config.lastFocusedInside.data("disable-last-field-interacted");
if(!h){Cog.Cookie.create("dlg.lastFieldInteractedWith",d.config.analyticsUci,3)
}}};
d.fireLightboxClose=function(h){if(h.data=="lightbox.close"){b.destroy();
d.unbindExternalClose()
}};
d.bindExternalClose=function(){Cog.addListener2("sessionTimeoutAlert","start",d.afterOpen);
if(window.addEventListener){window.addEventListener("message",d.fireLightboxClose)
}else{window.attachEvent("message",d.fireLightboxClose)
}};
d.unbindExternalClose=function(){if(window.removeEventListener){window.removeEventListener("message",d.fireLightboxClose,false)
}else{window.detachEvent("message",d.fireLightboxClose)
}};
d.handleFocus=function(){var j=d.$nbox.find(d.tabbes),i=j[0],h=j[j.length-1];
if(d.$nbox.is(":visible")){d.$nbox.attr("tabindex",0).focus();
d.$nbox.on("keydown",function(m){var l=m.which||m.keyCode;
m.preventDefault=m.preventDefault||function(){m.returnValue=false
};
if(l===Cog.statics.keyCodes.tab){if(m.target===h&&!m.shiftKey){m.preventDefault();
i.focus()
}else{if(m.target===i&&m.shiftKey){m.preventDefault();
h.focus()
}}}})
}else{d.processFocus();
d.$nbox.off("keydown","**")
}};
d.processFocus=function(){if(!d.$nbox.find(".conditionalContainer")){d.config.focused.focus()
}};
d.wrapCloseIcon=function(){var i=d.$nbox.find(".featherlight-close"),h;
if(i.length){i.wrap('<div class="wrap-close"></div>');
h=i.attr("class");
i.replaceWith("<a class='featherlight-new-close-link' href='#' tabindex='1'></a>");
f(".featherlight-new-close-link").addClass(h)
}d.appendTabIndexToLinks()
};
d.appendTabIndexToLinks=function(){var h,j=d.$nbox.find("a");
for(h=0;
h<j.length;
h++){f(j[h]).attr("tabindex",h+1)
}};
d.checkIfMobile=function(){var i,j=c.querySelector(".featherlight"),h=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;
if(h.test(navigator.userAgent.toLowerCase())&&j){j.style.display="none";
i=j.offsetHeight;
j.style.display="block";
d.$body.css({position:"fixed",top:-d.config.offset.top,left:d.config.offset.left})
}};
d.setLightboxSize=function(){var h=d.$nbox.find(".lightbox-size").data("size");
if(h){d.$nbox.addClass(h)
}};
d.updateClosable=function(){if(d.config.isClosable){d.$nbox.addClass("closable")
}else{d.$nbox.removeClass("closable")
}};
d.bindLoader=function(){Cog.addListener2("elements.stateProvider","allElementsUpdated",d.onAllElementsUpdated);
if(d.$nbox.find(".abstractPageRenderer").length){d.$nbox.find(".ajax-loader").hide()
}};
d.onAllElementsUpdated=function(){g.loader.hide(d.$nboxContent);
d.handleBottomButtons();
d.$window.on("resize",_.debounce(d.handleBottomButtons,300))
};
b.setClosable=function(h){d.config.isClosable=h;
d.updateClosable()
};
d.onRequestSuccess=function(h){d.$content=f.trim(h);
b.hideLoader();
b.initialize();
Cog.init({$element:d.$nbox}).then(function(){d.updateState();
b.hideLoader()
},function(){window.console.log("Lightbox Request Error")
})
};
d.requestContent=function(h){d.lightboxUrl=h.split(".")[0];
var i=null;
if(h){d.config.url=h;
if(i!==null){i.abort();
i=null
}i=f.ajax({method:"get",url:h,success:function(j){if(j){d.onRequestSuccess(j)
}}})
}};
d.prepareContent=function(h){if(d.$nbox&&d.$nbox.find(".quote-transfer-lightbox-content").length){d.$nbox.hide()
}var i=_.template(f.trim(h.html()));
d.$content=i(this);
b.initialize();
Cog.init({$element:d.$nbox})
};
d.hideChatInitiationOnMobile=function(i){var j=f(".LPMcontainer"),h=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;
if(h.test(navigator.userAgent.toLowerCase())&&j.length&&i){j.hide()
}else{if(j.length){j.show()
}}};
b.showLoader=function(){g.loader.show({$scope:d.$nboxContent})
};
b.hideLoader=function(){g.loader.hide(d.$body)
};
b.isNboxOpened=function(){return f.featherlight.current()
};
b.shouldLightboxScrollAfterClose=function(){return d.config.shouldScrollAfterClose
};
b.destroy=function(h){d.config.initialized=false;
if(f.featherlight.current()){f.featherlight.current().close(h)
}};
b.reinitializeButtons=function(h){d.config.shouldReinitializeButtons=h
};
b.create=function(h){if(!d.$body.hasClass("lightbox-loading")){if(h.$content.length&&!d.config.initialized){d.config.isClosable=h.closable;
d.config.handler=h.handler;
d.config.closeHandler=h.closeHandler;
d.config.shouldScrollAfterClose=h.shouldScroll;
d.config.additionalClass=h.additionalClass;
d.$body.addClass("lightbox-loading");
if(!h.isAjaxRequest){d.prepareContent(h.$content)
}else{d.requestContent(h.$content)
}}}};
Cog.registerStatic({name:"nBox",api:d,sharedApi:b,externalApi:g,requires:[{name:"elements.loader",apiId:"loader"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"commons.cookieDrivenConditionalContainer",apiId:"cookieDrivenConditionalContainer"},{name:"analytics.customLinkTracker",apiId:"customLinkTracker"},{name:"commons.customStorage",apiId:"customStorage"},{name:"commons.urlUtil",apiId:"urlUtil"}]})
}(COGjQuery,document));
(function(c,j){var h={},i={keyCodes:null},p,l,d,g,f,b="No",m="Yes",o=false,n=(function(){function s(){p=c('<div class="prompt-overlay hidden"></div>');
l=c('<div class="prompt"><div class="message"></div><footer><button class="button primary confirm"></button><button class="button tertiary cancel"></button></footer></div>');
d=l.find(".message");
g=l.find(".confirm");
f=l.find(".cancel");
l.appendTo(p)
}function r(){var w=c(".prompt-overlay");
w.removeClass("hidden");
w.find("button:first").select().focus()
}function t(){c(".prompt-overlay").addClass("hidden");
c(j).focus()
}function v(w){return w===i.keyCodes.pointer||w===i.keyCodes.mouseFirst||w===i.keyCodes.enter
}function u(w,x){c(".prompt-overlay .confirm").off("click keydown").on("click keydown",function(y){y.preventDefault();
if(v(y.which)&&w){w();
t()
}});
c(".prompt-overlay .cancel").off("click keydown").on("click keydown",function(y){y.preventDefault();
if(v(y.which)&&x){x();
t()
}})
}function q(){s();
p.appendTo("body .master-wrapper > #content")
}h.pop=function(w){c(".prompt-overlay .message").html(w.message);
c(".prompt-overlay .confirm").html(w.confirmLabel||m);
c(".prompt-overlay .cancel").html(w.cancelLabel||b);
if(w.nofirst){g.detach().insertAfter(f)
}else{g.detach().insertBefore(f)
}if(w.noborder){f.attr("style","border:"+w.noborder)
}else{f.removeAttr("style")
}u(w.onConfirm,w.onCancel);
r()
};
h.init=function(){if(!o){o=true;
q()
}};
return h
}());
Cog.registerStatic({name:"prompt",api:{},sharedApi:n,externalApi:i,requires:[{name:"events.keyCodes",apiId:"keyCodes"}]})
}(COGjQuery,document));
Cog.component.premiumPageGreenflag=(function(f){var c={},d,b=false;
d=function(){if(window.innerWidth<640||(window.innerWidth===undefined&&f(window).width()<640)){b=true
}else{b=false
}};
d();
f(window).resize(d);
c.options={DOM:{},changeOptionTable:function(h){var g=function(s){var q=s.find("tr"),o=null,p=null,n=null,m,i,j=s.find(".input-radio input"),r=s.find(".input-radio label"),l=s.find(".input-button button");
q.each(function(t){if(t===q.length-2){f(this).find("th").addClass("last");
f(this).find("td").addClass("last")
}else{if(t===q.length-1){f(this).addClass("button-row")
}}});
l.each(function(t){f(this).unbind().on("click",function(){j.eq(t).click();
return false
})
});
r.click(function(t){if(b){t.preventDefault()
}});
j.each(function(){if(f(this)[0].checked){o=f(this).parent().parent().index()-1
}f(this).data("option",f(this).parent().parent().index()-1)
}).change(function(){i(o);
if(s.hasClass("bothCars")){var t=f(this),u=f(".twocar").filter(function(){return f(this).find("td").find("input").filter(t).length>0
}).index();
if(u===2){p=f(this).data("option")
}if(u===3){n=f(this).data("option")
}}else{o=f(this).data("option")
}m()
});
f(".toggleSecondCar input").change(function(){s.toggleClass("bothCars");
if(b){s.toggleClass("disable-table")
}Cog.fireEvent("equalHeights","/update/");
s.find("tr").each(function(){f(this).find("input").attr("checked",false)
});
i(o);
i(p);
i(n);
o=null;
p=null;
n=null
});
i=function(t){if(typeof p==="number"){q.each(function(u){if(u===2){f(this).find("td").removeClass("chosen")
}})
}if(typeof n==="number"){q.each(function(u){if(u===3){f(this).find("td").removeClass("chosen")
}})
}if(typeof o==="number"){q.each(function(u){if(u===0){f(this).find("th").eq(t+1).removeClass("chosen")
}f(this).find("td").eq(t).removeClass("chosen")
})
}};
m=function(){if(typeof p==="number"){q.each(function(t){if(t===2){f(this).find("td:eq("+p+")").addClass("chosen")
}})
}if(typeof n==="number"){q.each(function(t){if(t===3){f(this).find("td:eq("+n+")").addClass("chosen")
}})
}if(typeof o==="number"){q.each(function(t){if(t===0){f(this).find("th").eq(o+1).addClass("chosen")
}f(this).find("td:eq("+o+")").addClass("chosen")
})
}}
};
h.each(function(){g(f(this))
})
},set:function(){var g=f(".your-quote-table");
if(g.length){this.changeOptionTable(g)
}}};
c.init=function(g){if(!g.length){return
}c.options.set()
};
return c
}(COGjQuery));
Cog.register({name:"premiumPageGreenflag",api:Cog.component.premiumPageGreenflag,selector:"div.your-quote-table"});
(function(d,b){var c={},h={nBox:null};
function g(v,n){var q={},r=true,o,j,p,s,u=null;
function l(){if(u==null){u=d.Deferred()
}return u
}function m(){l();
return u.promise()
}function w(){if(u!=null){u.resolve();
u=null
}}function t(){var x={$content:n.message,closabe:true,isAjaxRequest:true,handler:false,shouldScroll:false};
if(!r){o=parseInt(n.minimumDisplayTime,10);
if(o>0){j=new Date().getTime()
}h.nBox.create(x)
}}q.show=function(){l();
r=false;
if(n.displayModalAfterTime>0){setTimeout(t,n.displayModalAfterTime)
}else{t()
}};
q.hide=function(){var x,y=m();
r=true;
if(o>0){p=new Date().getTime();
s=p-j;
if(s>o*1000){h.nBox.destroy();
w()
}else{x=(o*1000-s);
setTimeout(function(){h.nBox.destroy();
w()
},x)
}}else{h.nBox.destroy();
w()
}return y
};
return q
}function f(){var j={};
j.show=d.noop;
j.hide=function(){var l=d.Deferred();
l.resolve();
return l.promise()
};
return j
}function i(j,p){var n=null,m=j.find("> .modalConfiguration"),o=m.data()||{},l=o.modalConfiguration;
if(!d.isEmptyObject(l)&&l.displayed){n=g(j,l)
}else{if(p===true){n=f()
}}return n
}Cog.registerStatic({name:"processingHandler",api:{},sharedApi:i,externalApi:h,requires:[{name:"nBox",apiId:"nBox"}]})
}(COGjQuery,document));
(function(i,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{submit:"submit"}}},j={formElement:null},f={CoverOptions:null},d=false;
function h(){var l=Cog.Type.extend(j.formElement.Element,{view:null,$options:null,$selects:null,$firstToggles:null,$secondToggles:null,$bothCars:null,$differentCars:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m);
this.afterRender()
}},afterRender:function(){this.$options=this.$scope.find("input");
this.$selects=this.$scope.find("select");
this.$selects.on("change",i.proxy(this.onClicked,this));
this.initComp()
},onClicked:function(m){m.preventDefault()
},checkToggleState:function(){if(this.$firstToggles.prop("checked")==true){this.$bothCars.show();
this.$differentCars.hide()
}else{if(this.$secondToggles.prop("checked")==true){this.$bothCars.hide();
this.$differentCars.show()
}else{this.$bothCars.show();
this.$differentCars.hide()
}}},initComp:function(){this.$firstToggles=this.$scope.find("#firstInput");
this.$secondToggles=this.$scope.find("#secondInput");
this.$differentCars=this.$scope.find(".diferent-cars");
this.$bothCars=this.$scope.find(".both-cars");
var m=this;
this.$firstToggles.click(function(){m.checkToggleState()
});
this.$secondToggles.click(function(){m.checkToggleState()
});
if(this.$firstToggles.prop("checked")==false&&this.$secondToggles.prop("checked")==false){this.$firstToggles.prop("checked",true);
this.$bothCars.show();
this.$differentCars.hide()
}else{m.checkToggleState()
}}});
f.CoverOptions=l
}g.onRegister=function(l){l.element=new f.CoverOptions(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
h()
}};
Cog.registerComponent({name:"coverOptions",api:g,externalApi:j,selector:"div.coverOptions",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(){var b={enter:13,keyLeft:37,keyUp:38,keyRight:39,keyDown:40,escape:27,tab:9,pointer:0,mouseFirst:1,mouseMiddle:2,mouseThird:3};
Cog.statics=Cog.statics||{};
Cog.statics.keyCodes=b;
Cog.registerStatic({name:"events.keyCodes",api:{},sharedApi:b})
}());
(function(c){var b=(function(){var g={},j=true,f=navigator.userAgent;
function h(m,n){return function(p){var o=true;
c.each(m,function(r,q){if(p.which===q){n(p);
o=false
}return o
})
}
}function l(m,n){return function(p){var o=true;
c.each(m,function(r,q){if(p.which===q){o=false
}return o
});
if(o){n()
}}
}function d(m,n){if(!j&&g.isBlackberry()){n()
}j=false
}function i(m){return function(o){var n=true;
c.each(m,function(q,p){if(o.which===p){n=false
}});
if(g.isBlackberry()&&n){j=true
}}
}g.isBlackberry=function(){if(f.indexOf("BlackBerry")>=0&&f.indexOf("WebKit")>=0){return true
}else{return false
}};
g.keyUpBlackberry=function(m,n){return d(m,n)
};
g.keyDownBlackberry=function(m){return i(m)
};
g.onKey=function(n,m){return h(m,n)
};
g.onAllKeysExcept=function(n,m){return l(m,n)
};
return g
}());
Cog.registerStatic({name:"events.keyExecutor",api:{},sharedApi:b})
}(COGjQuery));
Cog.component.table=(function(g,l,d){var j={},q={left:'<a href="" class="icon-arrow-left"></a>',right:'<a href="" class="icon-arrow-right"></a>',panel:'<span class="option-text">Option {{count}} of {{total}}</span>'},n=false,r,p=false,o,i=false,c=false,h=0;
function b(){var s=false;
if(d.mq("(max-width: 640px)")){if(!n){n=true;
s=true
}if(!c){Cog.fireEvent("table","/sizeChange/")
}}if(d.mq("(min-width: 640px)")){if(n){n=false;
s=true
}}if(s){Cog.fireEvent("table","/viewportChange/")
}}function f(s){var J=s.width(),A=s.find("table"),H,B,z=s.find("tr:first th"),O=s.find("td"),C=s.find("th"),K=s.find("tr"),t=z.length,w=false,D,G=false,N,P,L,I,M,F,v,u,E,y,x;
L=function(){var Q=z.filter(".brkdownchosen").index();
if(Q<0){Q=z.filter(".chosen").index()
}return Q>-1?Q:1
};
I=function(Q){u+=Q;
A.css({left:((-1*u)*J)});
H.css({left:(u*J)});
return false
};
x=function(){if(!g.contains(l,s[0])){Cog.removeListener(E);
Cog.removeListener(y);
s.remove();
return false
}return true
};
v=function(){if(x()&&G){A.css({height:"auto",width:"100%"});
s.css({height:"auto",width:"100%"});
J=s.width();
z.each(function(){g(this).width(J)
});
A.width(J*t).css({left:((-1*u)*J)});
H.width(J-B).css({left:(u*J)});
Cog.fireEvent("equalHeights","/update/")
}};
D=function(){w=true;
A.height("auto");
A[0].style.width="100%";
s.height("auto");
s[0].style.width="100%";
z.each(function(Q){if(Q===0){g(this).width(86)
}else{g(this).width(66)
}});
if(g("div.breakdown-cover").find("tr.mostPopular").length===0){g("div.breakdown-cover").find("tbody").prepend(r)
}};
N=function(){var Q="";
G=true;
K.each(function(T){var S=g(this).find("td[colspan]"),W=g(this).find("td button"),U=g(this).find("td").first().text(),R=g(this).find("td").first().html(),V="";
if(T===K.length-1){if(S.length>0){S.wrapInner('<span class="colspan-value"></span>');
return
}if(W.length>0){return
}}if(T===0){return
}if(R&&R.indexOf("data-recording-mask")>0){V="data-recording-mask"
}g(this).find("td").each(function(){g(this).wrapInner('<span class="value"></span>');
g(this).prepend('<span class="cell-heading" '+V+">"+U+"</span> ")
})
});
H=A.find(".colspan-value");
B=H.closest("td").outerWidth()-H.width();
z.each(function(R){var S=g(this);
if(R===0){Q=this.innerText||this.textContent;
return
}S.append(q.panel.replace("{{count}}",R).replace("{{total}}",t-1));
if(0!==S.closest(".excessesFormElement").length){S.wrapInner('<span class="fake-field-label equal-heights-target"></span>')
}if(R>1){S.append(q.left)
}if(R<t-1){S.append(q.right)
}S.find(".icon-arrow-left").on("click",function(T){T.preventDefault();
I(-1)
});
S.find(".icon-arrow-right").on("click",function(T){T.preventDefault();
I(1)
})
})
};
M=function(S){var Q,R;
S.each(function(){Q=g(this);
R=Q.attr("width");
if(R){Q.attr("width","");
Q.data("width",R)
}})
};
F=function(S){var Q,R;
S.each(function(){Q=g(this);
R=Q.data("width");
if(R){Q.attr("width",R)
}})
};
P=function(){if(x()){u=L();
var Q=s.find("tr.mostPopular");
if(n){if(Q.length>0){r=Q;
Q.detach();
z=s.find("tr:first th");
K=s.find("tr")
}s.addClass("mobile-table");
A.width(J*t).css({left:((-1*u)*J)});
w=false;
M(C);
M(O);
if(!G){N()
}v()
}else{s.removeClass("mobile-table");
if(!w){D()
}F(C);
F(O);
Cog.fireEvent("equalHeights","/update/")
}}};
P();
E=Cog.addListener2("table","/sizeChange/",v);
y=Cog.addListener2("table","/viewportChange/",P)
}function m(){window.clearTimeout(o);
o=window.setTimeout(b,h)
}j.init=function(s){var t=s.filter(function(){return !g(this).parents(".lightbox").length
});
if(undefined!==t&&t.length){if(g(".body").hasClass("ie7")){return
}c=true;
b();
t.each(function(){f(g(this))
});
if(!p){g(window).on("resize",m);
p=true
}if(!i){g(window).on("orientationchange",function(){Cog.fireEvent("table","/sizeChange/")
});
i=true
}c=false;
Cog.addListener2("nBox","loaded",function(){Cog.fireEvent("table","/sizeChange/")
})
}};
return j
}(COGjQuery,document,Modernizr));
Cog.register({name:"table",api:Cog.component.table,selector:"div.table:not(.long)"});
Cog.component.simpleTable=(function(f,n){var j={},p=false,l=false,b=false,r,q,h,g=153,s;
function m(){return window.matchMedia("(max-width: 767px)").matches||f("html").hasClass("ie8")
}function c(){if(m()){if(!l){l=true;
Cog.fireEvent("simpleTable","smallScreenDetected")
}else{if(b){Cog.fireEvent("simpleTable","changed")
}}}else{l=false
}}function i(){if(!b){b=true
}}function d(u){var t,w,v=false;
s=u.find("table");
t=function(){var A,x,F,G=s.find("tbody tr"),C=G.first().find("td").length,E=G.length,D="",z,B={},H,y;
F=function(){var I,J;
if(!B[this]){I=f("#"+this);
J=I.attr("scope").trim();
B[this]={scope:J,html:I.html()}
}if(!!B[this].scope){z[B[this].scope]=B[this].html
}};
x=function(I,L){var K,J;
if(I===y){if(0===H){D+="<table>"
}K=f(L);
z={};
J=K.attr("headers").trim().split(/\s+/);
f.each(J,F);
if((0===H)&&!!z.col){D+="<caption>"+z.col+"</caption>"
}if(0===H){D+="<tbody>"
}D+="<tr>";
if(!!z.row){D+='<th scope="row">'+z.row+"</th>"
}else{D+="<th></th>"
}D+="<td>"+K.html()+"</td>";
D+="</tr>";
if(E===(H+1)){D+="</tbody></table>"
}}};
A=function(I,J){H=I;
f(J).find("td").each(x)
};
for(y=0;
y<C;
y=y+1){G.each(A)
}s.closest(".simple-table").append('<div class="small-screen">'+D+"</div>")
};
w=function(){if(l&&((!v)||(v&&b))){t();
v=true;
b=false
}};
if(undefined===r){r=Cog.addListener2("simpleTable","smallScreenDetected",w)
}if(undefined===q){q=Cog.addListener2("simpleTable","changed",w)
}}function o(){window.clearTimeout(r);
r=window.setTimeout(c,g)
}j.init=function(t){if(undefined!==t&&t.length){if(f("html").attr("class").match(/\bie[678]\b/)){return
}t.first().each(function(){d(f(this))
});
c();
if(undefined===h){h=Cog.addListener2("premiumPage.container","excessChanged",i)
}if(!p){f(window).on("resize",o)
}p=true
}};
return j
}(COGjQuery,document));
Cog.register({name:"simpleTable",api:Cog.component.simpleTable,selector:"div.simple-table"});
Cog.component.multiCarDiscount=(function(c){var b={};
function d(g){var h=c("#delete",g),f=c("#deleteCar3",g),i=c("#findCar",g);
h.on("click",function(j){j.preventDefault();
g.find("#car2").hide()
});
f.on("click",function(j){j.preventDefault();
g.find("#car3").hide()
});
i.on("click",function(j){j.preventDefault();
g.find(".car3-details").removeClass("hidden");
g.find(".find-car-row").addClass("hidden")
});
c("#car3 select").on("change",function(){g.find(".car3-month").removeClass("hidden");
c("#car3 .select-row").hide();
g.find(".month-selected").append(c(this).val())
})
}b.init=function(f){f.each(function(){d(c(this))
})
};
return b
}(COGjQuery));
Cog.register({name:"componentMultiCarDiscount",api:Cog.component.multiCarDiscount,selector:"div.multi-car-discount"});
Cog.component.textDisplayOnly=Cog.component.textDisplayOnly||{};
(function(i,c){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null},g={TextDisplayOnly:null},f=false;
function b(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
g.TextDisplayOnly=l
}h.onRegister=function(l){l.element=new g.TextDisplayOnly(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
b()
}};
Cog.registerComponent({name:"textDisplayOnly",api:h,externalApi:j,selector:"div.textDisplayOnly",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
Cog.component.information=Cog.component.information||{};
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null},f={Information:null},d=false;
function i(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
f.Information=l
}g.onRegister=function(l){l.element=new f.Information(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized);
this.markLastComponent(l)
};
g.markLastComponent=function(m){var l=m.last();
if(l.index()>1){l.addClass("last")
}};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
i()
}};
Cog.registerComponent({name:"information",api:g,externalApi:j,selector:".information",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
Cog.component.conditionalContainer=Cog.component.conditionalContainer||{};
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{enableElements:"enableElements",disableElements:"disableElements"}}},i={formElement:null,loader:null},f={ConditionalContainer:null},d=false;
function j(){var l=Cog.Type.extend(i.formElement.Element,{hiddenClass:"hidden",isContainerAttached:true,$container:null,$featherlightcontaier:null,initialize:function(){l.superclass.initialize.call(this);
this.$container=this.$scope.find(".container-function")
},processState:function(m){if(m){this.updateContainer(m.visible)
}},updateContainer:function(m){var n=c.form;
if(m){this.$container.removeClass(this.hiddenClass);
Cog.fireEvent("abTesting","domUpdated",{scope:this.$scope})
}if(m&&!this.isContainerAttached){Cog.fireEvent(n.name,n.events.enableElements,{$scope:this.$container});
this.$scope.append(this.$container);
this.isContainerAttached=true
}else{if(!m&&this.isContainerAttached){this.$container.detach();
Cog.fireEvent(n.name,n.events.disableElements,{$scope:this.$container});
this.isContainerAttached=false
}}},unregister:function(){l.superclass.unregister.call(this);
if(!this.isContainerAttached){Cog.finalize(this.$container)
}}});
f.ConditionalContainer=l
}g.onRegister=function(l){l.element=new f.ConditionalContainer(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
j()
}};
Cog.registerComponent({name:"conditionalContainer",api:g,externalApi:i,selector:"div.conditionalContainer",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"elements.loader",apiId:"loader"}]})
}(COGjQuery,document));
(function(f,i){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},journeyContext:{name:"elements.journeyContext",events:{changed:"changed"}}},j=false,h={eventsUtil:null,element:null,journeyContext:null},b={Captcha:null};
function l(m){var o=0,n=new RegExp("[\\?&]"+m+"=([^&#]*)").exec(window.location.href);
if(n!==null&&n[1]){o=n[1]
}return o
}function d(){var m=Cog.Type.extend(h.formElement.Element,{captchaUrl:"/bin/dlg/site/captcha",journeyIdParam:"jcid",noCachingParam:"noimgcaching",$captchaImg:null,$refreshButton:null,view:null,initialize:function(){m.superclass.initialize.call(this);
Cog.addListener2("elements.stateProvider","allElementsUpdated",this.appendGoogleCaptchaScript);
this.view=this.viewFactory.create(this.$scope);
this.bindErrorsUpdate();
this.bindJourneyContextUpdate()
},bindErrorsUpdate:function(){var n=new h.eventsUtil.Handler(this.captchaRefresh).when(this.hasCaptchaImage).withScope(this);
this.eventsManager.on("forms.validation.errorPresenter","update").execute(n.executor).withScope(n).bind()
},bindJourneyContextUpdate:function(){var n=c.journeyContext,o=new h.eventsUtil.Handler(this.onJourneyContextChanged).when(this.view.wasRendered.bind(this.view)).withScope(this);
this.eventsManager.on(n.name,n.events.changed).execute(o.executor).withScope(o).bind()
},processState:function(n){if(n){this.unbindCaptcha();
this.view.render(n);
this.initializeCaptcha();
this.captchaRefresh()
}},onJourneyContextChanged:function(){this.processState({visible:true})
},initializeCaptcha:function(){this.$refreshButton=this.$scope.find(".form-captcha-refresh");
this.$captchaImg=this.$scope.find(".captchaimg");
this.$refreshButton.on("click",f.proxy(this.captchaRefresh,this))
},unbindCaptcha:function(){if(this.$refreshButton){this.$refreshButton.off()
}},hasCaptchaImage:function(){return this.$captchaImg&&this.$captchaImg.length
},captchaRefresh:function(){var n={};
n[this.journeyIdParam]=h.journeyContext.current();
n[this.noCachingParam]=new Date().getTime();
n.path=this.$captchaImg.data("ref");
this.$captchaImg.attr("src",this.captchaUrl+"?"+f.param(n));
return false
},appendGoogleCaptchaScript:function(){var o=f(".captcha").find(".g-recaptcha"),n="https://www.google.com/recaptcha/api.js",p='<script src="'+n+'"><\/script>';
if(o.length){f("head").append(p)
}}});
b.Captcha=m
}g.onRegister=function(m){var n=new b.Captcha(m.$scope);
m.formElement=n
};
g.onUnregister=function(m){m.formElement.unregister()
};
g.init=function(m){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!j){j=true;
d()
}};
Cog.registerComponent({name:"forms.elements.captcha",api:g,externalApi:h,requires:[{name:"commons.eventsUtil",apiId:"eventsUtil"},{name:"forms.elements.element",apiId:"formElement"},{name:"elements.journeyContext",apiId:"journeyContext"}],selector:"div.captcha"})
}(COGjQuery,document));
(function(i,c){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},f=false,j={element:null},g={ErrorPageContent:null};
function b(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
g.ErrorPageContent=l
}h.onRegister=function(l){var m=new g.ErrorPageContent(l.$scope);
l.formElement=m
};
h.onUnregister=function(l){l.formElement.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
b()
}};
Cog.registerComponent({name:"errorPageContent",api:h,externalApi:j,requires:[{name:"forms.elements.element",apiId:"formElement"}],selector:"div.errorPageContent"})
}(COGjQuery,document));
(function(h,j){var i={},f={noCookiesClass:"no-cookies",cookiesEnabledClass:"cookies-enabled"},d={stateProvider:{name:"elements.stateProvider",events:{disable:"disable"}}},g,l=false;
function b(){var n="gCStest="+Math.floor(Math.random()*100000000),m;
Cog.Cookie.create("test",n,5);
m=Cog.Cookie.read("test")==n;
Cog.Cookie.erase("test");
return m
}function c(n){var m=h("html");
m.addClass(f.noCookiesClass);
m.removeClass(f.cookiesEnabledClass);
n.removeClass(f.cookiesEnabledClass)
}(function(){g=b();
if(!g){Cog.fireEvent(d.stateProvider.name,d.stateProvider.events.disable)
}}());
i.init=function(m){if(!g&&m.length){c(m)
}};
Cog.register({name:"noCookiesMessage",api:i,selector:"div.no-cookies-form-header",requires:[d.stateProvider.name]})
}(COGjQuery,document));
Cog.component.totalPrice=Cog.component.totalPrice||{};
(function(i,b){var h={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null},g={Totalprice:null},f=false;
function d(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
g.Totalprice=l
}h.onRegister=function(l){l.element=new g.Totalprice(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!f){f=true;
d()
}};
Cog.registerComponent({name:"totalPrice",api:h,externalApi:j,selector:"div.totalPrice",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(f,c){var d={},b={};
b.reloadOnCache=function(){var g=false;
window.onpageshow=function(h){if(h.persisted){g=true
}};
window.onpopstate=function(h){if(g){location.reload()
}};
window.addEventListener("pageshow",function(h){if(h.persisted){setTimeout(function(){window.location.reload()
},10)
}},false)
};
Cog.registerStatic({name:"persistentCache",api:d,sharedApi:b})
}(COGjQuery,document));
Cog.component.ie8Advice=(function(d,f){var c={},b="ie8AdviceClosed";
c.$notification=null;
c.openNotification=function(g){g.show()
};
c.closeNotification=function(g){if(f.localstorage){window.localStorage.setItem(b,true)
}g.hide()
};
c.bindUI=function(g){g.on("click",".toggle",function(h){h.preventDefault();
this.closeNotification(g)
}.bind(this))
};
c.isManuallyClosed=function(){var g=false;
if(f.localstorage&&window.localStorage.getItem(b)!=null){g=true
}return g
};
c.init=function(i){var h=(d.browser.msie&&parseInt(d.browser.version,10)===8),g=this.isManuallyClosed();
if(h&&!g){this.openNotification(i);
this.bindUI(i)
}};
return c
}(COGjQuery,Modernizr));
Cog.register({name:"ie8Advice",api:Cog.component.ie8Advice,selector:"div.notice-ie8advice"});
Cog.component.mileageCalculator=Cog.component.mileageCalculator||{};
(function(f,j){var g={},h=false,l={calculateMileageOpenLink:".calculate-mileage-expand",calculateCloseLink:".calculate-mileage-collapse",calculateAddButton:".mileage-calculator-add-button",milesPerWeek:".weekday-container input",milesPerWeeked:".weekend-container input",milesPerHoliday:".holiday-container input",roundedMileage:".label-rounded-mileage",totalMileage:".label-total-mileage",dropDown:"select"},b={dropDownExtended:{name:"dropDownExtended",events:{emitOptions:"emitOptions",open:"open",close:"close"}}},c={name:"mileageCalculator",events:{emitOptions:"emitOptions",setDropDownValue:"setDropDownValue",open:"open",close:"close"}},i={pageScroller:null};
function d(C){var s,x=C.find(l.milesPerWeek),I=C.find(l.milesPerWeeked),m=C.find(l.milesPerHoliday),r=C.find(l.roundedMileage),t=C.find(l.totalMileage),q=C.find(l.calculateAddButton),p=[1000,2000,3000];
function w(L){s=L.eventData.$scope;
p=L.eventData.options
}function y(){x.val("");
I.val("");
m.val("");
r.html("0");
t.html("0")
}function K(N,M,L){return((N*5*52)+(M*52)+L)
}function o(L){return(Math.ceil(L/1000)*1000)
}function G(N,M,L){return(N>=0&&M>=0&&L>=0)?true:false
}function D(M,L){_.each(L,function(N){if(N.trim().length>0&&N>=M){M=N;
return false
}});
return M
}function z(L){return window.parseInt(L,10)||0
}function v(M,L){return M-L
}function J(L){var O,M,N,P;
O=z(p[0]);
M=z(p[p.length-1]);
N=L>=O&&L<=M;
P=x.val()>=0&&I.val()>=0&&m.val()>=0;
return N&&P
}function u(){var M=z(r.html()),L=p.sort(v);
if(x.val().trim()||I.val().trim()||m.val().trim()){if(f.inArray(M,L)<0){M=D(M,L)
}}return M
}function H(M,N){var O,L=M.siblings("label");
O=M.find('option[value="'+N+'"]');
L.html(O.text()||"")
}function n(){var L=u();
if(J(L)){Cog.fireEvent(c.name,c.events.setDropDownValue,{$scope:s,value:L});
Cog.fireEvent(c.name,c.events.close,{$scope:s});
i.pageScroller.basicScroller.scrollTo(s,1000)
}}function A(L){if(L){L.eventData.$scope.find(C).show()
}else{C.show()
}}function B(L){if(L){L.eventData.$scope.find(C).hide()
}else{C.hide()
}y()
}function E(N,M,L){var O;
if(G(N,M,L)){O=K(N,M,L);
t.html(O);
r.html(o(O))
}}function F(L){q.on("click",n);
Cog.addListener2(b.dropDownExtended.name,b.dropDownExtended.events.emitOptions,w);
Cog.addListener2(b.dropDownExtended.name,b.dropDownExtended.events.open,A);
Cog.addListener2(b.dropDownExtended.name,b.dropDownExtended.events.close,B);
L.hide();
L.on("keyup","input",function(P){var O=z(x.val()),N=z(I.val()),M=z(m.val());
E(O,N,M)
})
}F(C)
}g.init=function(m){if(!h){m.each(function(){d(f(this))
});
h=true
}};
Cog.register({name:"mileageCalculator",api:g,externalApi:i,requires:[{name:"forms.form.pageScroller",apiId:"pageScroller"}],selector:"div.mileageCalculator"})
}(COGjQuery));
(function(h,b,j){var g={},d={name:"progressIndicator",event:{changed:"changed",loaded:"loaded"}},i={detailsPageClass:".details-page"},f={ProgressIndicator:null};
function c(l){f.ProgressIndicator={$inputRow:null,$input:null,$manualLookup:null,countableFields:[],filledFields:[],progress:null,minProgress:40,detailsPage:null,fieldTypes:[],initialize:function(){Cog.addListener2("analytics.sitecatalyst.launcher","firedInstantly",this.setFields.bind(this))
},setFields:function(){this.$inputRow=h(".row-container");
this.$input=this.$inputRow.find(":input").not("button").not('input[type="submit"]').not('input[type="hidden"]');
this.$manualLookup=this.$inputRow.find(".vehicle-select-manually-btn");
this.detailsPage=h(i.detailsPageClass);
this.fieldTypes=[{type:"container",cssClass:".input-container"},{type:"date",cssClass:".date-row-options"},{type:"select",cssClass:".select"},{type:"text",cssClass:".input-text"},{type:"captcha",cssClass:".input-captcha"},{type:"number",cssClass:".input-number"},{type:"email",cssClass:".input-email"},{type:"radio",cssClass:".radio-row-options"},{type:"checkbox",cssClass:".input-checkbox"}];
this.checkEnableState();
this.bindEvents();
this.calculateProgress();
this.setInitialProgress()
},checkEnableState:function(){if(this.detailsPage.length&&!this.isMobile()){l.removeClass("hidden");
l.parent().removeClass("hidden")
}else{l.addClass("hidden");
l.parent().addClass("hidden")
}},setInitialProgress:function(){if(this.progress>this.minProgress){Cog.fireEvent(d.name,d.event.loaded)
}},isMobile:function(){return window.matchMedia("(max-width: 990px)").matches
},bindEvents:function(){this.$input.on("focusout",function(n,m){this.calculateProgress(n,m)
}.bind(this));
this.$manualLookup.on("click",function(m){this.calculateProgress(m)
}.bind(this));
h(window).on("resize",_.throttle(this.checkEnableState.bind(this),300))
},calculateProgress:function(n,m){if(!m){this.getCountableFields();
this.getFilledFields();
if(this.countableFields.length!==0){this.progress=Math.round((this.filledFields.length/this.countableFields.length)*100);
this.updateProgress()
}}},getCountableFields:function(){this.countableFields=[];
_.each(this.$inputRow,function(m){this.processRow(m)
},this)
},processRow:function(o){var m=h(o),n;
_.each(this.fieldTypes,function(p){if(m.find(p.cssClass).length!==0){if(this.isNotExcluded(m)){n=this.getInputState(o,p.type);
this.countableFields.push({input:o,isFilledIn:n,type:p.type})
}return false
}}.bind(this))
},isNotExcluded:function(o){var m=h(o),n=m.find(":input").not("button").not('input[type="submit"]').not('input[type="hidden"]');
if(!n.parents(".lookup-form").length&&!m.find(".gender").length&&!m.find(".analytics-visitor-value").not('[data-analytics-visitor-value="visitorAgeValue"]').length&&!m.find('input[name="van"]').length&&!o.data("optional")&&!m.find('input[name="formField.sendOffersByEmail"]').length){return true
}},getInputState:function(s,r){var q=h(s).find(":input").not("button").not('input[type="submit"]').not('input[type="hidden"]'),n=q.closest(".select").find("label"),p,m=false,o;
switch(r){case"container":if(q.filter('[type="checkbox"]:checked').length){m=true
}else{if(q.filter("select").length){n.each(function(u,t){if(h(this).text()){m=true
}else{m=false;
return false
}})
}}return m;
case"select":p=q.val();
return !!p;
case"date":n.each(function(u,t){if(h(this).text()){m=true
}else{m=false;
return false
}});
return m;
case"text":return !!q.attr("disabled")||!!q.val();
case"email":return !!q.val();
case"captcha":return !!q.val();
case"number":return !!q.val();
case"radio":o=q.attr("name");
return !!h('[name="'+o+'"]:checked').length;
case"checkbox":return !!q.prop("checked")
}},getFilledFields:function(){this.filledFields=_.filter(this.countableFields,function(m){return m.isFilledIn
},this)
},updateProgress:function(){var q=h(".indicator"),n=h(".outer"),p=h(".progressIndicator-inner"),m=h(".percentage"),o=m.data("complete");
n.data("progress",this.progress);
m.text(this.progress+"% "+o);
p.css({width:this.progress+"%"})
}}
}g.init=function(l){if(l.length){c(l);
f.ProgressIndicator.initialize()
}};
Cog.register({name:"progressIndicator",api:g,selector:".progressIndicator"})
}(COGjQuery,document,Modernizr));
(function(g,l){var i={},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{restoreElementsState:"restoreElementsState",enableValidation:"enableValidation",disableValidation:"disableValidation",enableElements:"enableElements",disableElements:"disableElements"}}},n=false,j={element:null},b={CheckboxWithContainers:null},h={},d=[];
function m(){var o=Cog.Type.extend(j.element.Element,{values:null,input:null,checkbox:null,$containerHeader:null,$containerContent:null,$subfields:null,initialize:function(){o.superclass.initialize.call(this);
this.initializeConfiguration();
this.initializeContainers();
this.initializeCheckboxes();
this.initializeEventListeners()
},initializeEventListeners:function(){if(this.$subfields.length){Cog.addListener2("forms.validation.errorPresenter","update",this.onValidationError.bind(this));
Cog.addListener2("forms.form","validationFailed",this.onValidationError.bind(this))
}},initializeConfiguration:function(){this.values={};
this.values.on=this.configuration.get().optionValueOn||"on";
this.values.off=this.configuration.get().optionValueOff||"off"
},initializeCheckboxes:function(){this.checkbox=this.fields.findAndCreate("input[type=checkbox]",this.$scope);
this.input=this.fields.findAndCreate("input[type=hidden]",this.$scope);
if(this.checkbox){this.checkbox.$label=this.$scope.find("label");
this.checkbox.$label.on("click",function(){});
this.checkbox.$errorTemplate=this.$scope.find("script");
this.checkbox.on("focusout",g.proxy(this.focusout,this));
this.checkbox.on("change",g.proxy(this.onCheckboxChanged,this));
this.checkbox.nameChangedHandler(this.onCheckboxNameChanged,this)
}if(this.input){this.input.nameChangedHandler(this.onInputNameChanged,this)
}},initializeContainers:function(){this.$expandableButton=this.$scope.find(".expandable-button");
this.$containerContent=this.$scope.find(".checkbox-with-containers-parsys");
this.$subfields=this.$scope.find(".checkbox-with-containers-parsys").find("input, select");
this.$expandableButton.on("click",g.proxy(this.onExpandableButtonClicked,this))
},focusout:function(){setTimeout(g.proxy(this.validate,this),200)
},onValidationError:function(q){var p=false;
_.each(q.eventData.errors,function(s,r){if(this.$subfields.is('[name="'+r+'"]')){p=true
}}.bind(this));
if(p){this.handleContainers(true,false)
}},processState:function(r){var p=r?r.parameters:{},q=null;
if(this.input){q=p[this.input.getName()]
}if(q&&this.checkbox){this.checkbox.setValue(q===this.values.on)
}this.handleContainers(q===this.values.on,true)
},removeErrors:function(){this.$scope.removeClass("error");
this.$scope.find(".error").removeClass("error");
this.$scope.find("div.error-message").hide()
},handleContainers:function(p,q){if(p){this.$containerContent.slideDown();
this.$scope.removeClass("collapsed").addClass("expanded");
if(q){this.handleSubfieldsEnable()
}}else{this.$containerContent.slideUp();
this.$scope.removeClass("expanded").addClass("collapsed");
if(q){this.handleSubfieldsDisable()
}}},handleSubfieldsEnable:function(){Cog.fireEvent(f.form.name,f.form.events.enableElements,{$scope:this.$scope,handleValidation:true});
this.$subfields.prop("disabled",false);
this.$subfields.parent().removeClass("disabled");
_.each(this.$subfields.filter('[type="hidden"]'),function(q){var p=g(q);
p.attr("value",p.attr("data-initial-value"))
})
},handleSubfieldsDisable:function(){Cog.fireEvent(f.form.name,f.form.events.disableElements,{$scope:this.$scope,restoreState:true,handleValidation:true});
this.$subfields.prop("disabled",true);
this.$subfields.parent().addClass("disabled");
_.each(this.$subfields.filter('[type="hidden"]'),function(q){var p=g(q);
if(!p.attr("data-initial-value")){p.attr("data-initial-value",p.val())
}p.attr("value","")
})
},onExpandableButtonClicked:function(){var p=!this.$scope.hasClass("expanded");
this.handleContainers(p,false);
if(!this.checkbox.getValue()&&!p){this.removeErrors()
}},onCheckboxChanged:function(){var q=!!this.checkbox.getValue(),p=q?this.values.on:this.values.off;
if(this.input){this.input.setValue(p)
}this.handleContainers(q,true);
this.removeErrors()
},onCheckboxNameChanged:function(){var p=this.checkbox.getName();
this.checkbox.attribute("id",p);
this.checkbox.$label.attr("for",p);
this.checkbox.$errorTemplate.attr("data-field-name",p)
},onInputNameChanged:function(){this.input.attribute("id",this.input.getName())
}});
b.CheckboxWithContainers=o
}function c(o){var p=o.find('input[type="checkbox"]');
return{value:p.is(":checked"),origin:p.attr("id")}
}h.getDataAndConfig=function(){return b.CheckboxWithContainers.superclass.getDataAndConfig(d,c)
};
i.onRegister=function(o){o.formElement=new b.CheckboxWithContainers(o.$scope)
};
i.onUnregister=function(o){o.formElement.unregister()
};
i.init=function(o){d=g(g.merge(d,o));
Cog.fireEvent(f.registry.name,f.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
if(!n){n=true;
m()
}};
Cog.registerComponent({name:"forms.elements.checkboxWithContainers",api:i,externalApi:j,sharedApi:h,requires:[{name:"forms.elements.element",apiId:"element"},"forms.elementsRegistry"],selector:".checkboxWithContainers"})
}(COGjQuery,document));
(function(g,b){var f={},c=false,d={SecondaryNavigation:null};
function h(j){var i={$scope:null,$list:null,$label:null,allowedPage:"contact-page",initialize:function(){this.$scope=j;
this.$list=this.$scope.find(".homepage-products-list");
this.checkIfMobile()
},checkIfMobile:function(){var l=g("body");
if(l.hasClass(this.allowedPage)&&window.matchMedia("only screen and (max-width: 760px)")){this.prepareMobileTemplate();
this.bindEvents()
}},prepareMobileTemplate:function(){var n=g("<div />").addClass("secondaryNavigation-dropdown"),l=g("<label />").addClass("secondaryNavigation-label"),m=this.$list.find(".active");
if(!this.$scope.hasClass("mobile-version")){l.text(m.text());
n.append(l);
this.$scope.prepend(n);
this.$label=n;
this.$scope.addClass("mobile-version")
}},bindEvents:function(){this.$label.on("click",this.toggleMobileMenu.bind(this));
g(window).on("resize",function(){_.debounce(this.checkIfMobile.bind(this),300)
}.bind(this))
},toggleMobileMenu:function(){this.$label.toggleClass("open");
this.$list.toggleClass("active")
}};
d.SecondaryNavigation=i
}f.init=function(i){if(i.length){h(i);
d.SecondaryNavigation.initialize();
c=true
}};
Cog.register({name:"SecondaryNavigation",api:f,selector:".secondaryNavigation"})
}(COGjQuery,document));
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={},f={stickyFooter:null},d=false;
function i(){var l=Cog.Type.extend(j.element.Element,{view:null,footerContent:null,footerWrap:null,footerTop:null,footerBottom:null,bottomMonthly:null,bottomSummary:null,buttonOpen:null,buttonClose:null,liveChat:null,forceShow:null,scrollPercent:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m);
this.attachElements();
this.attachEvents();
this.configValues();
this.stateValues(m)
}},attachElements:function(){this.footerWrap=this.$scope.find(".footerWrap");
this.footerContent=this.$scope.find(".content");
this.footerTop=this.$scope.find(".content .top");
this.footerBottom=this.$scope.find(".content .bottom");
this.buttonOpen=this.$scope.find(".top .action .open");
this.buttonClose=this.$scope.find(".top .action .close");
this.bottomMonthly=this.$scope.find(".bottom .monthly");
this.bottomSummary=this.$scope.find(".bottom .summary")
},attachEvents:function(){Cog.addListener2("elements.view","initialized",this.onPrepareStickyFooter.bind(this));
Cog.addListener2("elements.stateProvider","allElementsUpdated",_.throttle(this.onHandleScroll.bind(this),300));
h(window).on("resize orientationchange",this.onPrepareStickyFooter.bind(this));
h(window).on("scroll",this.onHandleScroll.bind(this));
this.buttonOpen.on("mousedown touchstart",_.throttle(this.onBtnOpenClick.bind(this),300));
this.buttonClose.on("mousedown touchstart",_.throttle(this.onBtnCloseClick.bind(this),300));
Cog.addListener("premiumPage.sticyFooter","coverType",this.onSelectionChange.bind(this));
Cog.addListener("premiumPage.sticyFooter","singleAncillaryProduct",this.onSelectionChange.bind(this));
Cog.addListener("premiumPage.sticyFooter","excesses",this.onSelectionChange.bind(this));
Cog.addListener("premiumPage.sticyFooter","breakdownCover",this.onSelectionChange.bind(this));
this.onLiveChatVisibilityCheck()
},onLiveChatVisibilityCheck:function(){var n=this,m=null;
setInterval(function(){n.liveChat=h(".LPMoverlay");
if(typeof(n.liveChat)=="undefined"){return
}if(m!=n.liveChat.is(":visible")){n.onLiveChatFix()
}m=n.liveChat.is(":visible")
},150)
},onLiveChatFix:function(){var o=this.footerWrap.css("position")==="fixed",n=this.buttonClose.is(":visible"),m=this.footerTop.innerHeight()+10,p=h(window).height()-50;
if(!o){this.liveChat.show();
this.liveChat.css("transition-duration","0.2s");
this.liveChat.css("bottom","0px")
}if(o&&!n){this.liveChat.show();
this.liveChat.css("transition-duration","0.2s");
this.liveChat.css("bottom",m+"px")
}if(o&&n){this.liveChat.css("transition-duration","0.2s");
this.liveChat.css("bottom",p+"px")
}},onSelectionChange:function(o){var q=o.eventData.key,p=o.eventData.value,m=o.eventData.selected,n=null;
if(q){q=q.trim().toLowerCase()
}n=this.$scope.find(".tick-list > ."+q);
if(n&&m){n.show();
n.text(p)
}if(n&&!m){n.hide()
}},configValues:function(){if(this.configuration.get().forceshow){this.forceShow=this.configuration.get().forceshow
}},stateValues:function(m){if(m.onlyAnnualVisible){this.bottomMonthly.hide();
this.bottomSummary.show()
}else{this.bottomMonthly.show();
this.bottomSummary.show()
}},onBtnOpenClick:function(m){var n=this.footerWrap.css("position")==="fixed";
m.stopImmediatePropagation();
m.preventDefault();
if(n){this.buttonOpen.hide();
this.buttonClose.show();
this.footerBottom.show();
this.onLiveChatFix()
}},onBtnCloseClick:function(m){var n=this.footerWrap.css("position")==="fixed";
m.stopImmediatePropagation();
m.preventDefault();
if(n){this.buttonClose.hide();
this.buttonOpen.show();
this.footerBottom.hide();
this.onLiveChatFix()
}},onPrepareStickyFooter:function(){var m=Cog.statics.wcmMode.isEdit(),n=this.footerWrap.css("position")==="fixed";
if(m||this.forceShow){this.buttonClose.hide();
this.buttonOpen.show();
this.footerWrap.show();
this.footerBottom.show()
}if(!m&&!n&&!this.forceShow){this.footerWrap.hide()
}},onHandleScroll:function(){var q=h(window).height(),m=q+h(window).scrollTop(),o=h(b).height(),n=Cog.statics.wcmMode.isEdit(),p=this.footerWrap.css("position")==="fixed";
if(m>0&&o>0){this.scrollPercent=(m/o)*100
}if(!n&&p&&this.scrollPercent>=21){this.buttonClose.hide();
this.buttonOpen.show();
this.footerWrap.show();
this.footerBottom.hide()
}else{if(!n&&p&&this.scrollPercent<21){this.footerWrap.hide()
}}}});
f.stickyFooter=l
}g.onRegister=function(l){l.element=new f.stickyFooter(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
i()
}};
Cog.registerComponent({name:"stickyFooter",api:g,externalApi:j,selector:"div.stickyFooter",requires:[{name:"elements.element",apiId:"element"},{name:"registry.elementsRegistry",apiId:"registry"}]})
}(COGjQuery,document));
(function(i,b){var h={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={},g={decibel:null},d=false;
function f(){var l=Cog.Type.extend(j.element.Element,{view:null,form:null,formName:null,formLabel:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}this.attachElements();
this.attachEvents();
this.formTagInput();
this.formTagEnable()
},attachElements:function(){this.form=this.$scope.find("form");
this.formName=this.$scope.find("input[name=decibel-form-name]");
this.formLabel=this.formLabels=i("label")
},attachEvents:function(){Cog.addListener2("form.errorPresenter","validationUpdate",this.formErrorTag.bind(this))
},formTagEnable:function(){if(this.form){this.form.attr("data-di-form-track","");
this.form.attr("data-di-form-id",this.formName)
}},formTagInput:function(){var q=null,p=null,o=null,n=null,m=null;
for(q=0;
q<this.formLabels.length;
q++){p=this.formLabels.get(q);
o=i(p).attr("for");
n=i(p).find("p");
if(o&&n&&n.text().length>0){m=i('input[id^="'+o+'"]');
this.formSubitemsAttr("data-di-field-id",m,o);
m=i('button[id^="'+o+'"]');
this.formSubitemsAttr("data-di-field-id",m,o);
m=i('select[id^="'+o+'"]');
this.formSubitemsAttr("data-di-field-id",m,o)
}}},formErrorTag:function(s){var r=s.eventData.classContainer,m=s.eventData.errorText,p=null,q=null,o=null,n=null,t=null;
q=i('div[class="'+r+'"]');
o=i(q).find("label").attr("for");
p=i(q).find('p[class^="error-text"]');
i(p).attr("data-di-field-error-for","");
n=i(q).find(":input").filter(":visible");
t=i(q).find(":radio").filter(":visible");
if(n){this.formSubitemsAttr("data-di-field-error-for",n,o)
}if(t){this.formSubitemsAttr("data-di-field-error-for",t,o)
}},formSubitemsAttr:function(m,o,n){var p=null,q=null;
if(!m||!o||o.length==0||!n){return
}for(q=0;
q<o.length;
q++){p=o.get(q);
i(p).attr(m,n)
}}});
g.decibel=l
}h.onRegister=function(l){l.element=new g.decibel(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
f()
}};
Cog.registerComponent({name:"decibel",api:h,externalApi:j,selector:"div.decibel",requires:[{name:"elements.element",apiId:"element"},{name:"registry.elementsRegistry",apiId:"registry"},{name:"commons.eventsUtil",apiId:"eventsUtil"}]})
}(COGjQuery,document));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.socialLinksTracker=(function(f,d,b){var c={};
function g(h){b.record({event:"socialLinkClick",values:{socialLinkValue:h.data.uci},collect:false,options:{obj:this,defaultLinkType:"e"},componentPath:h.data.rt})
}c.init=function(h){if(!b){return
}h.each(function(){var i=f(this),j={uci:i.data("analytics-uci"),rt:i.data("analytics-rt")};
if(j.uci){i.parent().find("a").click(j,g)
}})
};
return c
}(COGjQuery,window,window.CQ_Analytics));
Cog.register({name:"analytics.socialLinksTracker",api:Cog.component.analytics.socialLinksTracker,selector:"div.analytics-social"});
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.lastFieldInteracted=(function(h,m,b){var i={},f={lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setTrackingEnabled:"setTrackingEnabled",setJourneyEnabled:"setJourneyEnabled"}},stateProvider:{name:"elements.stateProvider",events:{noElementsDetected:"noElementsDetected",stateRedirect:"stateRedirect"}},redirectHandler:{name:"forms.form.response.handler",events:{handlerRedirect:"handlerRedirect"}},redirectJsonHandler:{name:"forms.form.response.redirectJsonHandler",events:{handlerRedirect:"handlerRedirect"}}},l={journeyStorage:null,fieldsTracking:null},r=false,q=true,o=true,n=false;
function t(){var u=h("span.analytics-config-userjourneytracking").first().data("analytics-custom-params");
return"vehicleYourDetailsLoad"==u||"pollyInterstitialPageLoad"==u
}function d(u){var v=l.journeyStorage.get("analytics.productNameStoredList")||[];
if(_.contains(v,"Motor")&&!_.contains(u,"journeyEnd")){u.push("journeyEnd");
_.pull(v,"Motor");
l.journeyStorage.put("analytics.productNameStoredList",v)
}}function j(A){if(q){var y=Cog.Cookie.read("dlg.lastFieldInteractedWith"),x,v=document.createElement("a"),z=false,w=[],u={};
v.href="";
if(t()){d(w)
}if(y){w.push("lastFieldInteracted");
u={lastFieldInteracted:y};
Cog.Cookie.erase("dlg.lastFieldInteractedWith");
if(n&&h.url().attr("path").indexOf("/quote/car/motor")==0){d(w)
}}if(l.journeyStorage.get("sendTrackingInCaseOfAbandonmentFlag")===true&&n){d(w);
w.push("abandonedListSubmission");
l.fieldsTracking.updateStoreDataForCurrentPage();
x=l.fieldsTracking.generateFieldsTrackingValues("abandoned:Y",false);
CQ_Analytics.PageDataMgr.data.link1=x
}if(w.length>0){b.record({event:w,values:u,collect:false,options:{obj:v,defaultLinkType:"o"},componentPath:"dlg/common/components/userJourneyFormFieldsTracking"});
z=true
}if(z){if(h.browser.msie&&parseInt(h.browser.version,10)<9){return false
}else{return"You haven't completed the form."
}}}}function c(u){o=u.eventData.lastFieldTracking===true
}function s(u){n=u.eventData.isJourneyEnabled
}function g(u){q=u.eventData.isTrackingEnabled
}function p(u){q=false
}i.init=function(u){if(!b){return
}u.each(function(){var v=h(this),w=v.data("analytics-uci");
if(w){v.parent().find("input,select,button,a").on("focus select keyup",function(y){var x=h(y.target).data("disable-last-field-interacted");
if(x){h(y.target).data("disable-last-field-interacted",false);
return
}if(o){Cog.Cookie.create("dlg.lastFieldInteractedWith",w,3)
}})
}})
};
i.beforeInit=function(){if(!r){r=true;
Cog.addListener2("analytics.lastFieldInteracted","setLastFieldTracking",c);
Cog.addListener2(f.stateProvider.name,f.stateProvider.events.noElementsDetected,p);
Cog.addListener2(f.redirectHandler.name,f.redirectHandler.events.handlerRedirect,p);
Cog.addListener2(f.redirectJsonHandler.name,f.redirectJsonHandler.events.handlerRedirect,p);
Cog.addListener2(f.stateProvider.name,f.stateProvider.events.stateRedirect,p);
Cog.addListener2(f.lastFieldTracking.moduleName,f.lastFieldTracking.events.setTrackingEnabled,g);
Cog.addListener2(f.lastFieldTracking.moduleName,f.lastFieldTracking.events.setJourneyEnabled,s);
m.onbeforeunload=j
}};
Cog.register({name:"analytics.lastFieldInteracted",api:i,selector:"div.analytics-last-field",externalApi:l,requires:[{name:"analytics.fieldsTracking",apiId:"fieldsTracking"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(i,g,d){var f={},j={customStorage:null},c=false;
function b(){var n=i.url().attr("query").split("&"),m="",o="",l="";
_.forEach(n,function(r){var p=r.split("="),q=p[0];
if(q.toLowerCase()==="cmpid"&&p.length>1){m="cmpid="+p[1]
}else{if(q.toLowerCase()==="siemid"&&p.length>1){o="siemid="+p[1]
}}});
if(m&&o){l=m+"&"+o
}else{if(m){l=m
}else{if(o){l=o
}}}return l
}function h(){var l=j.customStorage.getItem("analytics.campaign"),m=b();
if(m&&m!=l&&g.s){g.s.campaign=m;
j.customStorage.putItem("analytics.campaign",m)
}}f.beforeInit=function(){if(!c&&d){c=true;
h()
}};
Cog.register({api:f,name:"analytics.campaignTracker",externalApi:j,requires:[{name:"commons.customStorage",apiId:"customStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.carouselLinkTracker=(function(h,g,c){var d={},j={customStorage:null};
function f(l){return l.replace(/&#(\d+);/g,function(o,p){return String.fromCharCode(p)
})
}function b(m){var l={event:"carouselLinkTrackingClick",eVarName:"carouselLinkTrackingValue",eVarValue:m},n='"carouselLinkTrackingClick",{"carouselLinkTrackingValue": "'+m+'"}';
Cog.Cookie.create("dlg.carouselLinkTracker",n,1);
j.customStorage.putItem("carouselTracking",l)
}function i(m){var l=f(m.data.uci);
if(h(this).data("internal")){b(l)
}else{c.record({event:"carouselLinkTrackingClick",values:{carouselLinkTrackingValue:l},collect:false,options:{obj:this,defaultLinkType:"o"},componentPath:"dlg/common/components/carouselLinkTracking"})
}}d.init=function(l){if(!c){return
}l.each(function(){var m=h(this),n={uci:m.data("analytics-uci"),rt:m.data("analytics-rt")};
if(n.uci){m.parent().find("a").click(n,i)
}})
};
Cog.register({name:"analytics.carouselLinkTracker",api:d,selector:"div.analytics-carousellinktracking",externalApi:j,requires:[{name:"commons.customStorage",apiId:"customStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.customLinkTracker=(function(f,j,b){var h={},g={},i={customStorage:null,journeyStorage:null};
function m(n){return n.replace(/&#(\d+);/g,function(o,p){return String.fromCharCode(p)
})
}function c(p,n){var o=document.createElement("a");
if(n){g.trackOnNextPage(p)
}else{o.href="";
b.record({event:"customLinkTrackingClick",values:{customLinkTrackingValue:p},collect:false,options:{obj:o,defaultLinkType:"o"},componentPath:"dlg/common/components/customLinkTracking"})
}}function l(p){var o=m(p.data.uci+":"+f(this).text().trim()),n;
if(f(this).data("ancillary")){n='"customLinkTrackingClick",{"customLinkTrackingValue": "'+o+'"}';
i.journeyStorage.put("ancillaryCustomTracking",n);
g.trackOnNextPage(o)
}else{c(o,f(this).data("internal")||f(this).hasClass("lightbox-link")||f(this).hasClass("close")||f(this).data("internal-nav"))
}}function d(o){var n=m(o.data.uci+":"+f(this).text().trim());
if(o.which===1){c(n,f(this).data("internal")||f(this).hasClass("lightbox-link")||f(this).hasClass("close"))
}}h.init=function(n){if(!b){return
}n.each(function(){var o=f(this),p={uci:o.data("analytics-uci"),rt:o.data("analytics-rt")};
if(p.uci&&p.rt=="dlg/core/components/htmlComponent"){o.parent().find("a").on("click",p,l)
}else{if(p.uci){o.parent().find("a").click(p,l);
o.parent().find("button").mousedown(p,d)
}}})
};
g.trackOnNextPage=function(p){var o={event:"customLinkTrackingClick",eVarName:"customLinkTrackingValue",eVarValue:p},n='"customLinkTrackingClick",{"customLinkTrackingValue": "'+p+'"}';
Cog.Cookie.create("dlg.customLinkTracker",n,1);
i.customStorage.putItem("customLinkTracking",o)
};
Cog.register({name:"analytics.customLinkTracker",api:h,sharedApi:g,selector:"div.analytics-customlinktracking",externalApi:i,requires:[{name:"commons.customStorage",apiId:"customStorage"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(i,n,c){var l={},b=";",s="|",q=",",f="event24",g=["eVar3","eVar5"],j={},m={journeyStorage:null};
function p(u){var t="";
if(!_.isEmpty(u)&&!_.isEmpty(u.excessValue)){t=f+"="+u.excessValue
}return t
}function h(u){var t=[];
_.each(_.values(u),function(w,v){if(g[v]=="eVar3"){t.push(g[v]+'="D=v3"')
}else{t.push(g[v]+"="+w)
}});
return t.join(s)
}function o(u){var t=[u.category,u.sku,u.quantity,u.price,p(u.events),h(u.eVars)];
return t.join(b)
}function d(v){var t=[],u=m.journeyStorage.get("multicar.products");
if(u){return u
}t=_.map(v,o);
return t.join(q)
}function r(){c.PageDataMgr.data.additionalEvent=c.PageDataMgr.data.additionalEvent?c.PageDataMgr.data.additionalEvent+",":"";
c.PageDataMgr.data.additionalEvent+=f
}j.addProductInfo=function(){var t=m.journeyStorage.get("product.tracking.data");
if(n.s&&t){n.s.products=d(t);
r()
}m.journeyStorage.remove("product.tracking.data")
};
Cog.register({name:"analytics.onload.productTracking",api:l,sharedApi:j,externalApi:m,requires:[{name:"component.analytics.journeyStorage",apiId:"journeyStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(F,N,P,R){var g={},B={stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}},sitecatalystLauncher:{name:"analytics.sitecatalyst.launcher",events:{register:"register",pageStateProcessed:"pageStateProcessed",fired:"fired"}},registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setJourneyEnabled:"setJourneyEnabled"}}},E,t,L,J,X,p,S=false,v=false,x={},K={customStorage:null,fieldsTracking:null,journeyStorage:null,productTracking:null,pageLoad:null,sitecatalystLauncher:null,journeyContext:null};
function O(){return K.fieldsTracking.hasDataForCurrentJourney()&&K.journeyStorage.get("analytics.coverType")&&!N.sessionStorage.getItem("purchase-submitted-"+E)
}function u(aa){F("<span />",{record:aa}).appendTo(F("body"))
}function m(){if(CQ_Analytics&&CQ_Analytics.DlgMgr){return CQ_Analytics.DlgMgr.getProperty("analytics.productNameStoredJcid")
}}function n(){var aa=m(),ab=K.journeyStorage.get("analytics.productNameStoredList",aa)||[];
if(_.contains(ab,"Motor")){_.pull(ab,"Motor");
K.journeyStorage.put("analytics.productNameStoredList",ab,aa)
}}function d(){var aa=m(),ab=K.journeyStorage.get("analytics.productNameStoredList",aa)||[];
if(_.contains(ab,"Motor")){u("'journeyEnd', {}");
Cog.addListener2(B.sitecatalystLauncher.name,B.sitecatalystLauncher.events.fired,n)
}}function i(){if(L=="vehicleQuoteSavedLoad"&&K.fieldsTracking.hasDataForCurrentJourney()){var ab,aa,ac="saved:Y";
aa=K.fieldsTracking.generateFieldsTrackingValues(ac,true);
ab="'quoteSavedList', {'quoteSavedPage':'"+K.journeyStorage.get("quoteSavedPage")+"'}";
if(N.s){N.s.list1=aa
}u(ab);
d();
K.journeyStorage.remove("sendTrackingInCaseOfAbandonmentFlag")
}}function s(){var ab=K.journeyStorage.get("analytics.coverType"),aa=K.journeyStorage.get("analytics.productName");
return"'coverlevel':'"+aa+":"+ab+"'"
}function U(){var aa="'"+L+"', {",ab=K.journeyContext.current()||"none";
if(L=="vehicleReviewAndConfirmLoad"){if(K.journeyStorage.get("ancillaryLightBoxDisabled")=="true"){aa+="'ancillaryLightBox':'Control - No Ancillary light box'"
}else{if(K.journeyStorage.get("ancillaryLightBoxDisplayed")=="true"){aa+="'ancillaryLightBox':'Experience A - With Ancillary light box'"
}else{if(K.journeyStorage.get("allAncillarySelected")=="true"){aa+="'ancillaryLightBox':'All Ancillaries selected no light box served'"
}}}if(Cog.pages.isMulticarJourney()){if(aa){aa=aa+","
}aa+="'quoteReference':'"+E+"'"
}}if(L=="vehiclePremiumLoad"){aa+="'quoteReference':'"+E+"'"
}else{if((L=="vehicleConfirmationLoad"||Cog.pages.isMulticarConfirmation())&&O()){aa+=s();
K.journeyStorage.clear();
delete CQ_Analytics.DlgMgr.getProperty("fieldsTracking")[ab];
N.sessionStorage.setItem("purchase-submitted-"+E,"true")
}}aa+="}";
u(aa)
}function M(aa,ac,ab){return aa+"/"+ac+"/"+ab
}function V(){var ab=R.utc().format("DD/MM/YYYY"),aa="'pageLoadEvent', {'quoteRetrievalDate': '"+ab+"'}";
u(aa)
}function b(){var aa="'pageLoadEvent', {'coverStartDate': '"+X+"'}";
u(aa)
}function G(){u("'quoteRetrieval', {}")
}function h(){return K.customStorage.getItem("qpmQuoteRetrieve")
}function Q(){if(h()){K.customStorage.removeItem("qpmQuoteRetrieve");
if(L!="vehicleQuickQuoteLoad"){V();
G()
}if(L=="vehicleYourDetailsLoad"){u("'quoteExpiryEvent', {}")
}}if(L=="vehiclePremiumLoad"||(Cog.pages.isMulticarJourney()&&L=="vehicleReviewAndConfirmLoad")){b()
}}function y(){var aa="'yourDetailsSuccessSubmit', {}";
u(aa);
K.journeyStorage.remove("yourDetailsSuccessSubmitFlag")
}function o(){if(K.sitecatalystLauncher.omniturePageViewHasFired()){K.journeyStorage.put("analytics.rcpCode",J)
}}function z(){var ab=K.journeyStorage.get("analytics.rcpCode"),aa;
if(J&&(J!=ab||Cog.pages.isAdditionalCarPage())){aa="'pageLoadEvent', {'rcpCode': '"+J+"'}";
u(aa);
Cog.addListener2(B.sitecatalystLauncher.name,B.sitecatalystLauncher.events.fired,o)
}}function c(){if(L=="sessionTimeoutPageLoad"&&K.fieldsTracking.hasDataForCurrentJourney()){var aa,ab="'abandonedListSubmission', {}",ac="timeout:Y";
aa=K.fieldsTracking.generateFieldsTrackingValues(ac,true);
if(aa&&N.s){u(ab);
N.s.list1=aa
}K.journeyStorage.remove("sendTrackingInCaseOfAbandonmentFlag");
d()
}}function r(){if(L=="errorPageLoad"&&K.fieldsTracking.hasDataForCurrentJourney()){var aa,ab="'abandonedListSubmission', {}",ac="error:Y";
aa=K.fieldsTracking.generateFieldsTrackingValues(ac,true);
if(aa&&N.s){u(ab);
N.s.list1=aa
}K.journeyStorage.remove("sendTrackingInCaseOfAbandonmentFlag");
d()
}}function I(){if(L=="quoteTransferPageLoad"&&K.fieldsTracking.hasDataForCurrentJourney()){var aa,ab="'abandonedListSubmission', {}",ac="transfer:Y";
aa=K.fieldsTracking.generateFieldsTrackingValues(ac,true);
if(aa&&N.s){u(ab);
N.s.list1=aa
}K.journeyStorage.remove("sendTrackingInCaseOfAbandonmentFlag");
d()
}}function D(){if(L=="portfolioPageLoad"||L=="vehicleQuoteSavedLoad"){d()
}}function W(){var aa=P.PageDataMgr.data.pageName;
P.PageDataMgr.data.additionalEvent=null;
P.PageDataMgr.data.link1=null;
P.PageDataMgr.data.loadEvent=null;
N.s.list1=null;
N.s.clearVars();
N.s.products=null;
N.s.purchaseID=null;
N.s.events="event8";
N.s.eVar2="Motor";
P.PageDataMgr.data.pageName="Multicar Thank You";
N.s.tl();
P.PageDataMgr.data.pageName=aa
}function H(){if(L=="vehicleConfirmationLoad"&&O()){var ai=null,ab,ae,aa,ah="purchased:Y",ag=document.createElement("a"),af,ad,ac="";
ag.href="";
aa=K.fieldsTracking.generateFieldsTrackingValues(ah,false);
if(N.s){N.s.list1=aa
}ai="'successfulListSubmission', {}";
u(ai);
if(Cog.pages.isMulticarJourney()){Cog.addListener2("analytics.sitecatalyst.launcher","fired",W)
}else{d()
}ab="'policyPurchase', {'policyID': '"+E+"'}";
u(ab);
ae="'policyPurchase', {'userDataTrackingValue': '"+Cog.Cookie.read("dlg.visitorID")+"'}";
u(ae);
K.productTracking.addProductInfo();
K.journeyStorage.remove("sendTrackingInCaseOfAbandonmentFlag")
}}function j(){if(L){i();
H();
c();
r();
I();
D();
U();
Q();
if(K.journeyStorage.get("yourDetailsSuccessSubmitFlag")==="true"){y()
}}z()
}function Z(){if(L){switch(L){case"vehiclePremiumLoad":K.journeyStorage.put("quoteSavedPage","Premium page");
break;
case"vehiclePaymentLoad":K.journeyStorage.put("quoteSavedPage","Payment page");
break
}}}function C(){var aa=null;
if(L){switch(L){case"vehiclePremiumLoad":aa="event2";
break;
case"vehicleReviewAndConfirmLoad":aa="event4";
break;
case"vehiclePaymentLoad":aa="event5";
break;
case"vehicleConfirmationLoad":aa="event7";
break;
case"vehicleQuickQuoteLoad":if(!Cog.pages.isAdditionalCarPage()){aa="event15"
}break
}}return aa
}function f(aa){var ab=C();
if(aa){K.journeyStorage.put("analytics.quoteRef",aa)
}else{aa=K.journeyStorage.get("analytics.quoteRef")
}if(L=="portfolioPageLoad"){K.journeyStorage.remove("quickQuote")
}if(CQ_Analytics.PageDataMgr.data&&aa){if(ab){if(L=="vehiclePremiumLoad"&&K.journeyStorage.get("quickQuote")==true){CQ_Analytics.PageDataMgr.data.loadEvent=ab+":"+aa+",event15:"+aa
}else{CQ_Analytics.PageDataMgr.data.loadEvent=ab+":"+aa
}K.pageLoad.addPremiumPageLoadEvar()
}else{CQ_Analytics.PageDataMgr.data.loadEvent=null
}}}function q(aa){var ab="";
if(Cog.pages.isMulticarJourney()&&CQ_Analytics.PageDataMgr.data){ab=CQ_Analytics.PageDataMgr.data.loadEvent||"";
if(ab){ab=ab+","
}if(aa){if(Cog.pages.isSummaryPremium()){CQ_Analytics.PageDataMgr.data.loadEvent=ab+"event29:"+aa
}else{if(Cog.pages.isPremiumPage()&&CQ_Analytics.PageDataMgr.data.loadEvent.indexOf("event15:")<0){CQ_Analytics.PageDataMgr.data.loadEvent=ab+"event15:"+aa
}}}if(Cog.pages.isAdditionalCarPage()){CQ_Analytics.PageDataMgr.data.loadEvent=ab+"event1"
}}}function Y(){var aa=C();
if(aa==="event15"){K.journeyStorage.put("quickQuote",true)
}}function l(ab){var aa=ab.eventData.state.pageData.multicarJourney;
if(Cog.pages.isMulticarJourneyDetailsPage()){aa="true"
}if(document.location.pathname.indexOf("/system-error/")===-1){sessionStorage.setItem("multicarJourney",aa)
}}function T(ab){var aa=ab.eventData;
if(S&&!v){if(aa.state&&aa.state.pageData){E=aa.state.pageData.quoteRef;
t=aa.state.pageData.quoteSeq;
J=aa.state.pageData.rcpCode;
X=M(aa.state.pageData.policyStartDateDay,aa.state.pageData.policyStartDateMonth,aa.state.pageData.policyStartDateYear);
l(ab);
f(E);
q(E);
Y();
Z();
j()
}v=true;
Cog.fireEvent(B.sitecatalystLauncher.name,B.sitecatalystLauncher.events.pageStateProcessed)
}if(aa.state&&aa.state.pageData){p=aa.state.pageData.apr
}}function A(){return{rcpCode:{value:J,origin:"rcpCode.quoteRef"},quoteRef:{value:E,origin:"quoteRef"},quoteSeq:{value:t,origin:"quoteSeq"},currentPage:{value:L,origin:"currentPage"},aprValue:{value:p,origin:"aprValue"}}
}function w(ab,aa){return{data:ab,config:aa}
}x.getDataAndConfig=function(){var ab=A(),aa={analyticsLabel:"pageDataValues",analyticsFieldTrackingBindings:["pageDataValues.default"]};
return[w(ab,aa)]
};
g.beforeInit=function(){Cog.fireEvent(B.registry.name,B.registry.events.register);
if(!S&&P){S=true;
Cog.addListener2(B.stateProvider.name,B.stateProvider.events.stateChanged,T);
Cog.fireEvent(B.sitecatalystLauncher.name,B.sitecatalystLauncher.events.register)
}};
g.init=function(aa){Cog.fireEvent(B.registry.name,B.registry.events.initialized,{analytics:x.getDataAndConfig});
if(aa.length>0){L=aa.first().data("analytics-custom-params");
if(L!=="qpmLoginPageLoad"&&L!=="portfolioPageLoad"){Cog.fireEvent(B.lastFieldTracking.moduleName,B.lastFieldTracking.events.setJourneyEnabled,{isJourneyEnabled:true})
}}};
Cog.register({name:"analytics.onload.userJourneyTracking",selector:"span.analytics-config-userjourneytracking",api:g,sharedApi:x,externalApi:K,requires:[{name:"commons.customStorage",apiId:"customStorage"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"analytics.fieldsTracking",apiId:"fieldsTracking"},{name:"analytics.onload.productTracking",apiId:"productTracking"},{name:"analytics.sitecatalyst.launcher",apiId:"sitecatalystLauncher"},{name:"analytics.pageLoad",apiId:"pageLoad"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,window,window.CQ_Analytics,moment));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.phoneLinkTracker=(function(f,d,b){var c={};
function g(h){b.record({event:"phoneLinkTrackingClick",values:{phoneLinkTrackingValue:h.data.uci},collect:false,options:{obj:this,defaultLinkType:"o"},componentPath:"dlg/common/components/phoneLinkTracking"})
}c.init=function(h){if(!b){return
}h.each(function(){var i=f(this),j={uci:i.data("analytics-uci"),rt:i.data("analytics-rt")};
if(j.uci){i.parent().find('a[href^="tel:"]').click(j,g)
}})
};
return c
}(COGjQuery,window,window.CQ_Analytics));
Cog.register({name:"analytics.phoneLinkTracker",api:Cog.component.analytics.phoneLinkTracker,selector:"div.analytics-phonelinktracking"});
(function(f,l,h,t){var q={},p={},o={moduleName:"analytics.sitecatalyst.launcher",events:{beforeAnalyticsOnLoad:"beforeAnalyticsOnLoad",firedInstantly:"firedInstantly",fired:"fired"}},s={register:"register",pageStateProcessed:"pageStateProcessed",componentProcessed:"componentProcessed",noComponentsProcessed:"noComponentsProcessed"},A=0,b=0,y=false,u=false,i=null,c=null,x={stateProvider:{name:"elements.stateProvider",events:{noElementsDetected:"noElementsDetected"}}};
function r(){var D,C,E;
if(i&&!Cog.pages.isPaymentPage()&&!Cog.pages.isMulticarConfirmation()&&CQ_Analytics.PageDataMgr.data&&CQ_Analytics.PageDataMgr.data.loadEvent){for(D=0;
D<i.length-1;
D++){C=i[D+1];
h.PageDataMgr.data.link1=null;
l.s.events="";
CQ_Analytics.PageDataMgr.data.loadEvent=CQ_Analytics.PageDataMgr.data.loadEvent.replaceAll(i[D],C);
E=c[C];
if(E){l.s.eVar5=E.eVar5;
l.s.eVar8=E.eVar8;
l.s.eVar15=E.eVar15;
l.s.eVar51=E.eVar51;
l.s.eVar52=E.eVar52;
l.s.eVar53=E.eVar53;
l.s.eVar54=E.eVar54;
l.s.eVar55=E.eVar55;
l.s.contextData.bau_multicar_car_number=null
}l.s.t()
}}}function j(){return CQ_Analytics.PageDataMgr.data.loadEvent&&CQ_Analytics.PageDataMgr.data.loadEvent.indexOf("event5:")>=0&&sessionStorage.getItem("skip.payment.onload.call")=="true"
}function w(){if(Cog.pages.isMulticarJourney()&&Cog.pages.is3dSecure()){sessionStorage.setItem("skip.payment.onload.call",true)
}else{if(!Cog.pages.isMulticarJourney()||Cog.pages.isPremiumPage()){sessionStorage.removeItem("skip.payment.onload.call",true)
}}}function d(){Cog.fireEvent(o.moduleName,o.events.beforeAnalyticsOnLoad)
}function B(){if(!y){d();
if(l.s&&!j()){h.CCM.fireEvent("cog.onload");
r()
}y=true;
Cog.fireEvent(o.moduleName,o.events.fired);
w()
}}function g(){if(!u){u=true;
Cog.fireEvent(o.moduleName,o.events.firedInstantly)
}}function z(){A++
}function n(){b++;
if(b==A){g();
setTimeout(B,1100)
}}function v(){setTimeout(B,1100)
}function m(C){i=C.eventData.multicarQuoteRefs;
c=C.eventData.multicarQuoteData||{}
}q.init=function(){Cog.addListener2(o.moduleName,s.register,z);
Cog.addListener2(o.moduleName,s.pageStateProcessed,n);
Cog.addListener2(o.moduleName,s.componentProcessed,n);
Cog.addListener2(o.moduleName,s.noComponentsProcessed,v);
Cog.addListener2("cog.onload","multicarQuoteRefs",m)
};
p.omniturePageViewHasFired=function(){var C=document.images,F=C.length,E,D=false;
for(E=0;
E<F;
E++){if((C[E].src.indexOf("/b/ss/")>=0)&&(!C[E].src.match(/[&?]pe=/))){D=true
}}if(!D){_.forOwn(l,function(H,G){if((G.substring(0,4)=="s_i_")&&(l[G].src)&&(l[G].src.indexOf("/b/ss/")>=0)&&(!l[G].src.match(/[&?]pe=/))){D=true
}})
}return D
};
String.prototype.replaceAll=function(C,D){var E=this;
return E.replace(new RegExp(C,"g"),D)
};
Cog.registerStatic({name:"analytics.sitecatalyst.launcher",api:q,sharedApi:p})
}(COGjQuery,window,window.CQ_Analytics,window.CryptoJS));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.shoppingBasketDiscountTracker=(function(h,g,d){var f={},i=false,c=null;
function b(l){var n=h("div.analytics-shopping-basket"),m;
if(l&&n.length){m="'shoppingBasketDiscountTracking', {'shoppingBasketDiscountTrackingValue': '"+l+"'}";
h("<span />",{record:m}).appendTo(h("body"));
i=true
}}function j(n){var m=n.eventData,l=m.state.pageData||{};
if(l){b(sessionStorage.getItem("multicar.discounts")||l.discountTracking)
}if(n.data.disposable){Cog.removeListener(c)
}sessionStorage.removeItem("multicar.discounts")
}f.init=function(l){if(!d){return
}if(!i&&l.length){c=Cog.addListener2("elements.stateProvider","stateChanged",j,{data:{disposable:true}})
}};
return f
}(COGjQuery,window,window.CQ_Analytics));
Cog.register({name:"analytics.shoppingBasketDiscountTracker",api:Cog.component.analytics.shoppingBasketDiscountTracker,selector:"div.analytics-shopping-basket"});
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.visitorValues=(function(B,G,J){var f={},K=false,s=false,H=false,D,u=B(),p,v={},i={moduleName:"analytics.visitorValues",events:{setStorageDataEvent:"setVisitorStorageData"}},E={formElementParser:null,formDataParser:null,customStorage:null},y={stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}},sitecatalystLauncher:{name:"analytics.sitecatalyst.launcher",events:{register:"register",pageStateProcessed:"pageStateProcessed"}},submitter:{moduleName:"forms.form.submitter",events:{formSubmission:"formSubmission"}}},c=[],L=null;
function r(S,T,R){return new Date(S,T,R,0,0,0)
}function h(R){return encodeURIComponent(JSON.stringify(R))
}function n(R){return JSON.parse(decodeURIComponent(R))
}function C(R,S){return E.formElementParser.parseAgeElement(R.parent(),D,S)
}function z(R,S){return E.formElementParser.parsePostCodeElement(R.parent(),S)
}function O(R,S){return E.formElementParser.parseVehicleDetailsElement(R.parent().parent())
}function F(R,S){return E.formElementParser.parseAdditionalDriversInformationElement(R.parent())
}function N(R,S){return E.formElementParser.parseNumClaimsAndConvictionsPrimaryElement(R.parent().parent())
}function m(R,S){return E.formElementParser.parseValueDirectly(R.parent(),S)
}function x(V,S,R){var U=p[S],T=U(R,V);
return T
}function g(S,T){var R;
if(T){R={visitorValue:S,value:T};
c.push(R)
}}function t(){var R=B(this),U=null,S=null,T=null;
if(B.contains(document,this)){U=R.data("analytics-field-name");
S=R.data("analytics-visitor-value");
T=x(U,S,R);
g(S,T)
}}function d(){u.each(t);
if(c.length>0){E.customStorage.removeItem("dlg.visitorValues");
E.customStorage.putItem("dlg.visitorValues",h(c))
}}function w(S){var R="'visitorValuesTrackingEvent', "+S;
B("<span />",{record:R}).appendTo(B("body"))
}function b(S){var R="{";
B.map(S,function(T){R+="'"+T.visitorValue+"' : '"+T.value+"', "
});
R=R.substr(0,R.length-2);
R+="}";
return R
}function j(){var S=E.customStorage.getItem("dlg.visitorValues"),R;
if(S&&(!Cog.pages.isMulticarJourney()||Cog.pages.isPremiumPage())){try{R=n(S)
}catch(T){R=null
}if(R){w(b(R))
}E.customStorage.removeItem("dlg.visitorValues")
}}function M(S){var R=S.eventData;
if(K&&!s){if(R.state&&R.state.pageData){D=new Date(R.state.dateTime.year,R.state.dateTime.month,R.state.dateTime.dayOfMonth)
}s=true;
Cog.fireEvent(y.sitecatalystLauncher.name,y.sitecatalystLauncher.events.pageStateProcessed)
}}function Q(R){var S=_.filter(R,function(T){return T.config.analyticsVisitorValue==="occupation"
})[0];
if(S){g("occupation",S.data.text.value)
}}function P(R){var S=_.filter(R,function(T){return T.config.analyticsVisitorValue==="promoCode"
})[0];
if(S){g("promoCode",S.data.singleValue.value)
}}function I(U){var S=_.filter(U,function(V){return V.config.analyticsVisitorValue==="visitorAgeValue"
})[0],R,T;
if(S){R=r(parseInt(S.data.year.value,10),parseInt(S.data.month.value,10)-1,parseInt(S.data.day.value,10));
T=E.formDataParser.parseAge(R,D);
g("visitorAgeValue",T)
}}function A(T){var R=_.filter(T,function(U){return U.config.analyticsVisitorValue==="visitorAreaCodeValue"
})[0],S;
if(R){S=E.formDataParser.parsePostCode(R.data.postcode.value);
if(S){g("visitorAreaCodeValue",S)
}}}function q(R){var T=_.filter(R,function(U){return U.config.analyticsVisitorValue==="visitorCarDetails"
})[0],S;
if(T){S=E.formDataParser.parseVehicleDetails(T.data.make.value,T.data.model.value,T.data.year.value);
g("visitorCarDetails",S)
}}function l(V){var U=_.filter(V,function(Y){return Y.config.analyticsVisitorValue==="numClaimsConvictionsPrimary"
}),X=_.filter(U,function(Y){return Y.data.radio.origin==="formField.details.anyClaims"
})[0],R=_.filter(U,function(Y){return Y.data.radio.origin==="formField.details.anyConvictions"
})[0],T=0,S=0,W;
if(X&&X.data.radio.value==="Y"&&X.data.children){T=X.data.children.length
}if(R&&R.data.radio.value==="Y"&&R.data.children){S=R.data.children.length
}if(U){W=E.formDataParser.parseNumClaimsAndConvictionsPrimary(T,S);
g("numClaimsConvictionsPrimary",W)
}}function o(U){var R=_.filter(U,function(X){return X.config.analyticsVisitorValue==="additionalDriversInformation"
})[0],V=0,T=0,S=0,W;
if(R){if(R.data.radio.value==="Y"){W=E.formDataParser.parseAdditionalDrivers(R.data).split("|");
V=W[1];
T=W[2];
S=W[3]
}W=E.formDataParser.parseAdditionalDriversInformation(V,T,S);
g("additionalDriversInformation",W)
}}v.trackVisitorValues=function(R){if(G.s&&Cog.pages.isPremiumPage()){g("occupation",R.eVar15);
g("visitorAgeValue",R.eVar51);
g("visitorAreaCodeValue",R.eVar52);
g("visitorCarDetails",R.eVar53);
g("additionalDriversInformation",R.eVar54);
g("numClaimsConvictionsPrimary",R.eVar55);
w(b(c))
}else{CQ_Analytics.PageDataMgr.data.additionalEvars=R
}H=true;
E.customStorage.removeItem("dlg.visitorValues")
};
v.trackVisitorValuesOnPremiumPage=function(R){P(R);
if(!H){Q(R);
I(R);
A(R);
l(R);
o(R);
q(R)
}w(b(c));
E.customStorage.removeItem("dlg.visitorValues");
Cog.removeListener(L)
};
f.init=function(R){if(J){u=u.add(R)
}};
f.beforeInit=function(){if(!K){K=true;
L=Cog.addListener2(y.submitter.moduleName,y.submitter.events.formSubmission,d);
Cog.addListener2(i.moduleName,i.events.setStorageDataEvent,d);
Cog.addListener2(y.stateProvider.name,y.stateProvider.events.stateChanged,M);
Cog.fireEvent(y.sitecatalystLauncher.name,y.sitecatalystLauncher.events.register);
p={visitorAgeValue:C,visitorAreaCodeValue:z,visitorCarDetails:O,additionalDriversInformation:F,promoCode:m,occupation:m,numClaimsConvictionsPrimary:N};
j()
}};
Cog.register({name:"analytics.visitorValues",api:f,sharedApi:v,externalApi:E,selector:"div.analytics-visitor-value",requires:[{name:"commons.formElementParser",apiId:"formElementParser"},{name:"commons.formDataParser",apiId:"formDataParser"},{name:"commons.customStorage",apiId:"customStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(l,p,n,t){var s={},r={},m={journeyContext:null},v=false,h=true,g="jcid",d=3,j=":",i="/",y="dlg.setUserDataTracking",w=false,o=false,q=false,z={stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}},sitecatalystLauncher:{name:"analytics.sitecatalyst.launcher",events:{register:"register",pageStateProcessed:"pageStateProcessed"}}};
function x(){var A="'userDataTrackingEvent', {'userDataTrackingValue':'"+w+"'}";
o=true;
l("<span />",{record:A}).appendTo(l("body"))
}function u(){return m.journeyContext.current()
}function f(A,D,C){var B;
if(A&&D&&C){B=A+i+D+i+C
}return B
}function b(C,D,B){var A;
if(C&&D&&B){A=t.SHA256(C).toString()+j+t.SHA256(D).toString()+j+t.SHA256(B).toString()
}else{if(B){A=j+j+t.SHA256(B).toString()
}}return A
}function c(G){var A=u(),D=Cog.Cookie.read(y),F=G.eventData.state,H,E,C,B;
if(q&&F&&F.pageData){E=f(F.pageData.birthDateDay,F.pageData.birthDateMonth,F.pageData.birthDateYear);
C=F.pageData.email;
B=F.pageData.postcode;
w=b(B,E,C);
H=A+":"+w;
if(H!=D&&w){if(D){Cog.Cookie.erase(y)
}if(w){x();
Cog.Cookie.create(y,H,d);
Cog.Cookie.create("dlg.visitorID",w,d)
}}}Cog.fireEvent(z.sitecatalystLauncher.name,z.sitecatalystLauncher.events.pageStateProcessed)
}s.init=function(A){if(A.length>0){q=true
}};
s.beforeInit=function(){if(!v&&n){v=true;
Cog.addListener2(z.stateProvider.name,z.stateProvider.events.stateChanged,c);
Cog.fireEvent(z.sitecatalystLauncher.name,z.sitecatalystLauncher.events.register)
}};
r.getStitchedHash=function(){return w
};
Cog.register({name:"analytics.userDataTracking",api:s,externalApi:m,sharedApi:r,selector:"span.analytics-config-userdatatracking",requires:[{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,window,window.CQ_Analytics,window.CryptoJS));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.pageLoad=(function(g,o,i){var u={},t={},z={sitecatalystLauncher:{name:"analytics.sitecatalyst.launcher",events:{fired:"fired"}},stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged",noElementsDetected:"noElementsDetected"}}},w=false,m=false,h={customStorage:null,journeyStorage:null,sitecatalystLauncher:null,universalDataProvider:null,journeyContext:null},p="s_vi",x,j,f;
t.addRecordSpan=function(B){g("<span />",{record:B}).appendTo(g("body"))
};
function s(){if(h.sitecatalystLauncher.omniturePageViewHasFired()){h.journeyStorage.put("analytics.brandNameSent",i.PageDataMgr.initProperty.brandName)
}}function d(){var D=i.PageDataMgr.initProperty.brandName,B,E=h.journeyStorage.get("analytics.brandNameSent"),C=h.journeyContext.current()||"none";
if(D&&(D!=E||Cog.pages.isAdditionalCarPage())){B="'pageLoadEvent', {'brandName': '"+D+"'}";
t.addRecordSpan(B);
Cog.addListener2(z.sitecatalystLauncher.name,z.sitecatalystLauncher.events.fired,s)
}else{if(C==="none"){Cog.addListener2(z.stateProvider.name,z.stateProvider.events.stateChanged,d)
}}}function l(){var B=h.customStorage.getItem("sessionTimeoutTracking")||Cog.Cookie.read("dlg.sessionTimeoutTracking");
if(B){t.addRecordSpan('"'+B.event+'", {"'+B.eVarName+'": "'+B.eVarValue+'"}')
}h.customStorage.removeItem("sessionTimeoutTracking");
Cog.Cookie.erase("dlg.sessionTimeoutTracking")
}function b(D){var F=h.customStorage.getItem(D),E,B,C;
if(F){C='"'+F.event+'", {"'+F.eVarName+'": "'+F.eVarValue+'"}';
t.addRecordSpan(C);
h.customStorage.removeItem(D)
}else{E=Cog.Cookie.read("dlg.customLinkTracker");
B=Cog.Cookie.read("dlg.carouselLinkTracker");
if(E){t.addRecordSpan(E)
}if(B){t.addRecordSpan(B)
}}Cog.Cookie.erase("dlg.customLinkTracker");
Cog.Cookie.erase("dlg.carouselLinkTracker")
}function v(B){if(i.PageDataMgr.data.additionalEvent){i.PageDataMgr.data.additionalEvent=i.PageDataMgr.data.additionalEvent+","
}else{i.PageDataMgr.data.additionalEvent=""
}i.PageDataMgr.data.additionalEvent+=B
}function A(){if(i&&o.sessionStorage&&o.sessionStorage.getItem("nbox.closeTracking")){i.PageDataMgr.data.additionalEvent=i.PageDataMgr.data.additionalEvent||"";
if(i.PageDataMgr.data.additionalEvent.indexOf("event38")<0){v("event38="+sessionStorage.getItem("nbox.closeTracking"))
}sessionStorage.removeItem("nbox.closeTracking")
}}function n(){setTimeout(function(){t.addSiteCatalystCookieVisitorIdSpan(true)
},1000)
}function y(){var B="";
if(Cog.pages.isMulticarJourney()){B="'pageLoadEvent', {'multicarPageLoad': 'Multi'}";
t.addRecordSpan(B);
if(Cog.pages.isMulticarJourneyDetailsPage()||Cog.pages.isAdditionalCarPage()){v("event17")
}}}t.addSiteCatalystCookieVisitorIdSpan=function(D){if(o.s&&o.s.visitor){var B=o.s.visitor.getMarketingCloudVisitorID(),C;
if(B){C="'pageLoadEvent', {'visitorID': '"+B+"'}";
t.addRecordSpan(C)
}else{if(!D){n()
}}}};
t.addPageUrlRecordSpan=function(C){var D=C||i.PageDataMgr.initProperty.pageUrl,B="'pageLoadEvent', {'pageUrl': '"+D+"'}";
t.addRecordSpan(B)
};
t.addPremiumPageLoadEvar=function(){var C=h.journeyStorage.get("premium.page.version"),B="'pageLoadEvent', {'premiumPageLoad': '"+C+"'}";
if(C!==undefined){t.addRecordSpan(B)
}h.journeyStorage.remove("premium.page.version")
};
t.addEvent=function(B){v(B)
};
function c(C){var B=C.eventData;
x=B.state.pageData.quoteRef;
if(w&&!m){t.addRecordSpan(h.universalDataProvider.getIpAddressValFromPageState(B));
m=true;
Cog.fireEvent(z.sitecatalystLauncher.name,z.sitecatalystLauncher.events.pageStateProcessed)
}}function q(C){var B;
j=C.eventData.multicarQuoteRefs;
f=C.eventData.multicarQuoteData||{};
B=f[x].carNumber;
if(Cog.pages.isMulticarJourney()&&Cog.pages.isPaymentPage()&&o.s&&o.s.contextData){o.s.contextData.bau_multicar_car_number="Car"+B
}}function r(){var B=h.customStorage.getItem("contextDataVariables");
if(o.s&&o.s.contextData&&B){g.each(B,function(C,D){o.s.contextData[C]=D
})
}h.customStorage.removeItem("contextDataVariables")
}u.beforeInit=function(){if(!w&&i&&i.PageDataMgr.initProperty){t.addPageUrlRecordSpan();
d();
t.addSiteCatalystCookieVisitorIdSpan();
b("carouselTracking");
b("customLinkTracking");
l();
y();
A();
r();
w=true
}};
u.init=function(){Cog.addListener2(z.stateProvider.name,z.stateProvider.events.stateChanged,c);
Cog.addListener2("cog.onload","multicarQuoteRefs",q)
};
Cog.register({name:"analytics.pageLoad",api:u,externalApi:h,sharedApi:t,requires:[{name:"commons.customStorage",apiId:"customStorage"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"analytics.sitecatalyst.launcher",apiId:"sitecatalystLauncher"},{name:"element.universalDataProvider",apiId:"universalDataProvider"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(j,p,c){var s=false,b=false,m={},g={moduleName:"analytics.pageLoadTime"},f={sitecatalystLauncher:{name:"analytics.sitecatalyst.launcher",events:{register:"register",componentProcessed:"componentProcessed",noComponentsProcessed:"noComponentsProcessed"}}},n={pageLoad:null,universalDataProvider:null};
function i(u){var v="'pageLoadEvent', {'pageLoadTime': '"+u+"'}";
j("<span />",{record:v}).appendTo(j("body"))
}function r(v){var u=null;
if(c&&c.PageDataMgr.data){u=c.PageDataMgr.data.additionalEvent?c.PageDataMgr.data.additionalEvent+",":"";
if(u.indexOf("event25=")<0){c.PageDataMgr.data.additionalEvent=u+"event25="+v
}}}function d(){var u=window.Modernizr.performance&&window.performance.timing&&window.performance.timing.navigationStart?Date.now()-window.performance.timing.navigationStart:Date.now()-window.responseStartTimeStamp;
if(u<0){u=1000
}return Math.round(u/10)/100
}function l(){var u=d();
i(u);
r(u)
}function t(){l();
Cog.fireEvent(f.sitecatalystLauncher.name,f.sitecatalystLauncher.events.componentProcessed)
}function q(){n.universalDataProvider.getIpAddressValFromServlet(function(u){n.pageLoad.addRecordSpan(u);
l();
Cog.fireEvent(f.sitecatalystLauncher.name,f.sitecatalystLauncher.events.noComponentsProcessed)
})
}function o(){if(s){q()
}b=true
}function h(){if(b){q()
}s=true
}j(window).load(o);
m.init=function(){Cog.addListener2("elements.stateProvider","stateApplied",t);
Cog.addListener2("elements.stateProvider","noElementsDetected",h);
Cog.fireEvent(f.sitecatalystLauncher.name,f.sitecatalystLauncher.events.register)
};
Cog.registerStatic({name:g.moduleName,api:m,externalApi:n,requires:[{name:"analytics.pageLoad",apiId:"pageLoad"},{name:"element.universalDataProvider",apiId:"universalDataProvider"}]})
}(COGjQuery,document,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.promoPanelLinkTracker=(function(f,d,b){var c={};
function g(h){b.record({event:"promoPanelClick",values:{promoPanelImageInfo:h.data.uci},collect:false,options:{obj:this,defaultLinkType:"o"},componentPath:"dlg/brochureware/components/promoPanel"})
}c.init=function(h){if(!b){return
}h.each(function(){var i=f(this),j={uci:i.data("analytics-uci"),rt:i.data("analytics-rt")};
if(j.uci){i.parent().find("a").click(j,g)
}})
};
return c
}(COGjQuery,window,window.CQ_Analytics));
Cog.register({name:"analytics.promoPanelLinkTracker",api:Cog.component.analytics.promoPanelLinkTracker,selector:"div.analytics-promoPanelLinktracking"});
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.heroImageLinkTracker=(function(f,d,b){var c={};
function g(h){b.record({event:"heroImageClick",values:{heroImageInfo:h.data.uci},collect:false,options:{obj:this,defaultLinkType:"o"},componentPath:"dlg/brochureware/components/heroImage"})
}c.init=function(h){if(!b){return
}h.each(function(){var i=f(this),j={uci:i.data("analytics-uci"),rt:i.data("analytics-rt")};
if(j.uci){i.parent().find("a").click(j,g)
}})
};
return c
}(COGjQuery,window,window.CQ_Analytics));
Cog.register({name:"analytics.heroImageLinkTracker",api:Cog.component.analytics.heroImageLinkTracker,selector:"div.analytics-heroImageLinkTracking"});
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.advertisingBoxTracker=(function(f,d,b){var c={};
function g(h){b.record({event:"advertisingBoxClick",values:{advertisingBoxImageInfo:h.data.uci},collect:false,options:{obj:this,defaultLinkType:"o"},componentPath:h.data.rt})
}c.init=function(h){if(!b){return
}h.each(function(){var i=f(this),j={uci:i.data("analytics-uci"),rt:i.data("analytics-rt")};
if(j.uci){i.parent().find("a").click(j,g)
}})
};
return c
}(COGjQuery,window,window.CQ_Analytics));
Cog.register({name:"analytics.advertisingBoxTracker",api:Cog.component.analytics.advertisingBoxTracker,selector:"div.analytics-advertisingBoxTracking"});
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.fieldsTracking=(function(c,h,f){var n={},q=false,t={submitter:{moduleName:"forms.form.submitter",events:{formSubmission:"formSubmission"}},registry:{name:"elements.registry",listeners:{initialized:"initialized"}},actionButtonAnalytics:{name:"forms.action.button.analytics",events:{trackBack:"trackBack",trackLink:"trackLink"}}},d={parsingProcessor:null,customStorage:null,journeyStorage:null,journeyContext:null},m={},r=null;
function j(){var v=[];
r.forEach(function(w){if(w){v=_.union(v,w.getDataAndConfig())
}});
return v
}function i(v,w){_.forOwn(v[w],function(y,x){CQ_Analytics.DlgMgr.removeProperty(y);
delete v.values[y]
});
delete v[w]
}function l(B,A){var w=A||h.document.title,z=d.journeyContext.current(),y=CQ_Analytics.DlgMgr.getProperty("fieldsTracking")||{},x=[],v=y[z];
if(v){i(v,w)
}else{v={values:{}}
}_.forEach(B,function(C){_.forOwn(C,function(E,D){if(E){x.push(D);
v.values[D]=E;
CQ_Analytics.DlgMgr.setProperty(D,E)
}})
});
v[w]=x;
y[z]=v;
CQ_Analytics.DlgMgr.setProperty("fieldsTracking",y)
}function b(w){var v=null;
try{v=d.parsingProcessor.process(w)
}catch(x){}return v
}function o(){var v=j(),w=b(v);
l(w)
}function s(){m.updateStoreDataForCurrentPage()
}function g(v){return _.find(r,function(w){return w.getDataAndConfig===v.analytics
})
}function u(v){if(f&&r&&v.eventData.analytics&&!g(v.eventData)){r.push({getDataAndConfig:v.eventData.analytics})
}}function p(v,w){return{config:{analyticsFieldTrackingBindings:["direct.default"],analyticsLabel:v},data:{origin:v,value:w}}
}m.updateStoreDataForCurrentPage=function(){var w=j(),v=h.document.title;
if(d.customStorage.getItem("qpmQuoteRetrieve")===true){w.push(p("QuoteRetrieved","YES"))
}m.updateStoreData(w,v)
};
m.generateFieldsTrackingValues=function(x,B){var z=d.journeyContext.current(),w=CQ_Analytics.DlgMgr.getProperty("fieldsTracking")[z],y=null,A,v=[];
if(!w){z=c.url().param("lostJcid");
w=CQ_Analytics.DlgMgr.getProperty("fieldsTracking")[z]
}if(w){v=_.map(w.values,function(D,C){if(B){CQ_Analytics.DlgMgr.removeProperty(C)
}return C+":"+D
});
y=d.journeyStorage.get("breakdown.cover.tracking",z);
if(y){v.push(y)
}A=d.journeyStorage.get("telematics.tracking",z);
if(A){v.push(A)
}if(v.length>0&&x){v.push(x)
}if(B){delete CQ_Analytics.DlgMgr.getProperty("fieldsTracking")[z];
d.journeyStorage.remove("breakdown.cover.tracking",z);
d.journeyStorage.remove("telematics.tracking",z)
}}return v.join(";")
};
m.updateStoreData=function(x,v){var w=b(x);
l(w,v);
d.journeyStorage.put("sendTrackingInCaseOfAbandonmentFlag",true)
};
m.hasDataForPage=function(v){var x,w=d.journeyContext.current();
if(CQ_Analytics&&CQ_Analytics.DlgMgr){x=CQ_Analytics.DlgMgr.getProperty("fieldsTracking")
}return x&&x[w]&&x[w][v]
};
m.hasDataForCurrentJourney=function(){var y,x=d.journeyContext.current(),w=c.url().param("lostJcid"),v=false;
if(CQ_Analytics&&CQ_Analytics.DlgMgr){y=CQ_Analytics.DlgMgr.getProperty("fieldsTracking")
}if(w){v=y&&y[w]
}else{v=y&&y[x]
}return v
};
n.init=function(v){if(f){r=r||[]
}};
n.beforeInit=function(){d.journeyStorage.put("fieldTrackingSubmitted","false");
if(!q){q=true;
Cog.addListener2(t.submitter.moduleName,t.submitter.events.formSubmission,s);
Cog.addListener2(t.actionButtonAnalytics.name,t.actionButtonAnalytics.events.trackBack,s);
Cog.addListener2(t.actionButtonAnalytics.name,t.actionButtonAnalytics.events.trackLink,s);
Cog.addListener2(t.registry.name,t.registry.listeners.initialized,u)
}};
Cog.register({name:"analytics.fieldsTracking",api:n,externalApi:d,sharedApi:m,requires:[{name:"analytics.parsingProcessor",apiId:"parsingProcessor"},{name:"commons.customStorage",apiId:"customStorage"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.loginTracker=(function(i,h,d){var f={},j={journeyStorage:null},c=false;
function g(m){var l="'"+m+"', {}";
i("<span />",{record:l}).appendTo(i("body"))
}function b(){if(sessionStorage){var l=j.journeyStorage.get("analytics.loginEvent");
if(l){if(l==="successfulRegistration"){g("successfulLogin")
}g(l);
j.journeyStorage.remove("analytics.loginEvent")
}}}f.beforeInit=function(){if(!c&&d.PageDataMgr.initProperty){b();
c=true
}};
f.init=function(){};
Cog.register({name:"analytics.loginTracker",api:f,externalApi:j,requires:[{name:"component.analytics.journeyStorage",apiId:"journeyStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.productName=(function(f,j,b){var h={},n,o=false,d={sitecatalystLauncher:{name:"analytics.sitecatalyst.launcher",events:{fired:"fired"}}},i={journeyStorage:null,sitecatalystLauncher:null,journeyContext:null},g=[];
function m(){i.journeyStorage.put("analytics.productNameStoredList",g);
if(CQ_Analytics&&CQ_Analytics.DlgMgr){CQ_Analytics.DlgMgr.setProperty("analytics.productNameStoredJcid",i.journeyContext.current())
}}function l(p){if(!n){return false
}if(!_.contains(p,n)){return true
}if(Cog.pages.isSummaryPremium()||Cog.pages.isAdditionalCarPage()||Cog.pages.isPremiumPage()||(Cog.pages.isMulticarJourneyDetailsPage())||Cog.pages.isMulticarConfirmation()){return true
}return false
}function c(){var p;
g=i.journeyStorage.get("analytics.productNameStoredList");
if(!g){g=[]
}if(l(g)){p="'pageLoadEvent', {'productName': '"+n+"'}";
f("<span />",{record:p}).appendTo("body");
g.push(n);
Cog.addListener2(d.sitecatalystLauncher.name,d.sitecatalystLauncher.events.fired,m)
}}h.init=function(p){if(!o&&b&&p.length>0){n=p.eq(0).data("analyticsConfigProductName");
i.journeyStorage.put("analytics.productName",n);
c();
o=true
}};
Cog.register({name:"analytics.productName",selector:"span.analytics-config-product-name",api:h,externalApi:i,requires:[{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"analytics.sitecatalyst.launcher",apiId:"sitecatalystLauncher"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.productTracker=(function(l,p,d){var n={},o={premiumPageContainer:null,basketContainer:null,userDataTracking:null,singleAncillaryProduct:null,carHire:null,breakdownCover:null,paymentOption:null,journeyStorage:null},g={premiumPageContainer:{name:"premiumPage.container",events:{dataChanged:"dataChanged"}},stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}}},q=null,t=null,s=0,b=null;
function r(){var u=[q].concat(t);
o.journeyStorage.put("product.tracking.data",u)
}function j(w,v){var u=null;
if(w==o.carHire.getTitle()){u=o.carHire.getPrice(v,"annualPrice")
}else{if(w==o.breakdownCover.getTitle()){u=o.breakdownCover.getPrice(v,"annualPrice")
}else{u=o.singleAncillaryProduct.getPrice(w,"annualPrice")
}}return u
}function c(y,x){var v={MLP:"MLP",PNCD:"PNCD",TELE:"TELE",DRIVEXPERT:"TELE",DRIVESURE:"TELE",DRIVEPLUS:"TELE",GHC:"CHGCH",CHC:"CHCC",GHP:"CHGHCP",RES:"BCRSCU",RESP:"BCRSCUP",REC:"BCRCVRY",RECP:"BCRCVRYP",EURP:"BCEP"},w=null,u=null;
if(y==o.carHire.getTitle()){w=o.carHire.getProductCode(x)
}else{if(y==o.breakdownCover.getTitle()){w=o.breakdownCover.getProductCode(x)
}else{w=o.singleAncillaryProduct.getProductCode(y)
}}u=v[w];
return u
}function h(u){var v=o.paymentOption.getPrice("annualPrice")-s;
q={category:"",sku:"Motor Insurance",quantity:"1",price:v,events:{excessValue:u.getExcess()},eVars:{visitorID:o.userDataTracking.getStitchedHash(),quoteRef:b}}
}function i(w){var y,u=w.getItems(),v,x=0;
s=0;
t=[];
for(v=0;
v<u.length;
v++){x=j(u[v].title,u[v].description);
s+=parseFloat(x);
y={category:"",sku:c(u[v].title,u[v].description),quantity:"1",price:x,events:{},eVars:{visitorID:o.userDataTracking.getStitchedHash(),quoteRef:b}};
t.push(y)
}}function f(){var u=o.premiumPageContainer.dataProvider;
i(u);
h(u);
r()
}function m(v){var u=v.eventData;
if(u.state&&u.state.pageData){b=u.state.pageData.quoteRef;
f()
}}n.init=function(u){if(!d||!u.length||u.first().data("analytics-custom-params")!=="vehiclePremiumLoad"){return
}Cog.addListener2(g.premiumPageContainer.name,g.premiumPageContainer.events.dataChanged,f);
Cog.addListener2(g.stateProvider.name,g.stateProvider.events.stateChanged,m)
};
Cog.register({name:"analytics.productTracker",api:n,externalApi:o,selector:"span.analytics-config-userjourneytracking",requires:[{name:"premiumPage.container",apiId:"premiumPageContainer"},{name:"basket.container",apiId:"basketContainer"},{name:"analytics.userDataTracking",apiId:"userDataTracking"},{name:"premiumPage.singleAncillaryProduct",apiId:"singleAncillaryProduct"},{name:"premiumPage.carHire",apiId:"carHire"},{name:"premiumPage.breakdownCover",apiId:"breakdownCover"},{name:"premiumPage.paymentOption",apiId:"paymentOption"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.productName=(function(g,n,l){var q={},p,c,d={},i="",h="",m="",o="",s=false,t=false,r=[],f={DataProvider:null},j={element:null,fieldsTracking:null,visitorValues:null,journeyStorage:null},u={stateProvider:{name:"elements.stateProvider",events:{addUrlParameter:"addUrlParameter",removeUrlParameter:"removeUrlParameter"}},registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}};
function b(){var v=Cog.Type.extend(j.element.Element,{initialize:function(){v.superclass.initialize.call(this)
},submitMulticarPurchase:function(B){var A=d?d[m]:{},x=l.PageDataMgr.data.pageName,z=l.PageDataMgr.data.loadEvent,w=l.PageDataMgr.data.additionalEvent,y=l.PageDataMgr.data.additionalEvars;
l.PageDataMgr.data.additionalEvent=null;
l.PageDataMgr.data.link1=null;
l.PageDataMgr.data.loadEvent=null;
l.PageDataMgr.data.additionalEvars=null;
if(n.s&&A){l.PageDataMgr.data.pageName="Multicar Confirmation";
n.s.eVar2="Motor";
n.s.eVar3=Cog.Cookie.read("dlg.visitorID");
n.s.eVar7="Motor:"+c;
n.s.eVar27="Multi";
n.s.eVar31=o;
n.s.eVar5=A.eVar5;
n.s.eVar8=A.eVar8;
n.s.eVar15=A.eVar15;
n.s.eVar51=A.eVar51;
n.s.eVar52=A.eVar52;
n.s.eVar53=A.eVar53;
n.s.eVar54=A.eVar54;
n.s.eVar55=A.eVar55;
n.s.contextData.bau_multicar_car_number="Car"+A.carNumber;
n.s.events=i;
n.s.purchaseID=m;
n.s.products=h;
n.s.list1=null;
n.s.tl();
l.PageDataMgr.data.additionalEvent=w;
l.PageDataMgr.data.link1=null;
l.PageDataMgr.data.loadEvent=z;
l.PageDataMgr.data.pageName=x;
l.PageDataMgr.data.additionalEvars=y;
l.Sitecatalyst.events=[];
n.s.events="";
this.submitNextCarEvent()
}},handleMulticarDataPush:function(w){if(w&&w.length>1&&w[1].ydData&&!_.contains(r,w[1].quoteRef)){j.fieldsTracking.updateStoreData(w[1].ydData,p);
j.fieldsTracking.updateStoreData(w[1].premiumData,"Multicar Premium");
h=w[1].purchaseProducts;
i=w[1].purchaseEvents;
m=w[1].quoteRef;
c=w[1].coverType;
o=w[1].discounts;
if(!Cog.pages.isConfirmation()){this.submitMulticarPurchase();
r.push(w[1].quoteRef)
}else{h=w[1].purchaseProducts;
j.visitorValues.trackVisitorValues(d[m]);
j.journeyStorage.put("multicar.products",h);
j.journeyStorage.put("analytics.coverType",c);
sessionStorage.setItem("multicar.discounts",o)
}}},submitNextCarEvent:function(){var w=d[m].carNumber,x=_.findWhere(d,{carNumber:w+1});
if(x){l.PageDataMgr.data.link1=null;
n.s.eVar5=x.eVar5;
n.s.eVar8=x.eVar8;
n.s.eVar15=x.eVar15;
n.s.eVar51=x.eVar51;
n.s.eVar52=x.eVar52;
n.s.eVar53=x.eVar53;
n.s.eVar54=x.eVar54;
n.s.eVar55=x.eVar55;
l.PageDataMgr.data.additionalEvars={};
l.PageDataMgr.data.additionalEvars.eVar5=x.eVar5;
l.PageDataMgr.data.additionalEvars.eVar8=x.eVar8;
l.PageDataMgr.data.additionalEvars.eVar15=x.eVar15;
l.PageDataMgr.data.additionalEvars.eVar51=x.eVar51;
l.PageDataMgr.data.additionalEvars.eVar52=x.eVar52;
l.PageDataMgr.data.additionalEvars.eVar53=x.eVar53;
l.PageDataMgr.data.additionalEvars.eVar54=x.eVar54;
l.PageDataMgr.data.additionalEvars.eVar55=x.eVar55;
n.s.contextData.bau_multicar_car_number="Car"+(w+1);
n.s.t()
}},processState:function(z){var y,w,x;
if(!s&&z){j.fieldsTracking.updateStoreData(z,p);
w=_.filter(z,function(A){return !!A.premiumData
});
y=_.filter(z,function(A){if(!A.config){return false
}return A.config.analyticsVisitorValue
});
if(w&&w.length){j.visitorValues.trackVisitorValues(w[0].premiumData)
}else{if(y&&y.length){j.visitorValues.trackVisitorValuesOnPremiumPage(y)
}}Cog.fireEvent(u.stateProvider.name,u.stateProvider.events.removeUrlParameter,{$scope:g(this),additionalParameter:{key:"requestAnalyticsData"}});
if(z.length&&z[0].multicarQuoteRefsList){Cog.fireEvent("cog.onload","multicarQuoteRefs",{multicarQuoteRefs:z[0].multicarQuoteRefsList,multicarQuoteData:z[0].multicarQuoteData});
if((Cog.pages.isReviewPage()||Cog.pages.isPaymentPage())&&z[0].multicarQuoteData){x=z[0].multicarQuoteData[z[0].multicarQuoteRefsList[0]];
j.visitorValues.trackVisitorValues(x)
}d=z[0].multicarQuoteData;
if(Cog.pages.isMulticarConfirmation()&&n.s){n.s.contextData.bau_multicar_car_number="Car"+z[0].multicarQuoteRefsList.length
}}s=true
}this.handleMulticarDataPush(z)
}});
f.DataProvider=v
}q.init=function(v){if(v.length>0){p=v.eq(0).find(".analytics-data-provider").data("pageId");
if(p&&!j.fieldsTracking.hasDataForPage(p)){Cog.fireEvent(u.stateProvider.name,u.stateProvider.events.addUrlParameter,{$scope:v.eq(0),additionalParameter:{key:"requestAnalyticsData",value:"true"}})
}if(Cog.pages.isMulticarJourney()){if(Cog.pages.isReviewPage()||Cog.pages.isPaymentPage()||Cog.pages.isConfirmation()){Cog.fireEvent(u.stateProvider.name,u.stateProvider.events.addUrlParameter,{$scope:v.eq(0),additionalParameter:{key:"requestMulticarData",value:"true"}})
}if(Cog.pages.isPremiumPage()){Cog.fireEvent(u.stateProvider.name,u.stateProvider.events.addUrlParameter,{$scope:v.eq(0),additionalParameter:{key:"requestMulticarPremiumData",value:"true"}})
}}}Cog.fireEvent(u.registry.name,u.registry.events.initialized)
};
q.beforeInit=function(){if(!t&&l){Cog.fireEvent(u.registry.name,u.registry.events.register);
t=true;
b()
}};
q.onRegister=function(v){var w=new f.DataProvider(v.$scope);
v.formElement=w
};
q.onUnregister=function(v){v.formElement.unregister()
};
Cog.registerComponent({name:"analytics.dataProvider",selector:"div.analyticsDataProvider",api:q,externalApi:j,requires:[{name:"forms.elements.element",apiId:"element"},{name:"analytics.fieldsTracking",apiId:"fieldsTracking"},{name:"analytics.visitorValues",apiId:"visitorValues"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},"forms.elementsRegistry","elements.stateProvider"]})
}(COGjQuery,window,window.CQ_Analytics));
(function(g,c,h){var f={},b={},d="analyticsJourneyStore",i={journeyContext:null};
b.put=function(l,o,n){var m,j;
n=n||i.journeyContext.current()||"none";
if(h&&h.DlgMgr){m=h.DlgMgr.getProperty(d)||{};
if(m){j=m[n]||{};
j[l]=o;
m[n]=j;
h.DlgMgr.setProperty(d,m)
}}};
b.get=function(l,o){var n,j,m=null;
o=o||i.journeyContext.current()||"none";
if(h&&h.DlgMgr){n=h.DlgMgr.getProperty(d)||{}
}if(n){j=n[o]||{};
m=j[l]
}return m
};
b.clear=function(){var l,j=i.journeyContext.current()||"none";
if(h&&h.DlgMgr){l=h.DlgMgr.getProperty(d)||{};
if(l&&l.hasOwnProperty(j)){delete l[j];
h.DlgMgr.setProperty(d,l)
}}};
b.remove=function(l){var n,m=i.journeyContext.current()||"none",j;
if(h&&h.DlgMgr){n=h.DlgMgr.getProperty(d)||{};
if(n){j=n[m]||{};
if(j.hasOwnProperty(l)){delete j[l]
}n[m]=j;
h.DlgMgr.setProperty(d,n)
}}};
Cog.registerStatic({name:"component.analytics.journeyStorage",api:f,sharedApi:b,externalApi:i,requires:[{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document,window.CQ_Analytics));
(function(j,q,n){var w={},o={},g={},z={stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}},lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setTrackingEnabled:"setTrackingEnabled"}}},h=null,y=false,f=false,p=null,l=null,m={nBox:null,pageLoad:null};
function c(C){var B=C.eventData.state;
if(B&&B.pageData&&B.pageData.quoteRef){h=B.pageData.quoteRef
}}function v(){_.forOwn(q.s,function(C,B){if(B.indexOf("eVar")==0||B.indexOf("prop")==0){if(typeof C==="string"){q.s[B]=undefined
}}})
}function i(H){var G=g?g[h]:{},D=n.PageDataMgr.data.pageName,F=n.PageDataMgr.data.loadEvent,C=n.PageDataMgr.data.additionalEvent,E=n.PageDataMgr.data.additionalEvars,B=null;
if(H.eventData.lightboxUrl.contains("monthly-payment-breakdown-lightbox")){n.PageDataMgr.data.pageName="Multicar Payment Breakdown";
n.PageDataMgr.data.loadEvent=null
}else{n.PageDataMgr.data.pageName="Multicar Payment Review";
n.PageDataMgr.data.loadEvent="event6:"+h
}n.PageDataMgr.data.additionalEvent=null;
n.PageDataMgr.data.additionalEvars=null;
n.Sitecatalyst.events=[];
v();
q.s.events="";
q.s.purchaseID=null;
q.s.products=null;
if(G){q.s.eVar5=G.eVar5;
q.s.eVar8=G.eVar8;
q.s.eVar15=G.eVar15;
q.s.eVar51=G.eVar51;
q.s.eVar52=G.eVar52;
q.s.eVar53=G.eVar53;
q.s.eVar54=G.eVar54;
q.s.eVar55=G.eVar55;
q.s.contextData.bau_multicar_car_number="Car"+G.carNumber;
B=j('input[id="formField.payment.multicarPaymentType"]').val();
if(B=="sameMethod"){q.s.contextData.bau_multicar_payment_method="same"
}else{q.s.contextData.bau_multicar_payment_method="different"
}}q.s.t();
n.PageDataMgr.data.additionalEvent=C;
n.PageDataMgr.data.link1=null;
n.PageDataMgr.data.loadEvent=F;
n.PageDataMgr.data.pageName=D;
n.PageDataMgr.data.additionalEvars=E;
n.Sitecatalyst.events=[];
q.s.events="";
q.s.contextData.bau_multicar_payment_method=null
}function r(B){if(n&&q.s){if(g&&g[h]){i(B);
return
}n.PageDataMgr.data.loadEvent="event6:"+h;
n.PageDataMgr.data.additionalEvent=null;
p=n.PageDataMgr.data.pageName;
n.PageDataMgr.data.pageName="Payment Review";
v();
q.s.events="";
n.Sitecatalyst.events=[];
n.CCM.fireEvent("cog.onload");
f=true
}}function b(){Cog.fireEvent(z.lastFieldTracking.moduleName,z.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:true})
}function x(){var B=j("div.featherlight span.analytics-config-userjourneytracking");
return B.first().data("analyticsCustomParams")
}function A(){j("span[record]").each(function(){j(this).remove()
})
}function u(C){var B;
l=x();
if(l=="vehiclePaymentLightboxLoad"){B=location.protocol+"//"+location.hostname+C.eventData.lightboxUrl;
A();
b();
m.pageLoad.addPageUrlRecordSpan(B);
m.pageLoad.addSiteCatalystCookieVisitorIdSpan();
r(C)
}}function t(){if(q.s&&f){n.PageDataMgr.data.pageName=p
}}function d(B){if(B&&B.eventData&&B.eventData.content){h=B.eventData.content.quoteRef
}}function s(B){o=B.eventData.multicarQuoteRefs;
g=B.eventData.multicarQuoteData||{}
}w.beforeInit=function(){if(!y&&n){y=true;
Cog.addListener2(z.stateProvider.name,z.stateProvider.events.stateChanged,c);
Cog.addListener2("cog.onload","multicarQuoteRefs",s);
Cog.addListener2("payment.lightbox","update",d);
Cog.addListener2("nBox","loaded",u);
Cog.addListener2("nBox","closed",t)
}};
Cog.register({api:w,name:"analytics.paymentPage",selector:"div.featherlight span.analytics-config-userjourneytracking",externalApi:m,requires:[{name:"nBox",apiId:"nBox"},{name:"analytics.pageLoad",apiId:"pageLoad"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(g,n,j){var s={},w={stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}},lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setTrackingEnabled:"setTrackingEnabled"}}},f=null,u=false,d=false,l=null,h=null,i={pageLoad:null,journeyStorage:null,customStorage:null};
function r(){_.forOwn(n.s,function(z,y){if(y.indexOf("eVar")==0||y.indexOf("prop")==0){if(typeof z==="string"){n.s[y]=undefined
}}})
}function o(){if(j&&n.s){j.PageDataMgr.data.loadEvent=null;
j.PageDataMgr.data.additionalEvent=null;
l=j.PageDataMgr.data.pageName;
j.PageDataMgr.data.pageName="Ancillaries Review Lightbox";
r();
n.s.events="";
j.Sitecatalyst.events=[];
j.CCM.fireEvent("cog.onload");
d=true
}}function v(y,z){g("<span />",{record:z}).appendTo(y)
}function m(D){var E=[],C,z,A,y,B=g("body");
g(".conditionalContainer").each(function(){var H=g(this),F=H.find(".componentConfiguration").data("id"),G=D.componentStates[F];
if(G&&G.visible==true){E.push(H.find(".ancillaryLabelAnalytics").data("analytics-label"))
}});
C=E.join("_");
if(B.hasClass("lightbox-open")){if(C){z='"ancillaryLightBoxClicked", {"unselectedAncillariesEvar": "'+C+'", "unselectedAncillariesValue": "'+C+'"}';
v(B,z)
}A=i.journeyStorage.get("ancillaryCustomTracking");
if(A){v(B,A);
i.customStorage.removeItem("customLinkTracking")
}else{y=i.customStorage.getItem("customLinkTracking");
if(y&&y.eVarValue){v(B,'"customLinkTrackingClick",{"customLinkTrackingValue": "'+y.eVarValue+'"}');
Cog.Cookie.erase("dlg.customLinkTracker");
i.customStorage.removeItem("customLinkTracking")
}}o()
}}function t(){var y=g("div.featherlight span.analytics-config-userjourneytracking");
return y.first().data("analyticsCustomParams")
}function c(z){var y=z.eventData.state;
if(y&&y.pageData&&y.pageData.quoteRef){f=y.pageData.quoteRef
}h=t();
if(y&&h=="vehiclePremiumLightboxLoad"&&g("div.featherlight span.analytics-config-userjourneytracking").length){m(y)
}}function b(){Cog.fireEvent(w.lastFieldTracking.moduleName,w.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:true})
}function x(){g("span[record]").each(function(){g(this).remove()
})
}function q(z){var y;
h=h||t();
if(h=="vehiclePremiumLightboxLoad"){y=location.protocol+"//"+location.hostname+z.eventData.lightboxUrl;
x();
b();
i.pageLoad.addPageUrlRecordSpan(y);
i.pageLoad.addSiteCatalystCookieVisitorIdSpan()
}}function p(){if(n.s&&d){j.PageDataMgr.data.pageName=l
}}s.beforeInit=function(){if(!u&&j){u=true;
Cog.addListener2(w.stateProvider.name,w.stateProvider.events.stateChanged,c);
Cog.addListener2("nBox","loaded",q);
Cog.addListener2("nBox","closed",p)
}};
Cog.register({api:s,name:"analytics.premiumPage",selector:"div.featherlight span.analytics-config-userjourneytracking",externalApi:i,requires:[{name:"nBox",apiId:"nBox"},{name:"analytics.pageLoad",apiId:"pageLoad"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"commons.customStorage",apiId:"customStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.premiumPageBasketTracker=(function(g,m,c){var j={},i={},l={premiumPageContainer:null,sitecatalystLauncher:null},n={GHP:"M:GHC+",MLP:"M:MLP",PNCD:"M:PNCD",TELE:"M:Telematics",RES:"M:BreakdownRescue",RESP:"M:BreakdownRescue+",RECP:"M:BreakdownRecovery+",EURP:"M:BreakdownEuro+"};
function h(r){var q,p;
r=r||{};
q=(r.productCode||r.description||"").trim().toUpperCase();
p=q?"M:"+q:"";
return n[q]||p
}function f(p){return p&&p!=="M:"
}function d(p){return !p.isReplacementProduct
}function b(p){return p.filter(d).map(h).filter(f)
}function o(){var q,p,r;
q=l.premiumPageContainer.dataProvider.getItems();
p=b(q);
r=p.join("|");
if(m.s&&m.s.contextData&&r){m.s.contextData.bau_land_addon=r
}}i.assignCode=function(p){return h(p)
};
i.itemNotExcluded=function(p){return d(p)
};
j.init=function(){if(Cog.pages.isPremiumPage()){Cog.addListener2("analytics.sitecatalyst.launcher","beforeAnalyticsOnLoad",o)
}};
Cog.registerStatic({name:"analytics.premiumPageBasketTracker",api:j,externalApi:l,sharedApi:i,requires:[{name:"premiumPage.container",apiId:"premiumPageContainer"},{name:"analytics.sitecatalyst.launcher",apiId:"sitecatalystLauncher"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.telematicsLinkTracker=(function(g,f,c){var d={},b={},i={customStorage:null,journeyStorage:null};
function h(o){var n=g(o.target).find("span.telematics-link-tracking"),m={linkpagename:o.view.CQ_Analytics.PageDataMgr.data.pageName,componentname:n.attr("data-telematics-component-name"),linkname:n.attr("data-telematics-link-name")},l='"telematicsLinkTrackingClick", {"linkpagename": "'+m.linkpagename+'","componentname": "'+m.componentname+'","linkname": "'+m.linkname+'"}';
Cog.Cookie.create("dlg.telematicsLinkTracker",l,1);
i.customStorage.putItem("telematicsLinkTracker",m)
}function j(m){var l=i.customStorage.getItem("telematicsLinkTracker")||Cog.Cookie.read("dlg.telematicsLinkTracker");
if(f.s&&f.s.contextData&&l){f.s.contextData.bau_linkpagename=l.linkpagename;
f.s.contextData.bau_componentname=l.componentname;
f.s.contextData.bau_linkname=l.linkname
}i.customStorage.removeItem("telematicsLinkTracker");
Cog.Cookie.erase("dlg.telematicsLinkTracker")
}d.init=function(l){if(!c){return
}l.on("click",h);
Cog.addListener2("analytics.sitecatalyst.launcher","beforeAnalyticsOnLoad",j)
};
Cog.register({name:"analytics.telematicsLinkTracker",api:d,sharedApi:b,externalApi:i,selector:"a.telematics-link-tracking",requires:[{name:"commons.customStorage",apiId:"customStorage"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.telematicsQuestion=(function(f){var d={},b={},g={pagesManager:null};
function c(){var u=f("[id^=formField\\.details\\.birthDate\\.year]"),m=u.length,x=false,l=-1,s=null,n=null,r=null,q=null,j=null,w=null,t=null,p=null,v=null,o=function(i){return i.value==="F"
};
if(u.length!==0){s=u[0].id[u[0].id.length-1];
if(s!=="r"){m+=parseInt(s,10)+1;
l=parseInt(s,10)
}for(p=l;
p<m-1;
p++){n="_"+p;
if(p<0){n=""
}r=new Date(parseInt(f("#formField\\.details\\.birthDate\\.year"+n)[0].value,10)+26,parseInt(f("#formField\\.details\\.birthDate\\.month"+n)[0].value,10)-1,f("#formField\\.details\\.birthDate\\.day"+n)[0].value,8,0,0,0);
q=f(".field-yearOfManufacture")[0];
j=q?Number(q.innerHTML):0;
w=parseInt(f("#formField\\.vehicle\\.year\\.year")[0].value,10);
t=Array.prototype.slice.call(f("#formField\\.details\\.licenceType")).every(o);
if(r>=new Date()&&(j>=1996||w>=1996)&&t===true){x=true
}}v=f("#telematics-box");
if(x){if(v.is(":visible")){f("#formField.telematics-1").attr("checked",true);
f("#formField.telematics-2").attr("checked",false)
}v.show()
}else{f("#formField.telematics-1").attr("checked",false);
f("#formField.telematics-2").attr("checked",true);
v.hide()
}}}function h(){try{c()
}catch(i){f("#telematics-box").hide();
console.error(i)
}}d.init=function(){if(!g.pagesManager.isDetailsPage()){return
}h();
var i=f("form"),j=i.serialize();
f("form :input").on("change input",function(){if(i.serialize()!==j){j=i.serialize();
h()
}});
f("button.dropdown-selection-option").on("click",function(){setTimeout(function(){h()
},200)
})
};
Cog.register({name:"analytics.telematicsQuestion",api:d,sharedApi:b,externalApi:g,requires:[{name:"component.pagesManager",apiId:"pagesManager"}]})
}(COGjQuery));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.singleAncillaryProductTracker=(function(f,i,c){var g={},d={container:{name:"premiumPage.container",events:{itemAdded:"itemAdded"}}},h={premiumPageContainer:null,customStorage:null,premiumPageBasketTracker:null},j={noneCode:"NONE"},l={productChanged:"productChanged"};
function m(n){return n&&n.trim().length>0
}function b(p,o){var n=o.split("|");
if(n.indexOf(p)===-1){n.push(p);
o=n.filter(m).join("|")
}return o
}g.init=function(n){if(!c||n.length===0){return
}Cog.addListener2("singleAncillaryProductTracker",l.productChanged,function(u){var t,s,r,o,q,p;
t=u.eventData;
if(t.productCode!==j.noneCode&&h.premiumPageBasketTracker.itemNotExcluded(t)){s=h.premiumPageBasketTracker.assignCode(t);
q=h.customStorage.getItem("contextDataVariables")||{};
if(t.action==="added"){r=b(s,q.bau_addonadded||"");
q.bau_addonadded=r
}else{if(t.action==="removed"){o=b(s,q.bau_addonremoved||"");
q.bau_addonremoved=o
}}h.customStorage.putItem("contextDataVariables",q);
if(t.telematics){p=t.action==="added"?"YES":"NO";
h.journeyStorage.put("telematics.tracking","Drive_sure_telematic:"+p)
}}})
};
Cog.register({name:"analytics.singleAncillaryProductTracker",api:g,externalApi:h,selector:"div.analytics-singleAncillaryProductTracker",requires:[{name:"premiumPage.container",apiId:"premiumPageContainer"},{name:"commons.customStorage",apiId:"customStorage"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"analytics.premiumPageBasketTracker",apiId:"premiumPageBasketTracker"}]})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.claimsConvictionsPreprocessor=(function(g,j){var i={},h={},m;
function d(r,s){var p=false,u=r.config.analyticsFieldTrackingBindings,t,q;
for(q=0;
q<u.length;
q++){t=u[q].substr(0,u[q].lastIndexOf("."));
if(t===s&&u[q]!==s+".default"){p=true;
break
}}return p
}function n(p){return _.last(p.split("_"))
}function f(q){var p,r;
if(q.data.hasOwnProperty("origin")){p=q.data.origin
}else{r=_.first(_.keys(q.data));
p=q.data[r].origin
}return p
}function c(r){var p=[],q;
for(q=0;
q<m.length;
q++){if(d(m[q],r)){p.push(m[q])
}}return p
}function l(p,r,q){p[r]=p[r]||[];
p[r].push(q);
return p
}function o(q){var r,s,t,p=[];
for(r=0;
r<q.length;
r++){s=q[r];
t=n(f(s));
p=l(p,t,s)
}return p
}function b(p){_.remove(m,function(q){return _.contains(p,q)
})
}h.process=function(){var q,r,p=this.defaultItem;
m=this.items;
r=c(this.prefix);
q=o(r);
b(r);
p.data.children=q;
return m
};
Cog.registerStatic({name:"analytics.claimsConvictionsPreprocessor",api:i,sharedApi:h})
}(COGjQuery,window));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.additionalDriverPreprocessor=(function(b,j){var s={},r={},t,f={bindingTypes:null,claimsConvictionsPreprocessor:null},i;
function c(C){return C.config.analyticsFieldTrackingBindings
}function x(D,E){var F=c(D),C=function(I){var G=_.first(I.split("."))===E,H=I!==E+".default";
return G&&H
};
return _.find(F,C)
}function l(C){return C.substr(0,C.lastIndexOf("."))
}function d(D){var C=D.split("_");
return C.length>1?C[1]:C[0]
}function B(E){var C,F,D;
if(E.data.hasOwnProperty("origin")){C=E.data.origin
}else{for(D in E.data){if(E.data.hasOwnProperty(D)){F=E.data[D];
break
}}C=F.origin
}return C
}function n(C){return _.filter(t,function(D){return x(D,C)
})
}function z(C,E,D){C[E]=C[E]||[];
C[E].push(D);
return C
}function o(D){var E,F,G,C=[];
for(E=0;
E<D.length;
E++){F=D[E];
G=d(B(F));
C=z(C,G,F)
}return C
}function q(C,D){return _.find(c(D),function(E){return E===C
})
}function m(C,D){_.remove(C,function(E){return !_.isUndefined(q(D,E))
})
}function A(E,C){var D;
for(D=0;
D<C.length;
D++){m(E,C[D])
}}function p(E,F){var D,C=null;
for(D=0;
D<E.length;
D++){if(!_.isUndefined(q(F,E[D]))){C=E[D];
break
}}return C
}function w(I,D,H){var G,C=[],F,E;
for(G=0;
G<I.length;
G++){F=q(D,I[G]);
E=q(H,I[G]);
if(!_.isUndefined(F)||!_.isUndefined(E)){C.push(I[G])
}}return C
}function u(C){return w(C,i.ADDITIONAL_DRIVERS_CLAIMS,i.ADDITIONAL_DRIVERS_CLAIMS_ITEM)
}function h(C){return w(C,i.ADDITIONAL_DRIVERS_CONVICTIONS,i.ADDITIONAL_DRIVERS_CONVICTIONS_ITEM)
}function y(D,E,C){return f.claimsConvictionsPreprocessor.process.call({items:D,prefix:l(E),defaultItem:C})
}function v(F){var E,D,G,C=u(F),H=h(F);
D=p(C,i.ADDITIONAL_DRIVERS_CLAIMS);
G=p(H,i.ADDITIONAL_DRIVERS_CONVICTIONS);
if(D){y(C,i.ADDITIONAL_DRIVERS_CLAIMS,D)
}if(G){y(H,i.ADDITIONAL_DRIVERS_CONVICTIONS,G)
}m(F,i.ADDITIONAL_DRIVERS_CLAIMS_ITEM);
m(F,i.ADDITIONAL_DRIVERS_CONVICTIONS_ITEM);
return F
}function g(F,D){var C,E=i.ADDITIONAL_DRIVERS+".default";
_.findIndex(F,function(G){C=false;
if(!_.isUndefined(q(E,G))){C=true
}return C
})
}r.process=function(){var D,G,H,F=[],C=this.defaultItem,E=[i.ADDITIONAL_DRIVERS_CLAIMS,i.ADDITIONAL_DRIVERS_CONVICTIONS,i.ADDITIONAL_DRIVERS_CLAIMS_ITEM,i.ADDITIONAL_DRIVERS_CONVICTIONS_ITEM,i.ADDITIONAL_DRIVERS_ITEM];
t=this.items;
H=n(this.prefix);
D=o(H);
for(G=0;
G<D.length;
G++){F.push(v(D[G]))
}C.data.children=F;
g(t,C);
A(t,E);
return t
};
s.init=function(){i=f.bindingTypes.PREPROCESSOR_BINDING_TYPES
};
Cog.registerStatic({name:"analytics.additionalDriverPreprocessor",api:s,sharedApi:r,externalApi:f,requires:[{name:"analytics.preprocessorBindingTypes",apiId:"bindingTypes"},{name:"analytics.claimsConvictionsPreprocessor",apiId:"claimsConvictionsPreprocessor"}]})
}(COGjQuery,window));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.emptyValuesPreprocessor=(function(j,i){var h={},b={};
function c(n,l,m){return _.isUndefined(n)||_.isEmpty(l)||_.isEmpty(m)
}function d(p){var n,o=_.keys(p.data),m,l;
for(n=0;
n<o.length;
n++){m=o[n];
if(p.data[m].hasOwnProperty("value")&&p.data[m].hasOwnProperty("origin")){l=c(p.data[m].value,p.data[m].origin,p.config.analyticsLabel);
if(!l){break
}}else{if(p.data[m].hasOwnProperty("origin")){l=true
}}}return l
}function f(l){return c(l.data.value,l.data.origin,l.config.analyticsLabel)
}function g(m){var l=false;
if(m.data&&(m.data.hasOwnProperty("value")||m.data.hasOwnProperty("origin"))){l=f(m)
}else{l=d(m)
}return l
}b.process=function(l){_.remove(l,g);
return l
};
Cog.registerStatic({name:"analytics.emptyValuesPreprocessor",api:h,sharedApi:b})
}(COGjQuery,window));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.parsingProcessor=(function(i,n){var l={},j={},m={factory:null,claimsConvictionsPreprocessor:null,siblingGroupingPreprocessor:null,preprocessorFactory:null};
function c(u,v,s,t){return{data:u,trackAs:v,analyticsLabel:s,children:t||[]}
}function f(t){var s=t.split(".");
return _.last(s)==="default"&&s.length===2
}function q(s){return s.config
}function b(s){return q(s).analyticsFieldTrackingBindings||[]
}function h(s){return _.find(b(s),f)
}function r(s){return _.first(s.split("."))
}function d(u,x){var s=[],t,w,v;
for(w=0;
w<u.length;
w++){t=b(u[w]);
for(v=0;
v<t.length;
v++){if(r(t[v])===x&&!f(t[v])){s.push(c(u[w].data,t[v],u[w].analyticsLabel,null))
}}}return s
}function o(t){var s=[],u,v;
for(u=0;
u<t.length;
u++){v=h(t[u]);
if(v){s.push(c(t[u].data,v,t[u].config.analyticsLabel,d(t,r(v))))
}}return s
}function p(s){return m.preprocessorFactory.produce(s)
}function g(z){var u,t,y,B,s,x,w=m.emptyValuesPreprocessor.process(z),A=_.clone(w,false),v;
for(u=0;
u<w.length;
u++){y=w[u];
s=b(y);
for(t=0;
t<s.length;
t++){x=s[t];
if(f(x)){v=r(x);
B=p(v);
if(!_.isUndefined(B)){A=B.call({items:A,prefix:v,defaultItem:y})
}}}}return A
}j.process=function(v){var t,u,y,x,w,s=[];
t=g(v);
t=o(t);
for(u=0;
u<t.length;
u++){w=r(t[u].trackAs);
y=m.factory.getParser(w);
if(y){x=y.call(t[u]);
if(_.isArray(x)){s=s.concat(x)
}else{s.push(x)
}}}return s
};
Cog.registerStatic({name:"analytics.parsingProcessor",api:l,externalApi:m,sharedApi:j,requires:[{name:"analytics.parserFactory",apiId:"factory"},{name:"analytics.claimsConvictionsPreprocessor",apiId:"claimsConvictionsPreprocessor"},{name:"analytics.siblingGroupingPreprocessor",apiId:"siblingGroupingPreprocessor"},{name:"analytics.repeatingContainerPreprocessorFactory",apiId:"preprocessorFactory"},{name:"analytics.emptyValuesPreprocessor",apiId:"emptyValuesPreprocessor"}]})
}(COGjQuery,window));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.parserFactory=(function(f,d){var c={},b={},h={parser:null,bindingTypes:null},g={};
b.getParser=function(i){return g[i]
};
c.init=function(){var l=this.external.parser,i=this.external.bindingTypes.BINDING_TYPES,j=function(m,n){g[i[n]]=l[m]
};
_.map({DIRECT:"passValue",POST_CODE:"parsePostCode",GENDER:"parseGender",LIVED_IN_UK:"parseLivedInUk",NO_CLAIMS:"parseNoClaims",NO_CONVICTIONS:"parseNoConvictions",VEH_DETAILS:"parseVehDetails",ADDITIONAL_DRIVERS:"parseAdditionalDrivers",TOTAL_POLICY_VALUE:"parseTotalPolicyValue",ANCILLARIES:"parseAncillaries",LIVED_IN_UK_AGE:"parseAge",AGE:"parseAge",DATE:"parseDate",PURCHASE_DATE:"parsePurchaseDate",CHECKBOX:"parseCheckbox",OPTIONAL_DIRECT:"parseOptionalDirect",PAGEDATA_VALUES:"parsePageDataValues"},j)
};
Cog.registerStatic({name:"analytics.parserFactory",api:c,sharedApi:b,externalApi:h,requires:[{name:"analytics.trackingComponentDataParser",apiId:"parser"},{name:"analytics.parserBindingTypes",apiId:"bindingTypes"}]})
}(COGjQuery,window));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.repeatingContainerPreprocessorFactory=(function(h,g){var d={},b={},j={bindingTypes:null,claimsConvictionsPreprocessor:null,additionalDriverPreprocessor:null,siblingGroupingPreprocessor:null},i,c={};
function f(m,l){c[m]=l
}b.produce=function(l){return c[l]
};
d.init=function(){i=this.external.bindingTypes.PREPROCESSOR_BINDING_TYPES;
f(i.NO_CLAIMS,j.claimsConvictionsPreprocessor.process);
f(i.NO_CONVICTIONS,j.claimsConvictionsPreprocessor.process);
f(i.ADDITIONAL_DRIVERS,j.additionalDriverPreprocessor.process);
f(i.ANCILLARIES,j.siblingGroupingPreprocessor.process)
};
Cog.registerStatic({name:"analytics.repeatingContainerPreprocessorFactory",api:d,sharedApi:b,externalApi:j,requires:[{name:"analytics.claimsConvictionsPreprocessor",apiId:"claimsConvictionsPreprocessor"},{name:"analytics.siblingGroupingPreprocessor",apiId:"siblingGroupingPreprocessor"},{name:"analytics.preprocessorBindingTypes",apiId:"bindingTypes"},{name:"analytics.additionalDriverPreprocessor",apiId:"additionalDriverPreprocessor"}]})
}(COGjQuery,window));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.preprocessorBindingTypes=(function(f,d){var c={},b={};
b.PREPROCESSOR_BINDING_TYPES={NO_CLAIMS:"noClaims",NO_CONVICTIONS:"noConvictions",ADDITIONAL_DRIVERS:"additionalDrivers",ADDITIONAL_DRIVERS_ITEM:"additionalDrivers.item",ADDITIONAL_DRIVERS_CLAIMS:"additionalDrivers.claim.default",ADDITIONAL_DRIVERS_CONVICTIONS:"additionalDrivers.conviction.default",ADDITIONAL_DRIVERS_CLAIMS_ITEM:"additionalDrivers.claim.item",ADDITIONAL_DRIVERS_CONVICTIONS_ITEM:"additionalDrivers.conviction.item",ANCILLARIES:"ancillaries"};
Cog.registerStatic({name:"analytics.preprocessorBindingTypes",api:c,sharedApi:b})
}(COGjQuery,window));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.parserBindingTypes=(function(f,d){var c={},b={};
b.BINDING_TYPES={DIRECT:"direct",POST_CODE:"postCode",GENDER:"gender",LIVED_IN_UK:"livedInUk",NO_CLAIMS:"noClaims",NO_CONVICTIONS:"noConvictions",VEH_DETAILS:"vehDetails",ADDITIONAL_DRIVERS:"additionalDrivers",AGE:"age",TOTAL_POLICY_VALUE:"totalPolicyValue",ANCILLARIES:"ancillaries",LIVED_IN_UK_AGE:"livedInUk.age",DATE:"date",PURCHASE_DATE:"purchaseDate",CHECKBOX:"checkbox",OPTIONAL_DIRECT:"optionalDirect",PAGEDATA_VALUES:"pageDataValues"};
Cog.registerStatic({name:"analytics.parserBindingTypes",api:c,sharedApi:b})
}(COGjQuery,window));
(function(h,n){var l={},g={stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}},sitecatalystLauncher:{name:"analytics.sitecatalyst.launcher",events:{register:"register",pageStateProcessed:"pageStateProcessed"}}},p=null,q=false,f=false,i={},m={formDataParser:null,journeyStorage:null,bindingTypes:null};
function o(s,t){var r={};
r[s]=t;
return r
}function d(s,t,r){return new Date(s,t,r,0,0,0)
}function j(s){var r=s.eventData;
if(q&&!f){if(r.state){p=r.state
}f=true;
Cog.fireEvent(g.sitecatalystLauncher.name,g.sitecatalystLauncher.events.pageStateProcessed)
}}function c(r,s){return _.find(r,function(t){return t.trackAs===s
})
}function b(t){var r=d(t.data.year.value,t.data.month.value-1,t.data.day.value),s=d(p.dateTime.year,p.dateTime.month,p.dateTime.dayOfMonth);
return m.formDataParser.parseAge(r,s)
}i.parsePostCode=function(){var r=m.formDataParser.parsePostCode(this.data.postcode.value,4);
return o(this.analyticsLabel,r)
};
i.parseAge=function(){var r=b(this);
return o(this.analyticsLabel,r)
};
i.passValue=function(){var s,r=[];
if(this.data.hasOwnProperty("value")){s=this.data.value
}else{_.each(this.data,function(t){if(!_.isUndefined(t.value)){r.push(t.value)
}});
s=r.join("-")
}return o(this.analyticsLabel,s)
};
i.parseGender=function(){var r=m.formDataParser.parseGender(this.data.gender.value);
return[o(this.analyticsLabel,r),o("TITLE",this.data.title.value)]
};
i.parsePurchaseDate=function(){var r;
if(this.data.checked.value===true){r="NYP"
}else{r=m.formDataParser.parseDate(this.data.year.value,this.data.month.value)
}return o(this.analyticsLabel,r)
};
i.parseDate=function(){var r=m.formDataParser.parseDate(this.data.year.value,this.data.month.value,this.data.day.value);
return o(this.analyticsLabel,r)
};
i.parseLivedInUk=function(){var r=d(p.dateTime.year,p.dateTime.month,p.dateTime.dayOfMonth),v,u=c(this.children,m.bindingTypes.BINDING_TYPES.LIVED_IN_UK_AGE.valueOf()),s=b(u),t;
if(this.data.year&&this.data.month&&this.data.day){v=d(this.data.year.value,this.data.month.value,this.data.day.value)
}else{if(this.data.year&&this.data.month){v=d(this.data.year.value,this.data.month.value,1)
}}t=m.formDataParser.parseSinceWhenYouLivedInUk(s,this.data.checked.value,v,r);
return o(this.analyticsLabel,t)
};
i.parseNoClaims=function(){var r=m.formDataParser.parseNoClaimsOrConvitions(this.data);
return o(this.analyticsLabel,r)
};
i.parseNoConvictions=function(){var r=m.formDataParser.parseNoClaimsOrConvitions(this.data);
return o(this.analyticsLabel,r)
};
i.parseVehDetails=function(){var r=m.formDataParser.parseVehicleDetails(this.data.make.value,this.data.model.value,this.data.year.value);
return o(this.analyticsLabel,r)
};
i.parseAdditionalDrivers=function(){var r=m.formDataParser.parseAdditionalDrivers(this.data);
return o(this.analyticsLabel,r)
};
i.parseCheckbox=function(){var r=m.formDataParser.parseCheckbox(this.data.value,"N","Y");
return o(this.analyticsLabel,r)
};
i.parseOptionalDirect=function(){var r=this.data.value||"N/A";
return o(this.analyticsLabel,r)
};
i.parsePageDataValues=function(){var r=null;
if(this.data.datasource&&this.data.datasource.value=="pageBoundDataProvider"){r=o("RCP",this.data.rcpCode.value)
}else{if(this.data.currentPage.value=="vehicleYourDetailsLoad"){r=o("RCP",this.data.rcpCode.value)
}else{if(this.data.currentPage.value=="vehiclePremiumLoad"||this.data.currentPage.value=="vehiclePremiumLightboxLoad"){r=[o("QuoteRef",this.data.quoteRef.value+"|"+this.data.quoteSeq.value),o("APR",this.data.aprValue.value)]
}else{if(m.journeyStorage.get("quickQuote")==true){r=o("Quote_type","Quick quote")
}else{if(this.data.currentPage.value=="vehiclePaymentLoad"||this.data.currentPage.value=="vehiclePaymentLightboxLoad"){r=o("APR",this.data.aprValue.value)
}}}}}return r
};
i.parseTotalPolicyValue=function(){return{totalPolicyValue:Math.round(this.data.annualPrice.value)}
};
i.parseAncillaries=function(){var r=this.data.siblings;
this.data.siblings=null;
r.push(this);
return m.formDataParser.parseAncillaries(r)
};
l.init=function(){if(!q){q=true;
Cog.addListener2(g.stateProvider.name,g.stateProvider.events.stateChanged,j);
Cog.fireEvent(g.sitecatalystLauncher.name,g.sitecatalystLauncher.events.register)
}};
Cog.registerStatic({name:"analytics.trackingComponentDataParser",api:l,sharedApi:i,externalApi:m,requires:[{name:"commons.formDataParser",apiId:"formDataParser"},{name:"analytics.parserBindingTypes",apiId:"bindingTypes"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"}]})
}(COGjQuery,document));
Cog.component.analytics=Cog.component.analytics||{};
Cog.component.analytics.siblingGroupingPreprocessor=(function(j,i){var h={},c={},d;
function g(n,o){var l=false,p=n.config.analyticsFieldTrackingBindings,m;
for(m=0;
m<p.length;
m++){if(_.first(p[m].split("."))===o){l=true;
break
}}return l
}function b(n,m){var l=[];
_.forEach(d,function(o){if(g(o,n)&&o!=m){l.push(o)
}});
return l
}function f(l){_.remove(d,function(m){return _.contains(l,m)
})
}c.process=function(){var m=[],n=[],l=this.defaultItem;
d=this.items;
if(!l.merged){n=b(this.prefix,l);
f(n);
l.data.siblings=n;
_.each(n,function(o){o.merged=true
})
}return d
};
Cog.registerStatic({name:"analytics.siblingGroupingPreprocessor",api:h,sharedApi:c})
}(COGjQuery,window));
(function(h,b){var f={},d=false,i=false,c=(function(){var j={};
j.getPremiumInitialized=function(){return i
};
return j
}());
function g(){i=true
}f.beforeInit=function(){if(!d){d=true;
Cog.addListener2("premiumPage.container","dataChanged",g)
}};
Cog.register({name:"basket.container",api:f,sharedApi:c,selector:"aside.form-sidebar"})
}(COGjQuery,document));
(function(g,c){var f={},h={premiumPageContainer:null,basketContainer:null};
function d(p){var o=null,i=false,l=p.find("mark"),n=p.find(".basket-covertype"),j,m=h.premiumPageContainer.dataProvider;
o=m.getExcess();
if(g.isNumeric(o)){if(l.data("ch")){l.html("<h3>&pound;"+Math.round(o).toFixed(2)+"</h3>")
}else{if(l.data("dl")){l.html("<b>&pound;"+Math.round(o).toFixed(2)+"</b>")
}else{l.html("&pound;"+Math.round(o).toFixed(2))
}}}i=m.getCoverType()==="COMP";
if((g.isNumeric(o)&&i)||l.data("dl")){p.show()
}else{p.hide()
}if(n.length){if(m.getCoverType()==="COMP"){j="Comprehensive"
}else{if(m.getCoverType()==="TPFT"){j="Third Party Fire And Theft"
}}n.find("span").text(j);
if(!g.isNumeric(o)){p.find(".discounts").hide()
}else{p.find(".discounts").show()
}}}function b(i){if(h.basketContainer.getPremiumInitialized()===true){d(i)
}Cog.addListener2("premiumPage.container","dataChanged",function(){d(i)
})
}f.init=function(i){if(i.length>0){b(i.first())
}};
Cog.register({name:"basket.shoppingBasketVoluntaryExcessAndCoverType",api:f,externalApi:h,requires:[{name:"premiumPage.container",apiId:"premiumPageContainer"},{name:"basket.container",apiId:"basketContainer"}],selector:"div.shoppingBasketVoluntaryExcessAndCoverType"})
}(COGjQuery,document));
(function(g,c){var f={},h={premiumPageContainer:null,basketContainer:null};
function d(m){var n=null,j=m.find("mark"),i=m.find(".quote-type"),l=m.find("span.messages");
if(m!=null){n=h.premiumPageContainer.dataProvider.getQuote();
if(n.cost){if(j.data("ch")){j.html("<h1>&pound;"+n.cost+"</h1>")
}else{j.html("&pound;"+n.cost)
}}if(n.selected==="annual"){i.html(l.data("yearly-message"))
}else{i.html(l.data("monthly-message"))
}}}function b(i){if(h.basketContainer.getPremiumInitialized()===true){d(i)
}Cog.addListener2("premiumPage.container","dataChanged",function(){d(i)
})
}f.init=function(i){if(i.length>0){b(i.first())
}};
Cog.register({name:"basket.shoppingBasketQuote",api:f,externalApi:h,requires:[{name:"premiumPage.container",apiId:"premiumPageContainer"},{name:"basket.container",apiId:"basketContainer"}],selector:"div.shoppingBasketQuote"})
}(COGjQuery,document));
(function(h,p){var o={},i={basketContainer:null,premiumPageContainer:null,priceHelper:null,rebrand:null},c=["TELE","DRIVEXPERT","DRIVEPLUS","DRIVESURE"];
function f(w){w.$list.hide();
w.$emptyMessage.show()
}function r(A,y){var z=h("<strong />",{html:A.title}),w=h("<span />",{html:(A.description||"")}),x=h("<mark />",{html:"&pound;"+i.priceHelper.getAncillaryPrice(A.title,A.description,y)});
return h("<li />").append(z).append(w).append(x)
}function d(A,y){var z=h("<strong />",{html:(A.description||A.title)}),w=h("<span />",{html:""}),x=h("<mark />",{html:"&pound;"+i.priceHelper.getAncillaryPrice(A.title,A.description,y)});
return h("<li />").append(z).append(w).append(x)
}function n(x,w){return x.carHire&&i.rebrand.isRebranded()?d(x,w):r(x,w)
}function g(w){return w.description=="EXCLUDE_FROM_BASKET"||_.indexOf(c,w.productCode)>-1
}function q(w){return"ADD IN FREE MLP FOR CHU CUSTOMERS"===(w.promotionalCodeDetails||"").trim().toUpperCase()
}function s(w){return"MLP"===w.productCode
}function l(w,x){return q(w)&&s(x)
}function v(w,y){var x=0;
if(y.length>0){_.forEach(y,function(z){if(!z.isReplacementProduct&&!g(z)&&!l(w,z)){x+=1
}})
}return x
}function t(x,w){var y,A,B=i.premiumPageContainer.dataProvider.getQuote(),z=B.selected+"Price";
x.$list.empty();
for(y=0;
y<w.length;
y++){A=w[y];
if(A&&!A.isReplacementProduct&&!g(A)&&!l(x,A)){x.$list.append(n(A,z))
}}}function b(x,w){var y=v(x,w);
x.$list.empty();
if(x.isEnabled&&y>0){x.$emptyMessage.hide();
x.$list.show();
t(x,w)
}else{f(x)
}}function m(x){var w=i.premiumPageContainer.dataProvider.getItems();
b(x.data,w)
}function u(x){var w=x.data;
w.promotionalCodeDetails=x.eventData.promotionalCodeDetails
}function j(y){var w=y.$scope,x=w.find(".tick-list.chosen-options"),z=x.data()||{};
y.$emptyMessage=w.find(".emptyMessage");
y.$list=x;
y.isEnabled=z.isEnabled===true;
y.onChange=Cog.addListener2("premiumPage.container","dataChanged",m,{data:y});
Cog.addListener("premiumPage.shoppingBasketDiscounts","promoCode",u,{data:y})
}o.onRegister=function(w){j(w);
if(i.basketContainer.getPremiumInitialized()){m({data:w})
}};
o.onUnregister=function(w){Cog.removeListener(w.onChange)
};
Cog.registerComponent({name:"basket.shoppingBasketChosenOptions",api:o,externalApi:i,selector:"div.shoppingBasketChosenOptions",requires:[{name:"premiumPage.container",apiId:"premiumPageContainer"},{name:"basket.container",apiId:"basketContainer"},{name:"premiumPage.priceHelper",apiId:"priceHelper"},{name:"commons.rebrand",apiId:"rebrand"}]})
}(COGjQuery,document));
(function(i,b){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={premiumPageContainer:null,basketContainer:null,priceHelper:null},g={ShoppingBasketBurgerMenu:null},f=false;
function c(){var l=Cog.Type.extend(j.element.Element,{isMenuVisible:false,isScolling:false,isCookieHidden:false,isTelephonyHidden:false,scrollTop:0,dom:{},initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope);
this.bindDom();
this.initializeButton();
this.initializeTabs();
this.modifyMarkup();
this.attachToHeader();
this.attachEvents()
},onResize:function(){this.hideForDesktop();
this.setMenuHeight();
this.$scope.addClass("visible")
},onScroll:function(){if(this.isMenuVisible&&!this.isScolling){if(i(window).scrollTop()!==this.scrollTop){this.isScolling=true;
this.dom.$body.animate({scrollTop:this.scrollTop},300,"swing",function(){this.isScolling=false
}.bind(this))
}}},attachEvents:function(){i(window).on("resize orientationchange",_.throttle(this.onResize.bind(this),300));
i(window).on("scroll",_.throttle(this.onScroll.bind(this),750));
i(window).on("resize orientationchange",_.throttle(this.attachToHeader.bind(this),300));
Cog.addListener2("cookiePolicy","hide",this.onResize.bind(this))
},bindDom:function(){var m=this.$scope;
this.dom.$header=m.find(".burger-header");
this.dom.$components=m.find(".burger-components");
this.dom.$closedView=m.find(".burger-button .collapsed");
this.dom.$expandedView=m.find(".burger-button .expanded, .burger-content");
this.dom.$button=m.find(".burger-button");
this.dom.$buttonWrapper=m.find(".parsys");
this.dom.$headings=this.dom.$header.find("li");
this.dom.$tabs=this.dom.$components.find(" > div");
this.dom.$scrollable=m.find(".section-content");
this.dom.$sectionHeader=m.find(".section-header");
this.dom.$cover=m.find(".initial-cover");
this.dom.$total=m.find(".total");
this.dom.$cookiePolicy=i(".notice-cookie");
this.dom.$body=i("body, html");
this.dom.$headerMain=i("header");
this.dom.$progressBar=i(".progressBar")
},modifyMarkup:function(){this.dom.$sectionHeader.each(function(){var m=i(this),n=m.next(".section-content"),o=n.find(".parsys");
n.prepend(m);
if(o.length){n.after(o)
}})
},getCookieHeight:function(){if(this.isCookieHidden===false){this.isCookieHidden=!this.dom.$cookiePolicy.is(":visible")
}return(this.isCookieHidden?0:this.dom.$cookiePolicy.outerHeight())
},setTop:function(){this.$scope.css("top",this.getCookieHeight())
},initializeButton:function(){this.dom.$button.find(".button").on("click",this.toggleView.bind(this))
},toggleView:function(){if(this.isMenuVisible){this.hide();
this.dom.$headerMain.scrollToFixed({removeOffsets:true})
}else{this.show();
this.dom.$headerMain.trigger("detach.ScrollToFixed")
}},show:function(){this.dom.$closedView.addClass("hidden");
this.dom.$expandedView.removeClass("hidden");
this.isMenuVisible=true;
this.checkTopPosition();
this.dom.$body.addClass("menu-visible");
this.$scope.addClass("sticky");
this.toggleNoticeBar();
this.setMenuHeight();
this.hideForDesktop()
},hide:function(){this.dom.$closedView.removeClass("hidden");
this.dom.$expandedView.addClass("hidden");
this.isMenuVisible=false;
this.dom.$body.removeClass("menu-visible");
this.$scope.removeClass("sticky");
if(this.isAllMobile()){this.toggleNoticeBar();
this.fixEmptySpace();
this.dom.$body.animate({scrollTop:this.scrollTop},0)
}},isAllMobile:function(){return window.matchMedia("(max-width: 1023px)").matches
},isDesktop:function(){return window.matchMedia("(min-width: 1024px)").matches
},hideForDesktop:function(){if(this.isDesktop()){this.hide()
}},initializeTabs:function(){this.toggleTab(this.dom.$headings.first().data("basketId"));
this.dom.$headings.on("click",i.proxy(this.clickTab,this))
},clickTab:function(m){this.toggleTab(i(m.currentTarget).data("basketId"))
},toggleTab:function(m){this.dom.$headings.removeClass("active");
this.dom.$tabs.removeClass("active");
this.dom.$header.find("."+m).addClass("active");
this.dom.$components.find("."+m).addClass("active");
this.setMenuHeight()
},setMenuHeight:function(){var o=window.innerHeight||b.documentElement.clientHeight||b.body.clientHeight,m=o-this.dom.$button.outerHeight(),n=this.dom.$buttonWrapper.filter(":visible").outerHeight()||82;
if(o){this.dom.$header.css("height",m);
this.dom.$components.css("height",m)
}this.setBasketHeight(m,n);
this.setHeadingsHeight(m)
},setHeadingsHeight:function(m){var o,p,q,n=window.innerWidth||b.documentElement.clientWidth||b.body.clientWidth;
if(m<420&&m<n){o=Math.floor(m/this.dom.$headings.length);
q=this.dom.$headings.find(".title").outerHeight();
p=Math.floor((o-q)/2);
if(p<=0){p=0
}this.dom.$headings.css({"max-height":o,"padding-top":p,"padding-bottom":p})
}else{this.dom.$headings.css({"max-height":"","padding-top":"","padding-bottom":""})
}},setBasketHeight:function(m,n){this.dom.$scrollable.each(function(){var o=i(this);
if(o.data("set-height")||o.next(".parsys").find(".section").length){o.data("set-height",true).height(m-n-10)
}else{o.height(m-10)
}})
},attachToHeader:function(){if(this.isAllMobile()){this.$scope.detach().insertAfter(this.dom.$headerMain.find(".logo"));
this.$scope.addClass("sticked-to-top");
this.dom.$progressBar.detach().insertAfter(this.dom.$headerMain);
this.dom.$headerMain.trigger("detach.ScrollToFixed");
this.dom.$headerMain.scrollToFixed({removeOffsets:true})
}else{if(!this.dom.$progressBar.parents("header").length){this.dom.$headerMain.trigger("detach.ScrollToFixed");
this.dom.$progressBar.detach().insertAfter(this.dom.$headerMain.find(".shoppingBasketBurgerMenu"))
}}},fixEmptySpace:function(){if(this.dom.$headerMain.hasClass("scroll-to-fixed-fixed")&&this.dom.$headerMain.next().is(":visible")){if(this.dom.$headerMain.next().not("#content")){this.dom.$headerMain.next().remove();
this.dom.$headerMain.trigger("detach.ScrollToFixed");
this.dom.$headerMain.scrollToFixed({removeOffsets:true})
}}},toggleNoticeBar:function(){var m=i(".notice-cookie"),n=i(".notice-telephony-down");
if(this.isMenuVisible){if(m.is(":visible")){this.isCookieHidden=false;
m.hide()
}if(n.hasClass("active")){n.removeClass("active");
this.isTelephonyHidden=true
}}else{if(!Cog.Cookie.read("cb-enabled")){m.show()
}if(this.isTelephonyHidden){n.addClass("active");
this.isTelephonyHidden=false
}}},checkTopPosition:function(){if(this.isMenuVisible){this.scrollTop=i(window).scrollTop()
}},updateValues:function(){var r=null,o=null,q=this.$scope.find(".burger-button mark"),n=this.dom.$closedView.find(".quote-value"),m=this.$scope.find(".quote-type"),p=this.$scope.find("span.messages");
if(this.$scope!=null){r=j.premiumPageContainer.dataProvider.getQuote();
if(r.cost&&!isNaN(r.cost)){j.priceHelper.fillPoundsAndPence(q,r.cost)
}if(r.selected==="annual"){m.html(p.data("yearly-message"))
}else{m.html(p.data("monthly-message"))
}if(this.isAllMobile()){n.addClass("blink");
Cog.addListener2("premiumPage.basketChange","changed",this.triggerTransitionEnd.bind(this))
}}},supportTransitionEnd:function(){var m,o={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},n=b.createElement("div");
for(m in o){if(o.hasOwnProperty(m)){if(n.style[m]!==undefined){window.transitionEnd=o[m];
break
}else{window.transitionEnd="transitionend"
}}}return window.transitionEnd
},triggerTransitionEnd:function(){var m=this.dom.$closedView.find(".quote-value"),o=false,n=this.supportTransitionEnd(),p;
m.one(n,function(){m.removeClass("blink");
o=true
});
p=function(){if(!o){m.trigger(n)
}};
setTimeout(p,500)
},processState:function(m){if(m){this.view.render(m);
if(j.basketContainer.getPremiumInitialized()===true){this.updateValues()
}Cog.addListener2("premiumPage.container","dataChanged",this.updateValues.bind(this))
}}});
g.ShoppingBasketBurgerMenu=l
}h.onRegister=function(l){l.element=new g.ShoppingBasketBurgerMenu(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
c()
}};
Cog.registerComponent({name:"shoppingBasketBurgerMenu",api:h,externalApi:j,selector:"div.shoppingBasketBurgerMenu",requires:[{name:"elements.element",apiId:"element"},{name:"premiumPage.container",apiId:"premiumPageContainer"},{name:"basket.container",apiId:"basketContainer"},{name:"premiumPage.priceHelper",apiId:"priceHelper"}]})
}(COGjQuery,document));
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={premiumPageContainer:null,basketContainer:null,priceHelper:null},f={ShoppingBasketYourBasket:null},d=false;
function i(){var l=Cog.Type.extend(j.element.Element,{initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},updateValues:function(){var s=null,n=null,p=null,q=this.$scope.find(".initial-cover mark"),r=this.$scope.find(".total mark"),m=this.$scope.find(".quote-type"),o=this.$scope.find("span.messages");
if(this.$scope!=null){s=j.premiumPageContainer.dataProvider.getQuote();
p=s.selected+"Price";
if(s.cost&&!isNaN(s.cost)){q.html("&pound;"+j.priceHelper.getInitialPolicyPrice(p));
j.priceHelper.fillPoundsAndPence(r,j.priceHelper.getTotalPrice(p))
}if(s.selected==="annual"){m.html(o.data("yearly-message"))
}else{m.html(o.data("monthly-message"))
}}},processState:function(m){if(m){this.view.render(m);
if(j.basketContainer.getPremiumInitialized()===true){this.updateValues()
}Cog.addListener2("premiumPage.container","dataChanged",h.proxy(this.updateValues,this))
}}});
f.ShoppingBasketYourBasket=l
}g.onRegister=function(l){l.element=new f.ShoppingBasketYourBasket(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
i()
}};
Cog.registerComponent({name:"shoppingBasketYourBasket",api:g,externalApi:j,selector:"div.shoppingBasketYourBasket, div.premiumPaymentSummary",requires:[{name:"elements.element",apiId:"element"},{name:"premiumPage.container",apiId:"premiumPageContainer"},{name:"basket.container",apiId:"basketContainer"},{name:"premiumPage.priceHelper",apiId:"priceHelper"}]})
}(COGjQuery,document));
(function(h,c){var f={},b={FocusHelper:null},d={FieldName:null};
function g(){b.FocusHelper=Cog.Type.asSingleton(Cog.Type.define({blinkActiveElement:function(){var i=this.activeElement();
if(i.length){this.blur(i);
this.focus(i)
}},blinkElement:function(i){if(i&&i.length){this.blink(i);
this.focus(this.activeElement())
}},activeElement:function(){return h(c.activeElement)
},blur:function(i){i.trigger("blur")
},focus:function(i){i.trigger("focus")
},blink:function(i){this.focus(i);
this.blur(i)
}})).create()
}f.init=function(){g()
};
Cog.registerStatic({name:"forms.helper.focusHelper",api:f,sharedApi:b})
}(COGjQuery,document));
(function(d){var c={},b={};
b.removeGreyStyleFromLabels=function(){var f=d(".styled-select"),g;
f.each(function(){g=d(this).parent().find("select").prop("selectedIndex");
if(g){d(this).removeClass("grey")
}})
};
b.addGreyStyleToLabels=function(f){f.find(".mode.add .snippetReference .styled-select").addClass("grey")
};
c.init=function(){};
Cog.registerStatic({name:"component.ghostTextHelper",api:c,sharedApi:b});
Cog.statics=Cog.statics||{};
Cog.statics.ghostTextHelper=b;
Cog.ghostTextHelper=b
}(COGjQuery));
(function(g,c){var f={},b={Handler:null,JsonHandler:null};
function h(){b.Handler=Cog.Type.define({context:null,engine:null,canHandle:function(i){return true
},handle:function(i){},canHandleNext:function(i){return false
},setContext:function(i){this.context=i;
this.engine=i.engine
}})
}function d(){b.JsonHandler=Cog.Type.extend(b.Handler,{supportedType:null,constructor:function(i){this.supportedType=i
},canHandle:function(i){return g.isPlainObject(i)&&this.isSupportedType(i)
},responseContent:function(i){return i.content||{}
},isSupportedType:function(i){return this.supportedType?this.responseType(i)===this.supportedType:true
},responseType:function(i){return i&&i.type?String(i.type).toLowerCase():null
}})
}f.init=function(){h();
d()
};
Cog.registerStatic({name:"forms.form.response.handler",api:f,sharedApi:b})
}(COGjQuery,document));
(function(h,c){var f={},i={moduleName:"forms.form.response.handler"},b={RedirectHandler:null},j={handler:null},d={handlerRedirect:"handlerRedirect"};
function g(){var l=Cog.Type.extend(j.handler.Handler,{path:null,constructor:function(m){this.path=m||window.location.href
},handle:function(){var m=this.engine.getLoader();
m.lock();
this.engine.notifyValidationSucceed();
Cog.fireEvent(i.moduleName,d.handlerRedirect);
window.location.href=this.path
}});
b.RedirectHandler=l
}f.init=function(){g()
};
Cog.registerStatic({name:"forms.form.response.redirectHandler",api:f,sharedApi:b,externalApi:j,requires:[{name:"forms.form.response.handler",apiId:"handler"}]})
}(COGjQuery,document));
(function(h,c){var g={},i={moduleName:"forms.form.response.redirectJsonHandler"},b={RedirectJsonHandler:null},j={handler:null},f={handlerRedirect:"handlerRedirect"};
function d(){var l=Cog.Type.extend(j.handler.JsonHandler,{constructor:function(){l.superclass.constructor.call(this,"redirect")
},handle:function(n){var o=this.responseContent(n),p=o.path||window.location.href,m;
if(this.engine){m=this.engine.getLoader();
m.lock();
this.engine.notifyValidationSucceed()
}Cog.fireEvent(i.moduleName,f.handlerRedirect);
window.location.href=p
}});
b.RedirectJsonHandler=l
}g.init=function(){d()
};
Cog.registerStatic({name:"forms.form.response.redirectJsonHandler",api:g,sharedApi:b,externalApi:j,requires:[{name:"forms.form.response.handler",apiId:"handler"}]})
}(COGjQuery,document));
(function(i,c){var h={},b={ResponseHandlers:null},g={ResponseHandlerInitializer:null},j={handler:null,genericProcessor:null};
function d(){var l=j.handler.Handler;
g.ResponseHandlerInitializer=Cog.Type.asSingleton(Cog.Type.define({processor:null,constructor:function(){this.processor=new j.genericProcessor.GenericProcessor().addItem(this.handlerAcceptor,this.handlerProcessor,this).addItem(this.contextedHandlerAcceptor,this.contextedHandlerProcessor,this)
},initialize:function(n,o,m){this.processor.process(n,o,m)
},handlerAcceptor:function(m){return m instanceof l
},handlerProcessor:function(n,o,m){this.initializeHandler(n,m);
o.push(n)
},contextedHandlerAcceptor:function(m){return m&&m.handler instanceof l&&i.isPlainObject(m.context)
},contextedHandlerProcessor:function(n,o,m){this.initializeHandler(n.handler,m,n.context);
o.push(n.handler)
},initializeHandler:function(o,n,m){m=m||{};
m.engine=n;
o.setContext(m)
}})).create()
}function f(){var l=Cog.Type.define({success:null,error:null,executed:null,handlerInitializer:g.ResponseHandlerInitializer.instance(),engine:null,constructor:function(){this.success=[];
this.error=[];
this.executed=[]
},setEngine:function(m){this.engine=m
},addSuccessHandler:function(m,n){if(m){this.add(this.success,m,n)
}},addErrorHandler:function(m,n){if(m){this.add(this.error,m,n)
}},addExecutedHandler:function(m,n){if(m){this.add(this.executed,m,n)
}},addHandlers:function(m){if(m){this.addAll(this.success,this.handlersOrDefault(m.success));
this.addAll(this.error,this.handlersOrDefault(m.error));
this.addAll(this.executed,this.handlersOrDefault(m.executed))
}},clone:function(n){var m=new l();
m.setEngine(this.engine);
if(n===true){m.addHandlers(this)
}return m
},add:function(p,m,n){var o=n?this.responseHandlerItem(m,n):m;
this.handlerInitializer.initialize(o,p,this.engine)
},addAll:function(o,n){var m;
for(m=0;
m<n.length;
m++){this.add(o,n[m])
}return m
},handlersOrDefault:function(m){return m||[]
},responseHandlerItem:function(n,m){return{handler:n,context:m}
}});
b.ResponseHandlers=l
}h.init=function(){d();
f()
};
Cog.registerStatic({name:"forms.form.response.responseHandlers",api:h,sharedApi:b,externalApi:j,requires:[{name:"forms.form.response.handler",apiId:"handler"},{name:"commons.genericProcessor",apiId:"genericProcessor"}]})
}(COGjQuery,document));
(function(g,c){var d={},b={ResponseProcessor:null};
function f(){b.ResponseProcessor=Cog.Type.define({responseHandlers:null,delayPromiseDelegate:null,constructor:function(i,h){this.responseHandlers=i;
this.delayPromiseDelegate=h
},process:function(j,h){var i={canProcess:true,responseHandlers:this.processAdditionalResponseHandlers(h)};
j.done(g.proxy(this.onDone,this,i)).fail(g.proxy(this.onError,this,i));
return j
},onDone:function(h){var i=this.delayPromise();
i.done(this.handlerDelegate(this.processResponseDoneHandlers,this,arguments));
this.appendResponseChain(i,arguments)
},onError:function(h){var i=this.delayPromise();
i.done(this.handlerDelegate(this.processResponseErrorHandlers,this,arguments));
this.appendResponseChain(i,arguments)
},delayPromise:function(i){var j=this.delayPromiseDelegate?this.delayPromiseDelegate():null,h;
if(!j){h=g.Deferred();
h.resolve();
j=h.promise()
}return j
},appendResponseChain:function(i,h){i.always(this.handlerDelegate(this.processResponseExecutedHandlers,this,h))
},handlerDelegate:function(i,h,j){return function(){i.apply(h,j||[])
}
},processResponseDoneHandlers:function(h){this.processResponseHandlers("success",h,arguments)
},processResponseErrorHandlers:function(h){this.processResponseHandlers("error",h,arguments)
},processResponseExecutedHandlers:function(h){if(h.canProcess){this.processResponseHandlers("executed",h,arguments)
}},processResponseHandlers:function(h,q,l){var p=q.responseHandlers[h],o=this.preprocessOptions(l),j,n,m;
for(m=0;
q.canProcess&&m<p.length;
m++){n=p[m];
if(n.canHandle.apply(n,o)){j=n.handle.apply(n,o);
q.canProcess=n.canHandleNext.call(n,j)
}}},preprocessOptions:function(j){var h=[],l;
for(l=1;
l<j.length;
l++){h.push(j[l])
}return h
},processAdditionalResponseHandlers:function(h){var i=this.responseHandlers;
if(h){i=i.clone();
i.addHandlers(h);
i.addHandlers(this.responseHandlers)
}return i
}})
}d.init=function(){f()
};
Cog.registerStatic({name:"forms.form.response.responseProcessor",api:d,sharedApi:b})
}(COGjQuery,document));
(function(f,c){var d={},b={HandlerHelper:null},h={handler:null};
function g(){var i=h.handler.Handler;
b.HandlerHelper=Cog.Type.asSingleton(Cog.Type.define({asHandler:function(m,l){var j=Cog.Type.extend(i,{handle:function(){var n=[this.context];
n.push.apply(n,arguments);
m.apply(l,n)
}});
return new j()
}})).create()
}d.init=function(){g()
};
Cog.registerStatic({name:"forms.form.response.handlerHelper",api:d,sharedApi:b,externalApi:h,requires:[{name:"forms.form.response.handler",apiId:"handler"}]})
}(COGjQuery,document));
(function(g,c){var f={},b={ElementsFinder:null};
function d(){b.ElementsFinder=Cog.Type.define({$scope:null,elements:null,constructor:function(i,h){this.elements=i;
this.$scope=h
},findIn:function(j){var h=[],n=this.selectSearchScope(j),m,l;
if(n){for(l=0;
l<this.elements.length;
l++){m=this.elements[l];
this.addIfIsInScope(m,n,h)
}}return h
},findFirstIn:function(h){var i=this.findIn(h);
return i.length>0?i[0]:null
},isInScope:function(i,h){return i.is(h)||i.has(h).length>0
},addIfIsInScope:function(i,h,j){if(this.isInScope(h,i.getScope())){j.push(i)
}},selectSearchScope:function(h){var i=h;
if(this.$scope&&!this.isInScope(this.$scope,h)){i=null
}return i
}})
}f.init=function(){d()
};
Cog.registerStatic({name:"forms.form.elementsFinder",api:f,sharedApi:b})
}(COGjQuery,document));
(function(d,j){var g={},f={Engine:null},b={LastSubmitConfig:null},h={eventsUtil:null,elementsFinder:null,errorPresenter:null,multiScope:null,pageScroller:null,validationErrors:null,validationResult:null,journeyContext:null},i={registerElement:"registerElement",enableElements:"enableElements",disableElements:"disableElements",enableValidation:"enableValidation",disableValidation:"disableValidation",saveElementsState:"saveElementsState",restoreElementsState:"restoreElementsState",clearElementsState:"clearElementsState",submit:"submit",retrySubmit:"retrySubmit",increaseNameSuffixes:"increaseNameSuffixes",decreaseNameSuffixes:"decreaseNameSuffixes",updateNameSuffixes:"updateNameSuffixes",validateWithCallback:"validateWithCallback"},m={validationFailed:"validationFailed",validationSucceed:"validationSucceed"};
function l(){b.LastSubmitConfig=Cog.Type.define({additionalParameters:null,isValidationEnabled:true,additionalResponseHandlers:null,update:function(n,p,o){this.additionalParameters=n;
this.isValidationEnabled=p;
this.additionalResponseHandlers=o
}})
}function c(){f.Engine=Cog.Type.define({defaults:{asyncOperationDelay:10},elementOperations:{enable:"enable",disable:"disable",disableLoader:"disableLoader",saveState:"saveState",restoreState:"restoreState",increaseNameSuffixes:"increaseNameSuffixes",decreaseNameSuffixes:"decreaseNameSuffixes",updateNameSuffixes:"updateNameSuffixes"},additionalParameterNames:{handlerName:"handlerName"},id:null,$scope:null,sessionIdParam:null,moduleName:null,loader:null,pageScroller:null,additionalParameters:null,elements:null,elementsFinder:null,eventsManager:null,submitter:null,errorPresenter:null,isValidationEnabled:true,disabledValidationScope:null,validators:null,$firstError:null,validationErrors:null,lastSubmitConfig:null,constructor:function(n,o){this.id=o.id;
this.$scope=n;
this.sessionIdParam=o.sessionIdParam;
this.eventsManager=new h.eventsUtil.EventManager();
this.elements=[];
this.additionalParameters={};
this.elementsFinder=new h.elementsFinder.ElementsFinder(this.elements);
this.submitter=o.submitter;
this.loader=o.loader;
this.pageScroller=new h.pageScroller.PageScroller(n);
this.errorPresenter=new h.errorPresenter.ErrorPresenter(o.$errorsContainer||n);
this.isValidationEnabled=o.isValidationEnabled===true;
this.disabledValidationScope=new h.multiScope.MultiScope(n);
this.validationErrors=new h.validationErrors.ValidationErrors();
this.lastSubmitConfig=new b.LastSubmitConfig();
this.initialize(o.moduleName);
this.initializeAdditionalParameters();
this.initializeValidators()
},initialize:function(n){this.moduleName=n;
this.bindFieldEvents(n);
this.bindElementEvents(n);
this.eventsManager.on(n,i.submit).execute(this.onSubmit).withScope(this).bind();
this.eventsManager.on(n,i.retrySubmit).execute(this.onRetrySubmit).withScope(this).bind()
},bindFieldEvents:function(n){this.eventsManager.on(n,i.increaseNameSuffixes).execute(this.onIncreaseNameSuffixes).withScope(this).bind();
this.eventsManager.on(n,i.decreaseNameSuffixes).execute(this.onDecreaseNameSuffixes).withScope(this).bind();
this.eventsManager.on(n,i.updateNameSuffixes).execute(this.onUpdateNameSuffixes).withScope(this).bind()
},bindElementEvents:function(n){this.eventsManager.on(n,i.registerElement).execute(this.onRegisterElement).withScope(this).bind();
this.eventsManager.on(n,i.enableElements).execute(this.onEnableElements).withScope(this).bind();
this.eventsManager.on(n,i.disableElements).execute(this.onDisableElements).withScope(this).bind();
this.eventsManager.on(n,i.enableValidation).execute(this.onEnableValidation).withScope(this).bind();
this.eventsManager.on(n,i.disableValidation).execute(this.onDisableValidation).withScope(this).bind();
this.eventsManager.on(n,i.saveElementsState).execute(this.onSaveElementsState).withScope(this).bind();
this.eventsManager.on(n,i.restoreElementsState).execute(this.onRestoreElementsState).withScope(this).bind();
this.eventsManager.on(n,i.clearElementsState).execute(this.onClearElementsState).withScope(this).bind();
this.eventsManager.on(n,i.validateWithCallback).execute(this.validateWithCallback).withScope(this).bind()
},initializeAdditionalParameters:function(){var o=this.$scope.data()||{},p=this.additionalParameterNames,n;
for(n in p){if(p.hasOwnProperty(n)&&o[n]){this.additionalParameters[n]=o[n]
}}},initializeValidators:function(){var o=new h.validatorFactory.ValidatorFactory(),n=o.create(this),p;
this.validators=[];
for(p=0;
p<n.length;
p++){this.addValidator(n[p])
}},isValid:function(){return this.isValidationEnabled?this.validate():true
},getScope:function(){return this.$scope
},getLoader:function(){return this.loader
},submit:function(o,q,p){var r,s=this.$scope.data(),n=typeof(q)=="undefined"?true:q;
this.lastSubmitConfig.update(o,n,p);
n=n&&this.isValidationEnabled;
this.pageScroller.reset();
if(this.submitter.canExecute()&&(!n||this.isValid())){r=d.extend({},this.additionalParameters,o);
this.submitter.execute(r,this.sessionUrlSuffix(),p)
}if(!s.collapsibleSections){this.pageScroller.execute(1000)
}},retrySubmit:function(){var n=this.lastSubmitConfig;
this.submit(n.additionalParameters,n.isValidationEnabled,n.additionalResponseHandlers)
},notifyValidationSucceed:function(){Cog.fireEvent(this.moduleName,m.validationSucceed,this.id)
},notifyValidationFailed:function(o){var n=h.validationResult(this.id,o);
Cog.fireEvent(this.moduleName,m.validationFailed,n)
},getElements:function(){return this.elements
},getErrorPresenter:function(){return this.errorPresenter
},unregister:function(){this.eventsManager.unbindAll()
},addValidator:function(n){if(n&&n.canValidate()){this.validators.push(n)
}},validate:function(){var n;
this.validationErrors.reset();
n=this.validateFields();
n=this.validateForm()&&n;
if(this.validationErrors.hasAny){this.notifyValidationFailed(this.validationErrors.getErrors())
}return n
},contains:function(o){var n=o.getScope();
return n?this.$scope.is(n.parents()):false
},validateFields:function(){var r=true,q=this.disabledValidationScope,p=this.elements,o,n;
for(n=0;
n<p.length;
n++){o=p[n];
if(this.contains(o)&&!q.matches(o.getScope())&&!o.isValid()){r=false;
this.pageScroller.include(o.$scope);
this.validationErrors.add(o.getErrorPresenter())
}}return r
},validateForm:function(){var n=true,o=this.validators,q,p;
this.errorPresenter.clear();
for(p=0;
p<o.length;
p++){q=o[p];
if(!q.isValid()){n=false;
this.pageScroller.include(this.$scope);
this.validationErrors.add(q.getErrorPresenter())
}}this.errorPresenter.refresh();
return n
},validateWithCallback:function(o){var n=false;
if(this.isSubmitTarget(o.eventData.$scope)){n=this.validate();
if(!n){this.pageScroller.execute(1000)
}if(o.eventData.callback){o.eventData.callback(n,o.eventData.sourceEvent)
}}},sessionUrlSuffix:function(){var n=h.journeyContext.current()||"";
return"?"+this.sessionIdParam+"="+n
},isSubmitTarget:function(n){var o=false;
if(n!=null){o=n.is(this.$scope)||n.parents().is(this.$scope)
}return o
},asyncExecute:function(o,p){var n=this;
p=p||[];
setTimeout(function(){o.apply(n,p)
},this.defaults.asyncOperationDelay)
},onSubmit:function(n){if(this.isSubmitTarget(n.eventData.$scope)){this.asyncExecute(this.submit,[n.eventData.additionalParameters,n.eventData.isValidationEnabled,n.eventData.additionalResponseHandlers])
}},onRetrySubmit:function(n){if(this.isSubmitTarget(n.eventData.$scope)){this.asyncExecute(this.retrySubmit)
}},isInScope:function(n){var o=Cog.isInScope(this.$scope,n.getScope());
return o||this.disabledValidationScope.matches(n.getScope())
},registerElement:function(n){var o=n!=null&&this.isInScope(n);
if(o){n.disableLoader();
if(!this.isValidationEnabled){n.disableValidation();
n.lockValidation()
}this.elements.push(n)
}return o
},onRegisterElement:function(o){var n=o.eventData.element;
if(this.registerElement(n)){n.elementsFinder=new h.elementsFinder.ElementsFinder(this.elements,n.getScope())
}},onEnableElements:function(p){var o=p.eventData,n=this.elementsFinder.findIn(p.eventData.$scope);
this.eachElement(n,this.elementOperations.enable);
if(o.restoreState){this.eachElement(n,this.elementOperations.restoreState)
}if(o.handleValidation){this.onDisableValidation(p)
}},onDisableElements:function(p){var o=p.eventData,n=this.elementsFinder.findIn(o.$scope);
this.eachElement(n,this.elementOperations.disable);
if(o.restoreState){this.eachElement(n,this.elementOperations.restoreState)
}if(o.handleValidation){this.onEnableValidation(p)
}},onEnableValidation:function(n){this.disabledValidationScope.remove(n.eventData.$scope)
},onDisableValidation:function(n){this.disabledValidationScope.add(n.eventData.$scope)
},onClearElementsState:function(o){var n=this.elementsFinder.findIn(o.eventData.$scope);
this.eachElement(n,this.elementOperations.clearState)
},onRestoreElementsState:function(o){var n=this.elementsFinder.findIn(o.eventData.$scope);
this.eachElement(n,this.elementOperations.restoreState)
},onSaveElementsState:function(o){var n=this.elementsFinder.findIn(o.eventData.$scope);
this.eachElement(n,this.elementOperations.saveState)
},onIncreaseNameSuffixes:function(q){var p=q.eventData,o=this.elementsFinder.findIn(p.$scope),n=[p.position,p.maximumIndex];
this.eachElement(o,this.elementOperations.increaseNameSuffixes,n)
},onDecreaseNameSuffixes:function(q){var p=q.eventData,o=this.elementsFinder.findIn(p.$scope),n=[p.position,p.minimumIndex];
this.eachElement(o,this.elementOperations.decreaseNameSuffixes,n)
},onUpdateNameSuffixes:function(q){var p=q.eventData,o=this.elementsFinder.findIn(p.$scope),n=[p.position,p.index];
this.eachElement(o,this.elementOperations.updateNameSuffixes,n)
},eachElement:function(s,n,r){var p,q,o;
for(o=0;
o<s.length;
o++){p=s[o];
q=p[n];
if(d.isFunction(q)){q.apply(p,r||[])
}}}})
}g.init=function(){l();
c()
};
Cog.registerStatic({name:"forms.form.engine",api:g,sharedApi:f,externalApi:h,requires:[{name:"commons.eventsUtil",apiId:"eventsUtil"},{name:"forms.form.elementsFinder",apiId:"elementsFinder"},{name:"forms.form.multiScope",apiId:"multiScope"},{name:"forms.validation.errorPresenter",apiId:"errorPresenter"},{name:"forms.validation.form.validatorFactory",apiId:"validatorFactory"},{name:"forms.form.pageScroller",apiId:"pageScroller"},{name:"forms.form.validationErrors",apiId:"validationErrors"},{name:"forms.form.validationResult",apiId:"validationResult"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document));
(function(g,c){var f={},b={Engine:null},h={engine:null,loader:null,submitter:null,responseHandlers:null};
function d(){b.EngineBuilder=Cog.Type.define({id:null,$scope:null,moduleName:null,processorPath:null,$errorsContainer:null,sessionIdParam:null,handlers:null,responseHandlers:null,isLoaderEnabled:false,isValidationEnabled:true,constructor:function(i,j){this.$scope=i;
this.moduleName=j;
this.initializeHandlers();
this.initializeResponseHandlers()
},build:function(){var i=new h.loader.Loader(this.$scope,this.isLoaderEnabled),m=new h.responseHandlers.ResponseHandlers(),j=this.submitterConfiguration(m),n=new h.submitter.Submitter(this.$scope,j),l;
this.onBeforeExecute(i.show,i).onExecuted(i.hide,i);
l=new h.engine.Engine(this.$scope,this.engineConfiguration(n,i));
m.setEngine(l);
m.addHandlers(this.responseHandlers);
return l
},addSuccessHandler:function(i,j){this.responseHandlers.success.push(i,j);
return this
},addErrorHandler:function(i,j){this.responseHandlers.error.push(i,j);
return this
},addExecutedHandler:function(i,j){this.responseHandlers.executed.push(i,j);
return this
},onBeforeExecute:function(j,i){this.handlers.beforeExecute.push(this.createHandler(j,i));
return this
},onExecuted:function(j,i){this.handlers.executed.push(this.createHandler(j,i));
return this
},setId:function(i){this.id=i;
return this
},setProcessorPath:function(i){this.processorPath=i;
return this
},setSessionIdParam:function(i){this.sessionIdParam=i;
return this
},setErrorsContainer:function(i){this.$errorsContainer=i;
return this
},enableLoader:function(){this.isLoaderEnabled=true;
return this
},disableValidation:function(){this.isValidationEnabled=false;
return this
},initializeHandlers:function(){this.handlers={beforeExecute:[],executed:[]}
},initializeResponseHandlers:function(){this.responseHandlers={success:[],error:[],executed:[]}
},engineConfiguration:function(j,i){return{id:this.id,moduleName:this.moduleName,sessionIdParam:this.sessionIdParam,submitter:j,loader:i,isValidationEnabled:this.isValidationEnabled,$errorsContainer:this.$errorsContainer}
},submitterConfiguration:function(i){return{moduleName:this.moduleName,handlers:this.handlers,responseHandlers:i,processorPath:this.processorPath}
},createHandler:function(j,i){return{delegate:j,scope:i}
}})
}f.init=function(){d()
};
Cog.registerStatic({name:"forms.form.engineBuilder",api:f,sharedApi:b,externalApi:h,requires:[{name:"forms.form.engine",apiId:"engine"},{name:"forms.form.loader",apiId:"loader"},{name:"forms.form.submitter",apiId:"submitter"},{name:"forms.form.response.responseHandlers",apiId:"responseHandlers"}]})
}(COGjQuery,document));
(function(g,c){var d={},b={Loader:null},h={loader:null};
function f(){b.Loader=Cog.Type.define({$scope:null,enabled:false,loader:null,locked:false,constructor:function(i,j){this.$scope=i;
this.enabled=j===true;
this.loader=h.loader
},isEnabled:function(){return this.enabled
},enable:function(){this.loaderEnabled=true
},disable:function(){this.loaderEnabled=false
},show:function(){if(!this.locked&&this.enabled){this.loader.show({$scope:this.$scope})
}},hide:function(){if(!this.locked){this.loader.hide(this.$scope)
}},lock:function(){this.locked=true
},unlock:function(){this.locked=false
}})
}d.init=function(){f()
};
Cog.registerStatic({name:"forms.form.loader",api:d,sharedApi:b,externalApi:h,requires:[{name:"commons.eventsUtil",apiId:"eventsUtil"},{name:"elements.loader",apiId:"loader"}]})
}(COGjQuery,document));
(function(g,c){var d={},b={MultiScope:null};
function f(){b.MultiScope=Cog.Type.define({$context:null,items:null,constructor:function(h){this.$context=h||g();
this.items=[]
},matches:function(j){var h=false,l=this.items,m;
for(m=0;
!h&&m<l.length;
m++){h=this.isInScope(j,l[m])
}return h
},add:function(h){if(this.isInScope(h,this.$context)){this.addInOrder(h)
}},remove:function(h){var i=this.indexOf(h);
if(i>=0){this.items.splice(i,1)
}},isInScope:function(i,h){return i&&(h.is(i)||i.parents().is(h))
},addInOrder:function(j){var h=this.items,l;
for(l=0;
l<h.length;
l++){if(this.depthOf(h[l])>=this.depthOf(j)){break
}}h.splice(l,0,j)
},depthOf:function(h){return h.parentsUntil(this.$context).length
},isValid:function(h){return h&&h.length
},indexOf:function(h){return this.isValid(h)?this.findIndex(h):-1
},findIndex:function(j){var l=-1,h=this.items,m;
for(m=0;
l<0&&m<h.length;
m++){if(j.is(h[m])){l=m
}}return l
}})
}d.init=function(){f()
};
Cog.registerStatic({name:"forms.form.multiScope",api:d,sharedApi:b})
}(COGjQuery,document));
(function(f,c){var d={},b={},g={driverManager:null};
d.onRegister=function(h){};
d.init=function(h){};
d.prepareUniqueId=function(j,h){var i;
if(h===undefined){i=f("form").find("input[name='formField.multicar.hidden.driverUniqueId']").val();
if(!i){f("form").find("input[name='formField.multicar.hidden.driverUniqueId']").val(j)
}}else{i=f("form").find("input[name='formField.multicar.hidden.driverUniqueId_"+h+"']").val();
if(!i){f("form").find("input[name='formField.multicar.hidden.driverUniqueId_"+h+"']").val(j)
}}};
b.generateUniqueDriverIds=function(h){var m=f("form").find("input[name='formField.details.forename']").val(),j=f("form").find("input[name='formField.details.surname']").val(),o=f("form").find("select[name='formField.details.birthDate.day']").val()+"-"+f("form").find("select[name='formField.details.birthDate.month']").val()+"-"+f("form").find("select[name='formField.details.birthDate.year']").val(),n,l;
if(m){n=m+"-"+j+"-"+o;
d.prepareUniqueId(n)
}for(l=0;
l<4;
l++){m=f("form").find("input[name='formField.details.forename_"+l+"']").val();
if(m){j=f("form").find("input[name='formField.details.surname_"+l+"']").val();
o=f("form").find("select[name='formField.details.birthDate.day_"+l+"']").val()+"-"+f("form").find("select[name='formField.details.birthDate.month_"+l+"']").val()+"-"+f("form").find("select[name='formField.details.birthDate.year_"+l+"']").val();
n=m+"-"+j+"-"+o;
d.prepareUniqueId(n,l)
}}};
b.generateUniqueDriverIdsOnAdditional=function(){_.forEach(g.driverManager.getDrivers(),function(j,h){if(j.id){var i=f("form").find("span:contains('"+j.forename+" "+j.surname+"')"),l=i.parents(".driverWithVariants,.driverWithVariantsDl").find("input[name*='UniqueId']");
if(!l.val()){l.val(j.id)
}}})
};
Cog.registerComponent({name:"driverUniqueIdGenerator",api:d,sharedApi:b,externalApi:g,requires:[{name:"quickQuotePage.driverManager",apiId:"driverManager"}]})
}(COGjQuery,document));
(function(h,c){var g={},f={BasicPageScroller:null},b={PageScroller:null,basicScroller:null};
function d(){f.BasicPageScroller=Cog.Type.define({$target:null,$header:null,scrollTo:function(i,j){if(i&&i.offset()){this.scrollToOffset(i.offset().top,j)
}},scrollToOffset:function(j,i){this.executeAnimation(j,i)
},executeAnimation:function(j,i){this.$header=h(".header-progress");
if(this.$header.hasClass("scroll-to-fixed-fixed")){j=j-this.$header.outerHeight()
}if(this.$target==null){this.$target=h("html, body")
}this.$target.animate({scrollTop:j},i,function(){Cog.fireEvent("fieldWithAccordion","scrollAnimationEnd")
})
}});
b.basicScroller=new f.BasicPageScroller();
b.PageScroller=Cog.Type.extend(f.BasicPageScroller,{currentOffset:0,shouldScroll:false,constructor:function(i){this.reset()
},reset:function(){this.shouldScroll=false;
this.currentOffset=0
},include:function(i){if(i){this.includeOffset(i.offset().top)
}},includeOffset:function(j){var i=this.shouldScroll===false;
this.shouldScroll=true;
if(i||j<this.currentOffset){this.currentOffset=j
}},execute:function(i){if(this.shouldScroll){this.executeAnimation(this.currentOffset,i)
}}})
}g.init=function(){d()
};
Cog.registerStatic({name:"forms.form.pageScroller",api:g,sharedApi:b})
}(COGjQuery,document));
(function(h,c){var g={},b={Submitter:null},i={processingHandler:null,responseProcessor:null,driverUniqueIdGenerator:null,pagesManager:null},f={submitter:{moduleName:"forms.form.submitter",events:{formSubmission:"formSubmission"}}};
function d(){b.Submitter=Cog.Type.define({$form:null,handlers:null,responseProcessor:null,processorPath:null,processingHandler:null,isBusy:false,constructor:function(j,l){this.$form=j;
this.handlers=l.handlers;
this.processorPath=l.processorPath;
this.processingHandler=this.initializeProcessingHandler();
this.responseProcessor=this.initializeResponseProcessor(l.responseHandlers)
},canExecute:function(){return !this.isBusy
},execute:function(j,o,m){var n,l=o?this.processorPath+o:this.processorPath;
if(i.pagesManager.isMulticarJourneyDetailsPage){i.driverUniqueIdGenerator.generateUniqueDriverIds(this.$form)
}n=this.$form.serialize();
n=this.appendParameters(n,j);
this.lock();
this.processHandlers(this.handlers.beforeExecute);
Cog.fireEvent(f.submitter.moduleName,f.submitter.events.formSubmission);
this.responseProcessor.process(h.post(l,n),m).always(h.proxy(this.processHandlers,this,this.handlers.executed)).always(h.proxy(this.unlock,this))
},handlerDelegate:function(l,j,m){return function(){l.apply(j,m||[])
}
},processHandlers:function(j){var m,l;
for(l=0;
l<j.length;
l++){m=j[l];
m.delegate.call(m.scope)
}},preprocessOptions:function(l){var j=[],m;
for(m=1;
m<l.length;
m++){j.push(l[m])
}return j
},initializeProcessingHandler:function(){var j=i.processingHandler(this.$form,true);
this.handlers.beforeExecute.push({delegate:j.show,scope:j});
return j
},initializeResponseProcessor:function(j){var l=this.processingHandler,m=h.proxy(l.hide,l);
return new i.responseProcessor.ResponseProcessor(j,m)
},appendParameters:function(m,j){var l=h.isPlainObject(j)?h.param(j):null;
if(l){m+="&"+l
}return m
},lock:function(){this.isBusy=true
},unlock:function(){this.isBusy=false
}})
}g.init=function(){d()
};
Cog.registerStatic({name:"forms.form.submitter",api:g,sharedApi:b,externalApi:i,requires:[{name:"processingHandler",apiId:"processingHandler"},{name:"forms.form.response.responseProcessor",apiId:"responseProcessor"},{name:"driverUniqueIdGenerator",apiId:"driverUniqueIdGenerator"},{name:"component.pagesManager",apiId:"pagesManager"}]})
}(COGjQuery,document));
(function(g,c){var f={},b={ValidationErrors:null};
function d(){b.ValidationErrors=Cog.Type.define({errors:null,hasAny:false,constructor:function(){this.reset()
},add:function(h){var i=h.getErrors();
if(i&&i.length){this.errors[h.fieldName]=i;
this.hasAny=true
}},getErrors:function(){return this.errors
},reset:function(){this.hasAny=false;
this.errors={}
}})
}f.init=function(){d()
};
Cog.registerStatic({name:"forms.form.validationErrors",api:f,sharedApi:b})
}(COGjQuery,document));
(function(d,b){function c(g,f){g=g||null;
f=f||{};
return{id:g,errors:f}
}Cog.registerStatic({name:"forms.form.validationResult",api:{},sharedApi:c})
}(COGjQuery,document));
(function(f,b){var d={};
function g(h){if(h.is(":visible")){f(".form-container").addClass("contain-footer-banner")
}}function c(h){f(".next-button-container").click(function(){if(!f(".form-container .fieldsetWithAccordion:last-child .form-step").hasClass("step-hide")){h.show()
}})
}d.init=function(){var h=f("#footer-cover");
c(h);
g(h)
};
Cog.registerStatic({name:"forms.form.footerBanner",api:d,selector:"#footer-cover"})
}(COGjQuery,document));
(function(g,d){var f={},h={fieldType:"checkbox"},i={fieldBase:null},c={Checkbox:null,type:null};
function b(){var j=Cog.Type.extend(i.fieldBase.FieldBase,{checkedProperty:"checked",getType:function(){return h.fieldType
},getValue:function(){return this.$element.prop(this.checkedProperty)
},setValue:function(m){var n=m===true,l=this;
this.$element.prop(this.checkedProperty,n);
window.setTimeout(function(){l.$element.prop(l.checkedProperty,n)
},10)
}});
c.Checkbox=j
}c.type=function(){return h.fieldType
};
f.init=function(){b()
};
Cog.registerStatic({name:"forms.field.checkbox",api:f,externalApi:i,sharedApi:c,requires:[{name:"forms.field.fieldBase",apiId:"fieldBase"}]})
}(COGjQuery,document));
(function(g,d){var f={},h={fieldType:"dropDown"},i={fieldBase:null},c={DropDown:null,type:null};
function b(){var j=Cog.Type.extend(i.textField.TextField,{getType:function(){return h.fieldType
},setValue:function(m){var n=this.$element.find('option[value="'+m+'"]'),l=this.$element.prev("label");
j.superclass.setValue.call(this,m);
l.text(n.text())
},removeAutocomplete:function(){var l=this.$element.find("option");
if(l.length>0&&l.filter("[selected]").length===0){this.setValue(l.eq(0).val())
}}});
c.DropDown=j
}c.type=function(){return h.fieldType
};
f.init=function(){b()
};
Cog.registerStatic({name:"forms.field.dropDown",api:f,externalApi:i,sharedApi:c,requires:[{name:"forms.field.textField",apiId:"textField"}]})
}(COGjQuery,document));
(function(g,d){var f={},h={fieldType:"dropDownAsButtons"},i={fieldBase:null},c={DropDownAsButtons:null,type:null};
function b(){var j=Cog.Type.extend(i.textField.TextField,{$dropdown:null,constructor:function(l){var m=l.find("input");
j.superclass.constructor.call(this,m);
this.$dropdown=l
},getType:function(){return h.fieldType
},setValue:function(n){if(n!==undefined){var m=this.getDropdownOptions(),l=this;
this.$element.val(n);
this.$element.select();
_.each(m,function(p){var q=g(p),o=l.getSelectionValue(p);
if(o===n){q.addClass("selected")
}else{q.removeClass("selected")
}})
}},usselectValue:function(){this.setValue("")
},hasSelectedValue:function(l){return l===this.getValue()
},onInputChange:function(m){var l=this.getSelectionValue(m.currentTarget);
this.setValue(l)
},getDropdownOptions:function(){return this.$dropdown.find(".dropdown-selection-option")
},getSelectionValue:function(l){var m=g(l).data("selected-value");
return String(m)
}});
c.DropDownAsButtons=j
}c.type=function(){return h.fieldType
};
f.init=function(){b()
};
Cog.registerStatic({name:"forms.field.dropDownAsButtons",api:f,externalApi:i,sharedApi:c,requires:[{name:"forms.field.textField",apiId:"textField"}]})
}(COGjQuery,document));
(function(i,d){var h={},j={checkbox:null,dropDown:null,dropDownAsButtons:null,radioGroup:null,textField:null},f=null,c={factor:null};
function g(){var r={},s={input:"input",select:"select"},v={checkbox:"checkbox",radio:"radio"},u="nodeName",q="type",w=[];
function o(x,y){var z=x.prop(u)||"";
return z.toLowerCase()===y
}function t(x){return o(x,s.input)
}function p(x){return x.first()
}function m(x){return x
}w.push({type:j.checkbox.Checkbox,prefilter:p,acceptor:function(x){return t(x)&&x.attr(q)===v.checkbox
}});
w.push({type:j.dropDown.DropDown,prefilter:p,acceptor:function(x){return o(x,s.select)
}});
w.push({type:j.dropDownAsButtons.DropDownAsButtons,prefilter:p,acceptor:function(x){return x.data("dropdown-as-buttons-container")
}});
w.push({type:j.radioGroup.RadioGroup,prefilter:m,acceptor:function(A){var x=true,y,z;
for(z=0;
x&&z<A.length;
z++){y=A.eq(z);
x=t(y)&&y.attr(q)===v.radio
}return A.length>0?x:false
}});
w.push({type:j.textField.TextField,prefilter:p,acceptor:function(x){return t(x)
}});
function n(y){var x=null,A,z;
for(z=0;
x==null&&z<w.length;
z++){A=w[z];
if(A.acceptor(y)){x={type:A.type,prefilter:A.prefilter}
}}return x
}function l(y){var x=n(y),z=null,A=null;
if(x){z=x.type;
A=x.prefilter
}if(A){y=A(y)
}return z!=null?new z(y):null
}r.create=function(x){return l(x)
};
r.findAndCreate=function(x,A){var z=A||i(d),y=z.find(x);
return l(y)
};
return r
}function b(){if(f==null){f=g()
}return f
}Cog.register({name:"forms.field.factory",api:h,externalApi:j,sharedApi:b,requires:[{name:"forms.field.checkbox",apiId:"checkbox"},{name:"forms.field.dropDown",apiId:"dropDown"},{name:"forms.field.dropDownAsButtons",apiId:"dropDownAsButtons"},{name:"forms.field.radioGroup",apiId:"radioGroup"},{name:"forms.field.textField",apiId:"textField"}]})
}(COGjQuery,document));
(function(i,c){var g={},b={FieldBase:null},f={FieldName:null};
function h(){f.FieldName=Cog.Type.define({suffixPattern:/(_\d+)+.*/ig,suffixGroupPattern:/_\d+/ig,indexPattern:/\d+/ig,nameAttribute:"name",$element:null,name:null,suffix:null,constructor:function(j){var l=j.attr(this.nameAttribute);
this.$element=j;
this.name=this.extractName(l);
this.suffix=this.extractSuffix(l)
},get:function(){var j=this.suffix||"";
return this.name+j
},getSuffix:function(){return this.suffix
},getSuffixIndexAt:function(l){var j=this.extractSuffixGroups(),n=j!=null?j[l]:null,m=n!=null?n.match(this.indexPattern):null;
return m!=null?parseInt(m[0],10):NaN
},updateSuffix:function(l,m){var j=this.extractSuffixGroups(),n=j&&j[l]!=null;
return n?this.updateSuffixGroup(j,l,m):false
},updateSuffixGroup:function(l,j,m){var n=false,o="_"+m;
if(l[j]!==o){n=true;
l[j]=o;
this.suffix=this.suffix.replace(this.suffixPattern,l.join(""));
this.$element.attr(this.nameAttribute,this.get())
}return n
},extractName:function(j){return j!=null?j.replace(this.suffixPattern,""):""
},extractSuffix:function(l){var j=l!=null?l.match(this.suffixPattern):null;
return j!=null?j[0]:null
},extractSuffixGroups:function(){return this.suffix!=null?this.suffix.match(this.suffixGroupPattern):null
}})
}function d(){b.FieldBase=Cog.Type.define({notImplementedError:"Not implemented",name:null,data:null,$element:null,nameChangedHandlers:null,constructor:function(j){this.$element=j||i();
this.data=this.$element.data()||{};
this.name=new f.FieldName(j);
this.nameChangedHandlers=[]
},getName:function(){return this.name.get()
},increaseNameSuffix:function(m,l){var n=this.name.getSuffixIndexAt(m),j=!isNaN(l)?l:Number.MAX_VALUE,o=false;
if(!isNaN(n)&&n<=j){o=this.name.updateSuffix(m,n+1);
this.notifyNameChanged()
}return o
},decreaseNameSuffix:function(l,o){var m=this.name.getSuffixIndexAt(l),j=!isNaN(o)?o:0,n=false;
if(!isNaN(m)&&m>=j){n=this.name.updateSuffix(l,m-1);
this.notifyNameChanged()
}return n
},updateNameSuffix:function(j,l){var m=false;
if(!isNaN(l)){m=this.name.updateSuffix(j,l);
this.notifyNameChanged()
}return m
},getElement:function(){return this.$element
},getType:function(){return null
},getValue:function(){return null
},getData:function(){return this.data
},setValue:function(j){throw"Not implemented"
},disable:function(){this.$element.prop("disabled",true)
},enable:function(){this.$element.prop("disabled",false)
},reset:function(j){this.setValue(null)
},attribute:function(j,l){return this.$element.attr(j,l)
},on:function(){this.$element.on.apply(this.$element,arguments)
},off:function(){this.$element.off.apply(this.$element,arguments)
},notifyNameChanged:function(){var j=this.nameChangedHandlers,m,l;
for(l=0;
l<j.length;
l++){m=j[l];
m.delegate.apply(m.scope,m.parameters)
}},nameChangedHandler:function(m,l,n){var j={delegate:m,scope:l,parameters:n||[]};
this.nameChangedHandlers.push(j)
}})
}g.init=function(){h();
d()
};
Cog.registerStatic({name:"forms.field.fieldBase",api:g,sharedApi:b})
}(COGjQuery,document));
(function(g,d){var f={},h={factory:null},c={FieldsManager:null};
function b(){c.FieldsManager=Cog.Type.define({items:null,map:null,factory:null,constructor:function(){this.items=[];
this.map={};
this.factory=h.factory()
},create:function(i,l){var j=this.factory.create(i);
return this.addField(j,l)
},findAndCreate:function(i,j,m){var l=this.factory.findAndCreate(i,j);
return this.addField(l,m)
},getByKey:function(i){return this.map[i]
},getAll:function(){return this.items
},filter:function(n,o){var j=[],l=this.items,p,m;
for(m=0;
m<l.length;
m++){p=l[m];
if(n.call(o,p)===true){j.push(p)
}}return j
},addField:function(i,j){return i!=null&&this.add(i.getName(),i,j)?i:null
},add:function(m,n,o){var j,i=false,l=(m!=null&&n!=null);
if(l){if(this.map[m]===undefined){this.items.push(n);
this.map[m]=n
}else{if(o){j=_.findIndex(this.items,function(p){return p.name.name==n.name.name
});
if(j>-1){this.items.splice(j,1)
}this.items.push(n);
this.map[m]=n
}}i=true
}return i
}})
}f.init=function(){b()
};
Cog.registerStatic({name:"forms.field.fieldsManager",api:f,externalApi:h,sharedApi:c,requires:[{name:"forms.field.factory",apiId:"factory"}]})
}(COGjQuery,document));
(function(g,d){var f={},c={FieldsState:null};
function b(){c.FieldsState=Cog.Type.define({fields:null,state:null,constructor:function(h){this.fields=h;
this.state=null
},current:function(){if(this.state==null){this.save()
}return this.state
},save:function(){var h=this.fields.getAll(),l,j;
this.state={};
for(j=0;
j<h.length;
j++){l=h[j];
this.state[l.getName()]=l.getValue()
}},set:function(n){var j=this.fields.getAll(),h=false,m,o,l;
n=n||{};
for(l=0;
l<j.length;
l++){o=j[l];
m=n[o.getName()];
if(m!==undefined){this.setValue(o,m);
h=true
}}return h
},clear:function(){var h=this.fields.getAll(),j;
for(j=0;
j<h.length;
j++){this.setValue(h[j],null)
}},setValue:function(i,h){if(i.getValue()!==h){i.setValue(h)
}},restore:function(){this.set(this.state)
},updateKey:function(i,j){var h=this.state;
if(h!=null&&h[i]!==undefined){h[j]=h[i];
h[i]=undefined
}}})
}f.init=function(){b()
};
Cog.registerStatic({name:"forms.field.fieldsState",api:f,sharedApi:c})
}(COGjQuery,document));
(function(g,d){var f={},h={fieldType:"radioGroup"},i={fieldBase:null},c={RadioGroup:null,type:null};
function b(){var j=Cog.Type.extend(i.fieldBase.FieldBase,{checkedProperty:"checked",checkedSelector:":checked",constructor:function(l){j.superclass.constructor.call(this,l);
this.$element=this.$element.filter('[name="'+this.name.get()+'"]')
},getType:function(){return h.fieldType
},getValue:function(){var l=this.$element.filter(this.checkedSelector);
return l.length?l.val():null
},setValue:function(l){this.$element.prop(this.checkedProperty,false);
if(l!==null&&l!==undefined){this.$element.filter('[value="'+l+'"]').prop(this.checkedProperty,true)
}}});
c.RadioGroup=j
}c.type=function(){return h.fieldType
};
f.init=function(){b()
};
Cog.registerStatic({name:"forms.field.radioGroup",api:f,externalApi:i,sharedApi:c,requires:[{name:"forms.field.fieldBase",apiId:"fieldBase"}]})
}(COGjQuery,document));
(function(g,d){var f={},h={fieldType:"textField"},i={fieldBase:null},c={TextField:null,type:null};
function b(){var j=Cog.Type.extend(i.fieldBase.FieldBase,{getType:function(){return h.fieldType
},getValue:function(){return this.$element.val()
},setValue:function(l){if(l===null||l===undefined){l=""
}this.$element.val(l)
}});
c.TextField=j
}c.type=function(){return h.fieldType
};
f.init=function(){b()
};
Cog.registerStatic({name:"forms.field.textField",api:f,externalApi:i,sharedApi:c,requires:[{name:"forms.field.fieldBase",apiId:"fieldBase"}]})
}(COGjQuery,document));
(function(i,d){var h={},f={form:{name:"forms.form",events:{registerElement:"registerElement"}},registry:{name:"elements.registry",listeners:{allInitialized:"allInitialized"}}},j={element:null,errorPresenter:null,fieldsManager:null,fieldsState:null,validatorFactory:null},c={Element:null};
function g(){var l=Cog.Type.extend(j.element.Element,{fieldSuffixOperations:{increaseNameSuffix:"increaseNameSuffix",decreaseNameSuffix:"decreaseNameSuffix",updateNameSuffix:"updateNameSuffix"},userDataClass:"userData",errorPresenter:null,fields:null,fieldsState:null,validators:null,isValidationEnabled:true,isValidationLocked:false,elementsFinder:null,constructor:function(n,o){l.superclass.constructor.call(this,n);
var m=f.registry;
this.saveState();
o=o===true;
if(o){this.eventsManager.on(m.name,m.listeners.allInitialized).execute(this.onAllInitialized).withScope(this).disposable().bind()
}Cog.fireEvent(f.form.name,f.form.events.registerElement,{element:this,isContainer:o})
},initialize:function(){l.superclass.initialize.call(this);
this.initializeErrorPresenter();
this.fields=new j.fieldsManager.FieldsManager();
this.fieldsState=new j.fieldsState.FieldsState(this.fields);
this.initializeValidators();
Cog.addListener2("elements.stateProvider","allElementsUpdated",this.checkIsCorrectForFirstTime.bind(this))
},initializeErrorPresenter:function(){this.errorPresenter=new j.errorPresenter.ErrorPresenter(this.$scope,this.errorPresenterSelector())
},refreshErrorPresenter:function(){if(this.errorPresenter.view!=null){this.errorPresenter.unregister();
this.initializeErrorPresenter()
}},unregister:function(){this.errorPresenter.unregister();
l.superclass.unregister.call(this)
},errorPresenterSelector:function(){return null
},onAllInitialized:function(){},initializeValidators:function(){var n=new j.validatorFactory.ValidatorFactory(),m=n.create(this),o;
this.validators=[];
for(o=0;
o<m.length;
o++){this.addValidator(m[o])
}},validate:function(){if(this.canValidate()){this.executeValidators()
}this.checkIsCorrect()
},checkIsCorrect:function(){if(this.isValid()){if(!this.checkbox||(this.checkbox&&!this.checkbox.getValue())){this.$scope.addClass("filled")
}}else{this.$scope.removeClass("filled")
}},checkIsCorrectForFirstTime:function(){if(this.$scope.find(".input-text input, .input-number input, .input-email input, .input-telephone input, .select select").val()){this.$scope.addClass("filled")
}},isValid:function(){return this.canValidate()?this.executeValidators():true
},hasField:function(m){return this.fields.getByKey(m)!==undefined
},getField:function(m){return this.fields.getByKey(m)
},getFields:function(m,n){return i.isFunction(m)?this.fields.filter(m,n):this.fields.getAll()
},saveState:function(){this.withoutValidation(this.fieldsState.save,this.fieldsState)
},restoreState:function(){this.errorPresenter.clearAll().refresh();
this.withoutValidation(this.fieldsState.restore,this.fieldsState);
this.updateUserDataFlag(false)
},clearState:function(){this.errorPresenter.clearAll().refresh();
this.withoutValidation(this.fieldsState.clear);
this.updateUserDataFlag(false)
},processData:function(p){var o=l.superclass.processData.call(this,p),n=o?o.parameters:null,m=false;
if(n&&!o.isDefaultValue){m=this.fieldsState.set(n)
}this.updateUserDataFlag(m);
return o
},withoutValidation:function(n,m,o){var p=this.isValidationEnabled,q=this.isValidationLocked;
if(q){this.unlockValidation()
}this.disableValidation();
n.apply(m||this,o||[]);
if(p){this.enableValidation()
}if(q){this.lockValidation()
}},enableValidation:function(){if(!this.isValidationLocked){this.isValidationEnabled=true
}},disableValidation:function(){if(!this.isValidationLocked){this.isValidationEnabled=false
}},lockValidation:function(){this.isValidationLocked=true
},unlockValidation:function(){this.isValidationLocked=false
},getErrorPresenter:function(){return this.errorPresenter
},increaseNameSuffixes:function(n,m){this.changeFieldSuffixes(this.fieldSuffixOperations.increaseNameSuffix,arguments)
},decreaseNameSuffixes:function(m,n){this.changeFieldSuffixes(this.fieldSuffixOperations.decreaseNameSuffix,arguments)
},updateNameSuffixes:function(m,n){this.changeFieldSuffixes(this.fieldSuffixOperations.updateNameSuffix,arguments)
},addValidator:function(m){if(m&&m.canValidate()){this.validators.push(m)
}},isUnderAbHiddenBox:function(){var m=this.$scope.parents(".abTesting");
return m.length&&m.is(":hidden")
},canValidate:function(){return this.isEnabled()&&this.isValidationEnabled
},executeValidators:function(){var m=true,n=this.validators,p,o;
this.errorPresenter.clear();
for(o=0;
m&&o<n.length;
o++){p=n[o];
if(!p.isValid()&&!this.isUnderAbHiddenBox()){this.errorPresenter.add(p.getMessage());
m=false
}}this.errorPresenter.refresh();
return m
},readTrackingConfig:function(n){var o=null,p=null,m=null;
o=n.find(".analytics-fields-tracking");
if(o.length!==0){p=o.data("analyticsFieldLabel");
m=o.data("analyticsFieldTracking-type").split(",");
return{analyticsLabel:p,analyticsFieldTrackingBindings:m}
}else{return null
}},prepareTrackingInfo:function(n,m){return{data:n,config:m}
},getDataAndConfig:function(o,n,p){var m=[];
p=p||this.prepareTrackingInfo;
_.map(o,function(s){var q=i(s),t=n(q),r=null;
r=this.readTrackingConfig(q);
if(r&&!this.isAnalyticsInsideDwv(q,r)){m.push(p(t,r))
}},this);
return m
},isAnalyticsInsideDwv:function(m,n){return n.analyticsLabel&&m.hasClass("driverWithVariantsDl")
},updateUserDataFlag:function(m){if(m){this.$scope.addClass(this.userDataClass)
}else{this.$scope.removeClass(this.userDataClass)
}},contextProxy:function(n,m){return function(){var o=[this];
o.push.apply(o,arguments);
n.apply(m,o)
}
},changeFieldSuffixes:function(r,p){var m=this.getFields(),q,o,n;
for(n=0;
n<m.length;
n++){q=m[n];
o=q[r];
if(i.isFunction(o)){this.changeFieldSuffix(q,o,p||[])
}}},changeFieldSuffix:function(p,m,n){var o=p.getName();
if(m.apply(p,n)===true){this.fieldsState.updateKey(o,p.getName())
}},shouldValidateNow:function(o){var m=o.eventData.$scope,n=o.eventData.skipOnError;
if(m.has(this.$scope).length){if(!n){return true
}return !this.$scope.hasClass("error")&&!this.$scope.find(".error").length
}return false
},validateNow:function(n,o){var m=o.eventData.$scope;
if(this.shouldValidateNow(o)){n()
}},initializeValidateNow:function(m){Cog.addListener2("components","validateNow",this.validateNow.bind(this,m.bind(this)))
}});
c.Element=l
}function b(){g()
}h.init=function(){b()
};
Cog.registerStatic({name:"forms.elements.element",api:h,externalApi:j,sharedApi:c,requires:[{name:"elements.element",apiId:"element"},{name:"forms.form"},{name:"forms.field.fieldsManager",apiId:"fieldsManager"},{name:"forms.field.fieldsState",apiId:"fieldsState"},{name:"forms.validation.errorPresenter",apiId:"errorPresenter"},{name:"forms.validation.elements.validatorFactory",apiId:"validatorFactory"}]})
}(COGjQuery,document));
(function(i){var h={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},predictiveLookup:{name:"forms.elements.predictiveLookup",events:{textChanged:"textChanged"}}},g={BusinessUse:null},j={formElement:null,journeyStorage:null,wcmMode:null},f={fieldName:"formField.details.occupation"},d=false;
function b(){var l=Cog.Type.extend(j.formElement.Element,{excludedFromBusinessUseJobs:[],initialize:function(){l.superclass.initialize.call(this);
this.excludedFromBusinessUseJobs=this.configuration.get().excludedJobsJson||[];
this.excludedFromBusinessUseJobs=this.excludedFromBusinessUseJobs.map(function(m){return m.toLowerCase()
});
this.hideAll(this.$scope);
Cog.addListener(c.predictiveLookup.name,c.predictiveLookup.events.textChanged,i.proxy(this.onTextChanged,this))
},onTextChanged:function(m){var n=m.eventData.value,o=m.eventData.fieldName;
if(o===f.fieldName){if(this.isBlank(n)){this.hideAll()
}else{if(this.isExcluded(n)){this.displayExcluded()
}else{this.displayIncluded()
}}}},isExcluded:function(m){m=(m||"").toLowerCase();
return this.excludedFromBusinessUseJobs.indexOf(m)!==-1
},hidePlaceholder:function(){this.$scope.find(".placeholder").css("display","none")
},displayExcluded:function(){this.$scope.find(".business-use,.excluded,.more-link").css("display","block");
this.$scope.find(".included").css("display","none");
this.hidePlaceholder()
},displayIncluded:function(){this.$scope.find(".business-use,.included,.more-link").css("display","block");
this.$scope.find(".excluded").css("display","none");
this.hidePlaceholder()
},displayPlaceholderInEdit:function(){if(j.wcmMode.isEdit()){this.$scope.find(".business-use").css("display","block");
this.$scope.find(".placeholder").css("display","block")
}},hideAll:function(){this.$scope.find(".business-use,.included,.excluded,.more-link").css("display","none");
this.displayPlaceholderInEdit()
},isBlank:function(m){return !m||!m.trim()
}});
g.BusinessUse=l
}h.onRegister=function(l){l.element=new g.BusinessUse(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
b()
}};
Cog.registerComponent({name:"businessUse",api:h,externalApi:j,selector:".businessUse",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"commons.wcmMode",apiId:"wcmMode"}]})
}(COGjQuery));
(function(h,m){var j={},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},n=false,i={},l={element:null},c={Checkbox:null},b=[];
function d(o){var p=o.find('input[type="checkbox"]');
return{value:p.is(":checked"),origin:p.attr("id")}
}i.getDataAndConfig=function(){return c.Checkbox.superclass.getDataAndConfig(b,d)
};
function g(){var o=Cog.Type.extend(l.element.Element,{values:null,input:null,checkbox:null,initialize:function(){o.superclass.initialize.call(this);
this.initializeCheckbox();
this.initializeConfiguration()
},initializeConfiguration:function(){this.values={};
this.values.on=this.configuration.get().optionValueOn||"on";
this.values.off=this.configuration.get().optionValueOff||"off"
},initializeCheckbox:function(){this.checkbox=this.fields.findAndCreate("input[type=checkbox]",this.$scope);
this.input=this.fields.findAndCreate("input[type=hidden]",this.$scope);
if(this.checkbox){this.checkbox.$label=this.$scope.find("label");
this.checkbox.$label.on("click",function(){});
this.checkbox.$errorTemplate=this.$scope.find("script");
this.checkbox.on("focusout",h.proxy(this.focusout,this));
this.checkbox.on("change",h.proxy(this.onCheckboxChanged,this));
this.checkbox.nameChangedHandler(this.onCheckboxNameChanged,this);
this.initializeValidateNow(this.validate)
}if(this.input){this.input.nameChangedHandler(this.onInputNameChanged,this)
}},focusout:function(){if(!this.checkbox.getValue()){setTimeout(h.proxy(this.validate,this),200)
}},processState:function(r){var p=r?r.parameters:{},q=null;
if(this.input){q=p[this.input.getName()]
}if(q&&this.checkbox){this.checkbox.setValue(q===this.values.on)
}},onCheckboxChanged:function(){var p=this.checkbox.getValue()?this.values.on:this.values.off;
if(this.input){this.input.setValue(p)
}if(p===this.values.on){this.validate()
}},onCheckboxNameChanged:function(){var p=this.checkbox.getName();
this.checkbox.attribute("id",p);
this.checkbox.$label.attr("for",p);
this.checkbox.$errorTemplate.attr("data-field-name",p)
},onInputNameChanged:function(){this.input.attribute("id",this.input.getName())
}});
c.Checkbox=o
}j.onRegister=function(o){var p=new c.Checkbox(o.$scope);
o.formElement=p
};
j.onUnregister=function(o){o.formElement.unregister()
};
j.init=function(o){b=h(h.merge(b,o));
Cog.fireEvent(f.registry.name,f.registry.events.initialized,{analytics:i.getDataAndConfig})
};
j.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
if(!n){n=true;
g()
}};
Cog.registerComponent({name:"forms.elements.checkbox",api:j,externalApi:l,sharedApi:i,requires:[{name:"forms.elements.element",apiId:"element"},"forms.elementsRegistry"],selector:"div.checkbox, div.secciCheckbox"})
}(COGjQuery,document));
(function(g,l){var i={},h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,j={element:null,dateValidator:null},b={Date:null};
function f(){var n=Cog.Type.extend(j.element.Element,{day:null,month:null,year:null,doValidation:true,tabbed:false,tabFwdSelector:null,tabBwdSelector:null,availableFields:[],$filledInformation:null,initialize:function(){n.superclass.initialize.call(this);
this.initializeDate()
},initializeDate:function(){var o=this.configuration.get().isHidden;
if(o){this.initializeHiddenComponent()
}else{this.initializeVisibleComponent()
}this.availableFields=_.filter([this.day,this.month,this.year],this.notNull);
this.$filledInformation=this.$scope.find(".filled-information");
this.$filledInformation.hide();
this.initializeFwdBwdSelectors();
this.initializeValidateNow(this.validateDate)
},initializeSingleVisibleComponent:function(p,o){if(p){p.$label_0=this.$scope.find(".label-"+o);
p.$label_1=this.$scope.find("."+o+" label");
this.bindEvents(p)
}},initializeVisibleComponent:function(){this.day=this.fields.findAndCreate(".day select",this.$scope);
this.month=this.fields.findAndCreate(".month select",this.$scope);
this.year=this.fields.findAndCreate(".year select",this.$scope);
if(this.day){this.day.removeAutocomplete()
}if(this.month){this.month.removeAutocomplete()
}if(this.year){this.year.removeAutocomplete()
}this.initializeSingleVisibleComponent(this.day,"day");
this.initializeSingleVisibleComponent(this.month,"month");
this.initializeSingleVisibleComponent(this.year,"year");
this.addValidator(new j.dateValidator.DateValidator(this,"Date is not valid"))
},initializeFwdBwdSelectors:function(){if(this.day){this.tabFwdSelector=".day";
this.tabBwdSelector=".day"
}if(this.month){this.tabFwdSelector=".month";
if(!this.tabBwdSelector){this.tabBwdSelector=".month"
}}if(this.year){this.tabFwdSelector=".year";
if(!this.tabBwdSelector){this.tabBwdSelector=".year"
}}},initializeHiddenComponent:function(){this.day=this.fields.findAndCreate("input.day",this.$scope);
this.month=this.fields.findAndCreate("input.month",this.$scope);
this.year=this.fields.findAndCreate("input.year",this.$scope)
},bindEvents:function(o){o.nameChangedHandler(g.proxy(this.onFieldNameChanged,this,o),this);
o.on("focusin touchstart",g.proxy(this.onFocusIn,this));
o.on("focusout",g.proxy(this.onFocusOut,this));
o.on("change",g.proxy(this.dateDropdownChanged,this));
o.on("mousedown",g.proxy(this.dateDropdownMousedown,this));
o.on("keydown",g.proxy(this.onKeyDown,this))
},onKeyDown:function(s){var p=s.keyCode||s.which,o,q,r;
this.tabbed=false;
if(s.target){o=g(s.target).parent();
q=!s.shiftKey&&p==9&&!o.is(this.tabFwdSelector);
r=s.shiftKey&&p==9&&!o.is(this.tabBwdSelector);
if(q||r){this.doValidation=false;
this.tabbed=true
}else{this.doValidation=true
}}},validateDate:function(){if(this.doValidation&&!this.tabbed){this.validate()
}this.doValidation=true;
this.tabbed=false
},onFocusOut:function(){this.doValidation=true;
window.setTimeout(function(){if(this.$scope.find("select:focus").length===0&&this.$scope.is(":visible")){this.validateDate()
}}.bind(this),100)
},onFocusIn:function(){this.doValidation=false
},dateDropdownChanged:function(s){var p=g(s.currentTarget),q=!p.parents(".select").next().is(".select, label"),r=function(){if(this.doValidation&&!q){p.focus()
}}.bind(this),o=function(){window.setTimeout(function(){if(this.doValidation){p.trigger("blur")
}}.bind(this),200)
}.bind(this);
this.doValidation=true;
window.setTimeout(r,100);
g(l).one("touchstart.touchDateValidation",o);
p.parent().find(".grey").removeClass("grey")
},dateDropdownMousedown:function(){this.doValidation=false
},onFieldNameChanged:function(p){var o=p.getName();
p.attribute("id",o);
p.$label_0.attr("for",o);
p.$label_1.attr("for",o)
},processState:function(p){var q=false,o=this;
if(p&&!Cog.statics.wcmMode.isEdit()){if(this.day&&null!=p.dayDefaultValue){this.day.setValue(p.dayDefaultValue);
q=true
}if(this.month&&null!=p.monthDefaultValue){this.month.setValue(p.monthDefaultValue);
q=true
}if(this.year&&null!=p.yearDefaultValue){this.year.setValue(p.yearDefaultValue);
q=true
}if(q){this.saveState()
}if(p&&p.parameters.disabled){this.processSsoDisable()
}this.processDisable(p);
Cog.addListener2("elements.stateProvider","stateChanged",Cog.ghostTextHelper.removeGreyStyleFromLabels);
Cog.addListener2("forms.form","resetElements",this.handleResetElements,{data:o})
}},handleResetElements:function(p){var o=p&&p.data;
if(o.inScopeOfEvent(p)){o.enableElement()
}},inScopeOfEvent:function(o){return o&&o.eventData&&o.eventData.$scope&&Cog.isInScope(o.eventData.$scope,this.$scope)
},enableElement:function(){var o=this;
_.each(this.availableFields,function(p){o.enableField(p)
});
this.$scope.removeClass("disabled");
this.$filledInformation.hide()
},processDisable:function(q){var p=q.parameters||{},o=this;
if(this.shouldDisableDate(p)){_.each(this.availableFields,function(r){o.disableField(r)
});
this.$scope.addClass("disabled");
this.$filledInformation.show()
}else{this.$filledInformation.hide()
}},shouldDisableDate:function(q){var p=false,o=this.configuration.get().disalloweditingafterwasset;
_.each(this.availableFields,function(r){if(q[r.getName()]){p=true
}});
return p&&o
},disableField:function(p){var o=p.$element;
this.saveTabindexIfNotSaved(o);
o.attr("tabindex","-1");
o.attr("readonly",true)
},saveTabindexIfNotSaved:function(o){o.data("oldTabindex",o.data("oldTabindex")||o.attr("tabindex"))
},enableField:function(p){var o=p.$element;
this.restoreOldTabindex(o);
o.attr("readonly",false)
},restoreOldTabindex:function(o){o.attr("tabindex",o.data("oldTabindex")||o.attr("tabindex"))
},processSsoDisable:function(){this.$scope.find("select").attr("tabindex","-1");
this.$scope.find("select option:not(:selected)").attr("disabled",true)
},notNull:function(o){return o!=null
}});
b.Date=n
}i.onRegister=function(n){var o=new b.Date(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig});
Cog.addListener2("elements.stateProvider","allElementsUpdated",Cog.ghostTextHelper.removeGreyStyleFromLabels)
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
function c(o){var p=o.find(".select.year select"),n=o.find(".select.month select"),q=o.find(".select.day select");
return{year:{value:p.val(),origin:p.attr("id")},month:{value:n.val(),origin:n.attr("id")},day:{value:q.val(),origin:q.attr("id")}}
}h.getDataAndConfig=function(){var n=g("div.date");
return b.Date.superclass.getDataAndConfig(n,c)
};
Cog.registerComponent({name:"forms.elements.date",api:i,sharedApi:h,externalApi:j,requires:[{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.date.dateValidator",apiId:"dateValidator"},"forms.elementsRegistry"],selector:"div.date"})
}(COGjQuery,document));
(function(g,l){var i={},h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,j={element:null,dateCheckboxValidator:null,pagesManager:null},b={DateCheckbox:null};
function f(){var n=Cog.Type.extend(j.element.Element,{day:null,month:null,year:null,checkbox:null,checkboxLabel:null,monthLabel:null,yearLabel:null,requiredMessage:"This field is required",checkboxValues:{on:"yes",off:"no"},doValidation:false,tabbed:false,resetCheckbox:false,tabFwdSelector:".year",tabBwdSelector:".month",initializeHidden:function(){this.day=this.fields.findAndCreate("input.day",this.$scope);
this.month=this.fields.findAndCreate("input.month",this.$scope);
this.year=this.fields.findAndCreate("input.year",this.$scope)
},initializeVisible:function(){this.day=this.fields.findAndCreate('input[id*=".day"]',this.$scope);
this.month=this.fields.findAndCreate(".select.month select",this.$scope);
this.year=this.fields.findAndCreate(".select.year select",this.$scope);
this.checkbox=this.fields.findAndCreate(".input-checkbox input",this.$scope);
this.monthLabel=this.month.$element.prev("label");
this.yearLabel=this.year.$element.prev("label");
this.checkboxLabel=this.$scope.find(".input-checkbox label");
this.initializeSingleVisibleComponent(this.day,null);
this.initializeSingleVisibleComponent(this.month,this.monthLabel);
this.initializeSingleVisibleComponent(this.year,this.yearLabel);
this.initializeSingleVisibleComponent(this.checkbox,this.checkboxLabel);
if(this.month&&this.year){this.month.on("change",g.proxy(this.dropdownChange,this));
this.year.on("change",g.proxy(this.dropdownChange,this));
this.month.on("focusin",g.proxy(this.onFocusIn,this));
this.year.on("focusin",g.proxy(this.onFocusIn,this));
this.month.on("focusout",g.proxy(this.onFocusOut,this));
this.year.on("focusout",g.proxy(this.onFocusOut,this));
this.month.on("mousedown touchstart",g.proxy(this.dropdownMousedown,this));
this.year.on("mousedown touchstart",g.proxy(this.dropdownMousedown,this));
this.month.on("keydown",g.proxy(this.onKeyDown,this));
this.year.on("keydown",g.proxy(this.onKeyDown,this))
}if(this.checkboxLabel){this.checkboxLabel.on("click",function(){});
this.checkboxLabel.on("mousedown",g.proxy(this.checkboxMousedown,this))
}if(this.checkbox){this.checkbox.on("change",g.proxy(this.toggleDropDowns,this));
this.checkbox.on("mousedown",g.proxy(this.checkboxMousedown,this));
this.checkbox.on("focusout",g.proxy(this.validateDate,this));
this.checkbox.on("keydown",g.proxy(this.onKeyDown,this));
if(this.checkbox.$element.prop("tabindex")<this.month.$element.prop("tabindex")){this.tabBwdSelector=".input-checkbox"
}else{this.tabFwdSelector=".input-checkbox"
}}this.addValidator(new j.dateCheckboxValidator.DateCheckboxValidator(this,this.requiredMessage))
},initialize:function(){var o=this.configuration.get().isHidden;
this.requiredMessage=this.configuration.get().requiredMessage;
n.superclass.initialize.call(this);
if(o){this.initializeHidden()
}else{this.initializeVisible();
this.initalizeDefaultValue();
this.initializeValidateNow(this.validate)
}this.doValidation=true
},initializeSingleVisibleComponent:function(p,o){if(p){p.$label=o;
p.nameChangedHandler(g.proxy(this.onFieldNameChanged,this,p),this)
}},getFormatedLabelValue:function(o){if(o.toString().length===1){o="0"+o
}return o
},initalizeDefaultValue:function(){var o=this.$scope.children(".defaultValueData").data("default-value");
if(o.day!==0&&o.month!==0&&o.year!==0){this.monthLabel.text(this.getFormatedLabelValue(o.month));
this.yearLabel.text(this.getFormatedLabelValue(o.year));
this.month.$element.val(this.monthLabel.text());
this.year.$element.val(o.year)
}},validateDate:function(){if(this.doValidation&&!this.tabbed&&this.$scope.find("select:focus").length===0&&this.$scope.find("label:hover").length===0){this.validate()
}if(this.checkbox.getValue()){this.$scope.removeClass("filled")
}},onFocusOut:function(){this.doValidation=true;
if(this.$scope.find("select:focus").length||!this.$scope.find("select").parent().hasClass("focus")){this.validateDate()
}},onFocusIn:function(){this.doValidation=false
},onFieldNameChanged:function(p){var o=p.getName();
if(p.$label){p.$label.attr("for",o)
}p.attribute("id",o)
},processState:function(q){var p=q?q.parameters:{},o;
if(this.checkbox){o=p[this.checkbox.getName()];
if(o){this.checkbox.setValue(o===this.checkboxValues.on);
this.resetCheckbox=true
}}this.setDefaultDayValue();
this.updateDateField(this.month,p);
this.updateDateField(this.year,p);
Cog.ghostTextHelper.removeGreyStyleFromLabels()
},setDefaultDayValue:function(){var o=this.$scope.find(".defaultValueData").data("fixedDay");
this.day.setValue(o)
},updateDateField:function(q,o){var p;
if(q){p=o[q.getName()];
if(p){q.setValue(p)
}}},toggleDropDowns:function(){if(this.checkbox.getValue()){this.resetCheckbox=false;
this.month.setValue("");
this.year.setValue("");
this.validate()
}this.resetCheckbox=true
},onKeyDown:function(r){var q=r.keyCode||r.which,p,o,s;
this.tabbed=false;
if(r.target){p=g(r.target).parent();
o=!r.shiftKey&&q==9&&!p.is(this.tabFwdSelector);
s=r.shiftKey&&q==9&&!p.is(this.tabBwdSelector);
if(o||s){this.doValidation=false;
this.tabbed=true
}else{this.doValidation=true
}if(g(r.target).is(":checkbox")){this.processCheckboxDateReset()
}}},dropdownChange:function(q){var p=g(q.currentTarget),r=!p.parents(".select").next().is(".select, label"),s=function(){if(this.doValidation&&!r){p.focus()
}}.bind(this),o=function(){window.setTimeout(function(){if(this.doValidation){p.trigger("blur")
}}.bind(this),200)
}.bind(this);
if(this.resetCheckbox){this.checkbox.setValue(false);
this.resetCheckbox=false
}this.doValidation=true;
window.setTimeout(s,100);
g(l).one("touchstart.touchDateValidation mousedown",o);
p.parent().find(".grey").removeClass("grey")
},dropdownMousedown:function(o){this.doValidation=false
},checkboxMousedown:function(){this.doValidation=false;
this.processCheckboxDateReset()
},processCheckboxDateReset:function(){if(!this.checkbox.$element.is(":checked")){this.$scope.find(".styled-select").addClass("grey")
}}});
b.DateCheckbox=n
}i.onRegister=function(n){var o=new b.DateCheckbox(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig});
if(j.pagesManager.isChurchill()){Cog.addListener2("elements.stateProvider","allElementsUpdated",Cog.ghostTextHelper.removeGreyStyleFromLabels)
}};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
function c(q){var r=q.find(".select.year select"),p=q.find(".select.month select"),s=q.find(".select.day select"),o=q.find(".input-checkbox input"),n;
n={year:{value:r.val(),origin:r.attr("id")},month:{value:p.val(),origin:p.attr("id")},day:{value:s.val()||q.find(".defaultValueData").data("fixedDay")||"1",origin:s.attr("id")||"data-fixed-day"},checked:{value:o.is(":checked"),origin:o.attr("id")}};
if(!n.year.value){delete n.year
}if(!n.month.value){delete n.month
}if(!n.day.value){delete n.day
}return n
}h.getDataAndConfig=function(){var n=g("div.date-checkbox-row");
return b.DateCheckbox.superclass.getDataAndConfig(n,c)
};
Cog.registerComponent({name:"forms.elements.dateCheckbox",api:i,externalApi:j,sharedApi:h,requires:[{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.dateCheckbox.dateCheckboxValidator",apiId:"dateCheckboxValidator"},{name:"component.pagesManager",apiId:"pagesManager"},"forms.elementsRegistry"],selector:"div.date-checkbox-row"})
}(COGjQuery,document));
(function(g,l){var i={},h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,j={element:null,dateCheckboxValidator:null,dateCheckboxWithInputFieldsDateValidator:null,dateCheckboxWithInputFieldsValidator:null,pagesManager:null},b={DateCheckbox:null};
function f(){var n=Cog.Type.extend(j.element.Element,{day:null,month:null,year:null,checkbox:null,checkboxLabel:null,monthLabel:null,yearLabel:null,dayDefault:null,dayFormat:null,monthFormat:null,yearFormat:null,yearValueFrom:null,yearValueTo:null,invalidDateMessage:"The date is invalid",requiredMessage:"This field is required",checkboxValues:{on:"yes",off:"no"},doValidation:false,tabbed:false,resetCheckbox:false,tabFwdSelector:".year",tabBwdSelector:".month",initializeHidden:function(){this.day=this.fields.findAndCreate("input.day",this.$scope);
this.month=this.fields.findAndCreate("input.month",this.$scope);
this.year=this.fields.findAndCreate("input.year",this.$scope)
},initializeVisible:function(){this.day=this.fields.findAndCreate(".select.day input",this.$scope);
this.month=this.fields.findAndCreate(".select.month input",this.$scope);
this.year=this.fields.findAndCreate(".select.year input",this.$scope);
this.checkbox=this.fields.findAndCreate(".input-checkbox input",this.$scope);
if(this.day){this.day.on("change",g.proxy(this.dropdownChange,this));
this.day.on("focusin",g.proxy(this.onFocusIn,this));
this.day.on("focusin",g.proxy(this.onFocusOut,this));
this.day.on("keydown",g.proxy(this.onKeyDown,this))
}if(this.month){this.month.on("change",g.proxy(this.dropdownChange,this));
this.month.on("focusin",g.proxy(this.onFocusIn,this));
this.month.on("focusout",g.proxy(this.onFocusOut,this));
this.month.on("keydown",g.proxy(this.onKeyDown,this))
}if(this.year){this.year.on("change",g.proxy(this.dropdownChange,this));
this.year.on("focusin",g.proxy(this.onFocusIn,this));
this.year.on("focusout",g.proxy(this.onFocusOut,this));
this.year.on("keydown",g.proxy(this.onKeyDown,this))
}if(this.checkboxLabel){this.checkboxLabel.on("click",function(){});
this.checkboxLabel.on("mousedown",g.proxy(this.checkboxMousedown,this))
}if(this.checkbox){this.checkbox.on("change",g.proxy(this.toggleDropDowns,this));
this.checkbox.on("mousedown",g.proxy(this.checkboxMousedown,this));
this.checkbox.on("focusout",g.proxy(this.validateDate,this));
this.checkbox.on("keydown",g.proxy(this.onKeyDown,this));
if(this.checkbox.$element.prop("tabindex")<this.month.$element.prop("tabindex")){this.tabBwdSelector=".input-checkbox"
}else{this.tabFwdSelector=".input-checkbox"
}}this.addValidator(new j.dateCheckboxWithInputFieldsDateValidator.DateCheckboxWithInputFieldsDateValidator(this,this.invalidDateMessage));
this.addValidator(new j.dateCheckboxWithInputFieldsValidator.DateCheckboxWithInputFieldsInputValidator(this,this.requiredMessage))
},initialize:function(){var o=this.configuration.get().isHidden;
this.requiredMessage=this.configuration.get().requiredMessage;
this.invalidDateMessage=this.configuration.get().invalidDateMessage;
this.dayDefault=this.configuration.get().dayDefault;
this.dayFormat=this.configuration.get().dayFormat;
this.monthFormat=this.configuration.get().monthFormat;
this.yearFormat=this.configuration.get().yearFormat;
this.yearValueFrom=this.configuration.get().yearValueFrom;
this.yearValueTo=this.configuration.get().yearValueTo;
n.superclass.initialize.call(this);
if(o){this.initializeHidden()
}else{this.initializeVisible();
this.initalizeDefaultValue();
this.initializeValidateNow(this.validate)
}this.doValidation=true
},initializeSingleVisibleComponent:function(p,o){if(p){p.$label=o;
p.nameChangedHandler(g.proxy(this.onFieldNameChanged,this,p),this)
}},getFormatedLabelValue:function(o){if(o.toString().length===1){o="0"+o
}return o
},initalizeDefaultValue:function(){var o=this.$scope.children(".defaultValueData").data("default-value");
if(o==null){return
}if(o.day){this.day.$element.val(o.day)
}if(o.month){this.day.$element.val(o.month)
}if(o.year){this.day.$element.val(o.year)
}},validateDate:function(){this.doValidation=true;
this.tabbed=false;
if(this.doValidation&&!this.tabbed&&this.$scope.find("input:focus").length===0&&this.$scope.find("label:hover").length===0){this.validate()
}if(this.checkbox.getValue()){this.$scope.removeClass("filled")
}},onFocusOut:function(){this.doValidation=true;
if(this.$scope.find("input:focus").length||this.$scope.find("input").parent().hasClass("focus")){this.validateDate()
}},onFocusIn:function(){this.doValidation=false
},onFieldNameChanged:function(p){var o=p.getName();
if(p.$label){p.$label.attr("for",o)
}p.attribute("id",o)
},processState:function(q){var p=q?q.parameters:{},o;
if(this.checkbox){o=p[this.checkbox.getName()];
if(o){this.checkbox.setValue(o===this.checkboxValues.on);
this.resetCheckbox=true;
if(!this.checkbox.getValue()){this.setDefaultDayValue();
this.updateDateField(this.day,p);
this.updateDateField(this.month,p);
this.updateDateField(this.year,p)
}else{this.day.setValue("");
this.month.setValue("");
this.year.setValue("")
}}}Cog.ghostTextHelper.removeGreyStyleFromLabels()
},setDefaultDayValue:function(){var o=this.$scope.find(".defaultValueData").data("fixedDay");
this.day.setValue(o)
},updateDateField:function(q,o){var p;
if(q){p=o[q.getName()];
if(p){q.setValue(p)
}}},toggleDropDowns:function(){if(this.checkbox.getValue()){this.day.setValue("");
this.month.setValue("");
this.year.setValue("");
this.resetCheckbox=false;
this.validate()
}else{this.setDefaultDayValue()
}this.resetCheckbox=true
},onKeyDown:function(r){var q=r.keyCode||r.which,p,o,s;
this.tabbed=false;
if(r.target){p=g(r.target).parent();
o=!r.shiftKey&&q==9&&!p.is(this.tabFwdSelector);
s=r.shiftKey&&q==9&&!p.is(this.tabBwdSelector);
if(o||s){this.doValidation=false;
this.tabbed=true
}else{this.doValidation=true
}if(g(r.target).is(":checkbox")){this.processCheckboxDateReset()
}}},dropdownChange:function(q){var p=g(q.currentTarget),r=!p.parents(".select").next().is(".select, label"),s=function(){if(this.doValidation&&!r){p.focus()
}}.bind(this),o=function(){window.setTimeout(function(){if(this.doValidation){p.trigger("blur")
}}.bind(this),200)
}.bind(this);
if(this.resetCheckbox){this.checkbox.setValue(false);
this.resetCheckbox=false
}this.doValidation=true;
window.setTimeout(s,100);
g(l).one("touchstart.touchDateValidation mousedown",o);
p.parent().find(".grey").removeClass("grey")
},dropdownMousedown:function(o){this.doValidation=false
},checkboxMousedown:function(){this.doValidation=false;
this.processCheckboxDateReset()
},processCheckboxDateReset:function(){if(!this.checkbox.$element.is(":checked")){this.$scope.find(".styled-select").addClass("grey")
}}});
b.DateCheckbox=n
}i.onRegister=function(n){var o=new b.DateCheckbox(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig});
if(j.pagesManager.isChurchill()){Cog.addListener2("elements.stateProvider","allElementsUpdated",Cog.ghostTextHelper.removeGreyStyleFromLabels)
}};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
function c(q){var r=q.find(".select.year input"),p=q.find(".select.month input"),s=q.find(".select.day input"),o=q.find(".input-checkbox input"),n;
n={year:{value:r.val(),origin:r.attr("id")},month:{value:p.val(),origin:p.attr("id")},day:{value:s.val()||q.find(".defaultValueData").data("fixedDay")||"1",origin:s.attr("id")||"data-fixed-day"},checked:{value:o.is(":checked"),origin:o.attr("id")}};
if(!n.year.value){delete n.year
}if(!n.month.value){delete n.month
}if(!n.day.value){delete n.day
}return n
}h.getDataAndConfig=function(){var n=g("div.date-checkbox-with-input-fields-row");
return b.DateCheckbox.superclass.getDataAndConfig(n,c)
};
Cog.registerComponent({name:"forms.elements.dateCheckboxWithInputFields",api:i,externalApi:j,sharedApi:h,requires:[{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.dateCheckboxWithInputFieldsDateValidator",apiId:"dateCheckboxWithInputFieldsDateValidator"},{name:"forms.elements.dateCheckboxWithInputFieldsValidator",apiId:"dateCheckboxWithInputFieldsValidator"},{name:"component.pagesManager",apiId:"pagesManager"},"forms.elementsRegistry"],selector:"div.date-checkbox-with-input-fields-row"})
}(COGjQuery,document));
(function(g,l){var i={},h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,j={element:null,dateValidator:null},b={Date:null};
function f(){var n=Cog.Type.extend(j.element.Element,{day:null,month:null,year:null,doValidation:true,tabbed:false,tabFwdSelector:null,tabBwdSelector:null,$todayButton:null,$calendarButton:null,$datePicker:null,initialize:function(){n.superclass.initialize.call(this);
this.initializeDateWithCalendar()
},setTitlePadding:function(o,p){if(o.length===0){g(".ui-datepicker-title").css("padding-left",String(p))
}else{g(".ui-datepicker-title").css("padding-left","0")
}},initializeDateWithCalendar:function(){var p=this.configuration.get().isHidden,o=this;
if(p){this.initializeHiddenComponent()
}else{this.initializeVisibleComponent()
}this.initializeFwdBwdSelectors();
this.initializeValidateNow(this.validateDateWithCalendar);
g(l).on("click",".ui-datepicker-next",function(){o.setTitlePadding(g(".ui-datepicker-next"),"-10%")
});
g(l).on("click",".ui-datepicker-prev",function(){o.setTitlePadding(g(".ui-datepicker-prev"),"10%")
})
},initializeSingleVisibleComponent:function(p,o){if(p){p.$label_0=this.$scope.find(".label-"+o);
p.$label_1=this.$scope.find("."+o+" label");
this.bindEvents(p)
}},bindButtons:function(){this.$todayButton=this.$scope.find(".today-date-button");
this.bindEventsToButton(this.$todayButton,g.proxy(this.onTodayButtonClicked.bind(this)));
this.$calendarButton=this.$scope.find(".calendar-button");
this.bindEventsToButton(this.$calendarButton,g.proxy(this.onCalendarButtonClicked.bind(this)))
},bindDatepicker:function(){this.$datePicker=this.$scope.find("#ui-datepicker-div");
this.initializeDatePicker();
this.$datePicker.hide()
},initializeVisibleComponent:function(){var o="Date is not valid";
this.day=this.fields.findAndCreate(".day select",this.$scope);
this.month=this.fields.findAndCreate(".month select",this.$scope);
this.year=this.fields.findAndCreate(".year select",this.$scope);
if(this.day){this.day.removeAutocomplete()
}if(this.month){this.month.removeAutocomplete()
}if(this.year){this.year.removeAutocomplete()
}this.initializeSingleVisibleComponent(this.day,"day");
this.initializeSingleVisibleComponent(this.month,"month");
this.initializeSingleVisibleComponent(this.year,"year");
this.addValidator(new j.dateValidator.DateValidator(this,o));
this.bindButtons();
this.bindDatepicker()
},initializeDatePicker:function(){var p=this,o=new Date();
this.$datePicker.datepicker({onSelect:function(){var r=g(this).datepicker("getDate"),q=p.addZero(r.getDate(),2),t=p.addZero(r.getMonth()+1,2),s=p.addZero(r.getFullYear(),2);
p.disableGrayOutSelects();
p.day.setValue(q);
p.month.setValue(t);
p.year.setValue(s);
p.$calendarButton.removeClass("open");
g(this).hide()
},minDate:"0",maxDate:"+89D",showOtherMonths:false,selectOtherMonths:false,hideIfNoPrevNext:true,inline:true,firstDay:1});
this.$datePicker.on("focusin touchstart",g.proxy(this.onFocusIn,this));
this.$datePicker.on("focusout",g.proxy(this.onFocusOut,this))
},initializeFwdBwdSelectors:function(){if(this.day){this.tabFwdSelector=".day";
this.tabBwdSelector=".day"
}if(this.month){this.tabFwdSelector=".month";
if(!this.tabBwdSelector){this.tabBwdSelector=".month"
}}if(this.year){this.tabFwdSelector=".year";
if(!this.tabBwdSelector){this.tabBwdSelector=".year"
}}},initializeHiddenComponent:function(){this.day=this.fields.findAndCreate("input.day",this.$scope);
this.month=this.fields.findAndCreate("input.month",this.$scope);
this.year=this.fields.findAndCreate("input.year",this.$scope)
},bindEvents:function(o){o.nameChangedHandler(g.proxy(this.onFieldNameChanged,this,o),this);
o.on("focusin touchstart",g.proxy(this.onFocusIn,this));
o.on("focusout",g.proxy(this.onFocusOut,this));
o.on("change",g.proxy(this.dateWithCalendarDropdownChanged,this));
o.on("mousedown",g.proxy(this.dateWithCalendarDropdownMousedown,this));
o.on("keydown",g.proxy(this.onKeyDown,this))
},bindEventsToButton:function(p,o){p.on("focusin touchstart",g.proxy(this.onFocusIn,this));
p.on("focusout",g.proxy(this.onFocusOut,this));
p.on("click",o)
},onKeyDown:function(s){var p=s.keyCode||s.which,o,q,r;
this.tabbed=false;
if(s.target){o=g(s.target).parent();
q=!s.shiftKey&&p==9&&!o.is(this.tabFwdSelector);
r=s.shiftKey&&p==9&&!o.is(this.tabBwdSelector);
if(q||r){this.doValidation=false;
this.tabbed=true
}else{this.doValidation=true
}}},validateDateWithCalendar:function(){if(this.doValidation&&!this.tabbed){this.validate()
}this.doValidation=true;
this.tabbed=false
},onFocusOut:function(){this.doValidation=true;
window.setTimeout(function(){if(this.$scope.find("select:focus").length===0&&this.$scope.is(":visible")&&!this.$scope.find("#ui-datepicker-div").is(":focus")&&this.$scope.find("button:focus").length===0){this.validateDateWithCalendar()
}}.bind(this),100)
},onFocusIn:function(){this.doValidation=false
},onCalendarButtonClicked:function(t){var u=this.$calendarButton.is(":disabled"),s=this.$datePicker.is(":visible"),q=this.day.getValue(),r=this.month.getValue(),o=this.year.getValue(),p=null;
if(u){return
}if(!s){this.enableGrayOutSelects(this);
this.$calendarButton.addClass("opened");
if(q===""||r===""||o===""){p=new Date()
}else{p=new Date(this.addZero(o,2),this.addZero((r-1),2),this.addZero(q,2))
}this.$datePicker.datepicker({dateFormat:"yyyy-mm-dd"});
this.$datePicker.datepicker("setDate",p);
this.$datePicker.show();
this.setTitlePadding(g(".ui-datepicker-prev"),"10%")
}else{this.disableGrayOutSelects();
this.$calendarButton.removeClass("opened");
this.$datePicker.hide()
}},enableGrayOutSelects:function(){this.day.$label_1.addClass("grey");
this.year.$label_1.addClass("grey");
this.month.$label_1.addClass("grey")
},disableGrayOutSelects:function(){this.day.getElement().parent().find(".grey").removeClass("grey");
this.month.getElement().parent().find(".grey").removeClass("grey");
this.year.getElement().parent().find(".grey").removeClass("grey")
},onTodayButtonClicked:function(s){if(this.$todayButton.is(":disabled")){return
}var p=new Date(),o=s,t=this.addZero(p.getMonth()+1,2),r=this.addZero(p.getDate(),2),q=this.addZero(p.getFullYear(),2);
o.currentTarget=this.day;
o.type="change";
this.dateWithCalendarDropdownChanged(o);
this.day.setValue(r);
o.currentTarget=this.month;
this.dateWithCalendarDropdownChanged(o);
this.month.setValue(t);
o.currentTarget=this.year;
this.dateWithCalendarDropdownChanged(o);
this.year.setValue(q);
this.$datePicker.hide();
this.disableGrayOutSelects();
this.$calendarButton.removeClass("opened")
},dateWithCalendarDropdownChanged:function(s){var p=g(s.currentTarget),q=!p.parents(".select").next().is(".select, label"),r=function(){if(this.doValidation&&!q){p.focus()
}}.bind(this),o=function(){window.setTimeout(function(){if(this.doValidation){p.trigger("blur")
}}.bind(this),200)
}.bind(this);
this.doValidation=true;
window.setTimeout(r,100);
g(l).one("touchstart.touchDateValidation",o);
p.parent().find(".grey").removeClass("grey")
},dateWithCalendarDropdownMousedown:function(){this.doValidation=false;
this.$datePicker.hide();
this.$calendarButton.removeClass("opened")
},onFieldNameChanged:function(p){var o=p.getName();
p.attribute("id",o);
p.$label_0.attr("for",o);
p.$label_1.attr("for",o)
},addZero:function(p,o){while(p.toString().length<o){p="0"+p
}return p
},processState:function(o){var p=false;
if(o&&!Cog.statics.wcmMode.isEdit()){if(this.day&&null!=o.dayDefaultValue){this.day.setValue(o.dayDefaultValue);
p=true
}if(this.month&&null!=o.monthDefaultValue){this.month.setValue(o.monthDefaultValue);
p=true
}if(this.year&&null!=o.yearDefaultValue){this.year.setValue(o.yearDefaultValue);
p=true
}if(p){this.saveState()
}if(o&&o.parameters.disabled){this.processSsoDisable()
}Cog.addListener2("elements.stateProvider","stateChanged",Cog.ghostTextHelper.removeGreyStyleFromLabels)
}},processSsoDisable:function(){this.$scope.addClass("retrieved");
this.$scope.find("select").attr("tabindex","-1");
this.$scope.find("select option:not(:selected)").attr("disabled",true);
this.$scope.find("button").attr("tabindex","-1");
this.$scope.find("button").attr("disabled",true)
}});
b.DateWithCalendar=n
}i.onRegister=function(n){var o=new b.DateWithCalendar(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig});
Cog.addListener2("elements.stateProvider","allElementsUpdated",Cog.ghostTextHelper.removeGreyStyleFromLabels)
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
function c(o){var p=o.find(".select.year select"),n=o.find(".select.month select"),q=o.find(".select.day select");
return{year:{value:p.val(),origin:p.attr("id")},month:{value:n.val(),origin:n.attr("id")},day:{value:q.val(),origin:q.attr("id")}}
}h.getDataAndConfig=function(){var n=g("div.dateWithCalendar");
return b.DateWithCalendar.superclass.getDataAndConfig(n,c)
};
Cog.registerComponent({name:"forms.elements.dateWithCalendar",api:i,sharedApi:h,externalApi:j,requires:[{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.date.dateValidator",apiId:"dateValidator"},"forms.elementsRegistry"],selector:"div.dateWithCalendar"})
}(COGjQuery,document));
(function(g,l){var i={},h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,j={element:null,selectToggle:null},b={DropDown:null};
function f(){var n=Cog.Type.extend(j.element.Element,{view:null,dropDown:null,defaultValue:null,$label:null,$helpLabel:null,$matchingDescContainer:null,matchingDescData:null,initialize:function(){n.superclass.initialize.call(this);
this.$matchingDescContainer=this.$scope.find(".dropdown-matching-description");
this.matchingDescData=this.$matchingDescContainer.data("matchingDescription");
this.initializeDropDown();
this.view=this.viewFactory.createBuilder(this.$scope).initializedOnRender(false).notifyOnRender(false).build();
if(!this.view.hasTarget()){this.view=null
}this.initializeValidateNow(this.validate)
},initializeDropDown:function(){var o,p;
this.dropDown=this.fields.findAndCreate("select",this.$scope);
if(this.dropDown){o=this.$scope.find(".select");
p=o.data()||{};
this.dropDown.on("focusout change",g.proxy(this.onFocusOut,this));
if(this.matchingDescData&&this.matchingDescData.length>0){this.dropDown.on("change keydown keyup",g.proxy(this.showMatchingDesc,this))
}this.defaultValue=p.defaultValue;
this.$label=o.find("label");
this.$helpLabel=this.$scope.find(".label-help-container label");
this.dropDown.nameChangedHandler(this.onDropdownNameChanged,this);
this.dropDown.removeAutocomplete()
}},selectDefault:function(){this.selectItem(this.dropDown.getValue())
},showMatchingDesc:function(){var p=this.dropDown.getValue(),o=this.$matchingDescContainer;
o.hide();
g(this.matchingDescData).each(function(q){if(p===this.value&&this.description){o.html(this.description);
o.show()
}})
},onFocusOut:function(){if(this.$scope.find(".driver-add").length){window.setTimeout(function(){if(this.$scope.find(".driver-add:visible").length){this.validate()
}}.bind(this),200)
}else{Cog.ghostTextHelper.removeGreyStyleFromLabels();
this.validate()
}},setOptions:function(q,o){var p=this.dropDown.getElement();
q=q||[];
if(o===true){q.unshift({text:"",value:""})
}p.empty();
p.append(this.buildOptions(q))
},updateOptions:function(p){var o=this.dropDown.getElement();
o.find("option").each(function(r,s){var q=false;
_.each(p,function(t){if(t.text==g(s).text()&&t.value==g(s).attr("value")){q=true
}});
if(!q){g(s).remove()
}});
_.each(p,function(r){var q=false;
o.find("option").each(function(s,t){if(r.text==g(t).text()&&r.value==g(t).attr("value")){q=true
}});
if(!q){o.append(g("<option />",{text:r.text,value:r.value}))
}})
},restoreState:function(){n.superclass.restoreState.call(this);
if(this.defaultValue){this.dropDown.setValue(this.defaultValue)
}},buildOptions:function(r){var o=[],q,p;
for(p=0;
p<r.length;
p++){q=r[p];
o.push(g("<option />",{text:q.text,value:q.value}))
}return o
},onDropdownNameChanged:function(){var o=this.dropDown.getName();
this.dropDown.attribute("id",o);
this.$label.attr("for",o);
this.$helpLabel.attr("for",o)
},processState:function(o){if(o&&this.dropDown){this.processItems(o);
this.selectItem(o.selected);
this.updateUserDataFlag(o.selected!==undefined&&!o.isDefaultValue)
}},processItems:function(o){if(this.view!=null){this.view.render(o)
}},selectItem:function(q){var r,p,s,o=g(this.dropDown.$element[0].options[0]).text();
this.dropDown.setValue(q);
this.showMatchingDesc.call(this);
r=this.dropDown.getElement().find("option[value='"+q+"']");
if(!r.first().text()&&o){p=o
}else{p=r.first().text()||""
}s=j.selectToggle.getUpdatedLabelText(this.$scope.find(".select"),p);
this.$label.html(s);
Cog.ghostTextHelper.removeGreyStyleFromLabels()
},optionsSorter:function(p,o){return(p.text<=o.text)?-1:1
}});
b.DropDown=n
}i.onRegister=function(n){var o=new b.DropDown(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
function c(n){var o=n.find("select");
return{dropdown:{value:o.val(),origin:o.attr("id")}}
}h.getDataAndConfig=function(){var n=g("div.dropdownFormElement");
return b.DropDown.superclass.getDataAndConfig(n,c)
};
Cog.registerComponent({name:"forms.elements.dropDown",api:i,externalApi:j,sharedApi:h,requires:[{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.selectToggle",apiId:"selectToggle"},"forms.elementsRegistry"],selector:"div.dropdownFormElement"})
}(COGjQuery,document));
(function(g,l){var i={},h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,j={element:null,selectToggle:null},b={DropDown:null};
function f(){var n=Cog.Type.extend(j.element.Element,{selectedClass:"selected",view:null,defaultValue:null,$helpLabel:null,$matchingDescContainer:null,matchingDescData:null,dropdownAsButtons:null,initialize:function(){n.superclass.initialize.call(this);
this.$matchingDescContainer=this.$scope.find(".dropdown-matching-description");
this.matchingDescData=this.$matchingDescContainer.data("matchingDescription");
this.$helpLabel=this.$scope.find(".label-help-container label");
this.initializeDropDown();
this.view=this.viewFactory.createBuilder(this.$scope).initializedOnRender(false).notifyOnRender(false).build();
if(!this.view.hasTarget()){this.view=null
}this.initializeValidateNow(this.validate)
},initializeDropDown:function(){this.dropdownAsButtons=this.fields.findAndCreate(".dropdown-container",this.$scope);
var o,p;
if(this.dropdownAsButtons){this.$scope.on("click",".dropdown-selection-option",g.proxy(this.onInputChange,this));
this.dropdownAsButtons.nameChangedHandler(this.onDropdownNameChanged,this);
o=this.$scope.find(".select");
p=o.data()||{};
this.defaultValue=p.defaultValue;
this.$matchingDescContainer=this.$scope.find(".dropdown-matching-description");
this.matchingDescData=this.$matchingDescContainer.data("matchingDescription")
}},onInputChange:function(p){var o=this.dropdownAsButtons.getSelectionValue(p.currentTarget);
this.selectItem(o);
this.showMatchingDesc();
this.validate()
},canShowMatchingDesc:function(){return this.matchingDescData&&this.matchingDescData.length>0
},showMatchingDesc:function(){if(!this.canShowMatchingDesc()){return
}var p=this.dropdownAsButtons.getValue(),o=this.$matchingDescContainer;
o.hide();
g(this.matchingDescData).each(function(q){if(p===this.value&&this.description){o.html(this.description);
o.show()
}})
},restoreState:function(){n.superclass.restoreState.call(this);
if(this.defaultValue){this.selectItem(this.defaultValue)
}},processState:function(o){if(o&&this.dropdownAsButtons){this.processItems(o);
this.toggleLastFieldTracking(false);
this.selectItem(o.selected);
this.toggleLastFieldTracking(true);
this.updateUserDataFlag(o.selected!==undefined&&!o.isDefaultValue)
}},processItems:function(o){if(this.view!=null){this.view.render(o)
}},toggleLastFieldTracking:function(o){Cog.fireEvent("analytics.lastFieldInteracted","setLastFieldTracking",{lastFieldTracking:o})
},selectItem:function(o){if(o!==undefined){if(this.dropdownAsButtons.hasSelectedValue(o)){this.dropdownAsButtons.usselectValue()
}else{this.dropdownAsButtons.setValue(o)
}}},onDropdownNameChanged:function(){var o=this.dropdownAsButtons.getName();
this.dropdownAsButtons.attribute("id",o);
this.$helpLabel.attr("for",o)
},optionsSorter:function(p,o){return(p.text<=o.text)?-1:1
}});
b.DropDown=n
}i.onRegister=function(n){var o=new b.DropDown(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
function c(n){var o=n.find("input");
return{dropdown:{value:o.val(),origin:o.attr("id")}}
}h.getDataAndConfig=function(){var n=g("div.dropdownFormElementAsButtons");
return b.DropDown.superclass.getDataAndConfig(n,c)
};
Cog.registerComponent({name:"forms.elements.dropdownFormElementAsButtons",api:i,externalApi:j,sharedApi:h,requires:[{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.selectToggle",apiId:"selectToggle"},"forms.elementsRegistry"],selector:"div.dropdownFormElementAsButtons"})
}(COGjQuery,document));
(function(g,j){var h={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},mileageCalculator:{name:"mileageCalculator",events:{setDropDownValue:"setDropDownValue",open:"open",close:"close"}}},d={moduleName:"dropDownExtended",events:{emitOptions:"emitOptions",open:"open",close:"close"}},m={openLink:".calculate-mileage-expand",closeLink:".calculate-mileage-collapse"},l=false,i={element:null},b={DropDown:null};
function f(){var n=Cog.Type.extend(i.element.Element,{view:null,dropDown:null,defaultValue:null,$label:null,$helpLabel:null,state:null,initialize:function(){n.superclass.initialize.call(this);
this.initializeDropDown();
this.view=this.viewFactory.createBuilder(this.$scope).initializedOnRender(false).notifyOnRender(false).build();
if(!this.view.hasTarget()){this.view=null
}this.findDomElements();
this.bindUI();
this.getDropDownOptions();
this.initializeValidateNow(this.validate)
},initializeDropDown:function(){var o,p;
this.dropDown=this.fields.findAndCreate("select",this.$scope);
if(this.dropDown){o=this.$scope.find(".select");
p=o.data()||{};
this.dropDown.on("focusout change",g.proxy(this.validate,this));
this.defaultValue=p.defaultValue;
this.$label=o.find("label");
this.$helpLabel=this.$scope.find(".label-help-container label");
this.dropDown.nameChangedHandler(this.onDropdownNameChanged,this)
}},setOptions:function(q,o){var p=this.dropDown.getElement();
q=q||[];
if(o===true){q.unshift({text:"",value:""})
}p.empty();
p.append(this.buildOptions(q))
},restoreState:function(){n.superclass.restoreState.call(this);
if(this.defaultValue){this.dropDown.setValue(this.defaultValue)
}},buildOptions:function(r){var o=[],q,p;
for(p=0;
p<r.length;
p++){q=r[p];
o.push(g("<option />",{text:q.text,value:q.value}))
}return o
},getDropDownOptions:function(){var p=this.dropDown.getElement(),o=[];
p.find("option").each(function(){if(g(this).val()){o.push(g(this).val())
}});
Cog.fireEvent(d.moduleName,d.events.emitOptions,{$scope:this.$scope,options:o})
},onDropdownNameChanged:function(){var o=this.dropDown.getName();
this.dropDown.attribute("id",o);
this.$label.attr("for",o);
this.$helpLabel.attr("for",o)
},processState:function(o){if(o&&this.dropDown){this.processItems(o);
this.selectItem(o.selected);
this.updateUserDataFlag(o.selected!==undefined&&!o.isDefaultValue)
}},processItems:function(o){if(this.view!=null){o.items.sort(this.optionsSorter);
this.view.render(o)
}},selectItem:function(o){var p;
this.dropDown.setValue(o);
p=this.dropDown.getElement().find('option[value="'+o+'"]');
this.$label.html(p.text()||"")
},setDropDownValue:function(o){if(o.eventData.$scope.is(this.$scope)){this.selectItem(o.eventData.value);
this.validate()
}},findDomElements:function(){this.$openLink=this.$scope.find(m.openLink);
this.$closeLink=this.$scope.find(m.closeLink)
},bindUI:function(){this.$openLink.on("click",this.onOpenLinkClicked.bind(this));
this.$closeLink.on("click",this.onCloseLinkClicked.bind(this));
this.$closeLink.hide();
Cog.addListener2(c.mileageCalculator.name,c.mileageCalculator.events.setDropDownValue,this.setDropDownValue.bind(this));
Cog.addListener2(c.mileageCalculator.name,c.mileageCalculator.events.close,this.onCloseLinkClicked.bind(this))
},onOpenLinkClicked:function(o){o.preventDefault();
this.$openLink.hide();
this.$closeLink.show();
Cog.fireEvent(d.moduleName,d.events.open,{$scope:this.$scope})
},onCloseLinkClicked:function(o){if(o.preventDefault){o.preventDefault()
}if(o.eventData&&!this.$scope.is(o.eventData.$scope)){return false
}this.$openLink.show();
this.$closeLink.hide();
Cog.fireEvent(d.moduleName,d.events.close,{$scope:this.$scope})
},optionsSorter:function(p,o){return(p.text<=o.text)?-1:1
}});
b.DropDown=n
}h.onRegister=function(n){var o=new b.DropDown(n.$scope);
n.formElement=o
};
h.onUnregister=function(n){n.formElement.unregister()
};
h.init=function(n){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!l){l=true;
f()
}};
Cog.registerComponent({name:"forms.elements.dropDownExtended",api:h,externalApi:i,requires:[{name:"forms.elements.element",apiId:"element"},"forms.elementsRegistry"],selector:"div.dropdownFormElementExtended"})
}(COGjQuery,document));
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},i={formElement:null},f={DynamicRichText:null},d=false;
function j(){var l=Cog.Type.extend(i.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
f.DynamicRichText=l
}g.onRegister=function(l){l.element=new f.DynamicRichText(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
j()
}};
Cog.registerComponent({name:"forms.elements.dynamicRichText",api:g,externalApi:i,selector:"div.dynamicRichText, div.dynamicHtmlComponent",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(g,l){var i={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},sessionTimeoutAlert:{name:"sessionTimeoutAlert",events:{lookup:"lookup"}}},m=false,j={element:null,autocompleterManager:null,keyExecutor:null,predictiveLookupValidator:null,keyCodes:null,analytics:null,handlerHelper:null,responseHandlersFactory:null,responseProcessor:null,journeyContext:null},h={},b={PredictiveLookup:null};
function f(){var n=Cog.Type.extend(j.element.Element,{input:null,hidden:null,unknownValueMsg:"Unknown value",connectionErrorMessage:"Connection problems",responseProcessor:null,searchCompletionSuccessHandler:null,searchCompletionErrorHandler:null,isWaitingForResponse:false,isKeyDown:false,fireTextChanged:function(o){Cog.fireEvent("forms.elements.predictiveLookup","textChanged",{$scope:this.$scope,fieldName:o.attr("data-field-name"),value:o.val()})
},onInputChange:function(o){var p=g(o.target);
this.fireTextChanged(p)
},initialize:function(){n.superclass.initialize.call(this);
this.input=this.fields.findAndCreate("input.predictiveText",this.$scope);
this.hidden=this.fields.findAndCreate("input.predictiveHidden",this.$scope);
this.errorPresenter.$scope=this.errorPresenter.$errorClassContainer=this.$scope;
var x=this.$scope,w=this,u={$predictiveLookup:x,$predictiveWrapper:x.find(".predictiveLookupWrapper"),$predictiveInput:x.find("input.predictiveText"),$predictiveHidden:x.find("input.predictiveHidden")},t=j.autocompleterManager(x.find(".autocompleter-wrapper"),u.$predictiveInput),p=u.$predictiveWrapper.data("address"),q=u.$predictiveWrapper.data("ref"),v=j.keyCodes,s=u.$predictiveWrapper.data()||{},o={domElements:u,ajaxAddresses:p,reference:q,autocompleter:t},r=function(){if(this.$scope.hasClass("error")){w.checkCompletion(o)
}};
if(s.unknownValueMessage){this.unknownValueMsg=s.unknownValueMessage
}if(s.connectionErrorMessage){this.connectionErrorMessage=s.connectionErrorMessage
}u.$predictiveInput.attr("autocomplete","off");
u.$predictiveInput.keydown(j.keyExecutor.onAllKeysExcept(function(){w.isKeyDown=true
},[v.enter,v.keyUp,v.keyDown,v.escape]));
u.$predictiveInput.keyup(j.keyExecutor.onAllKeysExcept(function(){w.checkCompletion(o);
w.isKeyDown=false
},[v.enter,v.keyUp,v.keyDown,v.escape]));
u.$predictiveInput.parent().focusout(function(){w.handleFocusOut(w.$scope,u.$predictiveInput,t)
});
u.$predictiveInput.keydown(g.proxy(function(y){if(y.which===13){this.onInputChange(y)
}},this));
u.$predictiveInput.parent().focusin(function(){w.handleFocusIn(w.$scope)
});
t.onItemSelected(function(y){w.onAutocomplete(u,t,y)
});
u.$predictiveInput.keyup(j.keyExecutor.onKey(function(){t.hide()
},[v.enter,v.escape]));
if(this.input){this.input.nameChangedHandler(g.proxy(this.onFieldNameChanged,this,this.input),this);
this.input.on({"autocompleter-focusout":this.checkValidation.bind(this,o),focus:r.bind(this)})
}if(this.hidden){this.hidden.nameChangedHandler(g.proxy(this.onFieldNameChanged,this,this.hidden),this);
this.hidden.on("autocompleter-focusout",this.checkValidation.bind(this,o))
}this.addValidator(new j.predictiveLookupValidator.PredictiveLookupValidator(this,this.unknownValueMsg));
this.responseProcessor=this.initializeResponseProcessor();
this.initializeValidateNow(this.validate)
},onFieldNameChanged:function(p){var o=p.getName();
p.attribute("id",o)
},initializeResponseProcessor:function(){var q=j.responseHandlersFactory.ResponseHandlersFactory.instance(),p=q.journeyAndClearTrackingCookieRedirect(),o=j.handlerHelper.HandlerHelper.instance();
this.searchCompletionSuccessHandler=o.asHandler(this.onSearchCompletionSuccess,this);
this.searchCompletionErrorHandler=o.asHandler(this.onSearchCompletionError,this);
p.addSuccessHandler(this.searchCompletionSuccessHandler);
p.addErrorHandler(this.searchCompletionErrorHandler);
return new j.responseProcessor.ResponseProcessor(p)
},checkValidation:function(o){if(this.isKeyDown){this.isKeyDown=false;
this.checkCompletion(o)
}else{if(!this.isWaitingForResponse){this.validate()
}}},displayError:function(o){this.errorPresenter.clear();
this.errorPresenter.add(o);
this.errorPresenter.refresh()
},hideError:function(o){o.removeClass("error");
o.find("div.error-message").hide()
},hiddenSetValue:function(o,p){o.val(p)
},onAutocomplete:function(p,o,q){p.$predictiveInput.val(q.text).triggerHandler("input");
o.hide();
this.hiddenSetValue(p.$predictiveHidden,q.value);
this.fireTextChanged(p.$predictiveInput)
},setHiddenValue:function(o,q,p){var r="";
g.each(q,function(s,t){if(t.text.toLowerCase()===o.toLowerCase()){r=t.value
}});
this.hiddenSetValue(p,r)
},predictiveLookupDone:function(q,p,o){if(q.length>0&&(this.$scope.hasClass("has-focus")||(!this.$scope.hasClass("has-focus")&&this.isWaitingForResponse))){o.show(q);
this.setHiddenValue(p.$predictiveInput.val(),q,p.$predictiveHidden)
}else{o.hide();
p.$predictiveHidden.val("")
}},searchCompletion:function(p){var q,o={autocompleter:p.autocompleter,domElements:p.domElements};
this.isWaitingForResponse=true;
q=g.getJSON(p.ajaxAddresses,{value:p.domElements.$predictiveInput.val(),path:p.reference,jcid:j.journeyContext.current()});
this.searchCompletionSuccessHandler.setContext(o);
this.searchCompletionErrorHandler.setContext(o);
this.responseProcessor.process(q)
},onSearchCompletionSuccess:function(o,p){if(p.content.length){Cog.fireEvent(d.sessionTimeoutAlert.name,d.sessionTimeoutAlert.events.lookup);
this.predictiveLookupDone(p.content,o.domElements,o.autocompleter);
this.ajaxCallCompleted(o.autocompleter);
this.hideError(this.$scope)
}else{this.onSearchCompletionError(o)
}},onSearchCompletionError:function(o){Cog.fireEvent(d.sessionTimeoutAlert.name,d.sessionTimeoutAlert.events.lookup);
o.autocompleter.hide();
this.displayError(this.unknownValueMsg);
this.ajaxCallCompleted(o.autocompleter)
},ajaxCallCompleted:function(o){this.isWaitingForResponse=false;
if(!this.isAutocompleterFocused(o)){this.validate()
}},isAutocompleterFocused:function(p){var o=false;
if(this.input.$element.is(":focus")||p.isFocused()||this.hidden.$element.is(":focus")){o=true
}return o
},checkCompletion:function(o){if(o.domElements.$predictiveInput.val().length>=3){this.searchCompletion(o)
}else{o.autocompleter.hide();
o.domElements.$predictiveHidden.val("");
this.isWaitingForResponse=false
}},handleFocusOut:function(o,q,p){o.removeClass("has-focus");
setTimeout(function(){if(!o.hasClass("has-focus")){p.hide()
}},100);
this.validate();
this.fireTextChanged(q)
},handleFocusIn:function(o){o.addClass("has-focus")
}});
b.PredictiveLookup=n
}function c(n){var o=n.find("input.predictiveText");
return{text:{value:o.val(),origin:o.attr("id")}}
}h.getDataAndConfig=function(){var n=g("div.input-text-row.predictiveLookupWrapper");
return b.PredictiveLookup.superclass.getDataAndConfig(n,c)
};
i.onRegister=function(n){var o=new b.PredictiveLookup(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
Cog.registerComponent({name:"forms.elements.predictiveLookup",api:i,externalApi:j,sharedApi:h,requires:[{name:"events.keyCodes",apiId:"keyCodes"},{name:"events.keyExecutor",apiId:"keyExecutor"},{name:"autocompleterManager",apiId:"autocompleterManager"},{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.predictiveLookup.predictiveLookupValidator",apiId:"predictiveLookupValidator"},{name:"forms.action.button.analytics",apiId:"analytics"},"forms.elementsRegistry",{name:"forms.form.response.handlerHelper",apiId:"handlerHelper"},{name:"forms.response.responseHandlersFactory",apiId:"responseHandlersFactory"},{name:"forms.form.response.responseProcessor",apiId:"responseProcessor"},{name:"elements.journeyContext",apiId:"journeyContext"}],selector:"div.textWithPredictiveLookup"})
}(COGjQuery,document));
(function(h,m){var j={},i={},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{submit:"submit"}}},n=false,l={element:null},b={PreferredDate:null},d=[];
function g(){var o=Cog.Type.extend(l.element.Element,{day:null,initialize:function(){o.superclass.initialize.call(this);
this.day=this.fields.findAndCreate(".day select",this.$scope);
this.day.on("change",h.proxy(this.onDayChanged,this))
},reloadPage:function(){Cog.fireEvent(f.form.name,f.form.events.submit,{$scope:this.$scope,addHiddenHandler:true,isValidationEnabled:false})
},onDayChanged:function(){this.reloadPage();
this.validate()
}});
b.PreferredDate=o
}j.onRegister=function(o){var p=new b.PreferredDate(o.$scope);
o.formElement=p
};
j.onUnregister=function(o){o.formElement.unregister()
};
j.init=function(o){d=h(h.merge(d,o));
Cog.fireEvent(f.registry.name,f.registry.events.initialized,{analytics:i.getDataAndConfig})
};
j.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
if(!n){n=true;
g()
}};
function c(o){var p=o.find("select");
return{value:p.val(),origin:p.attr("id")}
}i.getDataAndConfig=function(){return b.PreferredDate.superclass.getDataAndConfig(d,c)
};
Cog.registerComponent({name:"forms.elements.preferredDate",api:j,externalApi:l,sharedApi:i,requires:[{name:"forms.elements.element",apiId:"element"},"forms.elementsRegistry"],selector:"div.preferredDate"})
}(COGjQuery,document));
(function(g,m){var j={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},n=false,l={element:null,radioGroupValidator:null},h={},b={RadioGroup:null},i=[];
function c(p){var o=p.find("input:checked");
return{radio:{value:o.val(),origin:o.attr("name")}}
}h.getDataAndConfig=function(){return b.RadioGroup.superclass.getDataAndConfig(i,c)
};
function f(){var o=Cog.Type.extend(l.element.Element,{input:null,disallowedMessage:null,disallowedErrorValidationMessage:"This option is disallowed",selectedValue:null,disallowedValues:null,doValidation:true,initialize:function(){o.superclass.initialize.call(this);
this.input=this.fields.findAndCreate("input",this.$scope);
this.disallowedMessage=this.$scope.find(".disallowed-message");
this.disallowedErrorValidationMessage=this.configuration.get().disallowedErrorMessage;
if(this.input){var p=this.input.$element.siblings("label");
p.on("click",function(){});
p.on("mousedown touchstart",g.proxy(this.mousedownHandle,this));
this.input.on("focusout",g.proxy(this.validateRadio,this));
this.input.on("change",g.proxy(this.optionChange,this));
this.input.on("click",g.proxy(this.focusRadio,this));
this.input.on("mousedown touchstart",g.proxy(this.mousedownHandle,this));
this.input.nameChangedHandler(this.onRadioGroupNameChanged,this);
this.input.$radioInputs=this.$scope.find('input[type="radio"]');
this.addValidator(new l.radioGroupValidator.RadioGroupValidator(this,this.disallowedErrorValidationMessage));
this.initializeValidateNow(this.validateRadio)
}},processState:function(p){this.setSelectionDisallowed()
},validateRadio:function(p){if(this.doValidation){this.validate()
}},mousedownHandle:function(p){this.doValidation=false
},setSelectionDisallowed:function(){this.disallowedValues=this.disallowedMessage.data("disallowed-values");
this.selectedValue=this.getCheckedRadio().val()
},isSelectionDisallowed:function(){this.setSelectionDisallowed();
return g.inArray(this.selectedValue,this.disallowedValues)!==-1
},optionChange:function(){if(this.isSelectionDisallowed()){this.disallowedMessage.removeClass("hidden");
this.doValidation=true
}else{this.disallowedMessage.addClass("hidden");
this.validate()
}},getCheckedRadio:function(){return this.input.$element.filter(":checked")
},focusRadio:function(){var p=this.input.$element.filter(":checked");
if(p){p.focus()
}},onRadioGroupNameChanged:function(){var p=this.input.getName(),q=this.input.$radioInputs,r;
q.each(function(s){r=s+1;
g(this).attr("name",p);
g(this).attr("id",p+"-"+r);
g(this).next(".field-label").attr("for",p+"-"+r)
})
}});
b.RadioGroup=o
}j.onRegister=function(o){var p=new b.RadioGroup(o.$scope);
o.formElement=p
};
j.onUnregister=function(o){o.formElement.unregister()
};
j.init=function(o){i=g(g.merge(i,o));
Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig})
};
j.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!n){n=true;
f()
}};
Cog.registerComponent({name:"forms.elements.radioGroup",api:j,externalApi:l,sharedApi:h,requires:[{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.radioGroup.radioGroupValidator",apiId:"radioGroupValidator"},"forms.elementsRegistry"],selector:"div.radioGroup"})
}(COGjQuery,document));
(function(h){var j={},i={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,l={element:null,compositeDropDownValidator:null},b={CompositeDropdown:null},f={className:".compositeDropdown",configuration:".componentConfiguration",otherOption:{text:"Other",value:"other"}};
function g(){var n=Cog.Type.extend(l.element.Element,{view:null,dropDown:null,$predictiveInput:null,list:null,defaultValue:null,$label:null,$helpLabel:null,$hiddenInput:null,hiddenInput:null,$matchingDescContainer:null,$predictiveSearchRow:null,matchingDescData:null,config:null,doValidation:true,initialize:function(){n.superclass.initialize.call(this);
this.config=this.$scope.find(f.configuration).data();
this.$hiddenInput=this.$scope.find('input[type="hidden"]');
this.$matchingDescContainer=this.$scope.find(".dropdown-matching-description");
this.$predictiveSearchRow=this.$scope.find(".predictive-search-row ");
this.$predictiveInput=this.$predictiveSearchRow.find(".typeahead");
this.matchingDescData=this.$matchingDescContainer.data("matchingDescription");
this.initializeDropDown();
this.view=this.viewFactory.createBuilder(this.$scope).initializedOnRender(false).notifyOnRender(false).build();
if(!this.view.hasTarget()){this.view=null
}this.addPredictiveRequiredValidator()
},initializeDropDown:function(){var o,p;
this.dropDown=this.fields.findAndCreate("select",this.$scope);
this.hiddenInput=this.fields.findAndCreate('input[type="hidden"]',this.$scope);
if(this.dropDown){o=this.$scope.find(".select");
p=o.data()||{};
this.dropDown.on("focusout change",h.proxy(this.onDropDownFocusOut,this));
if(this.matchingDescData&&this.matchingDescData.length>0){this.dropDown.on("change keydown keyup",h.proxy(this.showMatchingDesc,this))
}this.defaultValue=p.defaultValue;
this.$label=o.find("label");
this.$helpLabel=this.$scope.find(".label-help-container label");
this.dropDown.nameChangedHandler(this.onDropdownNameChanged,this);
this.dropDown.removeAutocomplete()
}},addPredictiveRequiredValidator:function(){if(this.config.requiredMessage){this.addValidator(new l.compositeDropDownValidator.CompositeDropDownValidator(this,this.config.requiredMessage))
}},selectDefault:function(){this.selectItem(this.dropDown.getValue())
},showMatchingDesc:function(){var p=this.dropDown.getValue(),o=this.$matchingDescContainer;
o.hide();
h(this.matchingDescData).each(function(){if(p===this.value&&this.description){o.html(this.description);
o.show()
}})
},onDropDownFocusOut:function(){this.updatePredictiveVisibility();
var o=this.dropDown.getValue();
if(o===f.otherOption.value){if(!this.$predictiveInput.val()){this.$hiddenInput.val("")
}}else{this.$hiddenInput.val(o);
this.$predictiveInput.val("");
this.validate()
}Cog.ghostTextHelper.removeGreyStyleFromLabels()
},destroyPredictiveSearchInstance:function(){this.$predictiveInput.typeahead("destroy");
this.$predictiveInput.removeClass("initialized")
},updatePredictiveVisibility:function(){if(this.dropDown.getValue()===f.otherOption.value){this.initializePredictiveSearch();
this.$predictiveSearchRow.removeClass("hidden")
}else{this.destroyPredictiveSearchInstance();
this.$predictiveSearchRow.addClass("hidden")
}},predictiveSearchMatcher:function(p){return function o(u,r){var s,v,t=[];
v=u.replace(/\s+/g,".*");
s=new RegExp(v,"i");
_.each(p.list,function(q){if(p.stringMatches(q.text,u)){t.push(q.text)
}},p);
r(t)
}
},stringMatches:function(s,r){var p=s.toLowerCase(),o=r.toLowerCase().split(/\s+/g),q=true;
_.each(o,function(t){if(p.indexOf(t)>-1){p=p.replace(t,"")
}else{q=false;
return
}});
return q
},initializePredictiveSearch:function(){if(!this.$predictiveInput.hasClass("initialized")){this.$predictiveInput.typeahead({hint:true,highlight:true,minLength:0},{limit:10000,name:"items",source:this.predictiveSearchMatcher(this)}).addClass("initialized");
this.$predictiveSearchRow.find(".tt-menu").css({"max-height":this.config.lookupAreaHeight});
this.bindPredictiveSearchChange()
}},bindPredictiveSearchChange:function(){h(this.$predictiveInput).on("focusout",this.onPredictiveFocusOut.bind(this));
h(this.$predictiveInput).on("focus",this.onPredictiveFocusIn.bind(this));
h(this.$predictiveInput).on("click",this.onPredictiveLookupClick.bind(this));
h(this.$predictiveInput).on("typeahead:select",function(){this.$predictiveInput.blur().trigger("focusout")
}.bind(this))
},onPredictiveFocusIn:function(o){o.preventDefault();
this.$predictiveInput.typeahead("close")
},onPredictiveFocusOut:function(){var o=this.findItemByText(this.list,this.$predictiveInput.val());
this.$hiddenInput.val(o?o.value:"");
this.validate()
},onPredictiveLookupClick:function(){this.$predictiveInput.typeahead("open")
},findItemByValue:function(p,q){var o=false;
_.each(p,function(r){if(r.value==q){o=r;
return
}});
return o
},findItemByText:function(p,q){var o=false;
_.each(p,function(r){if(r.text==q){o=r;
return
}});
return o
},setOptions:function(q,o){var p=this.dropDown.getElement();
q=q||[];
if(o===true){q.unshift({text:"",value:""})
}p.empty();
p.append(this.buildOptions(q))
},updateOptions:function(p){var o=this.dropDown.getElement();
o.find("option").each(function(r,s){var q=false;
_.each(p,function(t){if(t.text==h(s).text()&&t.value==h(s).attr("value")){q=true
}});
if(!q){h(s).remove()
}});
_.each(p,function(r){var q=false;
o.find("option").each(function(s,t){if(r.text==h(t).text()&&r.value==h(t).attr("value")){q=true
}});
if(!q){o.append(h("<option />",{text:r.text,value:r.value}))
}})
},restoreState:function(){n.superclass.restoreState.call(this);
if(this.defaultValue){this.dropDown.setValue(this.defaultValue)
}this.destroyPredictiveSearchInstance();
this.$predictiveInput.val("");
this.$predictiveSearchRow.addClass("hidden")
},buildOptions:function(r){var o=[],q,p;
for(p=0;
p<r.length;
p++){q=r[p];
o.push(h("<option />",{text:q.text,value:q.value}))
}return o
},onDropdownNameChanged:function(){var o=this.dropDown.getName(),p=this.hiddenInput.getName();
this.dropDown.attribute("id",o);
this.$label.attr("for",o);
this.$helpLabel.attr("for",o);
this.hiddenInput.attribute("id",p)
},prepareTopCommonList:function(s){var o=s.items,r=this.dropDown.$element.parents(f.className).find(f.configuration).data(),q=r.topItems.split(","),p={items:[]};
_.each(q,function(t){_.each(o,function(u){if(t==u.value){p.items.push({text:u.text,value:t})
}})
});
p.items.push({text:f.otherOption.text,value:f.otherOption.value});
return p
},processState:function(p){if(p&&this.dropDown){var o=this.prepareTopCommonList(p);
this.list=p.items;
this.processItems(o);
this.processSelectedItem(p.selected,o);
this.updateUserDataFlag(p.selected!==undefined&&!p.isDefaultValue)
}},processItems:function(o){if(this.view!=null){this.view.render(o)
}},processSelectedItem:function(q,o){var s,p,r;
this.showMatchingDesc.call(this);
if(q){s=this.findItemByValue(o.items,q);
if(!s){p=this.findItemByValue(this.list,q);
this.$predictiveInput.val(p.text);
s=f.otherOption
}r=l.selectToggle.getUpdatedLabelText(this.$scope.find(".select"),s.text);
this.dropDown.setValue(s.value);
this.$hiddenInput.val(q);
this.$label.html(r);
this.updatePredictiveVisibility()
}},optionsSorter:function(p,o){return(p.text<=o.text)?-1:1
}});
b.CompositeDropdown=n
}j.onRegister=function(n){var o=new b.CompositeDropdown(n.$scope);
n.formElement=o
};
j.onUnregister=function(n){n.formElement.unregister()
};
j.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:i.getDataAndConfig})
};
j.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
g()
}};
function c(n){var o=n.find("select");
return{dropdown:{value:o.val(),origin:o.attr("id")}}
}i.getDataAndConfig=function(){var n=h("div.compositeDropdown");
return b.CompositeDropdown.superclass.getDataAndConfig(n,c)
};
Cog.registerComponent({name:"forms.elements.compositeDropdown",api:j,externalApi:l,sharedApi:i,requires:[{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.dropDown.compositeDropDownValidator",apiId:"compositeDropDownValidator"},{name:"forms.elements.selectToggle",apiId:"selectToggle"},"forms.elementsRegistry"],selector:".compositeDropdown"})
}(COGjQuery));
(function(g,c){var f={},h={moduleName:"forms.elements.dropDown.compositeDropDownValidator"},i={validator:null},b={CompositeDropDownValidator:null};
function d(){var j=Cog.Type.extend(i.validator.Validator,{isValid:function(){var m=this.element.dropDown.getValue(),l=this.element.$predictiveInput.val();
return m!=="other"||l!==""
}});
b.CompositeDropDownValidator=j
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,l){var i={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{restoreElementsState:"restoreElementsState",enableValidation:"enableValidation",disableValidation:"disableValidation"}}},m=false,j={element:null,radioWithContainersValidator:null,radioBlur:null},b={RadioWithContainers:null},h={},n=[];
function f(){var o=Cog.Type.extend(j.element.Element,{currentKey:null,defaults:{hiddenClass:"hidden"},radio:null,containers:null,$labels:null,disallowedMessage:null,disallowedValue:null,bottomBorderStyle:null,bottomBorderStyleOnlyFor:null,doValidation:true,noFrontendValidation:false,$rowContainer:null,forceUpdate:true,initialize:function(){o.superclass.initialize.call(this);
this.radio=this.fields.findAndCreate(".radio-row-options:first input",this.$scope);
if(this.radio){this.setDefaultSelection();
this.noFrontendValidation=this.configuration.get().noFrontendValidation;
this.radio.on("focusout",g.proxy(this.validateRadio,this));
this.radio.on("change",g.proxy(this.selectContainer,this));
this.radio.on("click",g.proxy(this.focusCheckbox,this));
this.radio.on("mousedown",g.proxy(this.labelMousedown,this));
this.radio.nameChangedHandler(this.onNameChanged,this);
this.radio.$radioInputs=this.$scope.find('input[type="radio"]');
this.$labels=this.radio.getElement().siblings("label");
if(this.$labels.length){this.$labels.on("mousedown",g.proxy(this.labelMousedown,this))
}this.disallowedMessage=this.configuration.get().disallowedErrorMessage;
this.disallowedValue=this.configuration.get().disallowedValue;
this.bottomBorderStyle=this.configuration.get().bottomBorderStyle;
this.bottomBorderStyleOnlyFor=this.configuration.get().bottomBorderStyleOnlyFor;
this.$rowContainer=this.$scope.find("> .row-container");
this.initializeContainers();
this.selectContainer();
if(!this.noFrontendValidation){this.addValidator(new j.radioWithContainersValidator.RadioWithContainersValidator(this,this.disallowedMessage))
}Cog.addListener2("repeatableFormElems","forceUpdate",function(p){if(p.eventData.$scope.has(this.$scope).length){this.forceUpdate=true
}}.bind(this));
this.initializeValidateNow(this.validateRadio)
}},labelMousedown:function(p){this.doValidation=false;
this.focusCheckbox();
j.radioBlur.preventBlur(this.radio.$radioInputs,p)
},validateRadio:function(p){if(this.doValidation){this.validate()
}if(this.noFrontendValidation){this.$scope.parents(".error").removeClass("error")
}},applyBottomBorderStyle:function(){if(!!this.bottomBorderStyleOnlyFor){var r=false,q=this.bottomBorderStyleOnlyFor.trim().split(","),p=this.radio.getValue();
_.each(q,function(s){if(s===p||(s==="EMPTY_VALUE"&&p==null)){r=true
}});
if(r){this.$rowContainer.addClass(this.bottomBorderStyle)
}else{this.$rowContainer.removeClass(this.bottomBorderStyle)
}}},setDefaultSelection:function(){var p=this.$scope.find(".radio-row-options").data("default-selection"),q=g(this.radio.getElement()).eq(p);
if(!this.radio.getValue()&&p!=="none"){if(q){this.radio.setValue(q.val())
}}},initializeContainers:function(){var p=this.radio.getElement(),s=this.$scope.find("> .lookup-form"),t,r,q;
this.containers={};
for(q=0;
q<p.length;
q++){t=s.eq(q);
r=p.eq(q).val();
if(t.length&&r){this.containers[r]=t
}}},restoreState:function(){var p=null;
o.superclass.restoreState.call(this);
_.forOwn(this.containers,function(r,q){if(q){this.disableContainer(q)
}}.bind(this));
this.applyBottomBorderStyle();
this.radio.reset()
},disableContainer:function(p){var q=this.containers[p];
if(q){Cog.fireEvent(d.form.name,d.form.events.restoreElementsState,{$scope:q});
Cog.fireEvent(d.form.name,d.form.events.disableValidation,{$scope:q});
q.addClass(this.defaults.hiddenClass);
q.detach()
}},enableContainer:function(p){var q=this.containers[p];
if(q){Cog.fireEvent("abTesting","domUpdated",{scope:q});
q.appendTo(this.$scope);
q.removeClass(this.defaults.hiddenClass);
Cog.init(q);
Cog.fireEvent(d.form.name,d.form.events.enableValidation,{$scope:q});
this.currentKey=p
}},selectContainer:function(r){var p=this.radio.getValue(),s=this.containers,q;
for(q in s){if(s.hasOwnProperty(q)&&q!==p){this.disableContainer(q)
}}if(p){this.enableContainer(p);
if(p==="Y"&&r&&r.type==="change"){this.containers[p].removeClass("hide-when-filled");
this.$scope.find(".select label").addClass("grey")
}}this.applyBottomBorderStyle();
this.doValidation=true;
this.errorPresenter.clear().refresh()
},focusCheckbox:function(){var p=this.radio.$element.filter(":checked");
p.focus();
p.prop("checked",true)
},processState:function(){if((this.radio&&this.radio.getValue()!=this.currentKey)||this.forceUpdate){this.selectContainer();
this.forceUpdate=false
}},onNameChanged:function(){var p=g.proxy(this.updatedName,this,this.radio.getName());
this.radio.attribute("id",p);
this.$labels.attr("for",p)
},updatedName:function(q,p){return q+"-"+p
}});
b.RadioWithContainers=o
}function c(o){var p=o.find(".radio-row-options:first input:checked");
return{radio:{value:p.val(),origin:p.attr("name")}}
}h.getDataAndConfig=function(){return b.RadioWithContainers.superclass.getDataAndConfig(n,c)
};
i.onRegister=function(o){var p=new b.RadioWithContainers(o.$scope);
o.formElement=p
};
i.onUnregister=function(o){o.formElement.unregister()
};
i.init=function(o){n=g(g.merge(n,o));
Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
Cog.registerComponent({name:"forms.elements.radioWithContainers",api:i,externalApi:j,sharedApi:h,requires:[{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.radioWithContainers.radioWithContainersValidator",apiId:"radioWithContainersValidator"},"forms.elementsRegistry",{name:"forms.elements.radioBlur",apiId:"radioBlur"}],selector:"div.radioWithContainers"})
}(COGjQuery,document));
(function(g,l){var i={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,h={},j={keyCodes:null,keyExecutor:null,element:null,errorLightbox:null},b={TextInput:null};
function c(n){var o=n.find("input");
return{text:{value:o.val(),origin:o.attr("id")}}
}h.getDataAndConfig=function(){var n=g("div.textInput");
return b.TextInput.superclass.getDataAndConfig(n,c)
};
function f(){var n=Cog.Type.extend(j.element.Element,{input:null,disallowed:"",disallowedRegexp:null,lightboxErrorEnabled:null,lightboxLink:null,ValueValidationThreshold:null,$filledInformation:null,initialize:function(){n.superclass.initialize.call(this);
this.initializeTextInput()
},initializeTextInput:function(){var o="";
this.input=this.fields.findAndCreate("input",this.$scope);
this.disallowed=this.input.$element.data().notAllowedChars;
this.disallowedRegexp=(this.disallowed?new RegExp("["+this.disallowed+"]","g"):null);
this.$filledInformation=this.$scope.find(".filled-information");
this.$filledInformation.hide();
this.$scope.find(".filled-information").hide();
if(this.input){o=this.input.$element.attr("val");
this.input.$element.val(o);
this.input.$element.attr("autocomplete","off");
this.input.$label=this.$scope.find(".text-input-label");
this.input.on("focusout",g.proxy(this.removeCharsAndValidate,this));
this.input.nameChangedHandler(this.onTextInputNameChanged,this);
this.input.on("keypress",j.keyExecutor.onKey(this.onItemKeypress,[j.keyCodes.enter]));
this.initializeValidateNow(this.validate)
}},removeCharsAndValidate:function(){this.removeDisallowed();
this.validate();
this.lightboxErrorEnabled=this.configuration.get().lightboxerrorenabled;
var o={$scope:this.$scope,lightboxLink:this.configuration.get().lightboxpath,ValueValidationThreshold:this.configuration.get().valuevalidationthreshold};
if(this.lightboxErrorEnabled){j.errorLightbox.lightboxWithError(o)
}},removeDisallowed:function(){if(this.disallowedRegexp!=null&&this.input.$element.val().match(this.disallowedRegexp)){this.input.$element.val(this.input.$element.val().replace(this.disallowedRegexp,""))
}},onItemKeypress:function(o){o.preventDefault()
},onTextInputNameChanged:function(){var o=this.input.getName();
this.input.attribute("id",o);
this.input.$label.attr("for",o)
},processData:function(t){var u=this.input.$element.hasClass("hiddenValuePreserver"),s=n.superclass.processData.call(this,t),o={},p,r,q=this;
if(u){p=this.input.getName();
r=this.input.$element.data("defaultValue");
o[p]=r;
this.fieldsState.set(o)
}if(s&&s.parameters.disabled){this.processSsoDisable()
}this.processInputDisable(s);
Cog.addListener2("forms.form","resetElements",this.handleResetElements,{data:q});
return s
},handleResetElements:function(p){var o=p&&p.data;
if(o.inScopeOfEvent(p)){o.enableElement()
}},inScopeOfEvent:function(o){return o&&o.eventData&&o.eventData.$scope&&Cog.isInScope(o.eventData.$scope,this.$scope)
},enableElement:function(){var o=this.input.$element;
this.restoreOldTabindex(o);
o.attr("readonly",false);
this.$scope.removeClass("disabled");
this.$filledInformation.hide()
},restoreOldTabindex:function(o){o.attr("tabindex",o.data("oldTabindex")||o.attr("tabindex"))
},processInputDisable:function(o){if(this.shouldDisableInput(o)){this.disableInput();
this.$filledInformation.show()
}else{this.$filledInformation.hide()
}},shouldDisableInput:function(s){var p=this.input.$element.attr("id"),o=g.extend(true,{},s,{parameters:{}}),r=o.parameters[p],q=this.configuration.get().disalloweditingafterwasset;
return r&&q
},processSsoDisable:function(){var o=this.$scope.find(".input-text");
this.$scope.addClass("retrieved");
o.attr("tabindex","-1");
o.attr("readonly",true)
},disableInput:function(){var o=this.input.$element;
this.$scope.addClass("disabled");
this.saveTabindexIfNotSaved(o);
o.attr("tabindex","-1");
o.attr("readonly",true)
},saveTabindexIfNotSaved:function(o){o.data("oldTabindex",o.data("oldTabindex")||o.attr("tabindex"))
}});
b.TextInput=n
}i.onRegister=function(n){var o=new b.TextInput(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
Cog.registerComponent({name:"forms.elements.textInput",api:i,externalApi:j,sharedApi:h,requires:[{name:"events.keyCodes",apiId:"keyCodes"},{name:"events.keyExecutor",apiId:"keyExecutor"},{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.errorLightbox",apiId:"errorLightbox"},"forms.elementsRegistry"],selector:"div.textInput"})
}(COGjQuery,document));
(function(g,l){var i={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,h={},j={element:null},b={Title:null};
function c(n){var t=null,q=null,s=null,o=null,p=n.find("select"),r=null;
t=p.val();
s=p.attr("id");
if(t){if(t===",Dr"){r=n.find('input[type="radio"]:checked');
q=r.val();
o=r.attr("id")
}else{q=_.first(t.split(","));
o=s
}t=_.last(t.split(","))
}else{q=undefined;
t=undefined;
o=s
}return{gender:{value:q,origin:o},title:{value:t,origin:s}}
}h.getDataAndConfig=function(){var n=g("div.title");
return b.Title.superclass.getDataAndConfig(n,c)
};
function f(){var n=Cog.Type.extend(j.element.Element,{view:null,dropDown:null,label:null,helpLabel:null,$genderRadios:null,genderRadioFields:null,dropdownDefaultLabel:null,dropdownDefaultValue:null,$isGenderSelected:null,initialize:function(){n.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},selectsOnly:function(o){return o.$element[0].nodeName==="SELECT"
},initializeTitle:function(){var p=this,q,o;
this.dropdownDefaultValue=this.configuration.get().defaultValue;
this.dropDown=this.fields.findAndCreate("select",this.$scope,true);
this.dropdownDefaultLabel=this.getDefaultLabel(this.dropdownDefaultValue);
this.genderRadioFields=this.fields.findAndCreate("input",this.$scope,true);
this.$isGenderSelected=this.$scope.find(".input-radio.gender").find("input");
if(this.dropDown){this.dropDown.on("focusout change",g.proxy(this.onDropDownChange,this));
this.$genderRadios=this.$scope.find(".radio-row.gender");
this.label=this.$scope.find(".select label");
this.helpLabel=this.$scope.find(".label-help-container label");
this.dropDown.$errorTemplate=this.$scope.find("script.errorsTemplate");
this.dropDown.nameChangedHandler(this.onDropdownNameChanged,this);
if(this.checkDropdown()){this.label.text(this.dropdownDefaultLabel);
this.dropDown.$element.val(this.dropdownDefaultValue)
}this.handleRadiosVisibility()
}if(this.genderRadioFields){o=this.genderRadioFields.$element.siblings("label");
o.on("click",function(){});
this.genderRadioFields.on("focusout change",function(){var r=g.proxy(p.validate,p);
r()
})
}this.initializeValidateNow(this.validate)
},getFields:function(){var o=[];
if(this.dropDown){if(!this.isGenderNeeded(this.dropDown.getValue())){o=n.superclass.getFields.call(this,this.selectsOnly)
}else{o=n.superclass.getFields.call(this)
}}return o
},validate:function(){if(this.isGenderNeeded(this.dropDown.getValue())&&this.genderRadioFields.$element.filter(":checked").length===0){this.errorPresenter.clear();
this.errorPresenter.addAndRefresh(this.$genderRadios.data("gender-validation-message"))
}else{n.superclass.validate.call(this)
}},checkDropdown:function(){var o=false,p=this.dropdownDefaultValue;
this.dropDown.$element.find("option").each(function(){if(p!==undefined&&p.toLowerCase()===this.value.toLowerCase()){o=true
}});
return this.dropDown.getValue()===""&&o&&this.dropdownDefaultLabel!==""&&this.dropdownDefaultLabel!==undefined
},getDefaultLabel:function(p){var o;
if(p){o=p.split(",");
if(o.length===2&&o[0]!==""){return o[1]
}else{if(o[1]==="Dr"){return o[1]
}else{return""
}}}},onDropdownNameChanged:function(){var o=this.dropDown.getName();
this.dropDown.attribute("id",o);
this.label.attr("for",o);
this.helpLabel.attr("for",o);
this.dropDown.$errorTemplate.attr("data-field-name",o)
},processState:function(o){if(o){this.view.render(o);
this.initializeTitle();
if(o&&o.isDisabled){this.processSsoDisable()
}}},processSsoDisable:function(){this.$scope.addClass("retrieved");
this.$scope.find("select").attr("tabindex","-1");
this.$scope.find("select option:not(:selected)").attr("disabled",true)
},handleRadiosVisibility:function(){if(this.isGenderNeeded(this.dropDown.getValue())){this.$genderRadios.slideDown();
return true
}else{this.$genderRadios.hide();
if(this.$isGenderSelected.filter(":checked")){this.$isGenderSelected.prop("checked",false)
}}this.validate();
return false
},restoreState:function(){n.superclass.restoreState.call(this);
if(this.dropDown){this.dropDown.setValue(this.dropdownDefaultValue||"")
}},onDropDownChange:function(){this.handleRadiosVisibility();
Cog.ghostTextHelper.removeGreyStyleFromLabels()
},isBlank:function(o){return(!o||/^\s*$/.test(o))
},isGenderNeeded:function(o){var p;
if(o){p=o.split(",");
if(p.length<2||this.isBlank(p[0])){return true
}}return false
}});
b.Title=n
}i.onRegister=function(n){var o=new b.Title(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
Cog.registerComponent({name:"forms.elements.title",api:i,sharedApi:h,externalApi:j,requires:[{name:"forms.elements.element",apiId:"element"},"forms.elementsRegistry"],selector:"div.title"})
}(COGjQuery,document));
(function(g,l){var i={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,h={},j={element:null},b={Title:null};
function c(n){var p=null,o=null,r=n.find(".dropdown-container input"),q=null,t=r.val(),s=r.attr("id");
if(t){if(t===",Dr"){q=n.find('input[type="radio"]:checked');
p=q.val();
o=q.attr("id")
}else{p=_.first(t.split(","));
o=s
}t=_.last(t.split(","))
}else{p=undefined;
t=undefined;
o=s
}return{gender:{value:p,origin:o},title:{value:t,origin:s}}
}h.getDataAndConfig=function(){var n=g("div.titleAsButtons");
return b.Title.superclass.getDataAndConfig(n,c)
};
function f(){var n=Cog.Type.extend(j.element.Element,{view:null,$label:null,$helpLabel:null,$genderRadios:null,genderRadioFields:null,dropdownDefaultLabel:null,dropdownDefaultValue:null,$isGenderSelected:null,dropdownAsButtons:null,initialize:function(){n.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},selectsOnly:function(o){return o.$element[0].nodeName==="SELECT"
},initializeTitle:function(){var p=this,o;
this.dropdownAsButtons=this.fields.findAndCreate(".dropdown-container",this.$scope);
if(this.dropdownAsButtons){this.$scope.on("click",".dropdown-selection-option",g.proxy(this.onInputChange,this));
this.genderRadioFields=this.fields.findAndCreate(".input-radio.gender input",this.$scope,true);
this.$isGenderSelected=this.$scope.find(".input-radio.gender").find("input");
this.$genderRadios=this.$scope.find(".radio-row.gender");
this.$label=this.$scope.find(".select label");
this.$helpLabel=this.$scope.find(".label-help-container label");
this.dropdownDefaultValue=this.configuration.get().defaultValue;
this.dropdownAsButtons.nameChangedHandler(this.onDropdownNameChanged,this);
if(this.dropdownDefaultValue){this.dropdownAsButtons.setValue(this.dropdownDefaultValue)
}if(this.genderRadioFields){o=this.genderRadioFields.$element.siblings("label");
o.on("click",function(){});
this.genderRadioFields.on("focusout change",function(){var q=g.proxy(p.validate,p);
q()
})
}}},onInputChange:function(p){var o=this.dropdownAsButtons.getSelectionValue(p.currentTarget);
if(this.dropdownAsButtons.hasSelectedValue(o)){this.dropdownAsButtons.usselectValue()
}else{this.dropdownAsButtons.setValue(o)
}this.handleRadiosVisibility()
},getFields:function(){var o=[];
if(this.dropdownAsButtons){if(!this.isGenderNeeded(this.dropdownAsButtons.getValue())){o=[this.dropdownAsButtons]
}else{o=n.superclass.getFields.call(this)
}}return o
},validate:function(){if(this.isGenderNeeded(this.dropdownAsButtons.getValue())&&this.genderRadioFields.$element.filter(":checked").length===0){this.errorPresenter.clear();
this.errorPresenter.addAndRefresh(this.$genderRadios.data("gender-validation-message"))
}else{n.superclass.validate.call(this)
}},onDropdownNameChanged:function(){var o=this.dropdownAsButtons.getName();
this.dropdownAsButtons.attribute("id",o);
this.$label.attr("for",o);
this.$helpLabel.attr("for",o)
},processState:function(o){if(o){this.view.render(o);
this.initializeTitle();
this.dropdownAsButtons.setValue(o.selectedTitle);
if(o&&o.isDisabled){this.processSsoDisable()
}this.handleRadiosVisibility()
}},processSsoDisable:function(){var o=this.$scope.find(".dropdown-container button"),p=this.$scope.find("input");
this.$scope.addClass("retrieved");
this.disableElement(o);
this.disableElement(p);
this.$scope.find(":radio").attr("readonly",true)
},disableElement:function(o){o.attr("tabindex","-1");
o.attr("readonly",true)
},handleRadiosVisibility:function(){if(this.isGenderNeeded(this.dropdownAsButtons.getValue())){this.$genderRadios.slideDown();
return true
}else{this.$genderRadios.hide();
if(this.$isGenderSelected.filter(":checked")){this.$isGenderSelected.prop("checked",false)
}}this.validate();
return false
},restoreState:function(){n.superclass.restoreState.call(this);
if(this.dropdownAsButtons){this.dropdownAsButtons.setValue(this.dropdownDefaultValue||"")
}},isBlank:function(o){return(!o||/^\s*$/.test(o))
},isGenderNeeded:function(o){var p;
if(o){p=o.split(",");
if(p.length<2||this.isBlank(p[0])){return true
}}return false
}});
b.Title=n
}i.onRegister=function(n){var o=new b.Title(n.$scope);
n.formElement=o
};
i.onUnregister=function(n){n.formElement.unregister()
};
i.init=function(n){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
Cog.registerComponent({name:"forms.elements.titleAsButtons",api:i,sharedApi:h,externalApi:j,requires:[{name:"forms.elements.element",apiId:"element"},"forms.elementsRegistry"],selector:"div.titleAsButtons"})
}(COGjQuery,document));
(function(m,q){var o={},i={hiddenMode:"hidden",emptyValue:""},t={first:".first",second:".second",third:".third",defaultValueData:".defaultValueData"},h={registry:{name:"forms.elementsRegistry",events:{initialized:"initialized",register:"register"}}},r=false,p={errorPresenter:null},c={SortCode:null};
function l(){var u=Cog.Type.extend(p.element.Element,{firstInput:null,secondInput:null,thirdInput:null,$errorTemplate:null,additionalValidatorMessage:"You have to provide valid numeric value",initialize:function(){this.additionalValidatorMessage=this.configuration.get().additionalValidatorMessage;
u.superclass.initialize.call(this);
this.initializeSortCode();
this.addValidator(new p.sortCodeValidator.SortCodeValidator(this,this.additionalValidatorMessage))
},initializeSortCode:function(){this.firstInput=this.fields.findAndCreate(".first input",this.$scope);
if(this.firstInput){this.firstInput.on("keydown",m.proxy(this.onKeyDown,this.firstInput));
this.firstInput.on("keyup",m.proxy(this.onKeyUp,this.firstInput));
this.firstInput.$label=this.$scope.find(".first-label");
this.firstInput.nameChangedHandler(this.onFirstSortCodeNameChanged,this)
}this.secondInput=this.fields.findAndCreate(".second input",this.$scope);
if(this.secondInput){this.secondInput.on("keydown",m.proxy(this.onKeyDown,this.secondInput));
this.secondInput.on("keyup",m.proxy(this.onKeyUp,this.secondInput));
this.secondInput.$label=this.$scope.find(".second-label");
this.secondInput.nameChangedHandler(this.onSecondSortCodeNameChanged,this)
}this.thirdInput=this.fields.findAndCreate(".third input",this.$scope);
if(this.thirdInput){this.thirdInput.on("keydown",m.proxy(this.onKeyDown,this.thirdInput));
this.thirdInput.on("keyup",m.proxy(this.onKeyUp,this.thirdInput));
this.thirdInput.on("focusout",m.proxy(this.validate,this));
this.thirdInput.$label=this.$scope.find(".third-label");
this.thirdInput.nameChangedHandler(this.onThirdSortCodeNameChanged,this)
}this.$errorTemplate=this.$scope.find("script")
},onFirstSortCodeNameChanged:function(){var w=this.firstInput.getName(),v=w.replace(".first","");
this.firstInput.attribute("id",w);
this.firstInput.$label.attr("for",w);
this.$errorTemplate.attr("data-field-name",v)
},onSecondSortCodeNameChanged:function(){var v=this.secondInput.getName();
this.secondInput.attribute("id",v);
this.secondInput.$label.attr("for",v)
},onThirdSortCodeNameChanged:function(){var v=this.thirdInput.getName();
this.thirdInput.attribute("id",v);
this.thirdInput.$label.attr("for",v)
},onKeyDown:function(w){var v=w.keyCode||w.which;
if(w.shiftKey&&w.which!=9&&(w.which<=65||w.which>=90)){w.preventDefault()
}},onKeyUp:function(x){var w=this.$element,y=m.trim(w.val()),v=x.keyCode||x.which,z;
if(y.length==2&&(v>=48&&v<=105)&&!(x.ctrlKey&&x.which)){z=w.parent().nextAll(".input-text:first").find("input")
}else{if(v==8){w.val("");
z=w.parent().prevAll(".input-text:first").find("input")
}}if(z){y=z.val();
z.val("");
z.focus().val(y)
}}});
c.SortCode=u
}function d(w,x){var v=x.eventData.$scope||m(),u=w.$scope||m();
return v.is(u.parents())
}function g(v){var u=v.$first.val()==v.defaultValue.first,x=u?v.$second.val()==v.defaultValue.second:false,w=x?v.$third.val()==v.defaultValue.third:false;
return u&&x&&w
}function j(u){return !u.$first.val()&&!u.$second.val()&&!u.$third.val()
}function s(u){u.$first.val(i.emptyValue);
u.$second.val(i.emptyValue);
u.$third.val(i.emptyValue)
}function f(v){var u=v.defaultValue;
v.$first.val(u.first);
v.$second.val(u.second);
v.$third.val(u.third)
}function b(v){var u=v.$scope;
v.$first=u.find(t.first);
v.$second=u.find(t.second);
v.$third=u.find(t.third)
}function n(u){u.first=u.first||i.emptyValue;
u.second=u.second||i.emptyValue;
u.third=u.third||i.emptyValue;
return u
}o.onRegister=function(u){var v=new c.SortCode(u.$scope);
u.formElement=v
};
o.onUnregister=function(u){u.formElement.unregister()
};
o.init=function(u){Cog.fireEvent(h.registry.name,h.registry.events.initialized)
};
o.beforeInit=function(){Cog.fireEvent(h.registry.name,h.registry.events.register);
if(!r){r=true;
l()
}};
Cog.registerComponent({name:"forms.elements.sortCode",api:o,externalApi:p,selector:"div.sortCode",requires:["forms.elementsRegistry",{name:"forms.elements.element",apiId:"element"},{name:"forms.elements.sortCode.sortCodeValidator",apiId:"sortCodeValidator"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.elements.sortCode.sortCodeValidator"},i={validator:null},b={SortCodeValidator:null};
function d(){var j=Cog.Type.extend(i.validator.Validator,{isNumberPattern:/^\d+$/,isValid:function(){var l=true,n,m=this.element.fields.items,o=m.length;
for(n=0;
n<o;
n++){if(!this.isNumberPattern.test(m[n].getValue())){l=false;
break
}}return l
}});
b.SortCodeValidator=j
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(f,c){var d={},g={moduleName:"forms.elements.addressLookup.addressLookupValidator"},h={validator:null},b={AddressLookupValidator:null};
function i(){var j=Cog.Type.extend(h.validator.GenericValidator,{defaultConfig:{message:"Please select correct address",isEnabledDelegate:f.noop,isLookedUpDelegate:f.noop,isSelectedDelegate:f.noop,scope:null},constructor:function(m,n){var l=f.extend({},this.defaultConfig,n);
j.superclass.constructor.call(this,m,l)
},isValid:function(){var m=this.config.isEnabledDelegate.call(this.config.scope),l=false;
if(m){l=(this.config.isEnabledDelegate.call(this.config.scope)===true&&this.config.isSelectedDelegate.call(this.config.scope)===true)
}return l
},getMessage:function(){if(this.element.customMessage!=null){return this.element.customMessage
}else{return this.message
}}});
b.AddressLookupValidator=j
}d.init=function(){i()
};
Cog.registerStatic({name:g.moduleName,api:d,externalApi:h,sharedApi:b,requires:[{name:"forms.validation.elements.genericValidator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g){var c={form:{name:"forms.form",events:{enableValidation:"enableValidation",disableValidation:"disableValidation"}}},f={addressLabel:".styled-select"},h,b;
function d(){return{items:null,manualAddress:"manual_address",$manualAddress:null,$manualAddButton:null,flat:null,house:null,$firstOption:null,isManualLookupValidatorEnabled:true,isDuplicateHouseMessageAdded:false,addressList:null,manualFindDomElements:function(){this.$manualAddress=this.$scope.find(".manual-address");
this.$manualAddButton=this.$scope.find(".manual-add-button");
this.flat=this.elementsFinder.findFirstIn(this.$scope.find(".flat-number"));
this.house=this.elementsFinder.findFirstIn(this.$scope.find(".house-number"));
this.$firstOption=this.$selectAddress.find('option[value=""]')
},manualBindUI:function(){this.$manualAddButton.on({click:this.manualAddClick.bind(this),keydown:this.manualAddButtonKeyDown.bind(this)})
},manualAfterRender:function(){this.disableManualAddress()
},manualProcessState:function(i){if(i){this.addManualOption();
this.addAddress()
}},createAddressList:function(){this.addressList=_.map(this.$selectAddress.find("option"),function(i){return i.value.trim()
})
},manualAdd:function(){var j,i;
if(this.isValidFlatHouse()){j=this.house.input.getValue();
i=this.flat.input.getValue();
this.createAddressList();
this.addNewAddress(j,i)
}},manualAddButtonKeyDown:function(j){var i=j.keyCode||j.which;
if(i==Cog.statics.keyCodes.enter){this.manualAdd()
}},manualAddClick:function(i){i.preventDefault();
this.manualAdd()
},displayManualAddressError:function(i){if(!this.isValidAddress){this.errorPresenter.clearAll();
this.errorPresenter.add(i);
this.errorPresenter.refresh();
this.enableManualAddress()
}},isEmptyValueSelected:function(){return !this.$selectAddress.children(":selected").val()
},isValidFlatHouse:function(){var j=this.house.isValid(),i=this.flat.isValid();
return j&&i
},isHouseNumberAvailable:function(i){var j=this.$selectAddress.find('option[value*=";'+i+' "]').length;
return j>0
},isHouseNumberMatching:function(j,i){return j.toString()===this.getHouseNumber(i)
},isHouseNotDuplicated:function(i){return _.indexOf(i,this.addressList)===-1&&this.countOccurenceOfFlat(i)<=1
},addNewAddress:function(l,j){var i=this.getInt(l);
this.isValidAddress=false;
if(!l||!i){return false
}if(this.isHouseNumberAvailable(i)){_.forEach(this.addressList,function(m){if(this.matchNewAddress(i,m)){this.addMatchingAddress(m,l,j)
}}.bind(this))
}else{this.displayManualAddressError(this.configuration.get().invalidHouseErrorMessage)
}},matchNewAddress:function(j,i){var m=this.isHouseNumberMatching(j,i),l;
if(!m){l=this.isDuplicateHouseMessageAdded?this.configuration.get().duplicateHouseErrorMessage:this.configuration.get().invalidHouseErrorMessage;
this.displayManualAddressError(l)
}return m
},addMatchingAddress:function(i,n,m){var l=this.createFullAddress(i,n,m),j=this.addDedup(this.getDedup(i),l);
if(this.isHouseNotDuplicated(j)){this.addOptionToDom(j,l);
this.isValidAddress=true
}else{this.displayManualAddressError(this.configuration.get().duplicateHouseErrorMessage);
this.isDuplicateHouseMessageAdded=true
}},countOccurenceOfFlat:function(l){var n=0,j=-1,m=-1;
while(n!=-1){n=l.indexOf(this.configuration.get().packedAddressFlatText,m+1);
j+=1;
m=n
}return j
},createFullAddress:function(i,l,j){i=this.setHouseNumber(l,i);
i=this.setFlatNumber(j,i);
return i
},addOptionToDom:function(i,j){var l=g("<option></option>",{prop:{value:i,selected:true},text:j});
this.injectOptionToSelect(l,i,j);
this.disableManualAddress()
},injectOptionToSelect:function(l,i,j){var m=";"+this.getInt(this.getHouseNumber(i));
l.insertAfter(this.$selectAddress.find('option[value*="'+m+'"]:first'));
this.setSelectLabel(j)
},validateManualAddress:function(){var i=true;
if(this.$manualAddress!==null){i=this.isValidFlatHouse()
}return i
},clearHouseFlatErrors:function(){if(this.flat&&this.house){this.house.errorPresenter.clear().refresh();
this.flat.errorPresenter.clear().refresh()
}this.errorPresenter.clear().refresh()
},addAddress:function(){var i=this.selectedAddress;
if(this.isEmptyValueSelected()){if(i&&this.hasDedup(i)){this.addOptionToDom(i,this.discardDedup(i))
}else{this.addAddressWithDedup(i)
}}},addAddressWithDedup:function(i){var l=this.getHouseNumber(i),j;
if(l){l=this.getInt(l);
g.each(this.items,function(m,n){if(n.value&&this.compareHouseNumbers(n.value,l)){j=this.addDedup(this.getDedup(n.value),i);
this.addOptionToDom(j,i);
return true
}}.bind(this))
}},compareHouseNumbers:function(i,l){var j=this.getInt(this.getHouseNumber(i));
return j&&l&&(l==j)
},hasDedup:function(i){return(i&&i.indexOf)?i.indexOf(";")>-1:false
},getDedup:function(i){return i.split(";")[0]
},addDedup:function(j,i){return j+";"+i
},discardDedup:function(i){return this.hasDedup(i)?i.split(";")[1]:i
},getHouseNumber:function(j){var l=this.discardDedup(j),i="";
if(l){i=l.split(" ")[0]
}return i
},getInt:function(i){var j=i.match(/\d+\.?\d*/g);
return j?(window.parseInt(j[0],10)||0):0
},setHouseNumber:function(j,i){i=this.discardHouseNumber(i);
return j+" "+i
},setFlatNumber:function(n,j){var o,m,i,l;
if(n){o=j.indexOf(",");
m=j.substring(0,o)+", ";
i=j.substring(o);
l=this.configuration.get().packedAddressFlatText+" ";
j=m+l+n+i;
j=j.trim()
}return j
},discardHouseNumber:function(i){var j;
if(this.hasDedup(i)){i=this.discardDedup(i)
}if(i.indexOf(" ")>-1){j=i.split(" ");
j.shift();
i=j.join(" ")
}return i
},addManualOption:function(){if(this.configuration.get().enableManualAddress===true){var i=g("<option></option>").attr("value",this.manualAddress).text(this.configuration.get().manualAddressText);
i.addClass("manual-option");
i.insertAfter(this.$firstOption)
}},isManualOptionSelected:function(){var i=this.$selectAddress.children(":selected");
return i.hasClass("manual-option")||i.val()===this.manualAddress
},toggleManualAddress:function(){if(this.isManualOptionSelected()){this.enableManualAddress()
}else{this.disableManualAddress()
}},disableManualAddress:function(){Cog.fireEvent(c.form.name,c.form.events.disableValidation,{$scope:this.$scope});
this.clearHouseFlatFields();
this.clearHouseFlatErrors();
this.$manualAddress.detach()
},enableManualAddress:function(){Cog.fireEvent(c.form.name,c.form.events.enableValidation,{$scope:this.$scope});
this.$selectAddressContainer.append(this.$manualAddress);
this.$manualAddress.show()
},clearHouseFlatFields:function(){if(this.flat&&this.house){this.flat.input.setValue("");
this.house.input.setValue("")
}}}
}b={extend:function(i){_.extend(i,d())
}};
Cog.registerStatic({name:"addressLookup.manualAddressLookup",api:{},sharedApi:b})
}(COGjQuery));
(function(g,c){var d={},h={moduleName:"forms.elements.dateCheckbox.dateCheckboxValidator"},i={validator:null},b={DateCheckboxValidator:null};
function f(){var j=Cog.Type.extend(i.validator.Validator,{isValid:function(){var m=this.element.month.getValue(),o=this.element.year.getValue(),n=this.element.checkbox.getValue(),l=false;
if(n){l=!this.isNotEmpty(m)&&!this.isNotEmpty(o)
}else{l=this.isNotEmpty(m)&&this.isNotEmpty(o)
}return l
},isNotEmpty:function(l){return l!=null&&String(l).length
}});
b.DateCheckboxValidator=j
}d.init=function(){f()
};
Cog.registerStatic({name:h.moduleName,api:d,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,d){var f={},h={moduleName:"forms.elements.dateCheckboxWithInputFieldsDateValidator"},i={validator:null},c={DateCheckboxWithInputFieldsDateValidator:null};
function b(){var j=Cog.Type.extend(i.validator.Validator,{isFormat_dd:/^[0-9]{1,2}$/,isFormat_mm:/^[0-9]{2}$/,isFormat_mmm:/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)$/i,isFormat_mmmm:/^(January|February|March|April|May|June|July|August|September|October|November|December)$/i,isFormat_yy:/^[0-9]{2}$/,isFormat_yyyy:/^[0-9]{4}$/,isValid:function(){var m=this.element.day.getValue(),s=this.element.month.getValue(),o=this.element.year.getValue(),p=this.element.dayFormat,n=this.element.monthFormat,t=this.element.yearFormat,l=this.element.yearValueFrom,v=this.element.yearValueTo,q=false,u=false,r=false;
if((p==="d"||p==="dd")&&this.isFormat_dd.test(m)){q=true
}if(n==="mm"&&this.isFormat_mm.test(s)){u=true
}else{if(n==="mmm"&&this.isFormat_mmm.test(s)){u=true
}else{if(n==="mmmm"&&this.isFormat_mmmm.test(s)){u=true
}}}if(t==="yy"&&this.isFormat_yy.test(o)){r=true
}else{if(t==="yyyy"&&this.isFormat_yyyy.test(o)){r=true
}}return q&&u&&r
},isNotEmpty:function(l){return l!=null&&String(l).length
}});
c.DateCheckboxWithInputFieldsDateValidator=j
}f.init=function(){b()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:c,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,d){var f={},h={moduleName:"forms.elements.dateCheckboxWithInputFieldsValidator"},i={validator:null},c={DateCheckboxWithInputFieldsInputValidator:null};
function b(){var j=Cog.Type.extend(i.validator.Validator,{isValid:function(){var o=this.element.day.getValue(),m=this.element.month.getValue(),p=this.element.year.getValue(),n=this.element.checkbox.getValue(),l=false;
if(n){l=!this.isNotEmpty(o)&&!this.isNotEmpty(m)&&!this.isNotEmpty(p)
}else{l=this.isNotEmpty(o)&&this.isNotEmpty(m)&&this.isNotEmpty(p)
}return l
},isNotEmpty:function(l){return l!=null&&String(l).length
}});
c.DateCheckboxWithInputFieldsInputValidator=j
}f.init=function(){b()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:c,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,c){var d={},h={moduleName:"forms.elements.date.dateValidator"},i={validator:null},b={DateValidator:null};
function f(){var j=Cog.Type.extend(i.validator.Validator,{isValid:function(){var o=this.element.year?this.element.year.getValue():"",l=this.element.month?this.element.month.getValue():"",n=this.element.day?this.element.day.getValue():"",m=null;
if(this.isNotEmpty(l)&&this.isNotEmpty(o)&&this.isNotEmpty(n)){m=new Date(o,l-1,n);
return m&&(m.getMonth()+1)==Number(l)&&m.getDate()==Number(n)
}return true
},isNotEmpty:function(l){return l!=null&&String(l).length
}});
b.DateValidator=j
}d.init=function(){f()
};
Cog.registerStatic({name:h.moduleName,api:d,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,c){var d={},h={moduleName:"forms.elements.radioGroup.radioGroupValidator"},i={validator:null},b={RadioGroupValidator:null};
function f(){var j=Cog.Type.extend(i.validator.Validator,{isValid:function(){var n=this.element.selectedValue,m=this.element.disallowedValues,l=false;
if(n&&m){l=!this.isDisallowedSelected(n,m)
}else{if(n){l=this.isNotEmpty(n)
}}return l
},isDisallowedSelected:function(l,m){return g.inArray(l,m)!==-1
},isNotEmpty:function(l){return l!=null&&String(l).length
}});
b.RadioGroupValidator=j
}d.init=function(){f()
};
Cog.registerStatic({name:h.moduleName,api:d,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.elements.radioWithContainers.radioWithContainersValidator"},i={validator:null},b={RadioWithContainersValidator:null};
function d(){var j=Cog.Type.extend(i.validator.Validator,{isValid:function(){var n=this.element.radio.getValue(),m=this.element.disallowedValue,l=false;
if(n&&m){l=!this.isDisallowedSelected(n,m)
}else{if(n){l=this.isNotEmpty(n)
}}return l
},isDisallowedSelected:function(l,m){return l===m
},isNotEmpty:function(l){return l!=null&&String(l).length
}});
b.RadioWithContainersValidator=j
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(f,c){var d={},g={moduleName:"forms.elements.singleAncillaryProduct.singleAncillaryProductValidator"},h={validator:null},b={SingleAncillaryProductValidator:null};
function i(){var j=Cog.Type.extend(h.validator.Validator,{isValid:function(){var m=this.element.$scope.find(".options-block").length>0,n=this.element.$scope.find("button.button"),o=null,l=!m;
if(n.length>1){o=f(n[0]);
if(o.hasClass("button-yes")&&o.data("disabled")){l=true
}else{if(o.hasClass("button-no")&&o.data("disabled")){l=true
}}o=f(n[1]);
if(o.hasClass("button-yes")&&o.data("disabled")){l=true
}else{if(o.hasClass("button-no")&&o.data("disabled")){l=true
}}}return l
}});
b.SingleAncillaryProductValidator=j
}d.init=function(){i()
};
Cog.registerStatic({name:g.moduleName,api:d,externalApi:h,sharedApi:b,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.elements.vehicleRegistration.lookupFieldValidator"},i={validator:null},b={LookupFieldValidator:null};
function d(){var j=Cog.Type.extend(i.validator.GenericValidator,{defaultConfig:{message:"Please use the find my car button",isEnabledDelegate:g.noop,isValidDelegate:g.noop,scope:null},constructor:function(m,n){var l=g.extend({},this.defaultConfig,n);
j.superclass.constructor.call(this,m,l)
},isValid:function(){var l=this.config.isEnabledDelegate.call(this.config.scope);
return l?this.config.isValidDelegate.call(this.config.scope)===true:true
},validateField:function(l){return l.getValue()?true:false
}});
b.LookupFieldValidator=j
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.genericValidator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.elements.predictiveLookup.predictiveLookupValidator"},i={validator:null},b={PredictiveLookupValidator:null};
function d(){var j=Cog.Type.extend(i.validator.Validator,{isValid:function(){var m=this.element.hidden.getValue(),l=this.element.input.getValue();
return !this.isNotEmpty(l)||this.isNotEmpty(m)
},canValidate:function(){var l=j.superclass.canValidate.call(this);
return l&&this.element.hidden!=null&&this.element.input!=null
},isNotEmpty:function(l){return l!=null&&String(l).length
}});
b.PredictiveLookupValidator=j
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(i,d){var m={},h={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},stateProvider:{name:"elements.stateProvider",events:{stateChanging:"stateChanging",allElementsUpdated:"allElementsUpdated"}},sessionTimeoutAlert:{name:"sessionTimeoutAlert",events:{lookup:"lookup"}}},p=false,j={},n={keyCodes:null,element:null,lookupFieldValidator:null,processingHandler:null,analytics:null,handlerHelper:null,responseHandlersFactory:null,responseProcessor:null,journeyContext:null},b={VehicleRegistration:null},g={lookup:"lookup, no results",lookupPerformed:"lookup performed, results visible",manual:"manual, no registration",manualRegistration:"manual with registration"},l="",q=[],f={click:function(u){var s,t,r;
if(!d){return false
}r=_.filter(d.DlgMgr.mapping,function(v){return v.scVar==="eventdata.events.vehicleLookup"
});
if(_.isArray(r)&&r.length>0){s=u.data("address");
t=i('<a href="'+s+'" />').get(0);
d.record({event:"vehicleLookup",values:{},collect:false,options:{obj:t,defaultLinkType:"o"},componentPath:"dlg/qnb/motor/components/vehicleRegistrationDetailsTracking"})
}},failure:function(r,w,s){var y,A,x,z,t,v,u;
if(!d||!w.analyticsUci){return false
}u=_.filter(d.DlgMgr.mapping,function(B){return B.scVar==="eventdata.events.vehicleLookupFailure"
});
if(_.isArray(u)&&u.length>0){v=w.analyticsUci.split("|");
z=v[0];
t=v[0]+"|"+v[2]+"|";
y="Error = invalid format";
if(w&&w.serviceReturnCode){y="Error = "+w.serviceReturnCode.returnCode
}A=r.data("address");
x=i('<a href="'+A+'" />').get(0);
d.record({event:"vehicleLookupFailure",values:{vehicleLookupError:t+y,failedVehicleReg:z+"|Reg="+s},collect:false,options:{obj:x,defaultLinkType:"o"},componentPath:"dlg/qnb/motor/components/vehicleRegistrationDetailsTracking"})
}}};
function c(s){var x=null,r="",u=null,w="",v=null,t="";
if(s.find(".vehicle-select-manually").css("display")=="block"){x=s.find('select[id$=".manufacturer"]').val();
r="data-vehicle-lookup-make";
u=s.find('select[id$=".modelGen"]').val();
w="data-vehicle-lookup-model";
v=s.find('select[id$=".year"]').val();
t="data-vehicle-lookup-year"
}else{x=i.trim(s.find(".field-make").text());
r="data-vehicle-manual-make";
u=i.trim(s.find(".field-model").text());
w="data-vehicle-manual-model";
v=i.trim(s.find(".field-yearOfManufacture").text());
t="data-vehicle-manual-year"
}return{make:{value:x,origin:r},model:{value:u,origin:w},year:{value:v,origin:t}}
}j.getDataAndConfig=function(){var r=i("body").find(q);
return b.VehicleRegistration.superclass.getDataAndConfig(r,c)
};
function o(){var r=Cog.Type.extend(n.element.Element,{defaultErrorMessages:{connectionError:"Connection error has occured...",unrecognizedError:"Unrecognized error has occured.",noModelsFound:"This make has no models. Please select another.",noVehiclesFound:"There are no vehicles matching above details. Please check that they are correct.",invalidFormatError:"Vehicle registration is invalid. Please correct it."},urls:null,analyticsUci:null,lookupField:null,manualSelect:null,$manualButton:null,$manualContainer:null,$lookupButton:null,$lookupDetails:null,$lookupResultContainer:null,$registrationInput:null,$manualLabel:null,$notYourVehicleLabel:null,$reEnableLabel:null,$lookupDisabledText:null,elements:null,validLookupDataReceived:false,lookupValidatorEnabled:true,isLoadingAllowed:true,processingHandler:null,state:null,registrationDataResponseProcessor:null,makeOptionsResponseProcessor:null,vehicleDataResponseProcessor:null,autoLookup:null,prevSuccessValue:null,constructor:function(s){r.superclass.constructor.call(this,s,true)
},initializeErrorMessages:function(s){var t=s.data()||{};
this.errorMessages=i.extend({},this.defaultErrorMessages,t.errorMessages)
},initialize:function(){r.superclass.initialize.call(this);
this.processingHandler=n.processingHandler(this.$scope);
this.initializeErrorMessages(this.$scope);
this.readConfiguration();
this.findDomElements();
this.findFields();
this.addValidator(new n.lookupFieldValidator.LookupFieldValidator(this,{isEnabledDelegate:this.isLookupValidatorEnabled,isValidDelegate:this.hasValidLookupData,message:this.$scope.data("useLookupMessage"),scope:this}));
this.initializeResponseProcessors();
this.bindEvents();
this.bindUI();
this.initializeValidateNow(this.validate)
},loadFromCookie:function(){var s=Cog.Cookie.read("vehRegAuto");
Cog.Cookie.erase("vehRegAuto");
if(s){this.lookupField.setValue(s);
this.loadVehicleRegData()
}},delayDelegate:function(){return this.processingHandler?this.processingHandler.hide():null
},initializeResponseProcessors:function(){var u=n.responseHandlersFactory.ResponseHandlersFactory.instance(),t=i.proxy(this.delayDelegate,this),s=n.handlerHelper.HandlerHelper.instance();
this.registrationDataResponseProcessor=this.createRegistrationDataResponseProcessor(u,t,s);
this.makeOptionsResponseProcessor=this.createMakeOptionsResponseProcessor(u,t,s);
this.vehicleDataResponseProcessor=this.createVehicleDataResponseProcessor(u,t,s)
},createRegistrationDataResponseProcessor:function(v,u,s){var t=v.journeyAndClearTrackingCookieRedirect();
t.addSuccessHandler(s.asHandler(this.onVehicleRegDataLoaded,this));
t.addErrorHandler(s.asHandler(this.onVehicleRegDataError,this));
return new n.responseProcessor.ResponseProcessor(t,u)
},createMakeOptionsResponseProcessor:function(v,u,s){var t=v.journeyAndClearTrackingCookieRedirect();
t.addSuccessHandler(s.asHandler(this.onLoadMakeOptionsDone,this));
t.addErrorHandler(s.asHandler(this.onLoadMakeOptionsError,this));
return new n.responseProcessor.ResponseProcessor(t,u)
},createVehicleDataResponseProcessor:function(v,u,s){var t=v.journeyAndClearTrackingCookieRedirect();
t.addSuccessHandler(s.asHandler(this.onLoadVehicleDataDone,this));
t.addErrorHandler(s.asHandler(this.onLoadVehicleDataError,this));
return new n.responseProcessor.ResponseProcessor(t,u)
},changeState:function(s){if(this.state!==s){this.state=s;
this.setLabels()
}},hasValidLookupData:function(){return this.validLookupDataReceived
},errorPresenterSelector:function(){return"> .error-message"
},onAllInitialized:function(){this.findElements();
this.disableManualValidation();
this.bindManualRegistrationUI()
},processState:function(s){if(s){if(!s.populatedManually||Cog.pages.isRegistrationOptimisationEnabled()){this.processLookupState(s)
}else{this.processManualState(s)
}this.loadFromCookie()
}this.enableDropDown(this.elements.model);
this.enableDropDown(this.elements.vehicle)
},processLookupState:function(s){this.enableVehicleLookup();
this.disableManualValidation();
if(s.hasValidRegistration){this.enableLookupMode();
this.validLookupDataReceived=true;
this.$lookupResultContainer.show();
this.changeState(g.lookupPerformed)
}else{this.changeState(g.lookup)
}},processManualState:function(s){if(s.hasValidRegistration){this.validLookupDataReceived=true;
this.changeState(g.manualRegistration)
}else{this.changeState(g.manual)
}this.enableManualMode();
if(this.configuration.get().teslaAutoLookup){this.$manualContainer.find(".make-container").hide();
this.$manualContainer.find(".form-row.transType-container").hide();
this.$manualContainer.find(".form-row.engineType-container").hide()
}},readConfiguration:function(){var s=this.$scope.data()||{};
this.urls={vehicleReg:s.vehicleReg,vehicleMake:s.modelLookup,vehicleModel:s.vehicleLookup};
this.autoLookup=!!s.autoLookup;
this.analyticsUci=this.$scope.find(".analytics-last-field:first-child").data("analytics-uci")
},findDomElements:function(){this.$manualButton=this.$scope.find(".vehicle-select-manually-btn a");
this.$manualContainer=this.$scope.find(".vehicle-select-manually");
this.$lookupButton=this.$scope.find(".vehicle-reg-lookup input");
this.$lookupDetails=this.$scope.find(".vehicle-lookup-details");
this.$lookupResultContainer=this.$scope.find(".vehicle-lookup-result");
this.$registrationInput=this.$scope.find(".vehicle-reg input");
this.$manualLabel=this.$scope.find(".vehicle-select-manually-btn .manualLabel");
this.$notYourVehicleLabel=this.$scope.find(".vehicle-select-manually-btn .notYourVehicleLabel");
this.$reEnableLabel=this.$scope.find(".vehicle-select-manually-btn .reEnableLabel");
this.$lookupDisabledText=this.$scope.find(".lookup-disabled-text")
},findElements:function(){var s=this.elementsFinder;
this.elements={vehicle:s.findFirstIn(this.$scope.find(".form-row.vehicle")),make:s.findFirstIn(this.$scope.find(".form-row.make")),model:s.findFirstIn(this.$scope.find(".form-row.model")),engineType:s.findFirstIn(this.$scope.find(".form-row.engineType")),transmissionType:s.findFirstIn(this.$scope.find(".form-row.transmissionType")),yearOfManufacture:s.findFirstIn(this.$scope.find(".form-row.yearOfManufacture")),lookupResults:s.findFirstIn(this.$scope.find(".vehicleRegistrationDetailsDisplayInfo:first"))}
},findFields:function(){this.lookupField=this.fields.findAndCreate(".vehicle-reg input",this.$scope);
this.manualSelect=this.fields.findAndCreate(".manual-select",this.$scope)
},bindUI:function(){this.$lookupButton.on("click",this.onLookupButtonClicked.bind(this));
this.$manualLabel.on("click",this.onManualLabelClicked.bind(this));
this.$reEnableLabel.on("click",this.onReEnableLabelClicked.bind(this));
this.$notYourVehicleLabel.on("click",this.onNotYourVehicleLabelClicked.bind(this));
this.lookupField.$element.on("keyup, change",this.onRegistrationNumberChanged.bind(this)).on("keydown",this.onRegistrationKeyPressed.bind(this)).on("focusout",this.autoLookup?this.onLookupButtonClicked.bind(this):this.validateWithoutLookupValidator.bind(this)).on("focus",this.clearInputErrorMessages.bind(this))
},bindEvents:function(){var s=h.stateProvider;
this.eventsManager.on(s.name,s.events.stateChanging).execute(this.disallowLoading).withScope(this).bind();
this.eventsManager.on(s.name,s.events.allElementsUpdated).execute(this.allowLoading).withScope(this).bind()
},validateWithoutLookupValidator:function(){this.lookupValidatorEnabled=false;
this.validate();
this.lookupValidatorEnabled=true
},clearInputErrorMessages:function(){this.errorPresenter.clear();
this.errorPresenter.refresh()
},allowLoading:function(){this.isLoadingAllowed=true
},disallowLoading:function(){this.isLoadingAllowed=false
},loadVehicleRegData:function(){if(this.processingHandler){this.processingHandler.show()
}this.validLookupDataReceived=false;
var s=i.getJSON(this.urls.vehicleReg,{"formField.vehicleReg":this.lookupField.getValue(),jcid:n.journeyContext.current()});
this.registrationDataResponseProcessor.process(s)
},updateVehicleRegistration:function(s){if(s.values){this.updateVehicleRegistrationDetails(s.values);
this.$lookupDetails.show();
this.validLookupDataReceived=true
}else{this.errorPresenter.addAndRefresh(this.errorMessages.unrecognizedError)
}},updateVehicleRegistrationDetails:function(s){var t;
this.elements.lookupResults.processState(s);
this.$lookupResultContainer.show();
for(t in s){if(s.hasOwnProperty(t)){this.processVehicleRegistrationPart(t,s[t])
}}},processVehicleRegistrationPart:function(s,u){var t=this.$lookupDetails.find(".lookup-"+s+" input:not(.button)");
if(t.length){t.val(u)
}else{t=this.$lookupDetails.find(".lookup-"+s+" select");
if(t.length){t.find("option[value="+u+"]").prop("selected",true)
}}},onVehicleRegDataLoaded:function(s,t){Cog.fireEvent(h.sessionTimeoutAlert.name,h.sessionTimeoutAlert.events.lookup);
this.clearLookupResults();
if(t.content!==undefined||t.success){this.updateVehicleRegistration(t.content);
this.changeState(g.lookupPerformed);
this.prevSuccessValue=this.lookupField.getValue()
}else{this.errorPresenter.addAndRefresh(t.error||this.errorMessages.unrecognizedError);
t.analyticsUci=this.analyticsUci;
try{f.failure(this.$lookupButton,t,this.$registrationInput.val())
}catch(u){}this.changeState(g.lookup);
this.prevSuccessValue=""
}},onVehicleRegDataError:function(){Cog.fireEvent(h.sessionTimeoutAlert.name,h.sessionTimeoutAlert.events.lookup);
try{f.failure(this.$lookupButton,{analyticsUci:this.analyticsUci},this.$registrationInput.val())
}catch(s){}this.clearLookupResults();
this.errorPresenter.addAndRefresh(this.errorMessages.connectionError);
this.changeState(g.lookup);
this.prevSuccessValue=""
},checkRegistrationMatch:function(s){var u="^[A-Z]\\d{1,3}[A-Z]{3}$|^[A-Z]{1,2}\\d{1,4}$|^[A-Z]{3}\\d{1,3}(\\d|[A-Z])?$|^\\d{1,3}[A-Z]{1,3}$|^\\d{4}[A-Z]{1,2}$|^[A-Z]{2}\\d{2}[A-Z]{3}$|^[A-Z]{2}\\d{2}[A-Z]{2}$|^\\d{2}[A-Z]{2}\\d{2}$|^\\d{3}[XD]\\d{3}$|^[A-Z]\\d{5,6}$|^\\d{1,5}$|^[A-Z]\\d{4}[a-z,A-Z]{3}$|^(MN|MAN)\\d{5,6}$|^[B-Y]{1}MN\\d{5}$|^[B-Y]{1}MN\\d{4}[A-Z]$|^MAN[0-9]{4}[A-Z]{1}$|^\\d{4,5}[A-Z]{3}$|^\\d{5,6}[A-Z]{2}$|^[A-Z,a-z]{2}[1-9]{5,6}$|^[A-Z,a-z]{3}[1-9]{5}$|^[A-Z,a-z]{3}[1-9]{4}[A-Z,a-z]$|^[1-9]{3}[A-Z,a-z][1-9]{3}$",t=new RegExp(u);
s=s.replace(/\s/g,"").toUpperCase();
return s.match(t)
},setLabels:function(){var t=[],s={};
t=[this.$manualLabel,this.$reEnableLabel,this.$lookupDisabledText,this.$notYourVehicleLabel];
s[g.lookup]=[this.$manualLabel];
s[g.lookupPerformed]=[this.$notYourVehicleLabel];
s[g.manual]=[this.$reEnableLabel,this.$lookupDisabledText];
s[g.manualRegistration]=[this.$reEnableLabel];
t.forEach(function(u){u.addClass("hidden")
});
s[this.state].forEach(function(u){u.removeClass("hidden")
})
},onLookupButtonClicked:function(t){var w=this.lookupField.getValue(),s=t.type;
if(this.$lookupButton.is(":disabled")){return
}if(this.checkRegistrationMatch(w)){this.resetManualElements();
this.$manualContainer.hide();
this.enableVehicleLookup();
try{f.click(this.$lookupButton)
}catch(v){}this.loadVehicleRegData();
if(this.prevSuccessValue!==w){this.prevSuccessValue=w
}else{if(s=="focusout"){this.enableManualValidation()
}}this.disableManualValidation()
}else{try{f.failure(this.$lookupButton,{analyticsUci:this.analyticsUci},this.$registrationInput.val());
this.prevSuccessValue=""
}catch(u){}this.clearLookupResults();
this.errorPresenter.addAndRefresh(this.errorMessages.invalidFormatError)
}t.preventDefault()
},onRegistrationKeyPressed:function(s){var t=true;
if((s.keyCode||s.which)===n.keyCodes.enter){s.preventDefault();
t=false
}return t
},onRegistrationNumberChanged:function(s){if(this.state!==g.lookup&&this.state!==g.lookupPerformed){return
}if(!this.equalWithPrevValue()){this.clearLookupResults();
this.changeState(g.lookup);
this.prevValue=this.lookupField.getValue();
this.validLookupDataReceived=false
}s.preventDefault()
},equalWithPrevValue:function(){return(this.prevValue===this.lookupField.getValue())
},clearLookupResults:function(){this.elements.lookupResults.processState();
this.$lookupDetails.find("input").val("");
this.$lookupDetails.find("select").val("").change();
this.errorPresenter.clear().refresh();
this.hideLookupResults()
},hideLookupResults:function(){this.$lookupResultContainer.hide()
},enableVehicleLookup:function(){this.manualSelect.setValue(false);
this.enableValidation();
this.$registrationInput.attr({readonly:false,disabled:false});
this.$lookupButton.attr("disabled",false);
this.$registrationInput.parent().removeClass("disabled");
i(this.$lookupResultContainer[0]).parent().removeClass("lookup-without-registration")
},disableVehicleLookup:function(){this.manualSelect.setValue(true);
this.disableValidation();
this.$registrationInput.val("");
if(this.state===g.manualRegistration||this.state===g.lookupPerformed){this.$registrationInput.attr("readonly",true)
}else{this.$registrationInput.attr("disabled",true);
this.$registrationInput.parent().addClass("disabled")
}this.$lookupButton.attr("disabled",true);
if(!this.validLookupDataReceived){this.lookupField.reset()
}i(this.$lookupResultContainer[0]).parent().addClass("lookup-without-registration")
},bindManualRegistrationUI:function(){var s=this.whenManualMode(this.loadMakeOptions);
this.elements.make.dropDown.on("change",this.whenLoadingAllowed(s));
this.bindLoadVehicleData(this.elements.model.dropDown);
this.bindLoadVehicleData(this.elements.engineType.input);
this.bindLoadVehicleData(this.elements.transmissionType.input);
this.bindLoadVehicleData(this.elements.yearOfManufacture.year)
},bindLoadVehicleData:function(s){s.on("change",this.whenLoadingAllowed(this.tryLoadVehiclesData).bind(this))
},isManualRegistrationEnabled:function(){return this.manualSelect.getValue()==="true"
},isLookupValidatorEnabled:function(){return this.lookupValidatorEnabled
},whenLoadingAllowed:function(t){var s=this;
return function(){if(s.isLoadingAllowed===true){t.call(s)
}}
},whenManualMode:function(t){var s=this;
return function(){if(s.state===g.manual||s.state===g.manualRegistration){t.call(s)
}}
},whenLookupMode:function(t){var s=this;
return function(){if(s.state===g.lookup||s.state===g.lookupPerformed){t.call(s)
}}
},resetManualElements:function(){var s=this.elements;
this.resetField(s.make,s.make.dropDown);
this.resetField(s.yearOfManufacture,s.yearOfManufacture.year);
this.resetField(s.transmissionType,s.transmissionType.input);
this.resetField(s.engineType,s.engineType.input);
this.resetField(s.model,s.model.dropDown);
this.resetField(s.vehicle,s.vehicle.dropDown)
},showLookup:function(){this.lookupField.reset();
this.enableLookupMode()
},showManual:function(){this.enableManualMode();
this.resetManualElements();
if(this.configuration.get().teslaAutoLookup){this.$manualContainer.find("select[name='formField.vehicle.manufacturer'] option[value='TESLA']").attr("selected","selected");
this.elements.make.dropDown.setValue("TESLA");
this.$manualContainer.find(".make-container").hide();
this.loadMakeOptions()
}},onManualLabelClicked:function(s){this.showManual();
s.preventDefault()
},onReEnableLabelClicked:function(s){this.showLookup();
this.prevSuccessValue="";
s.preventDefault()
},onNotYourVehicleLabelClicked:function(s){this.showManual();
s.preventDefault()
},enableManualMode:function(){if(this.state===g.manualRegistration||this.state===g.lookupPerformed){this.changeState(g.manualRegistration)
}else{this.changeState(g.manual)
}this.clearLookupResults();
this.disableVehicleLookup();
this.enableManualValidation();
this.clearDropDownErrors();
this.$manualContainer.show()
},enableLookupMode:function(){this.enableVehicleLookup();
this.disableManualValidation();
this.clearDropDownErrors();
this.changeState(g.lookup);
this.$manualContainer.hide()
},enableManualValidation:function(){var t=this.elements,s;
for(s in t){if(t.hasOwnProperty(s)){t[s].enableValidation()
}}},disableManualValidation:function(){var t=this.elements,s;
for(s in t){if(t.hasOwnProperty(s)){t[s].disableValidation()
}}},enableDropDown:function(s){var u=s.dropDown,t=u.getElement();
u.enable();
t.closest(".select").removeClass("disabled")
},disableDropDown:function(s){var u=s.dropDown,t=u.getElement();
u.disable();
this.resetField(s,u);
t.closest(".select").addClass("disabled")
},resetField:function(s,t){s.withoutValidation(t.setValue,t)
},disableModelAndVehicle:function(){this.disableDropDown(this.elements.model);
this.disableDropDown(this.elements.vehicle)
},clearDropDownErrors:function(){if(this.elements){this.clearErrorIn(this.elements.make);
this.clearErrorIn(this.elements.model);
this.clearErrorIn(this.elements.vehicle);
this.clearErrorIn(this.elements.yearOfManufacture)
}},loadMakeOptions:function(){var t=this.elements.make,s=t.dropDown.getValue(),u;
this.clearDropDownErrors(this.elements.make);
if(s){if(this.processingHandler){this.processingHandler.show()
}u=i.ajax(this.urls.vehicleMake,{cache:false,data:{"formField.vehicle.manufacturer":s,jcid:n.journeyContext.current()}}).always(i.proxy(this.disableModelAndVehicle,this));
this.makeOptionsResponseProcessor.process(u)
}else{this.elements.make.validate();
this.disableModelAndVehicle()
}},clearErrorIn:function(s){this.displayErrorIn(s)
},displayErrorIn:function(t,s,u){var v=t.errorPresenter;
v.clear().clearPermanent();
if(s){v.add(s)
}if(u){v.asPermanent()
}v.refresh()
},handleTeslaLookup:function(){var s=this.$manualContainer.find('select[id$=".manufacturer"]').val();
if(s=="TESLA"&&this.configuration.get().teslaAutoLookup){this.$manualContainer.find("input[type='radio'][name='formField.vehicle.engineType'][value='P']").prop("checked",true);
this.$manualContainer.find("input[type='radio'][name='formField.vehicle.transmission'][value='A']").prop("checked",true);
this.$manualContainer.find(".form-row.transType-container").hide();
this.$manualContainer.find(".form-row.engineType-container").hide()
}else{this.$manualContainer.find(".form-row.transType-container").show();
this.$manualContainer.find(".form-row.engineType-container").show()
}},onLoadMakeOptionsDone:function(s,t){Cog.fireEvent(h.sessionTimeoutAlert.name,h.sessionTimeoutAlert.events.lookup);
if(t.content.success&&t.content.values){this.clearDropDownErrors();
this.elements.model.setOptions(t.content.values,true);
this.enableDropDown(this.elements.model);
this.handleTeslaLookup()
}else{this.displayErrorIn(this.elements.make,t.content.error||this.errorMessages.noModelsFound,true)
}},onLoadMakeOptionsError:function(){Cog.fireEvent(h.sessionTimeoutAlert.name,h.sessionTimeoutAlert.events.lookup);
this.displayErrorIn(this.elements.make,this.errorMessages.connectionError,true)
},hasValue:function(t){var s=t.getValue();
return(s&&s.length)
},tryLoadVehiclesData:function(){var t=this.elements,s=this.hasValue(t.engineType.input)&&this.hasValue(t.transmissionType.input);
this.disableDropDown(this.elements.vehicle);
this.clearDropDownErrors();
if(s&&this.hasValue(t.model.dropDown)&&this.hasValue(t.yearOfManufacture.year)){this.debouncedLoadVehicleData()
}},vehicleDataXhr:null,loadVehicleData:function(){if(this.processingHandler){this.processingHandler.show()
}if(this.vehicleDataXhr){this.vehicleDataXhr.abort()
}this.vehicleDataXhr=i.ajax(this.urls.vehicleModel,{data:this.vehiclesDataParameters()});
this.vehicleDataResponseProcessor.process(this.vehicleDataXhr)
},debouncedLoadVehicleData:_.debounce(function(){this.loadVehicleData()
},250),vehiclesDataParameters:function(){return{"formField.vehicle.manufacturer":this.elements.make.dropDown.getValue(),"formField.vehicle.modelGen":this.elements.model.dropDown.getValue(),"formField.vehicle.year":this.elements.yearOfManufacture.year.getValue(),"formField.vehicle.engineType":this.elements.engineType.input.getValue(),"formField.vehicle.transmission":this.elements.transmissionType.input.getValue(),jcid:n.journeyContext.current()}
},onLoadVehicleDataDone:function(t,u){Cog.fireEvent(h.sessionTimeoutAlert.name,h.sessionTimeoutAlert.events.lookup);
if(u.content.success&&u.content.values){this.elements.vehicle.setOptions(u.content.values,true);
this.enableDropDown(this.elements.vehicle)
}else{var s=u.content.error||this.errorMessages.noVehiclesFound;
this.displayErrorIn(this.elements.vehicle,s,true)
}},onLoadVehicleDataError:function(){Cog.fireEvent(h.sessionTimeoutAlert.name,h.sessionTimeoutAlert.events.lookup);
this.displayErrorIn(this.elements.vehicle,this.errorMessages.connectionError,true)
}});
b.VehicleRegistration=r
}m.onRegister=function(r){var s=new b.VehicleRegistration(r.$scope);
r.formElement=s
};
m.onUnregister=function(r){r.formElement.unregister()
};
m.init=function(s){q=i(i.merge(q,s));
if(p&&Cog.pages.isRegistrationOptimisationEnabled()){var r=q[0].querySelector("#formField\\.vehicle\\.registration");
if(r!=null&&!r.value){r.focus()
}}Cog.fireEvent(h.registry.name,h.registry.events.initialized,{analytics:j.getDataAndConfig})
};
m.beforeInit=function(){Cog.fireEvent(h.registry.name,h.registry.events.register);
if(!p){p=true;
o()
}};
Cog.registerComponent({name:"forms.elements.vehicleRegistration",api:m,externalApi:n,sharedApi:j,requires:[{name:"forms.elements.element",apiId:"element"},{name:"events.keyCodes",apiId:"keyCodes"},{name:"forms.elements.vehicleRegistration.lookupFieldValidator",apiId:"lookupFieldValidator"},{name:"processingHandler",apiId:"processingHandler"},{name:"forms.action.button.analytics",apiId:"analytics"},{name:"forms.form.response.handlerHelper",apiId:"handlerHelper"},{name:"forms.response.responseHandlersFactory",apiId:"responseHandlersFactory"},{name:"forms.form.response.responseProcessor",apiId:"responseProcessor"},{name:"elements.journeyContext",apiId:"journeyContext"}],selector:"div.vehicle-registration-row"})
}(COGjQuery,CQ_Analytics));
Cog.component.repeatableFormElems=(function(g,w){var s={},p={name:"repeatableFormElems",events:{change:"change",remove:"remove",clearAll:"clearAll",add:"add",itemAdded:"itemAdded",forceUpdate:"forceUpdate"}},B={form:{name:"forms.form",events:{decreaseNameSuffixes:"decreaseNameSuffixes",updateNameSuffixes:"updateNameSuffixes",restoreElementsState:"restoreElementsState",clearElementsState:"clearElementsState",enableValidation:"enableValidation",disableValidation:"disableValidation"}},stateProvider:{name:"elements.stateProvider",events:{allElementsUpdated:"allElementsUpdated",stateChanged:"stateChanged"}}},i={},c={resetState:"events.resetState"},z=false;
function u(G){var F=0,E=null,H=[];
g(G).each(function(I){if(!this.visible){H.push(this)
}});
if(H.length){F=G.length;
E=H[0].$scope
}g(H).each(function(I){if(F>this.index){E=this.$scope;
F=this.index
}});
return E
}function m(E){return E.parents(".repeatingContainer").length-1
}function h(E,G,F){E.each(function(H){F.push({depth:G,index:H,$scope:g(this),visible:true})
})
}function y(F,H,G){var E=false;
g(G).each(function(I){if(F.is(this.$scope)){if(this.visible!==H){E=true
}this.visible=H
}});
if(E){Cog.fireEvent(p.name,p.events.change)
}}function l(F){var E=0;
g(F).each(function(){if(this.visible){E++
}});
return E
}function t(E){return Cog.pages.isAdditionalCarPage()&&E.find(".driverWithVariantsDl")
}function q(G,J,E,I){var F=0,H;
if(E&&!t(G)){return
}g(J).each(function(K){if(G.is(this.$scope)){F=this.index;
H=this
}});
g(J).each(function(K){if(this.index>F){this.index--
}});
H.index=J.length-1;
if(t(G)&&I){Cog.fireEvent("relationshipHandler","processInputs",{updateIndexes:true})
}}function v(F,E){if(F){E.attr("style","display: block")
}else{E.attr("style","display: none !important")
}}function A(I){var L=I.data.$scope,J=I.data.repeatedElems,G=L.find(">.config").data(),F=L.find(">.lookup-form"),E=L.find(">.lookup-form>p a.delete"),K=L.find(">.show-more-container"),H=null;
if(I.eventData.$lookupParent.find(L).length){F.detach();
g(J).each(function(M,N){if(M>0){N.visible=false
}else{N.visible=true
}});
v(l(J)>1||!G.hidefirstdelete,E);
K.toggle(u(J)!==null)
}}function C(H,E){var G=null,F;
for(F=0;
G==null&&F<H.length;
F++){if(E.is(H[F].$scope)){G=H[F]
}}return G
}function D(F,E){Cog.fireEvent(B.form.name,B.form.events.restoreElementsState,{$scope:E.$scope});
Cog.fireEvent(B.form.name,B.form.events.disableValidation,{$scope:E.$scope});
Cog.fireEvent(B.form.name,B.form.events.decreaseNameSuffixes,{$scope:F,position:E.depth,minimumIndex:E.index+1})
}function r(F){var E;
F=F||{};
for(E in F){if(F.hasOwnProperty(E)&&F[E]){return false
}}return true
}function o(H,E){var G=!H.find('.initialized select, .initialized input[type="text"]').val(),F=!H.find('.initialized input[type="radio"]:checked,.initialized input[type="checkbox"]:checked').val();
return G&&F
}function f(E,F){E.find("> .last-visible").removeClass("last-visible");
F.prev(".lookup-form").addClass("last-visible")
}function x(J){var L=J.data.repeatedElems,H=J.data.$repeatableElem,K=H.parent(".repeatingContainer"),G=J.data.$scope.find(">.config").data(),P={},O=J.data.$scope.find(">p.show-more-container"),E=J.data.$scope.find(">.lookup-form>p a.delete"),F=[],M=[],N,I;
if(K.length){if(K[0].emptyComponentStates){return
}P=K[0].componentStates||{}
}H.each(function(Q){if(o(g(this),P)){F.push(g(this))
}else{M.push(g(this))
}});
if(F.length==L.length&&!G.hideFirstContainer){F=F.slice(1)
}for(I=0;
I<F.length;
I++){N=F[I];
Cog.fireEvent(B.form.name,B.form.events.disableValidation,{$scope:N});
N.detach();
y(N,false,L);
q(N,L,G.hideFirstContainer,false)
}if(J.data.forceShow){for(I=0;
I<M.length;
I++){N=M[I];
Cog.fireEvent(B.form.name,B.form.events.enableValidation,{$scope:N});
N.insertBefore(O);
y(N,true,L)
}}g(L).each(function(){Cog.fireEvent(B.form.name,B.form.events.updateNameSuffixes,{$scope:this.$scope,position:this.depth,index:this.index})
});
f(J.data.$scope,O);
E=J.data.$scope.find(">.lookup-form>p a.delete");
v(l(L)>1||!G.hidefirstdelete,E);
O.toggle(u(L)!==null);
if(G.additionalClasses&&!J.data.$scope.hasClass(G.additionalClasses)){J.data.$scope.addClass(G.additionalClasses)
}}function n(G){var F=9999,E=-9999;
G.each(function(){var H=parseInt(g(this).attr("tabindex"),10);
if(H>E){E=H
}if(H<F){F=H
}});
return{min:F,max:E}
}function j(F){var G=g(F).closest(".repeatingContainer").find("[tabindex]"),E=n(G);
G.each(function(H){g(this).attr("tabindex",E.min+H)
})
}function d(E){this.emptyComponentStates=_.isEmpty(E.eventData.state.componentStates);
if(!this.emptyComponentStates){this.componentStates=E.eventData.state.componentStates
}if(this.pendingForceUpdate){window.setTimeout(function(){x(this.pendingForceUpdate);
this.pendingForceUpdate=null;
Cog.ghostTextHelper.removeGreyStyleFromLabels()
}.bind(this),1)
}}function b(L){var Q=g(this),I=Q.find(">.lookup-form"),O=Q.find(">p.show-more-container"),H=O.find(">a.show-more"),E=Q.find(">.lookup-form>p a.delete"),G=Q.find(">.config").data(),J=m(I),N,M=[],K,F,P;
if(window.CQ!==undefined&&window.CQ.WCM!==undefined&&window.CQ.WCM.isEditMode()){return
}h(I,J,M);
Cog.fireEvent("abTesting","domUpdated",{scope:g(I[0])});
Cog.addListener2(p.name,c.resetState,A,{data:{$scope:Q,repeatedElems:I}});
Cog.addListener2(B.stateProvider.name,B.stateProvider.events.stateChanged,g.proxy(d,this));
Cog.addListener2(B.stateProvider.name,B.stateProvider.events.allElementsUpdated,x,{data:{$scope:Q,repeatedElems:M,$repeatableElem:I}});
Cog.addListener2(p.name,p.events.forceUpdate,function(T){var S={data:{$scope:Q,repeatedElems:M,$repeatableElem:I,forceShow:true}},U=Q.find("select").first().attr("id"),R=U?U.substring(U.indexOf("_")):"";
if(R.indexOf(T.eventData.suffix)==0&&R!=T.eventData.suffix){I.parent(".repeatingContainer")[0].pendingForceUpdate=S
}else{if(U&&!Q.has(".driverWithVariants,.driverWithVariantsDl").length&&T.eventData.suffix==null){I.parent(".repeatingContainer")[0].pendingForceUpdate=S
}}}.bind(this));
K=function(R){var S=g(this);
if(R&&R.eventData&&R.eventData.requiredClass){if(!Q.hasClass(R.eventData.requiredClass)){return
}}Q.find("input, select").filter(":visible").trigger("focusout");
N=u(M);
if(N){Cog.fireEvent("abTesting","domUpdated",{scope:N});
Cog.fireEvent(B.form.name,B.form.events.enableValidation,{$scope:N});
N.insertBefore(O);
y(N,true,M);
f(Q,O);
Cog.fireEvent(p.name,p.events.itemAdded,{origin:Q,item:N});
E.show();
if(!u(M)){O.hide()
}}j(this)
};
P=function(R){if(N){N.find("input,select").first().focus()
}};
H.on("mousedown",K);
H.on("keydown",function(R){var S;
if(R.keyCode===13){S=g.proxy(K,this,R)
}else{if(R.keyCode===9){S=g.proxy(P,this,R)
}}S()
});
F=function(U){var R=(U.eventData&&U.eventData.$scope)?U.eventData.$scope:g(this),V=R.closest(".lookup-form"),T=R.closest(".repeatingContainer").find(">.config").data(),S=C(M,V);
if(!S){return
}D(Q,S);
V.detach();
f(Q,O);
y(V,false,M);
if(!U.skipReindex){q(V,M,T.hideFirstContainer,true);
g(M).each(function(){Cog.fireEvent(B.form.name,B.form.events.clearElementsState,{$scope:this.$scope});
Cog.fireEvent(B.form.name,B.form.events.updateNameSuffixes,{$scope:this.$scope,position:this.depth,index:this.index})
})
}v(l(M)>1||!T.hidefirstdelete,E);
O.toggle(u(M)!==null);
Cog.fireEvent("repeatableFormElems",c.resetState,{$lookupParent:V});
if(Modernizr.isios){window.scrollTo(0,Q.find(".show-more").offset().top-100)
}};
E.on("mousedown",F);
E.on("keypress",function(R){if(R.keyCode===13){var S=g.proxy(F,this,R);
S()
}});
Cog.addListener2(p.name,p.events.add,K);
Cog.addListener2(p.name,p.events.remove,F);
Cog.addListener2(p.name,p.events.clearAll,function(S){var R=0;
if(S.eventData&&S.eventData.$scope&&S.eventData.$scope.has(Q).length){_.eachRight(M,function(T){if(T.visible&&T.index>0){F({eventData:{$scope:T.$scope},skipReindex:true})
}})
}g(M).each(function(){this.index=R;
R++;
Cog.fireEvent("forms.form","updateNameSuffixes",{$scope:this.$scope,position:this.depth,index:this.index})
})
})
}s.init=function(E){E.each(b)
};
Cog.register({name:"repeatableFormElems",api:s,selector:"div.repeatingContainer"})
}(COGjQuery,document));
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},i={formElement:null},f={WebserviceDrivenConditionalContainer:null},d=false;
function j(){var l=Cog.Type.extend(i.formElement.Element,{hiddenClass:"hidden",processState:function(m){if(m){this.hideContainers(m)
}},hideContainers:function(n){var m=this.$scope;
h.each(n.actions,function(o,p){var q=m.find(".container-function."+o);
if(q&&!p){q.remove();
Cog.finalize(q)
}else{q.removeClass("hidden")
}})
}});
f.WebserviceDrivenConditionalContainer=l
}g.onRegister=function(l){l.element=new f.WebserviceDrivenConditionalContainer(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
j()
}};
Cog.registerComponent({name:"forms.webserviceDrivenConditionalContainer",api:g,externalApi:i,selector:"div.webserviceDrivenConditionalContainer",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(i,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null},f={VehicleRegistrationDisplayInfo:null},d=false;
function h(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.createBuilder(this.$scope).initializedOnRender(false).build()
},processState:function(m){if(m){this.view.render(m||{})
}}});
f.VehicleRegistrationDisplayInfo=l
}g.onRegister=function(l){l.element=new f.VehicleRegistrationDisplayInfo(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
h()
}};
Cog.registerComponent({name:"forms.elements.vehicleRegistrationDisplayInfo",api:g,externalApi:j,selector:"div.vehicleRegistrationDetailsDisplayInfo",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(g,l,n){var i={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},m=false,j={element:null,radioBlur:null},h={},b={Radio:null};
function f(){var o=Cog.Type.extend(j.element.Element,{input:null,initialize:function(){o.superclass.initialize.call(this);
this.input=this.fields.findAndCreate("input",this.$scope);
if(this.input){this.setDefaultSelection();
var q=this.input.$element.siblings("label"),p=new n(q);
q.on("click",g.noop);
q.on("mousedown",g.proxy(this.mousedownHandle,this));
p.on("tap",g.proxy(this.mousedownHandle,this));
this.input.on("focusout",g.proxy(this.validate,this));
this.input.on("change",g.proxy(this.validate,this));
this.input.on("click",g.proxy(this.focusRadio,this));
this.input.on("mousedown touchstart",g.proxy(this.mousedownHandle,this));
this.input.nameChangedHandler(this.onRadioGroupNameChanged,this);
this.input.$radioInputs=this.$scope.find('input[type="radio"]');
this.initializeValidateNow(this.validate)
}},mousedownHandle:function(p){p.target.click();
j.radioBlur.preventBlur(this.input.$radioInputs,p)
},focusRadio:function(){var p=this.input.$element.filter(":checked");
if(p){p.focus()
}},onRadioGroupNameChanged:function(){var p=this.input.getName(),q=this.input.$radioInputs,r;
q.each(function(s){r=s+1;
g(this).attr("name",p);
g(this).attr("id",p+"-"+r);
g(this).next(".field-label").attr("for",p+"-"+r)
})
},setDefaultSelection:function(){var p=this.$scope.find(".radio-row-options").data("default-selection"),q=g(this.input.getElement()).eq(p);
if(!this.input.getValue()&&p!=="none"){if(q){this.input.setValue(q.val())
}}}});
b.Radio=o
}function c(o){var p=o.find("input:checked");
return{value:p.val(),origin:p.attr("name")}
}h.getDataAndConfig=function(){var o=g("div.multiradioWithContainers div.radio");
return b.Radio.superclass.getDataAndConfig(o,c)
};
i.onRegister=function(o){var p=new b.Radio(o.$scope);
o.formElement=p
};
i.onUnregister=function(o){o.formElement.unregister()
};
i.init=function(o){Cog.fireEvent(d.registry.name,d.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!m){m=true;
f()
}};
Cog.registerComponent({name:"forms.elements.multiradioWithContainers.radio",api:i,externalApi:j,sharedApi:h,requires:[{name:"forms.elements.element",apiId:"element"},"forms.elementsRegistry",{name:"forms.elements.radioBlur",apiId:"radioBlur"}],selector:"div.multiradioWithContainers div.radio"})
}(COGjQuery,document,Hammer));
(function(i,c){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{restoreElementsState:"restoreElementsState",enableValidation:"enableValidation",disableValidation:"disableValidation"}}},f=false,j={element:null},g={MultiradioWithContainers:null};
function b(){var l=Cog.Type.extend(j.element.Element,{radio1:null,radio1Value:null,radio2:null,radio2Value:null,containers:null,initialize:function(){l.superclass.initialize.call(this);
this.radio1=this.fields.findAndCreate(".radio1 .radio-row-options input",this.$scope);
this.radio2=this.fields.findAndCreate(".radio2 .radio-row-options input",this.$scope);
if(this.radio1!=null&&this.radio2!=null){this.initializeContainers();
this.selectContainer();
this.radio1.on("change",i.proxy(this.selectContainer,this));
this.radio2.on("change",i.proxy(this.selectContainer,this))
}this.disableValidation();
this.lockValidation()
},processState:function(m){if(this.radio1!=null&&this.radio2!=null){this.selectContainer()
}},selectContainer:function(){var n,m;
this.radio1Value=this.radio1.getValue();
this.radio2Value=this.radio2.getValue();
m=this.radio1Value+this.radio2Value;
n=this.containers[m];
if(this.radio1Value&&this.radio2Value&&n){this.detachContainers(n,m);
this.appendContainer(n)
}},detachContainers:function(n,m){var p,o;
for(o in this.containers){if(this.containers.hasOwnProperty(o)&&o!==m){p=this.containers[o];
p.detach();
Cog.fireEvent(d.form.name,d.form.events.restoreElementsState,{$scope:p});
Cog.fireEvent(d.form.name,d.form.events.disableValidation,{$scope:p})
}}},appendContainer:function(m){m.appendTo(this.$scope);
m.removeClass("hidden");
Cog.fireEvent(d.form.name,d.form.events.enableValidation,{$scope:m})
},initializeContainers:function(){var o=this.$scope.find(".container"),p,n,m;
this.containers={};
for(m=0;
m<o.length;
m++){p=o.eq(m);
n=p.data("name");
if(p.length&&n){p.detach();
this.containers[n]=p
}}}});
g.MultiradioWithContainers=l
}h.onRegister=function(l){var m=new g.MultiradioWithContainers(l.$scope);
l.formElement=m
};
h.onUnregister=function(l){l.formElement.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
b()
}};
Cog.registerComponent({name:"forms.elements.multiradioWithContainers.multiradioWithContainers",api:h,externalApi:j,requires:[{name:"forms.elements.element",apiId:"element"},"forms.elementsRegistry"],selector:"div.multiradioWithContainers"})
}(COGjQuery,document));
Cog.component.premiumPage=Cog.component.premiumPage||{};
(function(h,m,d){var j={},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},sessionTimeoutAlert:{name:"sessionTimeoutAlert",events:{lookup:"lookup"}}},q={addressLabel:".styled-select"},p=false,i={},l={formElement:null,analytics:null,handlerHelper:null,responseHandlersFactory:null,responseProcessor:null,addressLookupValidator:null,elementsFinder:null,keyCodes:null,manualAddressLookup:null,manualAddressLookupValidator:null,journeyContext:null},b={AddressLookup:null},g=[],o="";
function c(r){var s=r.find('input[type="text"]');
return{postcode:{value:s.val(),origin:s.attr("id")}}
}i.getDataAndConfig=function(){return b.AddressLookup.superclass.getDataAndConfig(g,c)
};
function n(){var r=Cog.Type.extend(l.formElement.Element,{view:null,eventManager:null,$button:null,postCodeInput:null,$selectAddressContainer:null,$selectAddress:null,errorPresenter:null,processingHandler:null,selectedAddress:null,addrValidationMessage:null,responseProcessor:null,lookupSuccessHandler:null,lookupErrorHandler:null,lookupDataReceived:null,addressSelected:null,analyticsUci:null,doValidate:true,isValidAddress:false,autoLookup:null,lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",changeEvent:"setLastFieldTracking"},initialize:function(){l.manualAddressLookup.extend(this);
r.superclass.initialize.call(this);
this.responseProcessor=this.initializeResponseProcessor();
this.view=this.viewFactory.create(this.$scope);
this.addValidator(new l.addressLookupValidator.AddressLookupValidator(this,{isEnabledDelegate:this.isLookupValidatorEnabled,isLookedUpDelegate:this.isLookedUp,isSelectedDelegate:this.isSelected,scope:this}));
Cog.addListener2("components","validateNow",this.validateNow.bind(this))
},initializeResponseProcessor:function(){var v=l.responseHandlersFactory.ResponseHandlersFactory.instance(),t=v.journeyAndClearTrackingCookieRedirect(),s=l.handlerHelper.HandlerHelper.instance(),u=h.proxy(this.delayDelegate,this);
this.lookupSuccessHandler=s.asHandler(this.onLookupDataSuccess,this);
this.lookupErrorHandler=s.asHandler(this.onLookupDataError,this);
t.addSuccessHandler(this.lookupSuccessHandler);
t.addErrorHandler(this.lookupErrorHandler);
return new l.responseProcessor.ResponseProcessor(t,u)
},findDomElements:function(){this.postCodeInput=this.fields.findAndCreate(".post-code-textbox",this.$scope,true);
this.$button=this.$scope.find(".post-code-lookup");
this.$selectAddressContainer=this.$scope.find(".address-select-row");
this.$selectAddress=this.$selectAddressContainer.find("select");
this.manualFindDomElements();
this.autoLookup=!!this.$scope.find(".componentConfiguration").data("auto-lookup")
},bindUI:function(){this.$button.on({click:this.lookupButtonClick.bind(this),mousedown:this.buttonMouseDown.bind(this),keydown:this.lookupButtonKeyDown.bind(this)});
this.postCodeInput.on({focus:this.inputPostCodeFocus.bind(this),change:this.inputPostCodeChange.bind(this),keydown:this.onKeyDown.bind(this),focusout:this.autoLookup?this.lookupButtonClick.bind(this):this.performValidation.bind(this)});
this.$selectAddress.on({change:this.contextProxy(this.selectChange,this),keyup:this.contextProxy(this.selectChange,this)});
this.manualBindUI()
},bindEvents:function(){this.eventsManager.on("forms.validation.errorPresenter","update").execute(this.autoLookupOnValidation).withScope(this).bind()
},afterRender:function(){this.findDomElements();
this.bindUI();
this.bindEvents();
this.errorPresenter=this.getErrorPresenter();
this.processingHandler=l.processingHandler(this.$scope);
this.analyticsUci=this.$scope.find(".analytics-last-field:first-child").data("analytics-uci");
this.manualAfterRender()
},processState:function(s){if(s){this.view.render(s);
this.selectedAddress=s.address;
this.items=s.items;
this.lookupDataReceived=true;
this.addressSelected=true;
this.afterRender();
this.processAddressSet(s.address)
}this.manualProcessState(s)
},processAddressSet:function(s){if(s){s=s.replace("&amp;","&");
if(s.contains(";")){this.$selectAddress.val(s)
}else{var t=_.filter(this.items,function(u){var w=u.text.toLowerCase(),v=s.toLowerCase();
return w===v
})[0].value;
this.$selectAddress.val(t)
}h(".address-lookup-row").addClass("retrieved");
h(".postcode-col input, .postcode-col button, .postcode-col select").attr("tabindex","-1");
h(".postcode-col input").attr("readonly",true);
h(".postcode-col button").attr("disabled",true);
h(".postcode-col select option:not(:selected)").attr("disabled",true);
Cog.addListener("elements.stateProvider","allElementsUpdated",function(){h(".manual-option").attr("disabled",true)
})
}},onKeyDown:function(t){var s=t.keyCode||t.which;
if(s===l.keyCodes.tab){this.doValidate=false
}},buttonMouseDown:function(s){this.doValidate=false
},lookupButtonClick:function(t){var s=t.type;
this.$selectAddress.change();
this.performLookup(s);
t.preventDefault()
},lookupButtonKeyDown:function(u){var s=this.postCodeInput.getValue(),t=u.keyCode||u.which;
if(l.keyCodes.tab&&u.shiftKey){return
}if(s){this.performLookup()
}else{this.validate()
}},inputPostCodeChange:function(s){this.clearData();
this.$selectAddressContainer.addClass("hidden")
},inputPostCodeFocus:function(s){this.doValidate=true;
this.errorPresenter.clearAll();
this.errorPresenter.refresh()
},selectChange:function(s,t){this.selectedAddress=s.value;
this.toggleManualAddress();
if(!t.isTrigger){this.validateAddress()
}},performLookup:function(t){var s=this.postCodeInput.getValue();
if(s){if(this.currentPostcode!==s){this.getAndUpdateData();
this.currentPostcode=s
}else{if(t=="focusout"){this.doValidate=true;
this.performValidation()
}}}else{this.hideAddressContainer();
this.doValidate=true;
this.performValidation()
}this.trackClick();
if(this.postCodeInput.$element.is(":visible")){this.$selectAddressContainer.find("select").focus()
}},isLookupValidatorEnabled:function(){return this.doValidate
},performValidation:function(s){if(this.doValidate){if(this.postCodeInput.getValue()){this.validateAddress();
this.validateManualAddress()
}else{this.validate()
}}this.doValidate=true
},validateAddress:function(){if(this.selectedAddress===undefined||this.selectedAddress===""){this.addressSelected=false;
if(this.selectedAddress===""){this.displayError(this.configuration.get().addressValidationMessage)
}else{this.displayError(this.configuration.get().lookupValidationMessage)
}if(this.$selectAddress.children("option").length>1){this.$selectAddressContainer.removeClass("hidden")
}}else{if(this.isManualOptionSelected()){this.addressSelected=false;
this.enableManualAddress()
}else{this.addressSelected=true;
this.clearErrors()
}}},validateNow:function(s){if(this.shouldValidateNow(s)){this.doValidate=true;
this.performValidation()
}},isLookedUp:function(){return this.lookupDataReceived
},isSelected:function(){return this.addressSelected
},autoLookupOnValidation:function(){if(o&&o!=this.postCodeInput.getValue()){this.$selectAddressContainer.removeClass("hidden");
this.getAndUpdateData(true)
}},hideAddressContainer:function(){if(!this.$selectAddressContainer.hasClass("hidden")){this.$selectAddressContainer.addClass("hidden");
this.$selectAddressContainer.parent().find(".row-container").removeClass("filled");
this.$selectAddress.val("");
this.$selectAddress.change()
}},displayError:function(s){this.hideAddressContainer();
this.errorPresenter.clear();
this.errorPresenter.add(s);
this.errorPresenter.refresh()
},clearErrors:function(){this.errorPresenter.clear();
this.errorPresenter.refresh()
},getAndUpdateData:function(u){var t,s={auto:u};
if(this.processingHandler){this.processingHandler.show()
}t=h.getJSON(this.configuration.get().address,{t:new Date().getTime(),path:this.configuration.get().ref,"formField.addressPostcode":this.postCodeInput.getValue(),jcid:l.journeyContext.current()});
this.lookupSuccessHandler.setContext(s);
this.lookupErrorHandler.setContext(s);
this.responseProcessor.process(t);
this.doValidate=false;
this.currentPostcode=this.postCodeInput.getValue();
this.disableManualAddress()
},delayDelegate:function(){return this.processingHandler?this.processingHandler.hide():null
},onLookupDataSuccess:function(t,u){var v=t.auto,s;
Cog.fireEvent(f.sessionTimeoutAlert.name,f.sessionTimeoutAlert.events.lookup);
this.lookupDataReceived=true;
if(u.error===undefined&&u.success===undefined){if(!v){this.errorPresenter.clear();
this.errorPresenter.refresh()
}this.updateData(u.content,v);
this.$selectAddressContainer.removeClass("hidden");
this.$selectAddressContainer.find("select").focus();
this.$selectAddressContainer.parent().find(".row-container").addClass("filled");
this.doValidate=true;
this.currentPostcode=this.postCodeInput.getValue();
o=this.postCodeInput.getValue()
}else{this.displayError(u.error||this.configuration.get().unrecognizedErrorMessage);
this.currentPostcode="";
if(!v){s=this.postCodeInput.getValue();
this.trackFailure(u,s,this.analyticsUci)
}}},onLookupDataError:function(t){var s;
Cog.fireEvent(f.sessionTimeoutAlert.name,f.sessionTimeoutAlert.events.lookup);
this.lookupDataReceived=false;
this.displayError(this.configuration.get().connectionErrorMessage);
this.currentPostcode="";
if(!t.auto){s=this.postCodeInput.getValue();
this.trackFailure(null,s,this.analyticsUci)
}},updateData:function(u,v){var t=this.$selectAddress,s=t.val();
t.children(":not(:first)").remove();
this.addManualOption();
h.each(u.values,function(w,x){var y=h("<option></option>").attr("value",x.value).text(x.text);
if(v&&this.isSameAddress(x)){y.attr("selected","selected");
this.setSelectLabel(x.text)
}t.append(y)
}.bind(this));
t.val(s);
this.addAddress()
},clearData:function(){var s=this.$selectAddress.children('[value=""]').html();
this.$selectAddress.children().not('[value=""]').remove();
this.$selectAddress.prev().html(s);
this.currentPostcode=""
},isSameAddress:function(u){var t=this.selectedAddress,v=this.getAddressText(t),s=this.getAddressText(u.value);
if(v===s){return true
}else{return false
}},setSelectLabel:function(s){this.$scope.find(q.addressLabel).html(s)
},getAddressText:function(t){if(t.indexOf(";")!==-1){var s=[];
s=t.split(";");
return s[1]
}},setLastFieldTracking:function(s){Cog.fireEvent(this.lastFieldTracking.moduleName,this.lastFieldTracking.changeEvent,{lastFieldTracking:s})
},trackClick:function(){var t,s;
if(d){s=_.filter(d.DlgMgr.mapping,function(u){return u.scVar==="eventdata.events.addressLookup"
});
if(_.isArray(s)&&s.length>0){t=h('<a href="'+this.configuration.get().address+'" />').get(0);
d.record({event:"addressLookup",values:{},collect:false,options:{obj:t,defaultLinkType:"o"},componentPath:"dlg/qnb/core/components/addressLookup"})
}}},trackFailure:function(w,s,u){var y=u.split("|"),t,x,v,z;
if(!d||!u){return
}z=_.filter(d.DlgMgr.mapping,function(A){return A.scVar==="eventdata.events.addressLookupFailure"
});
if(_.isArray(z)&&z.length>0){t=y[0]+"|"+y[2]+"|";
x=t+"Error = invalid format";
v=h('<a href="'+this.configuration.get().address+'" />').get(0);
if(w&&w.serviceReturnCode){x=t+"Error = "+w.serviceReturnCode.returnCode
}d.record({event:"addressLookupFailure",values:{addressLookupError:x,failedAddressReg:s},collect:false,options:{obj:v,defaultLinkType:"o"},componentPath:"dlg/qnb/core/components/addressLookup"})
}}});
b.AddressLookup=r
}j.onRegister=function(r){r.element=new b.AddressLookup(r.$scope)
};
j.onUnregister=function(r){r.element.unregister()
};
j.init=function(r){g=h(h.merge(g,r));
Cog.fireEvent(f.registry.name,f.registry.events.initialized,{analytics:i.getDataAndConfig})
};
j.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
if(!p){p=true;
n()
}};
Cog.registerComponent({name:"addressLookup",api:j,sharedApi:i,externalApi:l,selector:"div.addressLookup",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"forms.validation.errorPresenter",apiId:"errorPresenter"},{name:"forms.elements.addressLookup.addressLookupValidator",apiId:"addressLookupValidator"},{name:"processingHandler",apiId:"processingHandler"},{name:"commons.eventsUtil",apiId:"eventsUtil"},{name:"forms.action.button.analytics",apiId:"analytics"},{name:"forms.form.response.handlerHelper",apiId:"handlerHelper"},{name:"forms.response.responseHandlersFactory",apiId:"responseHandlersFactory"},{name:"forms.form.response.responseProcessor",apiId:"responseProcessor"},{name:"forms.form.elementsFinder",apiId:"elementsFinder"},{name:"events.keyCodes",apiId:"keyCodes"},{name:"addressLookup.manualAddressLookup",apiId:"manualAddressLookup"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document,window.CQ_Analytics));
(function(f,c){var d={},b={preventBlur:null};
b.preventBlur=function(g,h){if(g.is(":focus")){h.preventDefault();
h.stopImmediatePropagation()
}};
Cog.registerStatic({name:"forms.elements.radioBlur",api:d,sharedApi:b})
}(COGjQuery,document));
(function(g,c){var f={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},h={nBox:null},b={errorLightbox:null};
b.lightboxWithError=function(l){var i=l.$scope.find("input").val(),j={$content:l.lightboxLink,closable:true,isAjaxRequest:true,handler:false,shouldScroll:false};
if(f.isInteger(i)&&i>=l.ValueValidationThreshold){h.nBox.create(j)
}};
f.isInteger=function(i){return !isNaN(i)&&parseInt(Number(i),10)==i&&!isNaN(parseInt(i,10))
};
Cog.registerStatic({name:"forms.elements.errorLightbox",api:f,externalApi:h,sharedApi:b,requires:[{name:"nBox",apiId:"nBox"}],selector:"div.textInput"})
}(COGjQuery,document));
(function(l,u,o){var m={},x=false,s=null,w=false,p=false,c=false,y=false,f=false,r,q={moduleName:"fieldsetWithAccordion",openEvent:"open",additionalButtonClickedEvent:"additionalButtonClickedEvent",scrollAnimationEndEvent:"scrollAnimationEnd"},n={keyCodes:null,keyExecutor:null,pageScroller:null,customStorage:null},b={accordionOpen:"accordionOpen"},g={moduleName:"analytics.lastFieldInteracted",changeEvent:"setLastFieldTracking"},i={FieldsetWithAccordion:null},h=function(){Cog.fireEvent(q.moduleName,q.openEvent,{$accordion:l(this),hideButtonNext:true})
},v=".fieldsetWithAccordion, .snippetReference:has(> .fieldsetWithAccordion)",t={};
function d(B){Cog.fireEvent(g.moduleName,g.changeEvent,{lastFieldTracking:B})
}function j(){if(!f){var B=l('<a href="" />').get(0);
o.record({event:"firstAccordionNextClick",values:{},collect:false,options:{obj:B,defaultLinkType:"o"},componentPath:"dlg/core/components/fieldsetWithAccordionAnalytics"});
f=true
}}function z(){i.FieldsetWithAccordion=Cog.Type.define({$accordion:null,$proceedButton:null,$hideButton:null,$formStep:null,$wrappedLabels:null,constructor:function(B){this.$accordion=B;
this.$proceedButton=this.$accordion.find(".cs-next-update");
this.$editButton=this.$accordion.find(".section-toggle-edit");
this.$hideButton=this.$accordion.find(".section-toggle-hide");
this.$formStep=this.$accordion.find(".form-step");
this.$wrappedLabels=this.$accordion.find(".form-row .row-container .label-help-container .label");
this.$additionalButton=this.$accordion.find(".accordion-additional-button");
this.bindClick(this.$proceedButton,this.proceedButtonClick);
this.bindClick(this.$editButton,this.editButtonClick);
this.bindClick(this.$hideButton,this.proceedButtonClick);
this.bindClick(this.$additionalButton,this.additionalButtonClick);
Cog.addListener2("elements.stateProvider","allElementsUpdated",this.onAllElementsUpdated.bind(this));
Cog.addListener2(q.moduleName,q.openEvent,this.onOpenAccordion.bind(this))
},bindClick:function(C,B){C.on("click",B.bind(this));
C.keydown(n.keyExecutor.onKey(B.bind(this),[n.keyCodes.enter]))
},getNextAccordion:function(){var B;
if(this.$accordion.parent(".snippetReference").length>0&&this.$accordion.nextAll(v).length===0){B=this.$accordion.parent().nextAll(v).first()
}else{B=this.$accordion.nextAll(v).first()
}if(B.is(".snippetReference")){return B.children(".fieldsetWithAccordion:first")
}return B
},slideToView:function(B,C){if((p&&!this.$accordion.hasClass("first-fieldset"))||this.$editButton.is(":visible")){this.$editButton.hide();
this.$hideButton.show()
}this.$accordion.find(".form-step-content").stop(true,true).slideDown("normal",function(){this.$accordion.find(".form-step").removeClass("step-hide");
if(B){n.pageScroller.basicScroller.scrollTo(this.$accordion.find(".error").first())
}else{if(C){setTimeout(function(){n.pageScroller.basicScroller.scrollTo(this.$accordion);
d(false);
this.$formStep.find(".form-step-content [tabindex]").first().focus();
d(true)
}.bind(this),100)
}}this.alignWrappedLabels();
Cog.fireEvent("formSidebar","/sidebarChange/");
Cog.fireEvent("helpInformation","/alignTooltips/")
}.bind(this));
this.showSubmitButton()
},editButtonClick:function(B){this.slideToView()
},additionalButtonClick:function(B){var C=this.$additionalButton.find("button");
B.preventDefault();
Cog.fireEvent(q.moduleName,q.additionalButtonClickedEvent,{$button:C,state:C.data("current-state")})
},onOpenAccordion:function(C){var B;
if(this.$accordion.is(C.eventData.$accordion)){this.slideToView(C.eventData.scrollToError,C.eventData.scrollToAccordion);
B=this.$accordion.find("legend a").text();
Cog.fireEvent(q.moduleName,b.accordionOpen,B)
}},alignWrappedLabels:function(){var B;
if(window.matchMedia("(min-width: 990px)").matches){for(B=0;
B<=this.$wrappedLabels.length;
B++){if(parseInt(l(this.$wrappedLabels[B]).css("line-height"),10)<l(this.$wrappedLabels[B]).find("p").height()){l(this.$wrappedLabels[B]).css("padding-top",0)
}}}},showSubmitButton:function(){if(this.isChurchillOrDirectline()&&this.$accordion.hasClass("last-fieldset")){if(this.isMobile()){l("[data-handler-name='Your Details']").css("display","block");
l("[data-handler-name='Quick Quote - Your Details']").css("display","block")
}else{l("[data-handler-name='Your Details']").css("display","inline-block");
l("[data-handler-name='Quick Quote - Your Details']").css("display","inline-block")
}}},isChurchillOrDirectline:function(){return Cog.pages.isChurchillDetailsPage()||Cog.pages.isDirectlineDetailsPage()
},isMobile:function(){return window.matchMedia("(max-width: 767px)").matches
},renderUpdateButton:function(){var B=this.$proceedButton.data();
if(B){this.$proceedButton.removeClass(B.nextButtonStyle).addClass(B.updateStyle).text(B.updateLabel)
}},collapse:function(){this.renderUpdateButton();
this.$editButton.show();
this.$hideButton.hide();
this.$accordion.find(".form-step-content").stop(true,true).slideUp("normal",function(){this.$accordion.find(".form-step").addClass("step-hide")
}.bind(this))
},proceedButtonClick:function(C){var B=this.getNextAccordion();
this.$accordion.find(".form-row:last").addClass("last");
C.preventDefault();
Cog.fireEvent("components","validateNow",{$scope:this.$accordion});
if(x){setTimeout(this.expandNextOrScrollToError.bind(this,B),500)
}else{this.$proceedButton.hide();
Cog.fireEvent(q.moduleName,q.openEvent,{$accordion:B,scrollToAccordion:true})
}j()
},expandNextOrScrollToError:function(B){if(this.$accordion.find(".error").length===0){this.$formStep.attr("data-section-passed","true");
this.collapse();
if(B.find(".form-step").attr("data-section-passed")!="true"){Cog.fireEvent(q.moduleName,q.openEvent,{$accordion:B,scrollToAccordion:true})
}}else{this.$formStep.attr("data-section-passed","false");
n.pageScroller.basicScroller.scrollTo(this.$formStep.find(".error").first(),200)
}},collapseIfValid:function(){Cog.fireEvent("components","validateNow",{$scope:this.$accordion,skipOnError:true});
if(this.$accordion.find(".error").length){this.renderUpdateButton();
this.$formStep.removeClass("step-hide");
this.$accordion.show()
}else{this.$formStep.attr("data-section-passed","true");
this.renderUpdateButton();
if(!this.$hideButton.is(":visible")){this.$editButton.show()
}this.showSubmitButton()
}},configureAdditionalCarsCollapsible:function(){var B=l(".fieldsetWithAccordion.first-fieldset .userData.filled").length>2;
if(B){this.collapseIfValid()
}else{if(this.$accordion.hasClass("first-fieldset")){this.$formStep.removeClass("step-hide");
this.$accordion.show()
}}},configureCollapsible:function(){var B=l(".fieldsetWithAccordion").has(".userData.filled").length>=l(".fieldsetWithAccordion").length-1;
if(p){if(this.$accordion.hasClass("first-fieldset")){this.$formStep.removeClass("step-hide");
this.$accordion.show()
}else{this.renderUpdateButton()
}}else{if(c){this.configureAdditionalCarsCollapsible()
}else{if(!B&&this.$accordion.hasClass("first-fieldset")){this.$formStep.removeClass("step-hide");
this.$accordion.show()
}else{if(B){this.collapseIfValid()
}}}}},onAllElementsUpdated:function(){setTimeout(function(){var B=this.$accordion;
if(x){this.configureCollapsible()
}else{if(p){this.$formStep.removeClass("step-hide");
this.$accordion.show();
this.$proceedButton.hide();
this.showSubmitButton()
}else{if(B.hasClass("first-fieldset")){this.$formStep.removeClass("step-hide");
B.show();
if(this.getNextAccordion().find(".section.userData").length){this.$proceedButton.hide()
}}else{if(B.find(".section.userData").length){this.$formStep.removeClass("step-hide");
B.show();
if(this.getNextAccordion().find(".section.userData").length){this.$proceedButton.hide()
}this.showSubmitButton()
}}}}this.alignWrappedLabels()
}.bind(this),0)
}})
}function A(B){var C=new i.FieldsetWithAccordion(B)
}m.clickAdditionalButtonIfStateMatches=function(B){l(".accordion-additional-button").each(function(){var C=l(this).find("button");
if(C.data("current-state")==B){C.click()
}})
};
t.formValidationFailed=function(C,D){var B;
C.each(function(){setTimeout(function(){if(l(this).find(".error").length){if(!B){B=true;
Cog.fireEvent(q.moduleName,q.openEvent,{$accordion:l(this),scrollToError:B})
}else{Cog.fireEvent(q.moduleName,q.openEvent,{$accordion:l(this),scrollToError:false})
}}}.bind(this),500)
})
};
t.init=function(B){if(!w){x=B.parents("form").data("collapsibleSections");
B.first().addClass("first-fieldset");
B.last().addClass("last-fieldset");
B.each(function(){A(l(this))
});
Cog.addListener2("forms.form","validationFailed",t.formValidationFailed.bind(t,B));
if(n.customStorage.getItem("qpmQuoteRetrieve")===true){n.customStorage.putItem("firstAccordionSentEvent",true)
}if(B.hasClass("fieldsetWithAccordion")&&!n.customStorage.getItem("firstAccordionSentEvent")){r=B[0].querySelector("legend a").text;
Cog.fireEvent(q.moduleName,b.accordionOpen,r);
n.customStorage.putItem("firstAccordionSentEvent",true)
}if(Cog.pages.isAggregatorJourney()){n.customStorage.putItem("firstAccordionSentEvent",true)
}}if(Cog.statics.wcmMode.isEdit()){l("[data-handler-name='Your Details']").show();
l("[data-handler-name='Quick Quote - Your Details']").show()
}w=true
};
t.beforeInit=function(){if(i.FieldsetWithAccordion==null){p=Cog.pages.isQuickQuotePage();
c=Cog.pages.isAdditionalCarPage();
z()
}};
Cog.register({name:"forms.fieldsetWithAccordion",api:t,sharedApi:m,externalApi:n,selector:"div.fieldsetWithAccordion",requires:[{name:"commons.customStorage",apiId:"customStorage"},{name:"events.keyCodes",apiId:"keyCodes"},{name:"events.keyExecutor",apiId:"keyExecutor"},{name:"forms.form.pageScroller",apiId:"pageScroller"},{name:"elements.stateProvider",apiId:"stateProvider"}]})
}(COGjQuery,document,window.CQ_Analytics));
(function(g,c){var f={},h={moduleName:"forms.response.clearTrackingCookieRedirectHandler"},b={ClearTrackingCookieRedirectHandler:null},i={analytics:null,handler:null};
function d(){var j=Cog.Type.extend(i.handler.RedirectJsonHandler,{handle:function(l){i.analytics.clearTrackingCookie();
j.superclass.handle.call(this,l)
}});
b.ClearTrackingCookieRedirectHandler=j
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,sharedApi:b,externalApi:i,requires:[{name:"forms.form.response.redirectJsonHandler",apiId:"handler"},{name:"forms.action.button.analytics",apiId:"analytics"}]})
}(COGjQuery,document));
(function(g,d){var f={},h={moduleName:"forms.response.analyticsLoginJsonHandler"},c={AnalyticsLoginJsonHandler:null},i={handler:null,journeyStorage:null};
function b(){var j=Cog.Type.extend(i.handler.JsonHandler,{$scope:null,constructor:function(l){j.superclass.constructor.call(this,"redirect");
this.$scope=l
},handle:function(l){var m=this.$scope.data("page-type-event");
if((m==="successfulLogin"||m==="successfulRegistration")){i.journeyStorage.put("analytics.loginEvent",m)
}},canHandleNext:function(){return true
}});
c.AnalyticsLoginJsonHandler=j
}f.init=function(){b()
};
Cog.registerStatic({name:h.moduleName,api:f,sharedApi:c,externalApi:i,requires:[{name:"forms.form.response.handler",apiId:"handler"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"}]})
}(COGjQuery,document));
(function(g,d){var f={},c={JourneyContextHandler:null},h={journeyContext:null,handler:null};
function b(){var i=Cog.Type.extend(h.handler.JsonHandler,{handle:function(j){h.journeyContext.update(j.jcid)
},canHandleNext:function(){return true
}});
c.JourneyContextHandler=i
}f.init=function(){b()
};
Cog.registerStatic({name:"forms.response.journeyContextHandler",api:f,sharedApi:c,externalApi:h,requires:[{name:"forms.form.response.handler",apiId:"handler"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.response.responseHandlersFactory"},b={ResponseHandlersFactory:null},i={clearTrackingCookieRedirectHandler:null,journeyContextHandler:null,redirectJsonHandler:null,responseHandlers:null,analyticsLoginJsonHandler:null};
function d(){var j=i.responseHandlers.ResponseHandlers;
b.ResponseHandlersFactory=Cog.Type.asSingleton(Cog.Type.define({handlerIds:{journey:"journey",redirect:"redirect",clearRedirect:"clearRedirect",login:"login"},handlerTypes:{journey:i.journeyContextHandler.JourneyContextHandler,login:i.analyticsLoginJsonHandler.AnalyticsLoginJsonHandler,redirect:i.redirectJsonHandler.RedirectJsonHandler,clearRedirect:i.clearTrackingCookieRedirectHandler.ClearTrackingCookieRedirectHandler},handlers:null,constructor:function(){this.handlers={}
},journeyAndRedirect:function(){var m=this.createResponseHandlers(),n=this.findHandler(this.handlerIds.login),l=this.findHandler(this.handlerIds.redirect);
m.addSuccessHandler(n);
m.addSuccessHandler(l);
return m
},journeyAndClearTrackingCookieRedirect:function(){var m=this.createResponseHandlers(),l=this.findHandler(this.handlerIds.clearRedirect);
m.addSuccessHandler(l);
return m
},createResponseHandlers:function(){var m=new j(),l=this.findHandler(this.handlerIds.journey);
m.addSuccessHandler(l);
return m
},findHandler:function(l){return this.handlers[l]||this.createHandler(l)
},createHandler:function(m){var l=this.handlerTypes[m];
return l!=null?new l():null
}})).create()
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,sharedApi:b,externalApi:i,requires:[{name:"forms.form.response.redirectJsonHandler",apiId:"redirectJsonHandler"},{name:"forms.form.response.responseHandlers",apiId:"responseHandlers"},{name:"forms.response.journeyContextHandler",apiId:"journeyContextHandler"},{name:"forms.response.clearTrackingCookieRedirectHandler",apiId:"clearTrackingCookieRedirectHandler"},{name:"forms.response.analyticsLoginJsonHandler",apiId:"analyticsLoginJsonHandler"}]})
}(COGjQuery,document));
(function(h,c){var f={},i={moduleName:"forms.response.retryJsonHandler"},d={form:{name:"forms.form",events:{retrySubmit:"retrySubmit"}}},b={RetryJsonHandler:null},j={handler:null};
function g(){var l=Cog.Type.extend(j.handler.JsonHandler,{$scope:null,constructor:function(m){l.superclass.constructor.call(this,"retry");
this.$scope=m
},handle:function(m){var o=this.responseContent(m),n=d.form;
Cog.fireEvent(n.name,n.events.retrySubmit,{$scope:this.$scope})
}});
b.RetryJsonHandler=l
}f.init=function(){g()
};
Cog.registerStatic({name:"forms.response.retryJsonHandler",api:f,sharedApi:b,externalApi:j,requires:[{name:"forms.form.response.handler",apiId:"handler"}]})
}(COGjQuery,document));
(function(h,c){var g={},b={UpdateJsonHandler:null},f={stateProvider:{name:"elements.stateProvider",events:{requireState:"requireState",stateChanged:"stateChanged"}}},i={handler:null,focusHelper:null};
function d(){var j=Cog.Type.extend(i.handler.JsonHandler,{$scope:null,loader:null,focusHelper:i.focusHelper.FocusHelper.instance(),constructor:function(l){j.superclass.constructor.call(this,"update");
this.$scope=l
},handle:function(l){var m=this.responseContent(l),n=f.stateProvider;
this.loader.lock();
this.focusHelper.blinkActiveElement();
Cog.addListener2(n.name,n.events.stateChanged,this.onStateChanged,{scope:this,disposable:true});
Cog.fireEvent(n.name,n.events.requireState,{path:m.path})
},onStateChanged:function(){this.loader.unlock();
this.loader.hide()
},setContext:function(l){j.superclass.setContext.call(this,l);
this.loader=this.engine.getLoader()
}});
b.UpdateJsonHandler=j
}g.init=function(){d()
};
Cog.registerStatic({name:"forms.response.updateJsonHandler",api:g,sharedApi:b,externalApi:i,requires:[{name:"elements.stateProvider"},{name:"forms.form.response.handler",apiId:"handler"},{name:"forms.helper.focusHelper",apiId:"focusHelper"}]})
}(COGjQuery,document));
(function(h,c){var g={},b={UpdatePaymentJsonHandler:null},d={stateProvider:{name:"elements.stateProvider",events:{requireState:"requireState",stateChanged:"stateChanged"}}},i={handler:null,focusHelper:null};
function f(){var j=Cog.Type.extend(i.handler.JsonHandler,{$scope:null,loader:null,focusHelper:i.focusHelper.FocusHelper.instance(),constructor:function(l){j.superclass.constructor.call(this,"payment_lightbox_update");
this.$scope=l
},handle:function(l){Cog.fireEvent("payment.lightbox","update",l)
},setContext:function(l){j.superclass.setContext.call(this,l);
this.loader=this.engine.getLoader()
}});
b.UpdatePaymentJsonHandler=j
}g.init=function(){f()
};
Cog.registerStatic({name:"forms.response.updatePaymentJsonHandler",api:g,sharedApi:b,externalApi:i,requires:[{name:"elements.stateProvider"},{name:"forms.form.response.handler",apiId:"handler"},{name:"forms.helper.focusHelper",apiId:"focusHelper"}]})
}(COGjQuery,document));
(function(g,c){var f={},i={moduleName:"forms.response.validationJsonHandler"},d={errorPresenter:{name:"forms.validation.errorPresenter",events:{update:"update"}}},b={ValidationJsonHandler:null},j={handler:null,pageScroller:null};
function h(){var l=Cog.Type.extend(j.handler.JsonHandler,{errorPresentationEvent:"errorPresentation",$scope:null,pageScroller:null,constructor:function(m){l.superclass.constructor.call(this,"validation");
this.pageScroller=new j.pageScroller.PageScroller();
this.$scope=m
},handle:function(n){var o=this.responseContent(n),m=d.errorPresenter,p=o.validationErrors||{};
this.pageScroller.reset();
Cog.fireEvent(m.name,m.events.update,{$scope:this.$scope,errors:p,pageScroller:this.pageScroller});
this.engine.notifyValidationFailed(p);
this.pageScroller.execute(1000)
}});
b.ValidationJsonHandler=l
}f.init=function(){h()
};
Cog.registerStatic({name:"forms.response.validationJsonHandler",api:f,sharedApi:b,externalApi:j,requires:[{name:"forms.form.response.handler",apiId:"handler"},{name:"forms.form.pageScroller",apiId:"pageScroller"},{name:"forms.validation.errorPresenter"}]})
}(COGjQuery,document));
(function(f,j){var h={},d={errorClass:"error",moduleName:"forms.validation.errorPresenter"},l={update:"update"},c={name:"elements.stateProvider",events:{allElementsUpdated:"allElementsUpdated"}},i={eventsUtil:null,viewFactory:null},g={ErrorPresenter:null};
function b(){g.ErrorPresenter=Cog.Type.define({defaults:{errorClass:"error",errorTemplateSelector:".errorsTemplate",containerSelector:".error-message"},$scope:null,context:null,errorClass:null,hasContainer:false,view:null,fieldName:null,eventsManager:null,isInitialized:false,containerSelector:null,$errorClassContainer:null,constructor:function(o,m,n){this.eventsManager=new i.eventsUtil.EventManager();
this.$scope=o;
this.containerSelector=m||this.defaults.containerSelector;
this.eventsManager.on(c.name,c.events.allElementsUpdated).execute(this.initializeView).withScope(this).disposable().bind();
if(n){this.initializeView()
}},initializeView:function(){var m=new i.viewFactory.ViewFactory();
this.view=m.createBuilder(this.$scope).setTemplateSelector(this.defaults.errorTemplateSelector).setTargetSelector(this.containerSelector).initializedOnRender(false).build();
if(this.view.hasTarget()){this.initialize()
}},initialize:function(){var m=this.view.getTemplateMetadata();
this.fieldName=m.fieldName;
this.errorClass=m.errorClass||this.defaults.errorClass;
this.context={errors:[],permanentErrors:[]};
if(m.errorClassSelector){this.$errorClassContainer=this.$scope.find(m.errorClassSelector)
}else{this.$errorClassContainer=this.$scope
}if(this.fieldName){this.bind()
}this.isInitialized=true
},bind:function(){var m=new i.eventsUtil.Handler(this.onUpdate).when(this.isUpdateTarget).withScope(this);
this.eventsManager.on(d.moduleName,l.update).execute(m.executor).withScope(m).bind()
},unregister:function(){this.eventsManager.unbindAll()
},asPermanent:function(){if(this.isInitialized){this.context.permanentErrors=this.context.errors;
this.context.errors=[]
}return this
},add:function(){var m;
if(this.isInitialized){m=this.context.errors;
m.push.apply(m,arguments)
}return this
},addAndRefresh:function(){this.add.apply(this,arguments);
this.refresh();
return this
},clear:function(){if(this.isInitialized){this.context.errors=[]
}return this
},clearPermanent:function(){if(this.isInitialized){this.context.permanentErrors=[]
}return this
},clearAll:function(){this.clear();
this.clearPermanent();
return this
},refresh:function(){if(this.isInitialized){this.update(this.joinErrors())
}return this
},getErrors:function(){return this.joinErrors()
},joinErrors:function(){var m=[];
m.push.apply(m,this.context.permanentErrors);
m.push.apply(m,this.context.errors);
return m
},isUpdateTarget:function(n){var m=n.eventData.$scope;
return m!=null?Cog.isInScope(n.eventData.$scope,this.$scope):true
},onUpdate:function(o){var m=o.eventData||{},p=m.errors[this.fieldName],n=m.pageScroller;
this.update(p,n,o)
},update:function(o,n,m){this.context.errors=o||{};
if(this.context.errors.length>0){setTimeout(function(){this.view.render(this.context);
this.$errorClassContainer.addClass(this.errorClass);
this.view.show();
Cog.fireEvent("form.errorPresenter","validationUpdate",{classContainer:this.$errorClassContainer.attr("class"),errorText:this.context.errors})
}.bind(this),300);
if(n!=null){n.include(this.$scope)
}}else{setTimeout(function(){this.view.render(this.context);
this.$errorClassContainer.removeClass(this.errorClass);
this.view.hide()
}.bind(this),300);
if(m!=null&&f(m.relatedTarget).hasClass("cs-update")){m.relatedTarget.click()
}}}})
}h.init=function(){b()
};
Cog.registerStatic({name:"forms.validation.errorPresenter",api:h,externalApi:i,sharedApi:g,requires:[{name:"commons.eventsUtil",apiId:"eventsUtil"},{name:"elements.viewFactory",apiId:"viewFactory"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.validation.form.validator"},b={Validator:null};
function d(){b.Validator=Cog.Type.define({config:null,firstFieldKey:null,firstField:null,secondElement:null,secondFieldKey:null,message:null,errorPresenter:null,engine:null,constructor:function(j,i){this.engine=j;
this.config=i||{};
this.initialize()
},initialize:function(){this.message=this.config.message||"";
this.firstFieldKey=this.config.val1;
this.secondFieldKey=this.config.val2;
this.fieldName=this.config.messageLocation
},selectErrorPresenter:function(){var i=this.findElementWithField(this.fieldName);
return i?i.getErrorPresenter():this.engine.getErrorPresenter()
},isValid:function(){var i=this.validate();
if(!i){this.addError(this.message)
}return i
},getMessage:function(){return this.message
},getErrorPresenter:function(){if(this.errorPresenter==null){this.errorPresenter=this.selectErrorPresenter()
}return this.errorPresenter
},canValidate:function(){return true
},addError:function(i){var j=this.getErrorPresenter();
if(j){j.add(i);
j.refresh()
}},validate:function(){},findField:function(j){var i=this.findElementWithField(j);
return i!=null?i.getField(j):null
},findElementWithField:function(n){var j=null,o=this.engine.getElements(),m,l;
for(l=0;
j==null&&l<o.length;
l++){m=o[l];
if(m.hasField(n)){j=m
}}return j
}})
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,sharedApi:b})
}(COGjQuery,document));
(function(f,c){var d={},g={moduleName:"forms.validation.form.equalValidator"},h={validator:null,checkbox:null},b={EqualValidator:null};
function i(){var j=Cog.Type.extend(h.validator.Validator,{validate:function(){var n=false,m=this.findField(this.firstFieldKey),l=this.findField(this.secondFieldKey);
return m&&l&&m.getValue()===l.getValue()
}});
b.EqualValidator=j
}d.init=function(){i()
};
Cog.registerStatic({name:g.moduleName,api:d,externalApi:h,sharedApi:b,requires:[{name:"forms.validation.form.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.validation.form.validatorFactory"},i={equalValidator:null},b={Validator:null};
function d(){b.ValidatorFactory=Cog.Type.define({defaults:{configurationSelector:".formValidationConfiguration"},binding:{equal:i.equalValidator.EqualValidator},create:function(n,l){var j=l||this.defaults.configurationSelector,m=n.getScope()||{},o=m.find(j).data()||{};
return o.validation?this.createFromConfig(n,o.validation):[]
},createFromConfig:function(p,o){var j=[],n=o?o.validators:[],m,l;
for(l=0;
l<n.length;
l++){m=this.createValidator(p,n[l]);
if(m){j.push(m)
}}return j
},createValidator:function(n,l){var m=null,j=l?this.binding[l.type]:null;
return j?new j(n,l):null
}})
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.form.equalValidator",apiId:"equalValidator"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.validation.elements.validator"},b={Validator:null};
function d(){b.Validator=Cog.Type.define({element:null,message:null,constructor:function(i,j){this.element=i;
this.message=j
},isValid:function(){return true
},getMessage:function(){return this.message
},canValidate:function(){return(this.element!=null)&&(this.message!=null)
}})
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,sharedApi:b})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.validation.elements.genericValidator"},i={validator:null},b={GenericValidator:null};
function d(){var j=Cog.Type.extend(i.validator.Validator,{config:null,constructor:function(l,m){j.superclass.constructor.call(this,l);
this.config=m||{};
this.initialize()
},initialize:function(){this.message=this.config.message
},isValid:function(){return true
},validateField:function(l){return true
},validateAllFields:function(){var n=true,l=this.element.getFields(this.genericValidatonFilter),m;
for(m=0;
n&&m<l.length;
m++){n=this.validateField(l[m])
}return n
},genericValidatonFilter:function(l){return l.getData().disableGenericValidation!==true
}});
b.GenericValidator=j
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.validator",apiId:"validator"}]})
}(COGjQuery,document));
(function(g,c){var d={},h={moduleName:"forms.validation.elements.notEmptyValidator"},i={validator:null},b={NotEmptyValidator:null};
function f(){var j=Cog.Type.extend(i.validator.GenericValidator,{isValid:function(){return this.validateAllFields()
},validateField:function(l){return l.getValue()?true:false
}});
b.NotEmptyValidator=j
}d.init=function(){f()
};
Cog.registerStatic({name:h.moduleName,api:d,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.genericValidator",apiId:"validator"}]})
}(COGjQuery,document));
(function(f,l){var h={},d={moduleName:"forms.validation.elements.numericValidator"},i={validator:null,textField:null},g={NumericValidator:null},b={Conditions:null};
function j(){b.Conditions=Cog.Type.define({conditions:null,constructor:function(){this.conditions={eq:this.valueEqual,gt:this.valueGreaterThan,gte:this.valueGreaterThanOrEqual,lt:this.valueLessThan,lte:this.valueLessThanOrEqual,"int":this.valueIsInteger,dlt:this.dateValueLessThan}
},get:function(m){return this.conditions[m]
},valueIsInteger:function(m){return((parseFloat(m,10)==parseInt(m,10))&&!isNaN(m))
},valueEqual:function(m){return m===this.value
},valueGreaterThan:function(m){return m>this.value
},valueGreaterThanOrEqual:function(m){return m>=this.value
},valueLessThan:function(m){return m<this.value
},valueLessThanOrEqual:function(m){return m<=this.value
},dateValueLessThan:function(p){var m=new Date(),o=new Date(p),n=new Date();
n.setDate(m.getDate()+this.value);
return o<n
}})
}function c(){var m=Cog.Type.extend(i.validator.GenericValidator,{isNotNumberPattern:/[^$,.\-\d]/g,findAllCommasPattern:/,/g,conditions:new b.Conditions(),textFieldType:i.textField.type(),condition:null,value:null,initialize:function(){m.superclass.initialize.call(this);
this.value=parseFloat(this.config.val,10);
this.condition=this.conditions.get(this.config.sign)
},isValid:function(){return this.validateAllFields()
},canValidate:function(){var n=m.superclass.canValidate.call(this);
return n&&!isNaN(this.value)&&this.condition!=null
},validateField:function(v){var r=(v.getType()===this.textFieldType),s=this.isNotNumberPattern.test(v.getValue()),x=false,n=null,w=null,o=null,p=null,u=null,q=null,t=null;
if(this.isCoverStartDate(v.$element)){o=v.$element.parents(".date-row-options");
p=o.find("select[id*='day']").val();
u=o.find("select[id*='month']").val();
q=o.find("select[id*='year']").val();
t=u+"/"+p+"/"+q;
x=this.condition(t)
}if(!s&&r){n=v.getValue();
if(n!=null){n=n.replace(this.findAllCommasPattern,"")
}w=parseFloat(n,10);
if(!isNaN(w)){x=this.condition(w)
}}return x
},isCoverStartDate:function(n){return n.attr("id").contains("coverStartDate")
}});
g.NumericValidator=m
}h.init=function(){j();
c()
};
Cog.registerStatic({name:d.moduleName,api:h,externalApi:i,sharedApi:g,requires:[{name:"forms.validation.elements.genericValidator",apiId:"validator"},{name:"forms.field.textField",apiId:"textField"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.validation.elements.patternValidator"},i={validator:null,textField:null},b={PatternValidator:null};
function d(){var j=Cog.Type.extend(i.validator.GenericValidator,{textFieldType:i.textField.type(),pattern:null,initialize:function(){j.superclass.initialize.call(this);
try{this.pattern=new RegExp(decodeURI(this.config.val))
}catch(l){}},isValid:function(){return this.validateAllFields()
},canValidate:function(){var l=j.superclass.canValidate.call(this);
return l&&this.pattern!=null
},validateField:function(m){var l=m.getType()===this.textFieldType;
return l?this.pattern.test(m.getValue()):false
}});
b.PatternValidator=j
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.genericValidator",apiId:"validator"},{name:"forms.field.textField",apiId:"textField"}]})
}(COGjQuery,document));
(function(g,c){var f={},h={moduleName:"forms.validation.elements.validatorFactory"},i={notEmptyValidator:null,numericValidator:null,patternValidator:null},b={Validator:null};
function d(){b.ValidatorFactory=Cog.Type.define({defaults:{configurationSelector:".validationConfiguration"},binding:{required:i.notEmptyValidator.NotEmptyValidator,numeric:i.numericValidator.NumericValidator,regexp:i.patternValidator.PatternValidator},create:function(n,l){var j=l||this.defaults.configurationSelector,m=n.getScope()||{},o=m.find(j).data()||{};
return o.validation?this.createFromConfig(n,o.validation):[]
},createFromConfig:function(p,o){var j=[],n=o?o.validators:[],m,l;
for(l=0;
l<n.length;
l++){m=this.createValidator(p,n[l]);
if(m){j.push(m)
}}return j
},createValidator:function(n,l){var m=null,j=l?this.binding[l.type]:null;
return j?new j(n,l):null
}})
}f.init=function(){d()
};
Cog.registerStatic({name:h.moduleName,api:f,externalApi:i,sharedApi:b,requires:[{name:"forms.validation.elements.notEmptyValidator",apiId:"notEmptyValidator"},{name:"forms.validation.elements.numericValidator",apiId:"numericValidator"},{name:"forms.validation.elements.patternValidator",apiId:"patternValidator"}]})
}(COGjQuery,document));
(function(j,o,c){var n={},i={moduleName:"forms.action.button.analytics",events:{trackBack:"trackBack",trackLink:"trackLink",trackAction:"trackAction"}},h={lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setTrackingEnabled:"setTrackingEnabled"}}},l={trackAction:j.noop,trackLink:j.noop,clearTrackingCookie:null},g=c!=null;
function p(q){return q.data("analytics-value")
}function f(q){Cog.fireEvent(h.lastFieldTracking.moduleName,h.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:false});
Cog.fireEvent(i.moduleName,i.events.trackBack)
}function d(q){var r=p(q);
Cog.fireEvent(h.lastFieldTracking.moduleName,h.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:false});
Cog.fireEvent(i.moduleName,i.events.trackAction);
if(r){c.record({event:"actionButtonActionClick",values:{actionButtonValue:r},collect:false,options:{obj:j('<a href=""/>').get(0),defaultLinkType:"o"},componentPath:"dlg/core/components/actionButton"})
}}function m(q){var r=p(q);
if(!q.hasClass("lightbox-link")){Cog.fireEvent(h.lastFieldTracking.moduleName,h.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:false})
}Cog.fireEvent(i.moduleName,i.events.trackLink);
if(r){c.record({event:"actionButtonLinkClick",values:{actionButtonValue:r},collect:false,options:{obj:q.get(0)},componentPath:"dlg/core/components/actionButton"})
}}function b(){Cog.Cookie.erase("dlg.lastFieldInteractedWith")
}n.init=function(){l.clearTrackingCookie=b;
if(g){l.trackAction=d;
l.trackLink=m;
l.trackBack=f
}};
Cog.registerStatic({name:"forms.action.button.analytics",api:n,sharedApi:l})
}(COGjQuery,window,window.CQ_Analytics));
(function(j,p,c){var n={},h={form:{name:"forms.form",events:{submit:"submit"}},lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setTrackingEnabled:"setTrackingEnabled"}}},i={clickEvent:"click"},o={analytics:null,journeyStorage:null,nBox:null},g={},d=c!=null;
g.back=function(q){o.analytics.trackBack(j(this));
o.analytics.clearTrackingCookie();
p.history.back()
};
g.link=function(q){o.analytics.trackLink(j(this))
};
g.print=function(r){var q=j("body");
o.analytics.trackAction(j(this));
q.addClass("printing");
if(!document.execCommand("print")){p.print()
}q.removeClass("printing")
};
g.close=function(q){o.nBox.destroy(q)
};
g.none=function(q){};
function m(){var q=j("span.analytics-config-userjourneytracking");
return q.first().data("analyticsCustomParams")
}g.submit=function(v){var q=j(this),u=q.data()||{},s=u.scope||q,r=u.handlerName,t=null,w=h.form;
if((v.which===3)||(v.which===2)){return false
}setTimeout(function(){o.analytics.clearTrackingCookie()
},0);
if(r){t={handlerName:r}
}Cog.fireEvent(w.name,w.events.submit,{$scope:s,additionalParameters:t,isValidationEnabled:u.disableValidation!==true});
if(u.type!="submit_with_query"){v.stopImmediatePropagation()
}};
g.submit_with_query=function(r){var s=j(this).parent().find(".quote-transfer-lightbox-content"),q={$content:s,closable:true,isAjaxRequest:false,handler:g.submit.bind(this),shouldScroll:false};
r.preventDefault();
o.nBox.create(q)
};
function b(q){var r=q.data()||{};
return g[r.type]||{}
}function l(){if(m()==="vehicleYourDetailsLoad"||m()==="vehicleQuickQuoteLoad"){o.journeyStorage.put("yourDetailsSuccessSubmitFlag","true")
}}function f(q){var r="click";
if(q===g.submit){r="mousedown"
}else{if(q===g.print){r="mouseup touchend"
}}return r
}n.changeLink=function(u){var t=u.eventData.state.pageData.multicarJourney,v,q,x,w,s,r,y="";
if(Cog.pages.isPremiumPage()&&t){q=j("div.actionButton").find('[data-multicar-your-details!=""][data-multicar-your-details]');
v=u.eventData.state.pageData.multicarOrigin;
x=q.data("multicarYourDetails");
w=q.data("multicarAdditionalPage");
s=q.data("multicarSummaryPage");
r=q.attr("href");
if(r&&(r.indexOf("#")>0)){y="#"+r.split("#")[1]
}if(v=="your-details"&&x){q.attr("href",x+y)
}else{if(v=="summary-page"&&s){q.attr("href",s+y)
}else{if(v=="additional-details"&&w){q.attr("href",w+y)
}}}}};
n.changeLinkOnMulticar=function(t){var s=t.data("multicarLinkOverride"),r,q="";
if((document.location.pathname.indexOf("/multicar")>-1||sessionStorage.getItem("multicarJourney")=="true")&&s){r=t.attr("href");
if(r&&(r.indexOf("#")>0)){q="#"+r.split("#")[1]
}t.attr("href",s+q)
}};
n.bindEvents=function(q){var s=q.eventData?q.eventData.$scope:q,r={$buttons:s.find("button.button, a.button")};
r.$buttons.each(function(){var v=j(this),t=b(v),u=f(t);
v.css("display","");
n.changeLinkOnMulticar(v);
if(t){v.on(u,r,t);
v.on("keypress",r,function(w){if(w.keyCode===13){Cog.fireEvent(h.lastFieldTracking.moduleName,h.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:false});
var x=j.proxy(t,v,w);
x()
}})
}})
};
n.init=function(r){var q=r;
Cog.addListener2("forms.form","validationSucceed",l);
Cog.addListener2("nBox","reinitializeButtons",n.bindEvents);
Cog.addListener2("elements.stateProvider","stateChanged",n.changeLink);
n.bindEvents(q)
};
Cog.register({name:"forms.action.button",api:n,externalApi:o,selector:"div.actionButton",requires:[{name:"forms.action.button.analytics",apiId:"analytics"},{name:"nBox",apiId:"nBox"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(f,d,b){var c={};
c.onRegister=function(){};
c.init=function(g){g.each(function(i,j){var l=f(j).find("a.actionButtonClone"),h=l.data("selector");
l.on("click",function(m){m.preventDefault();
f(h).first().mousedown();
f(h).first().click()
})
});
return c
};
Cog.registerComponent({name:"forms.ancillary.acctionbuttonclone",api:c,selector:"div.actionButtonClone"})
}(COGjQuery,window,window.CQ_Analytics));
(function(h,m,c){var j={},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{submit:"submit",validateWithCallback:"validateWithCallback"}},lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setTrackingEnabled:"setTrackingEnabled"}},container:{name:"premiumPage.container",events:{coverTypeChanged:"coverTypeChanged"}}},g={moduleName:"premiumPage.ancillaryButton",events:{checked:"SubmitWithAncillaryChecked"}},l={element:null,analytics:null,pageScroller:null,urlUtil:null,journeyStorage:null,eventsUtil:null,ancillaryProductsRegistry:null,keyCodes:null,keyExecutor:null,preAddAncillary:null,nBox:null,ancillaryStorage:null},b={AncillaryButton:null},n=false,o=false,i=null;
function d(){var p=Cog.Type.extend(l.element.Element,{$submitAncillary:null,$ancillaryLinks:null,productOrder:[],isCoverTypeEqTPFT:false,pageScroller:null,meta:null,initialize:function(){p.superclass.initialize.call(this);
this.bindErrorsUpdate();
this.findDomElements();
this.bindUI();
Cog.addListener2(f.container.name,f.container.events.coverTypeChanged,this.onCoverTypeChanged.bind(this));
Cog.addListener2("nBox","closed",this.onLightboxClosed.bind(this));
Cog.addListener2("nBox","premiumPageLightbox",function(q){this.meta=q.eventData.meta
}.bind(this));
Cog.addListener2(g.moduleName,g.events.checked,function(q){this.onAllAncillariesSelectedSubmit(q,this.$submitAncillary)
}.bind(this))
},bindUI:function(){_.forEach(this.$ancillaryLinks,function(r){var q=h(r);
q.on("click",this.onSubmit.bind(this));
q.on("keypress",l.keyExecutor.onKey(function(s){Cog.fireEvent(f.lastFieldTracking.moduleName,f.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:false});
this.onSubmit(s).bind(this)
}.bind(this),[l.keyCodes.enter]))
}.bind(this))
},onSubmitProceed:function(v,u){var q=h(u.target),t=(q.hasClass("button")?q:q.parent()),s=this.findFirstNotPassedPrompt(),r={$content:s,closable:false,isAjaxRequest:false,handler:false,shouldScroll:false};
if(!v){u.preventDefault();
u.stopImmediatePropagation();
return
}if(this.isAnyAncillaryPromptNotPassed(s)){u.preventDefault();
u.stopImmediatePropagation();
l.journeyStorage.put("ancillaryLightBoxDisplayed","true");
l.preAddAncillary.initialize(s,true,true);
l.nBox.create(r)
}else{if(this.isAnyAncillaryUnselected()){l.journeyStorage.put("ancillaryLightBoxDisplayed","true");
l.analytics.trackLink(t);
this.onAncillariesUnselectedSubmit(u,t)
}else{u.preventDefault();
u.stopImmediatePropagation();
l.journeyStorage.put("premiumPageSubmitted","true");
this.onAllAncillariesSelectedSubmit(u,t)
}}},validateAndProceed:function(q){Cog.fireEvent(f.form.name,f.form.events.validateWithCallback,{$scope:this.$scope,sourceEvent:q,callback:this.onSubmitProceed.bind(this)})
},onSubmit:function(s){var t=this.getUnselectedAncillaries(),q=h(s.target),r=(q.hasClass("button")?q:q.parent());
if(t.length<=0){l.journeyStorage.put("allAncillarySelected","true")
}if(i){l.journeyStorage.put("ancillaryLightBoxDisabled","true")
}this.validateAndProceed(s,r)
},onCoverTypeChanged:function(q){if(q&&q.eventData==="TPFT"){this.isCoverTypeEqTPFT=true
}else{this.isCoverTypeEqTPFT=false
}},isCorrectSelection:function(){var r=this.getSortedAncillaries(),q=_.filter(r,function(s){return s.code==="GHP"
});
return !this.isCoverTypeEqTPFT||(this.isCoverTypeEqTPFT&&!q.length)
},findFirstNotPassedPrompt:function(){var q=h();
_.each(h(".promptContinueOverlay"),function(s){var r=h(s);
if(!r.parent().data().promptPassed){q=r;
return false
}});
return q
},isAnyAncillaryPromptNotPassed:function(r){var q=document.location.href.toLowerCase().contains("/aggregators"),s=r.siblings(".componentConfiguration").attr("data-product-code");
return q&&r.length&&s&&this.isAncillarySelected(s)&&l.ancillaryStorage.isNotApproved(s)
},isAncillarySelected:function(r){var q=false;
_.each(l.ancillaryProductsRegistry.getSelectedAncillaries(),function(s){if(s.code===r){q=true;
return false
}});
return q
},isAnyAncillaryUnselected:function(){var q=l.journeyStorage.get("ancillaryLightBoxDisplayed")==="true",r=l.journeyStorage.get("premiumPageSubmitted")==="true",s=this.getUnselectedAncillaries();
return s.length&&!q&&!i&&!r&&this.isCorrectSelection()
},findDomElements:function(){this.$ancillaryLinks=this.$scope.find("a.ancillaryLink");
this.$submitAncillary=this.$scope.find("a.ancillaryLinkPrimaryHandler").length?this.$scope.find("a.ancillaryLinkPrimaryHandler"):this.$ancillaryLinks
},getAncillariesList:function(){var q=h("[data-linkvar]"),r=[{code:"BDC",name:"formField.breakdown"},{code:"GCH",name:"formField.carHire"},{code:"GHC",name:"formField.carHire"},{code:"GHP",name:"formField.carHire"}];
_.each(q,function(v,t){var s=h(v),u=_.filter(r,function(w){return h(v).attr("name")===w.name
});
if(u.length){_.each(u,function(w){this.productOrder.push(w.code)
}.bind(this))
}else{this.productOrder.push(s.data("linkvar"))
}},this);
this.productOrder=_.uniq(this.productOrder)
},getUnselectedAncillaries:function(){return _.filter(l.ancillaryProductsRegistry.getUnselectedAncillaries(),function(q){return l.ancillaryStorage.isNotRejected(q.code)
})
},isPremiumLightboxLoad:function(){return this.meta==="vehiclePremiumLightboxLoad"
},getSortedAncillaries:function(){this.getAncillariesList();
return this.getUnselectedAncillaries().sort(function(r,q){return _.indexOf(this.productOrder,r.code)-_.indexOf(this.productOrder,q.code)
}.bind(this))
},$getTargetAncillary:function(){var q=this.getSortedAncillaries();
return q[0].$scope
},isAncillaryToShow:function(){return h("div.ancillaryButton").length&&this.isPremiumLightboxLoad()&&this.getUnselectedAncillaries().length&&!o
},onLightboxClosed:function(q){if(q&&q.eventData&&q.eventData.type=="sessionTimeoutAlert"){return
}if(this.isAncillaryToShow()){this.getAncillariesList();
this.meta=null;
this.pageScroller=new l.pageScroller.PageScroller();
this.pageScroller.include(this.$getTargetAncillary());
this.pageScroller.execute(1000)
}},showLightbox:function(r){var q={$content:r,closable:false,isAjaxRequest:true,handler:false,shouldScroll:false};
l.nBox.create(q)
},onAncillariesUnselectedSubmit:function(u,t){var r=t.attr("href"),q=t.data("selector")||"content",s=new l.urlUtil.UrlHelper(r).removeSelectors().addSelector(q).preserveFragment().preserveQuery().getUrl();
this.showLightbox(s);
u.preventDefault()
},onAllAncillariesSelectedSubmit:function(u,r){var v=r.data()||{},q=v.handlerName,t=null,s=v.scope||r;
if((u.which===l.keyCodes.mouseMiddle)||(u.which===l.keyCodes.mouseThird)){return false
}o=false;
_.defer(l.analytics.clearTrackingCookie);
if(q){t={handlerName:q}
}Cog.fireEvent(f.form.name,f.form.events.submit,{$scope:s,additionalParameters:t,isValidationEnabled:v.disableValidation!==true})
},processState:function(q){i=this.configuration.get().disableAncillaryLightbox
},bindErrorsUpdate:function(){var q=new l.eventsUtil.Handler(this.checkErrorOnPage);
this.eventsManager.on("forms.validation.errorPresenter","update").execute(q.executor).withScope(q).bind()
},checkErrorOnPage:function(){if(h("body").hasClass("lightbox-open")){o=true;
l.nBox.hideLoader()
}}});
b.AncillaryButton=p
}j.init=function(p){return j
};
j.onRegister=function(p){var q=new b.AncillaryButton(p.$scope);
p.formElement=q
};
j.onUnregister=function(p){p.formElement.unregister()
};
j.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
if(!n){n=true;
d()
}};
Cog.registerComponent({name:g.moduleName,api:j,externalApi:l,selector:"div.ancillaryButton",requires:[{name:"forms.elements.element",apiId:"element"},"forms.elementsRegistry",{name:"forms.action.button.analytics",apiId:"analytics"},{name:"forms.form.pageScroller",apiId:"pageScroller"},{name:"commons.urlUtil",apiId:"urlUtil"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"commons.eventsUtil",apiId:"eventsUtil"},{name:"premiumPage.ancillaryProductsRegistry",apiId:"ancillaryProductsRegistry"},{name:"events.keyCodes",apiId:"keyCodes"},{name:"events.keyExecutor",apiId:"keyExecutor"},{name:"commons.preAddAncillary",apiId:"preAddAncillary"},{name:"nBox",apiId:"nBox"},{name:"premiumPage.singleAncillaryProductStorage",apiId:"ancillaryStorage"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(i,m,c){var j={},g={form:{name:"forms.form",events:{submit:"submit"}}},h={clickEvent:"click"},l={analytics:null,keyCodes:null,rebrand:null,wcmMode:null},f={},d=c!=null;
f.back=function(p){m.history.go(-1)
};
f.link=function(p){l.analytics.trackLink(i(this))
};
f.print=function(p){l.analytics.trackAction(i(this));
m.print()
};
f.submit=function(r){var p=i(this),q=p.data("handlerName")||{};
if(r.which===l.keyCodes.mouseMiddle||r.which===l.keyCodes.mouseThird){r.preventDefault();
return false
}setTimeout(function(){l.analytics.clearTrackingCookie()
},0);
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:p,additionalParameters:(function(){return q?{handlerName:q}:null
}())})
};
function b(p){var q=p.data()||{};
return f[q.type]||{}
}function n(p){var q=p.parents("form");
p.find("a.ancillaryLink, button.submit").each(function(){var r=i(this);
r.data("scope",q)
});
i("#footer .secure-logos .container").prepend(p)
}function o(p){if(l.rebrand.isRebranded()&&l.wcmMode.isNotEdit()){n(p)
}}j.init=function(q){var p=q.find("button");
q.on("click","input",function(r){r.preventDefault()
});
q.find("input").css("display","none");
p.each(function(){var t=i(this),s=b(t),r=(s===f.submit)?"mousedown":"click";
t.css("display","");
if(s){t.on(r,s);
t.on("keypress",function(u){if(u.keyCode===l.keyCodes.enter){i.proxy(s,t,u)
}})
}})
};
Cog.register({name:"forms.action.buttonSet",api:j,externalApi:l,selector:"div.actionButtonSet",requires:[{name:"forms.action.button.analytics",apiId:"analytics"},{name:"events.keyCodes",apiId:"keyCodes"},{name:"commons.rebrand",apiId:"rebrand"},{name:"commons.wcmMode",apiId:"wcmMode"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(h,b){var g={},i={moduleFullName:"forms.elementsRegistry"},d={allInitialized:"allInitialized"},f={initialized:"initialized",register:"register"},j={registry:null},c=null;
g.init=function(){if(c!==null){c.onInit()
}};
g.beforeInit=function(){if(c===null){c=j.registry(i.moduleFullName)
}if(c!=null){c.onBeforeInit()
}};
Cog.register({name:"forms.elementsRegistry",api:g,externalApi:j,requires:[{name:"registry.elementsRegistry",apiId:"registry"}]})
}(COGjQuery,document));
(function(f,i){var g={},d={moduleName:"forms.form",sessionIdParam:"jcid",processorPath:"/bin/dlg/site/formProcessor",errorsContainerSelector:".top-of-form",validationClass:"js-validate",pathElementSelector:"> input[name='path']"},h={engineBuilder:null,journeyContextHandler:null,redirectHandler:null,redirectJsonHandler:null,analyticsLoginJsonHandler:null,updateJsonHandler:null,updatePaymentJsonHandler:null,validationJsonHandler:null,retryJsonHandler:null,loader:null,persistentCache:null};
function j(m){return m.find(d.pathElementSelector).val()
}function l(m){var n=m.data()||{};
return n.errorPagePath
}function c(m){h.loader.hide(m.data)
}function b(n,o,m){var p=new h.engineBuilder.EngineBuilder(n,d.moduleName).enableLoader().setId(j(n)).setProcessorPath(d.processorPath).setSessionIdParam(d.sessionIdParam).setErrorsContainer(n.find(d.errorsContainerSelector)).addSuccessHandler(new h.analyticsLoginJsonHandler.AnalyticsLoginJsonHandler(n)).addSuccessHandler(new h.journeyContextHandler.JourneyContextHandler()).addSuccessHandler(new h.validationJsonHandler.ValidationJsonHandler(n)).addSuccessHandler(new h.redirectJsonHandler.RedirectJsonHandler()).addSuccessHandler(new h.updateJsonHandler.UpdateJsonHandler(n)).addSuccessHandler(new h.updatePaymentJsonHandler.UpdatePaymentJsonHandler(n)).addSuccessHandler(new h.retryJsonHandler.RetryJsonHandler(n)).addErrorHandler(new h.redirectHandler.RedirectHandler(l(n)));
Cog.addListener2("elements.stateProvider","allElementsUpdated",c,{data:m});
if(!n.hasClass(d.validationClass)){p.disableValidation()
}return p.build()
}g.onRegister=function(n){var m=n.$scope.find("form");
if(m.length){n.engine=b(m,n,n.$scope)
}};
g.onUnregister=function(m){m.engine.unregister()
};
g.init=function(){h.persistentCache.reloadOnCache()
};
Cog.registerComponent({name:d.moduleName,api:g,externalApi:h,requires:[{name:"forms.form.engineBuilder",apiId:"engineBuilder"},{name:"forms.response.journeyContextHandler",apiId:"journeyContextHandler"},{name:"forms.form.response.redirectHandler",apiId:"redirectHandler"},{name:"forms.form.response.redirectJsonHandler",apiId:"redirectJsonHandler"},{name:"forms.response.updateJsonHandler",apiId:"updateJsonHandler"},{name:"forms.response.updatePaymentJsonHandler",apiId:"updatePaymentJsonHandler"},{name:"forms.response.validationJsonHandler",apiId:"validationJsonHandler"},{name:"forms.response.retryJsonHandler",apiId:"retryJsonHandler"},{name:"forms.response.analyticsLoginJsonHandler",apiId:"analyticsLoginJsonHandler"},{name:"elements.loader",apiId:"loader"},{name:"persistentCache",apiId:"persistentCache"}],selector:"div.form-container"})
}(COGjQuery,document));
Cog.component.homeLink=Cog.component.homeLink||{};
(function(f,j,c){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},i={formElement:null},b={HomeLink:null},l=false;
function g(){var m=Cog.Type.extend(i.formElement.Element,{$button:null,data:null,url:null,customLinkTracking:null,uci:null,initialize:function(){m.superclass.initialize.call(this);
this.$button=this.$scope.find("button, .homelink-box");
this.$button.on("click",this.postHome.bind(this));
this.url=this.$button.data("url");
this.customLinkTracking=this.$button.data("customLinkTracking");
this.uci=this.$button.data("uci")
},postHome:function(){this.track();
setTimeout(function(){var n;
n=f("<form />",{action:this.url,method:"POST",style:"display: none;"});
f("<input />",{type:"hidden",name:"json",value:this.data}).appendTo(n);
n.appendTo("body").submit()
}.bind(this),100)
},track:function(){var n=j.createElement("a"),o=this.decodeHtml(this.uci+":"+this.$button.text().trim());
if(window.s&&this.customLinkTracking&&c){c.PageDataMgr.data.additionalEvent=null;
c.PageDataMgr.data.link1=null;
c.PageDataMgr.data.loadEvent=null;
window.s.events=null;
window.s.products=null;
window.s.list1=null;
c.record({event:"customLinkTrackingClick",values:{customLinkTrackingValue:o},collect:false,options:{obj:n,defaultLinkType:"o"},componentPath:"dlg/common/components/customLinkTracking"});
window.s.tl()
}},processState:function(n){if(n){this.data=n.data
}},decodeHtml:function(n){return n.replace(/&#(\d+);/g,function(o,p){return String.fromCharCode(p)
})
}});
b.HomeLink=m
}h.onRegister=function(m){m.element=new b.HomeLink(m.$scope)
};
h.onUnregister=function(m){m.element.unregister()
};
h.init=function(m){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!l){l=true;
g()
}};
Cog.registerComponent({name:"homeLink",api:h,externalApi:i,selector:".homeLink",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document,window.CQ_Analytics));
(function(f,b){var c={},g={loader:null};
function d(h){g.loader.hide(h.data)
}c.onRegister=function(h){};
c.init=function(h){if(h.parents(".confirmation-page").length>0){Cog.addListener2("elements.stateProvider","allElementsUpdated",d,{data:h})
}};
Cog.registerComponent({name:"confirmationPageLoader",api:c,externalApi:g,selector:"div.form-column",requires:[{name:"elements.loader",apiId:"loader"}]})
}(COGjQuery,document));
Cog.component.premiumPage=Cog.component.premiumPage||{};
(function(i,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null,nBox:null,journeyContext:null},f={AdditionalCars:null},d=false;
function h(){var l=Cog.Type.extend(j.formElement.Element,{view:null,$warningOverlay:null,displayOnEveryEntry:false,$formContainer:null,$loader:null,$carTiles:null,$addNewCarSection:null,carsInQuoteLimit:null,initialize:function(){l.superclass.initialize.call(this);
this.$warningOverlay=this.$scope.find(".warningOverlay");
this.displayOnEveryEntry=this.$warningOverlay.data("displayOnEveryEntry");
this.view=this.viewFactory.create(this.$scope);
this.$formContainer=this.$scope.parents(".form");
this.$loader=this.$formContainer.find(".ajax-loader");
Cog.addListener2("elements.stateProvider","stateChanged",this.highlightTiles)
},processState:function(m){if(m){this.view.render(m);
this.afterRender();
this.processErrorState(m)
}},buttonClick:function(q,t){var m=i(t.target).parents(".singlecar"),o=m.data("quoteRef"),p=m.data("excluded"),r=m.data("premiumVisited"),n=m.find(".singlecar__number").text().split(" ")[1],s=i(t.target).parents("form").find('input[name="path"]').val();
t.preventDefault();
Cog.fireEvent("analytics.lastFieldInteracted","setTrackingEnabled",{isTrackingEnabled:false});
Cog.addListener2("elements.stateProvider","stateChanged",function(){this.$loader.hide()
}.bind(this),{scope:this,disposable:true});
this.$loader.show();
i.ajax({url:"/bin/dlg/site/formProcessor?jcid="+j.journeyContext.current(),method:"POST",data:{handlerName:q,quoteRef:o,path:s,excluded:p,carNumber:n,premiumVisited:r},success:function(u){if(u.type=="UPDATE"){Cog.fireEvent("elements.stateProvider","requireState",{path:u.content.path})
}else{window.location=u.content.path
}}.bind(this)})
},afterRender:function(){this.processCarsInQuoteLimit();
this.$scope.find(".ac-edit-premium.button").on("click",this.buttonClick.bind(this,"premium"));
this.$scope.find(".ac-edit-details.button").on("click",this.buttonClick.bind(this,"details"));
this.$scope.find(".ac-include-in-quote.button").on("click",this.buttonClick.bind(this,"quote"));
this.$scope.find(".ac-exclude-from-quote.button").on("click",this.buttonClick.bind(this,"quote"));
this.$scope.find(".ac-edit-review.button").on("click",this.buttonClick.bind(this,"premium"));
if(this.$warningOverlay.length>0){this.$scope.find(".add-car-button").on("click",this.showPrompt.bind(this))
}else{this.$scope.find(".add-car-button").on("click",this.buttonClick.bind(this,"details"))
}},processErrorState:function(m){this.$formContainer.find("button[data-handler-name='Summary']").removeClass("button-disabled");
this.$formContainer.find("button[data-handler-name='save']").removeClass("button-disabled");
_.forEach(m.additionalCarItems,function(q){if(!q.premiumPageVisited&&!q.excludedFromQuote){this.$formContainer.find("button[data-handler-name='save']").addClass("button-disabled");
this.$formContainer.find("button[data-handler-name='Summary']").addClass("button-disabled");
if(this.carCoverStartDateInPast(q)){this.$scope.find(".ac-edit-review.button").hide()
}}if(this.carRegistrationEmpty(q)||this.carRegistrationDuplicated(q)){this.$formContainer.find("button[data-handler-name='Summary']").addClass("button-disabled")
}if(this.carRegistrationDuplicated(q)){this.$formContainer.find("button[data-handler-name='save']").addClass("button-disabled")
}if(this.carCoverStartDateInPast(q)){var o=this.$carTiles.filter('[data-quote-ref="'+q.carQuoteRef+'"]'),p=o.find(".ac-edit-details"),n=o.find(".ac-edit-premium");
this.$formContainer.find("button[data-handler-name='Summary']").addClass("button-disabled");
this.$formContainer.find("button[data-handler-name='save']").addClass("button-disabled");
n.addClass("button-disabled");
p.addClass("secondary");
p.find("span").hide()
}}.bind(this))
},carRegistrationEmpty:function(m){return m.isEmptyRegistrationErrorPresent&&!m.excludedFromQuote
},carRegistrationDuplicated:function(m){return m.isDuplicatedRegistrationErrorPresent&&!m.excludedFromQuote
},carCoverStartDateInPast:function(m){return m.isCoverStartDateInPastErrorPresent&&!m.excludedFromQuote
},processCarsInQuoteLimit:function(){this.$addNewCarSection=this.$scope.find(".singlecar__addcar");
this.carsInQuoteLimit=this.$addNewCarSection.data("carsInQuote");
this.$carTiles=this.$scope.find(".singlecar").not(".singlecar__addcar");
if(this.$carTiles.length==this.carsInQuoteLimit){this.$addNewCarSection.remove()
}},showPrompt:function(o){var m=this.$warningOverlay.prev().find(".singlecar__number").length===1,n={$content:this.$warningOverlay,closable:true,isAjaxRequest:false,handler:this.buttonClick.bind(this,"details",o),shouldScroll:false,additionalClass:"warningOverlay"};
o.preventDefault();
o.stopPropagation();
if(m||this.displayOnEveryEntry){j.nBox.create(n)
}else{this.buttonClick("details",o)
}},highlightTiles:function(q){var m=q.eventData.state.pageData.quoteRef,o,p=i(".additionalCars").find("p[class*='error']").parent(),n;
if(m){o=i(".additionalCars").find("[data-quote-ref='"+m+"']");
o.addClass("singlecar-green")
}for(n=0;
n<=p.length;
n++){if(i(p[n]).hasClass("singlecar")){i(p[n]).removeClass("singlecar-green");
i(p[n]).addClass("singlecar-red")
}else{i(p[n]).parent(".singlecar").removeClass("singlecar-green");
i(p[n]).parent(".singlecar").addClass("singlecar-red")
}}}});
f.AdditionalCars=l
}g.onRegister=function(l){l.element=new f.AdditionalCars(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
h()
}};
Cog.registerComponent({name:"additionalCars",api:g,externalApi:j,selector:"div.additionalCars",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"nBox",apiId:"nBox"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document));
(function(h,b){var g={},d={singleAncillaryProduct:{name:"singleAncillaryProduct",events:{update:"update",remove:"remove"}}},c=[];
function f(){function l(p){return p.name?{name:p.name}:0
}function j(p){return _.some(c,l(p))
}function o(p){c.push(p)
}function m(p){_.remove(c,l(p))
}function i(p){var q;
p=p.eventData||p;
if(!j(p)){o(p)
}else{q=_.find(c,l(p));
_.merge(q,p)
}}function n(){Cog.addListener2(d.singleAncillaryProduct.name,d.singleAncillaryProduct.events.update,i);
Cog.addListener2(d.singleAncillaryProduct.name,d.singleAncillaryProduct.events.remove,m)
}g.getAncillaries=function(){return c
};
g.getUnselectedAncillaries=function(){return _.filter(c,function(p){return p.selected==false&&!p.telematics&&!p.hidden
})
};
g.getSelectedAncillaries=function(){return _.filter(c,function(p){return p.selected==true&&!p.telematics
})
};
n();
return g
}g.init=function(){f()
};
Cog.registerStatic({name:"premiumPage.ancillaryProductsRegistry",api:g,sharedApi:g})
}(COGjQuery,document));
(function(d,t){var s={},n={moduleFullName:"premiumPage.container"},c={dataChanged:"dataChanged"},u={allInitialized:"allInitialized",initialized:"initialized",register:"register",itemAdded:"itemAdded",quoteChanged:"quoteChanged",excessChanged:"excessChanged",coverTypeChanged:"coverTypeChanged"},g={registry:null,eventsUtil:null},r={dataProvider:null},h=null,w=null,j=true,x=null;
function p(){Cog.fireEvent(n.moduleFullName,c.dataChanged)
}function b(A,z){if(z.length){if(!w){w=A.clone();
w.removeClass("initialized");
w.find(".initialized").removeClass("initialized")
}if(window.matchMedia("(max-width: 990px)").matches){if(x=="moved"){return
}if(!d(".mobile-aside").length){if(j){d(w).insertBefore(z).addClass("mobile-aside");
Cog.init(w);
j=false
}A.hide()
}else{d(".mobile-aside").show();
A.hide()
}x="moved"
}else{if(x!="normal"){if(d(".mobile-aside").length){d(".mobile-aside").hide();
A.show()
}x="normal"
}}}}function y(){return Cog.pages.isDetailsPage()||Cog.pages.isPremiumPage()||Cog.pages.isSummaryPremium()
}function l(){var A=d("#content >.container aside"),z=d(".form-column .form >form >div").last();
if(Cog.pages.isDirectline()&&y()){b(A,z);
d(window).on("resize",_.debounce(function(){b(A,z)
},250))
}}function f(z,B){var A=d(".toggleCollapse");
z.each(function(){d(this).find(A).click(function(){d(this).toggleClass("collapsed expanded");
if(d(this).hasClass("collapsed")){d(this).parents(".aggregator-collapsed-lite").find(B).hide()
}else{d(this).parents(".aggregator-collapsed-lite").find(B).show()
}})
})
}function v(z,B){var A=d(".toggleCollapse");
z.each(function(){if(d(this).find(A).hasClass("collapsed")){d(this).find(B).hide()
}else{d(this).find(B).show()
}})
}function q(){var A=d(".aggregator-collapsed-lite"),z=A.find(".collapsed-header h3"),B=d("<span class='icon-chosen expanded toggleCollapse'></span>"),D=d("<span class='icon-chosen collapsed toggleCollapse'></span>"),C=d(".component-content >.richtext").next();
if(!z.find(".toggleCollapse").length){d(z[0]).append(B);
d(z[1]).append(D);
f(A,C);
v(A,C)
}}function i(){var C=d(".payment-price"),B=r.dataProvider.getQuote(),A=B.selected,z=B.cost;
if(Cog.pages.isChurchillAggregatorPremiumPage()){if(A==="annual"){C.html("<h2>Total amount is <span>&pound;"+z+"</span> per year</h2>")
}else{C.html("<h2>Total amount is <span>&pound;"+z+"</span> per month</h2>")
}}}function o(){var z=d(".aggregator-sidebar-desktop");
if(!z.hasClass("scroll-to-fixed-fixed")){z.scrollToFixed({marginTop:10,dontCheckForPositionFixedSupport:true,zIndex:999})
}}function m(J){var F={},C=[],z={},H=null,I={};
function A(M,L){if(M.title<L.title){return -1
}else{if(M.title>L.title){return 1
}else{return 0
}}}function K(L){d(C).each(function(M,N){if(N.title==L.title){C.splice(M,1)
}});
if(L.description!="None"||L.isReplacementProduct){C.push(L)
}C.sort(A)
}function E(L){K(L.eventData)
}function G(L){z=L.eventData
}function D(L){H=L.eventData
}function B(L){I=L.eventData
}F.getItems=function(){return C
};
F.getExcess=function(){return H
};
F.getCoverType=function(){return I
};
F.getQuote=function(){return z
};
(function(){var M=new g.eventsUtil.EventManager(),L=n.moduleFullName;
M.on(L,u.itemAdded).execute(E).execute(J).bind();
M.on(L,u.quoteChanged).execute(G).execute(J).bind();
M.on(L,u.excessChanged).execute(D).execute(J).bind();
M.on(L,u.coverTypeChanged).execute(B).execute(J).bind()
}());
return F
}s.init=function(){h.onInit();
Cog.addListener2("elements.stateProvider","allElementsUpdated",l);
Cog.addListener2("elements.stateProvider","allElementsUpdated",q);
Cog.addListener2("elements.stateProvider","allElementsUpdated",i);
Cog.addListener2("elements.stateProvider","allElementsUpdated",o)
};
s.beforeInit=function(){if(h===null){h=g.registry(n.moduleFullName);
r.dataProvider=m(p);
Cog.addListener2(n.moduleFullName,u.allInitialized,p,{disposable:true})
}h.onBeforeInit()
};
Cog.register({name:n.moduleFullName,api:s,externalApi:g,sharedApi:r,requires:["basket.container",{name:"registry.elementsRegistry",apiId:"registry"},{name:"commons.eventsUtil",apiId:"eventsUtil"}]})
}(COGjQuery,document));
(function(h,m){var j={},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},container:{name:"premiumPage.container",events:{initialized:"initialized",register:"register",coverTypeChanged:"coverTypeChanged"}},form:{name:"forms.form",events:{submit:"submit"}}},l={formElement:null,journeyStorage:null,rebrand:null,keyCodes:null},i={},b={CoverType:null},n=false,d=[];
function g(){var o=Cog.Type.extend(l.formElement.Element,{view:null,selectedRadioValue:null,$radioInputs:null,$toggleButton:null,$toggleButtonIcon:null,$description:null,$toggleRow:null,$labelContainer:null,$radioRow:null,$compBenefits:null,$tpftBenefits:null,displayMode:null,tpftEnabled:false,$coverTypeSelect:null,allowedBrand:["directline","privilege"],constructor:function(p){o.superclass.constructor.call(this,p);
Cog.fireEvent(f.container.name,f.container.events.componentInitialized)
},initialize:function(){o.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},findDomElements:function(){this.$toggleButton=this.$scope.find(".nav-toggle");
this.$toggleButtonIcon=this.$toggleButton.find(".icon-arrow");
this.$description=this.$scope.find(".your-benefits");
this.$radioInputs=this.$scope.find(".input-radio input");
this.$toggleRow=this.$scope.find(".third-party-toggle-row");
this.$labelContainer=this.$scope.find(".label-help-container");
this.$radioRow=this.$scope.find(".radio-row-options");
this.$compBenefits=this.$scope.find(".third-party-disable");
this.$tpftBenefits=this.$scope.find(".third-party-enable");
this.$coverTypeSelect=this.$scope.find(".coverTypeSelect")
},processState:function(p){if(p){this.refreshErrorPresenter();
this.tpftEnabled=p.tpftEnabled;
this.view.render(p);
this.afterRender()
}},afterRender:function(){this.findDomElements();
if(Cog.pages.isChurchillAggregatorPremiumPage()){this.initializeSelectOptions()
}else{this.initializeRadioInputs()
}this.initializeToggleButton();
this.adjustForNewPremiumPage();
this.notifyCoverTypeChanged();
this.notifyStickyFooter();
this.setArrow()
},initializeRadioInputs:function(){this.$radioInputs.on("click",this.onRadioClick.bind(this));
this.$radioInputs.siblings("label").on("click",function(){})
},initializeSelectOptions:function(){this.$coverTypeSelect.on("change",this.onRadioClick.bind(this))
},initializeToggleButton:function(){this.$toggleButton.on("click",this.onToggleButtonClicked.bind(this))
},initializeToggleQuoteBlock:function(){if(this.$toggleRow.hasClass("hidden")){this.$toggleRow.removeClass("hidden");
this.$scope.find(".cover-type-mode").hide()
}else{this.$labelContainer.addClass("editable");
this.$labelContainer.on("click",this.onToggleQuoteBlockClicked.bind(this))
}},isValidBrand:function(){var q,p;
if(window.CQ_Analytics){q=window.CQ_Analytics.PageDataMgr.initProperty.brandName;
if(q){p=_.filter(this.allowedBrand,function(r){return r.toLowerCase()==q.toLowerCase()
})
}}return p&&p.length
},adjustForNewPremiumPage:function(){if(l.rebrand.isRebranded()&&this.isValidBrand()){this.handleCoverTypeChosenOption();
this.expandOrCollapse();
this.handleCoverTypeModeInfo();
this.removeListClasses();
this.initializeToggleQuoteBlock();
this.hideEmptyBenefits();
this.handleExpanding()
}},hideEmptyBenefits:function(){if(this.configuration.get().tpftBenefitsEmpty){this.$tpftBenefits.hide()
}if(this.configuration.get().compBenefitsEmpty){this.$compBenefits.hide()
}},expandOrCollapse:function(){if(!this.displayMode){this.displayMode=this.configuration.get().defaultDisplayMode
}if(this.tpftEnabled&&this.displayMode=="expanded"){this.$radioRow.show();
this.$toggleRow.addClass("expanded")
}else{this.$radioRow.hide();
this.$toggleRow.removeClass("expanded")
}},removeListClasses:function(){var p=this.$scope.find(".tick-list");
if(p.length){p.removeClass("two-column equal-heights");
p.find("li").attr("style","");
h(window).resize()
}},handleCoverTypeModeInfo:function(){var p=h("<p />").addClass("cover-type-mode"),q=this.$toggleRow.hasClass("expanded")?"Done":"Edit";
p.text(q);
this.$labelContainer.parent().find(".cover-type-mode").remove();
p.insertAfter(this.$labelContainer.find(".label"))
},handleCoverTypeChosenOption:function(){var r=h("<p />").addClass("cover-type-chosen-option"),q,p=this.$radioRow.find("input:checked");
if(p.length){q=p.parent().find("label").text();
r.text(q)
}this.$labelContainer.find(".cover-type-chosen-option").remove();
this.$labelContainer.find(".label").append(r)
},onRadioClick:function(p){this.notifyCoverTypeChanged();
this.notifyStickyFooter();
this.displayMode="expanded";
Cog.fireEvent(f.form.name,f.form.events.submit,{$scope:this.$scope,isValidationEnabled:false})
},notifyCoverTypeChanged:function(){if(Cog.pages.isChurchillAggregatorPremiumPage()){this.selectedValue=this.$coverTypeSelect.find(":selected").val()
}else{this.selectedValue=this.$radioInputs.filter(":checked").val()
}l.journeyStorage.put("analytics.coverType",this.selectedValue);
Cog.fireEvent(f.container.name,f.container.events.coverTypeChanged,this.selectedValue);
Cog.fireEvent("premiumPage.basketChange","changed");
if(this.selectedValue=="TPFT"){this.hideDescription()
}},notifyStickyFooter:function(){var q=null,p=null;
q=this.$radioRow.find("input:checked");
if(q.length){p=q.parent().find("label").text();
p=h.trim(p)+" Cover"
}Cog.fireEvent("premiumPage.sticyFooter","coverType",{key:this.selectedValue,value:p,selected:true})
},hideDescription:function(){this.$description.addClass("hidden");
this.$toggleButtonIcon.addClass("icon-arrow-up").removeClass("icon-arrow-down")
},showDescription:function(){this.$description.removeClass("hidden");
this.$toggleButtonIcon.addClass("icon-arrow-down").removeClass("icon-arrow-up")
},toggleDescription:function(){this.$description.toggleClass("hidden");
this.$toggleButtonIcon.toggleClass("icon-arrow-down icon-arrow-up")
},onToggleButtonClicked:function(p){p.preventDefault();
this.toggleDescription()
},setArrow:function(){this.$toggleButtonIcon.addClass("icon-arrow-up").removeClass("icon-arrow-down")
},onToggleQuoteBlockClicked:function(p){p.preventDefault();
if(this.$toggleRow.hasClass("expanded")){this.$radioRow.slideUp("normal");
this.$toggleRow.removeClass("expanded");
this.displayMode="collapsed"
}else{this.$radioRow.slideDown("normal");
this.$toggleRow.addClass("expanded");
this.displayMode="expanded"
}this.handleCoverTypeModeInfo()
},handleExpanding:function(){var q,p=l.keyCodes;
this.$labelContainer.on("keyup",function(r){if(r.which===p.enter){this.click()
}});
this.$radioInputs.parent().on("keyup",function(r){q=h(r.target).find("input");
if(r.which===p.enter){this.$radioInputs.prop("checked",false);
q.prop("checked",true);
this.onRadioClick()
}}.bind(this))
}});
b.CoverType=o
}function c(o){var p=o.find('input[type="radio"]:checked')||{};
return{value:p.val(),origin:p.attr("name")}
}i.getDataAndConfig=function(){return b.CoverType.superclass.getDataAndConfig(d,c)
};
j.onRegister=function(o){o.element=new b.CoverType(o.$scope)
};
j.onUnregister=function(o){o.element.unregister()
};
j.init=function(o){Cog.fireEvent(f.registry.name,f.registry.events.initialized,{analytics:i.getDataAndConfig});
Cog.fireEvent(f.container.name,f.container.events.initialized);
d=h(h.merge(d,o))
};
j.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
Cog.fireEvent(f.container.name,f.container.events.initialized);
if(!n){n=true;
g()
}};
Cog.registerComponent({name:"premiumPage.coverType",api:j,sharedApi:i,externalApi:l,selector:"div.coverType",requires:[{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"forms.elements.element",apiId:"formElement"},{name:"commons.rebrand",apiId:"rebrand"},{name:"events.keyCodes",apiId:"keyCodes"},"premiumPage.container"]})
}(COGjQuery,document));
(function(i,n){var l={},j={},h={moduleName:"carHire",code:"GCH"},g={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},container:{name:"premiumPage.container",events:{initialized:"initialized",register:"register",itemAdded:"itemAdded"}},form:{name:"forms.form",events:{submit:"submit"}},ancillaryProduct:{name:"singleAncillaryProduct",events:{update:"update"}}},m={formElement:null},b={CarHire:null},o=false,d=[];
function f(){var p=Cog.Type.extend(m.formElement.Element,{view:null,$optionRadios:null,$optionButtons:null,$checkedOptionRadio:null,$upgradeButton:null,basketTitle:null,basketDescription:null,isSelected:false,initialize:function(){p.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(q){if(q){this.refreshErrorPresenter();
this.view.render(q);
this.afterRender(q)
}},addToBasket:function(q,r){Cog.fireEvent(g.container.name,g.container.events.itemAdded,{title:q,description:r})
},afterRender:function(q){this.basketTitle=this.$scope.find(".car-hire").data("title");
this.initializeOptionRadios();
this.initializeMobileButtons();
this.notifyProductChanged();
this.updateAncillariesRegistry();
this.initializeUpgradeButton();
if(q.basketProductTitle){this.addToBasket(this.basketTitle,q.basketProductTitle)
}},initializeOptionRadios:function(){this.$optionRadios=this.$scope.find(".input-radio input");
this.$optionRadios.on("change",i.proxy(this.onOptionClicked,this))
},initializeMobileButtons:function(){this.$optionButtons=this.$scope.find(".button-row button");
this.$optionButtons.on("click",i.proxy(this.onOptionButtonClicked,this))
},initializeUpgradeButton:function(){this.$upgradeButton=this.$scope.find(".third-party-upgrade button");
this.$upgradeButton.on("click",i.proxy(this.onUpgradeButtonClick,this))
},onUpgradeButtonClick:function(r){var q={};
q[this.$upgradeButton.data("cover-update")]=true;
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:this.$scope,additionalParameters:q,isValidationEnabled:false});
r.preventDefault()
},isDefaultOptionsSelected:function(r){var q=this.$optionRadios.filter('[data-product-code="NONE"]').length>0;
return q?(r.data("productCode")==="NONE"):(r.data("productCode")==="CHC")
},notifyProductChanged:function(){var q;
this.$checkedOptionRadio=this.$optionRadios.filter(":checked");
if(this.$checkedOptionRadio.length===0){this.basketDescription="None";
this.isSelected=false
}else{q=this.$checkedOptionRadio.data("productCode");
this.basketDescription=this.$checkedOptionRadio.data("title");
this.isSelected=!this.isDefaultOptionsSelected(this.$checkedOptionRadio)
}this.addToBasket(this.basketTitle,this.basketDescription)
},updateAncillariesRegistry:function(){if(this.basketTitle){Cog.fireEvent(g.ancillaryProduct.name,g.ancillaryProduct.events.update,{name:this.basketTitle,code:h.code,selected:this.isSelected,$scope:this.$scope})
}},onOptionButtonClicked:function(r){var q=i(r.target).data("index");
this.$checkedOptionRadio=this.$optionRadios.filter(":checked");
this.$checkedOptionRadio.checked=false;
this.$optionRadios[q].checked=true;
this.notifyProductChanged();
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:this.$scope,isValidationEnabled:false})
},onOptionClicked:function(q){this.notifyProductChanged();
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:this.$scope,isValidationEnabled:false})
}});
b.CarHire=p
}l.onRegister=function(p){p.element=new b.CarHire(p.$scope)
};
l.onUnregister=function(p){p.element.unregister()
};
l.init=function(p){Cog.fireEvent(g.registry.name,g.registry.events.initialized,{analytics:j.getDataAndConfig});
Cog.fireEvent(g.container.name,g.container.events.register);
d=i(i.merge(d,p))
};
l.beforeInit=function(){Cog.fireEvent(g.registry.name,g.registry.events.register);
Cog.fireEvent(g.container.name,g.container.events.register);
if(!o){o=true;
f()
}};
j.getPrice=function(q,p){return i('div.carHire [data-title="'+q+'"]').data(p)
};
j.getTitle=function(){return i("div.car-hire").data("title")
};
j.getProductCode=function(p){return i('div.carHire [data-title="'+p+'"]').data("productCode")
};
function c(p){var q=p.find(".selected input, .chosen input").data()||{};
return{ancillaryPrice:{value:q.annualPrice||"0",origin:"data-annual-price"},ancillaryName:{value:q.linkvar||"None",origin:"data-linkvar"},selected:{value:!_.isUndefined(q.productCode)&&q.productCode!="NONE",origin:"default"}}
}j.getDataAndConfig=function(){return b.CarHire.superclass.getDataAndConfig(d,c)
};
Cog.registerComponent({name:"premiumPage.carHire",api:l,sharedApi:j,externalApi:m,selector:"div.carHire",requires:[{name:"forms.elements.element",apiId:"formElement"},"premiumPage.container"]})
}(COGjQuery,document));
(function(c){var b={},d={oldPremium:"/premium/premium1",newPremium:"/premium/premium",oldYd:"/details/get-motor-quote-details1",newYd:"/details/get-motor-quote-details",oldQq:"/details/quick-quote-get-motor-quote-details1",newQq:"/details/quick-quote-get-motor-quote-details",oldQqLive:"/details/get-quick-quote-details1",newQqLive:"/details/get-quick-quote-details"},f={urlUtil:null};
b.init=function(){b.setCookieFromQuery();
b.replaceUrlsFromCookie()
};
b.setCookieFromQuery=function(){var g=c.url().attr("query").split("&");
_.forEach(g,function(j){var h=j.split("="),i=h[0];
if(i.toLowerCase()==="npp"&&h.length>1){Cog.component.destinationPickerHelper.setCookie(h[1].toLowerCase()==="true")
}})
};
b.isCookieSet=function(h){var g=document.cookie.split(";"),l,j;
for(j=0;
j<g.length;
j++){l=g[j];
while(l.charAt(0)==" "){l=l.substring(1)
}if(l.indexOf(h)==0){return l.substring(h.length,l.length).toLowerCase()==="true"
}}return false
};
b.replaceUrls=function(h,i){var g=c('a[href*="'+h+'#"], a[href$="'+h+'"]');
if(g.length){g.attr("href",g.attr("href").replace(h,i))
}};
b.replaceUrlFromCookie=function(l,g,i,h){var j=b.isCookieSet(l);
if(j){b.replaceUrls(g,i);
if(h){b.replaceUrls(g+" ."+h.join("."),i+"."+h.join("."))
}}};
b.replaceUrlsFromCookie=function(){var h=c("body.cq-wcm-edit").length,g=new f.urlUtil.UrlHelper(window.location.href).getSelectors();
if(!h){b.replaceUrlFromCookie("NPP=",d.newPremium,d.oldPremium,g);
b.replaceUrlFromCookie("YDAB=",d.newYd,d.oldYd,g);
b.replaceUrlFromCookie("YDAB=",d.newQq,d.oldQq,g);
b.replaceUrlFromCookie("YDAB=",d.newQqLive,d.oldQqLive,g)
}};
Cog.registerStatic({name:"premiumPage.destinationPicker",api:b,externalApi:f,requires:[{name:"commons.urlUtil",apiId:"urlUtil"}]})
}(COGjQuery));
Cog.component.destinationPickerHelper=(function(c){var b={};
b.setCookie=function(g){var h=c("body.cq-wcm-edit").length,f=new Date(),d=new Date(f);
if(!h){d.setDate(f.getDate()+10);
document.cookie="NPP="+g+"; expires="+d.toGMTString()+"; path=/"
}};
b.setNewPremiumVersion=function(){b.setCookie(true)
};
b.setOldPremiumVersion=function(){b.setCookie(false)
};
return b
}(COGjQuery));
Cog.registerStatic({name:"premiumPage.destinationPickerHelper",api:Cog.component.destinationPickerHelper});
Cog.component.premiumPage=Cog.component.premiumPage||{};
(function(i,b){var h={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null,nBox:null},g={IndividualCarPrices:null},f=false;
function d(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
g.IndividualCarPrices=l
}h.onRegister=function(l){l.element=new g.IndividualCarPrices(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!f){f=true;
d()
}};
Cog.registerComponent({name:"individualCarPrices",api:h,externalApi:j,selector:"div.individualCarPrices",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(h,n){var l={},j={},g={moduleName:"breakdownCover",code:"BDC"},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},container:{name:"premiumPage.container",events:{initialized:"initialized",register:"register",itemAdded:"itemAdded"}},form:{name:"forms.form",events:{submit:"submit"}},ancillaryProduct:{name:"singleAncillaryProduct",events:{update:"update"}}},m={formElement:null,journeyStorage:null},b={BreakdownCover:null},o=false,d=[];
function i(){var p=Cog.Type.extend(m.formElement.Element,{view:null,$optionRadios:null,$checkedOptionRadio:null,optionButtons:null,basketTitle:null,basketDescription:null,isSelected:false,initialize:function(){p.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope);
if(this.$scope.hasClass("newPremiumPageVersion")){m.journeyStorage.put("premium.page.version","Premium_new")
}else{m.journeyStorage.put("premium.page.version","Premium_old")
}},processState:function(q){if(q){this.refreshErrorPresenter();
this.view.render(q);
this.afterRender()
}},afterRender:function(){this.basketTitle=this.$scope.find(".breakdown-cover").data("title");
this.initializeOptionRadios();
this.initializeSelectButtons();
this.notifyProductChanged();
this.updateAncillariesRegistry();
this.alignCSS()
},initializeOptionRadios:function(){this.$optionRadios=this.$scope.find(".input-radio input");
this.$optionRadios.on("change",h.proxy(this.onOptionClicked,this))
},initializeSelectButtons:function(){this.$optionButtons=this.$scope.find(".select-option");
this.$optionButtons.on("click",h.proxy(this.onOptionButtonClicked,this))
},notifyProductChanged:function(){this.$checkedOptionRadio=this.$optionRadios.filter(":checked");
if(this.$checkedOptionRadio.length==0){this.basketDescription="None";
this.isSelected=false
}else{this.basketDescription=this.$checkedOptionRadio.data("title");
this.isSelected=this.$checkedOptionRadio.data("productCode")!=="NONE";
this.basketProductCode=this.$checkedOptionRadio.data("productCode")
}Cog.fireEvent(f.container.name,f.container.events.itemAdded,{title:this.basketTitle,productCode:this.basketProductCode,description:this.basketDescription})
},updateAncillariesRegistry:function(){if(this.basketTitle){Cog.fireEvent(f.ancillaryProduct.name,f.ancillaryProduct.events.update,{name:this.basketTitle,code:g.code,selected:this.isSelected,$scope:this.$scope})
}},onOptionButtonClicked:function(r){var q=h(r.target).data("index");
this.onOptionChanged(q)
},onOptionRemoveButtonClicked:function(){this.onOptionChanged(0)
},onOptionChanged:function(q){this.$checkedOptionRadio=this.$optionRadios.filter(":checked");
this.$checkedOptionRadio.checked=false;
this.$optionRadios[q].checked=true;
this.notifyProductChanged();
Cog.fireEvent(f.form.name,f.form.events.submit,{$scope:this.$scope,isValidationEnabled:false});
Cog.fireEvent("premiumPage.sidebarChange","changed")
},alignCSS:function(){var s,r,q;
if(this.$scope.find("td.defactoTD").length>0){s=this.$scope.find("td.defactoTD");
r=this.$scope.find("td.defactoTD").closest("tr");
q=r.prev().find("td.chosen.last").index();
if(s){r.children().eq(q).removeClass("td.defactoTD").addClass("chosen last");
if(r.prev().find("td.chosen.last").length>0){r.prev().find("td.chosen.last").removeClass(" chosen last").addClass("chosen")
}else{if(r.prev().find("td.chosen.icon-tick.last").length>0){r.prev().find("td.chosen.icon-tick.last").removeClass("chosen icon-tick last").addClass("chosen icon-tick")
}}}}},onOptionClicked:function(q){this.notifyProductChanged();
Cog.fireEvent(f.form.name,f.form.events.submit,{$scope:this.$scope,isValidationEnabled:false})
}});
b.BreakdownCover=p
}l.onRegister=function(p){p.element=new b.BreakdownCover(p.$scope)
};
l.onUnregister=function(p){p.element.unregister()
};
l.init=function(p){Cog.fireEvent(f.registry.name,f.registry.events.initialized,{analytics:j.getDataAndConfig});
Cog.fireEvent(f.container.name,f.container.events.register);
d=h(h.merge(d,p))
};
l.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
Cog.fireEvent(f.container.name,f.container.events.register);
if(!o){o=true;
i()
}};
j.getPrice=function(q,p){return h("div.breakdownCover, div.breakdownCoverPr, div.breakdownCoverDl").find('[data-title="'+q+'"]').data(p)
};
j.getTitle=function(){return h("div.breakdown-cover").data("title")
};
j.getProductCode=function(p){return h("div.breakdownCover, div.breakdownCoverPr, div.breakdownCoverDl").find('[data-title="'+p+'"]').data("productCode")
};
function c(p){var q=p.find(".selected input, .chosen input").data()||{};
return{ancillaryPrice:{value:q.annualPrice||"0",origin:"data-annual-price"},ancillaryName:{value:q.linkvar||"None",origin:"data-linkvar"},selected:{value:!_.isUndefined(q.productCode)&&q.productCode!="NONE",origin:"default"}}
}j.getDataAndConfig=function(){return b.BreakdownCover.superclass.getDataAndConfig(d,c)
};
Cog.registerComponent({name:"premiumPage.breakdownCover",api:l,sharedApi:j,externalApi:m,selector:"div.breakdownCover",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},"premiumPage.container"]})
}(COGjQuery,document));
(function(i,o){var l={},j={},h={moduleName:"breakdownCoverPr",code:"BDC"},g={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},container:{name:"premiumPage.container",events:{initialized:"initialized",register:"register",itemAdded:"itemAdded"}},form:{name:"forms.form",events:{submit:"submit"}},ancillaryProduct:{name:"singleAncillaryProduct",events:{update:"update"}}},m={formElement:null,journeyStorage:null,priceHelper:null,premiumPageContainer:null},b={BreakdownCoverPr:null},p=false,n={expanded:"expanded",collapsed:"collapsed"},d=[];
function f(){var q=Cog.Type.extend(m.formElement.Element,{view:null,$optionRadios:null,$checkedOptionRadio:null,optionButtons:null,basketTitle:null,basketDescription:null,isSelected:false,$breakdownMobile:null,$quoteBlockHeader:null,$quoteBlockContent:null,displayMode:{},tracking:{enabled:false,timesChanged:0,productCode:null,history:[]},initialize:function(){q.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope);
this.tracking.enabled=this.configuration.get().trackChanges
},processState:function(r){if(r){this.refreshErrorPresenter();
this.view.render(r);
this.afterRender()
}},afterRender:function(){this.basketTitle=this.$scope.find(".breakdown-cover").data("title");
this.$breakdownMobile=this.$scope.find(".mobile-view > div");
this.$quoteBlockHeader=this.$scope.find(".quote-block-header");
this.$quoteBlockContent=this.$scope.find(".options-container");
this.initializeValues();
this.initializeOptionRadios();
this.initializeSelectButtons();
this.initializeRemoveButtons();
this.initializeToggleQuoteBlock();
this.notifyProductChanged();
this.updateAncillariesRegistry();
this.fixColumnWidth();
this.upsellBoxSwap();
Cog.addListener2("breakdownCover","resetTrackingToNone",this.resetTrackingToNone.bind(this));
i(window).on("resize",_.throttle(this.fixColumnWidth.bind(this),300));
i(window).on("resize",_.debounce(this.generateUpsellMarkers.bind(this),250))
},initializeValues:function(){var u=m.premiumPageContainer.dataProvider.getQuote(),s=u.selected+"Price",r=this.$scope.find("mark.current-price"),t=m.journeyStorage.get("breakdown.cover.tracking.data");
_.each(r,function(w){var v=i(w);
m.priceHelper.fillPoundsAndPence(v,v.data(s))
});
if(t){this.tracking=JSON.parse(t)
}},initializeToggleQuoteBlock:function(){this.$quoteBlockHeader=this.$breakdownMobile.find(".quote-block-header");
_.each(this.$quoteBlockHeader,function(s){var r=i(s);
r.on("click",this.onToggleQuoteBlockClicked.bind(this,s));
this.initializeDisplayMode(r.parent())
},this)
},initializeDisplayMode:function(s){var r=s.find(".componentConfiguration");
if(!this.displayMode[r.data("index")]){this.displayMode[r.data("index")]=r.data("defaultDisplayMode")||s.hasClass("brkdownchosen")?n.expanded:n.collapsed
}if(this.displayMode[r.data("index")]==n.expanded){s.addClass(n.expanded)
}else{s.removeClass(n.expanded)
}},initializeOptionRadios:function(){this.$optionRadios=this.$scope.find(".input-radio input");
this.$optionRadios.on("change",i.proxy(this.onOptionClicked,this))
},initializeSelectButtons:function(){this.$optionButtons=this.$scope.find(".select-option");
this.$optionButtons.on("click",i.proxy(this.onOptionButtonClicked,this))
},initializeRemoveButtons:function(){this.$removeButtons=this.$scope.find(".remove-option");
this.$removeButtons.on("click",i.proxy(this.onOptionRemoveButtonClicked,this))
},resetTrackingToNone:function(){if(this.tracking.enabled&&m.journeyStorage){this.tracking.timesChanged=1;
this.tracking.history=["NONE"];
this.tracking.productCode="NONE";
this.tracking.l1String="RescueCoverChange:FV-NONE|Count-0";
m.journeyStorage.put("breakdown.cover.tracking",this.tracking.l1String);
m.journeyStorage.put("breakdown.cover.tracking.data",JSON.stringify(this.tracking))
}},trackChanges:function(){var s=this.$checkedOptionRadio.data("product-code"),u=this.tracking.productCode,t="RescueCoverChange:",r;
if(u!=s){this.tracking.timesChanged++;
this.tracking.history.push(s);
this.tracking.productCode=s;
for(r=0;
r<this.tracking.history.length-1;
r++){t+=this.tracking.history[r]+"|"
}t=t+"FV-"+this.tracking.history[r]+"|Count-"+(this.tracking.timesChanged-1);
this.tracking.l1String=t;
m.journeyStorage.put("breakdown.cover.tracking",this.tracking.l1String);
m.journeyStorage.put("breakdown.cover.tracking.data",JSON.stringify(this.tracking))
}},notifyProductChanged:function(){this.$checkedOptionRadio=this.$optionRadios.filter(":checked");
if(this.tracking.enabled){this.trackChanges()
}if(this.$checkedOptionRadio.length==0){this.basketDescription="None";
this.isSelected=false
}else{this.basketDescription=this.$checkedOptionRadio.data("title");
this.isSelected=this.$checkedOptionRadio.data("productCode")!=="NONE";
this.basketProductCode=this.$checkedOptionRadio.data("productCode")
}Cog.fireEvent(g.container.name,g.container.events.itemAdded,{title:this.basketTitle,productCode:this.basketProductCode,description:this.basketDescription})
},updateAncillariesRegistry:function(){if(this.basketTitle){Cog.fireEvent(g.ancillaryProduct.name,g.ancillaryProduct.events.update,{name:this.basketTitle,code:h.code,selected:this.isSelected,$scope:this.$scope})
}},onOptionButtonClicked:function(s){var r=i(s.target).data("index");
this.displayMode[r]=n.expanded;
this.onOptionChanged(r)
},onOptionRemoveButtonClicked:function(){this.onOptionChanged(0)
},onOptionChanged:function(r){this.$checkedOptionRadio=this.$optionRadios.filter(":checked");
this.$checkedOptionRadio.checked=false;
this.$optionRadios[r].checked=true;
this.notifyProductChanged();
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:this.$scope,isValidationEnabled:false});
Cog.fireEvent("premiumPage.basketChange","changed");
Cog.fireEvent("premiumPage.sidebarChange","changed")
},onOptionClicked:function(r){this.notifyProductChanged();
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:this.$scope,isValidationEnabled:false})
},onToggleQuoteBlockClicked:function(u){var r=i(u).parent(),s=r.find(".options-container"),t=r.find(".componentConfiguration");
if(r.hasClass(n.expanded)){s.slideUp("normal");
r.removeClass(n.expanded);
this.displayMode[t.data("index")]=n.collapsed
}else{s.slideDown("normal");
r.addClass(n.expanded);
this.displayMode[t.data("index")]=n.expanded
}},fixColumnWidth:function(){var t=this.$scope,s=this.$scope.find(".header-row"),r=s.find("th").first(),v=s.find("th:gt(1)").length,u;
if(s){r.css({"max-width":"210px","min-width":"210px"});
u=Math.floor((t.width()-r.outerWidth(true))/v);
s.find("th:gt(1)").map(function(){i(this).css({"max-width":u,"min-width":u})
})
}this.generateUpsellMarkers()
},upsellBoxSwap:function(){var r=this.$scope.find(".upsell-message-box"),t=this.$scope.find(".options-block.breakdown-cover.recalculation.added"),s=this.$scope.find(".mobile-view").children();
if(window.matchMedia("(min-width: 768px)").matches){r.insertAfter(t)
}else{r.insertAfter(s[1])
}i(window).on("resize",_.debounce(function(){if(window.matchMedia("(min-width: 768px)").matches){r.insertAfter(t)
}else{r.insertAfter(s[1])
}},250))
},generateUpsellMarkers:function(){var s=this.$scope.find(".upsell-message-box"),v=this.$scope.find(".breakdown-cover.recalculation"),u=v.find(".upsell-upgrade"),y=s.find(".upsell-marker"),z,r,t,x,w;
y.remove();
_.each(u,function(A){w=i(A);
x=i("<span />").addClass("upsell-marker");
z=w.position().left;
r=(w.width()/2)-10;
t=parseInt((z+r),10);
x.css("left",t);
s.append(x)
})
}});
b.BreakdownCoverPr=q
}l.onRegister=function(q){q.element=new b.BreakdownCoverPr(q.$scope)
};
l.onUnregister=function(q){q.element.unregister()
};
l.init=function(q){Cog.fireEvent(g.registry.name,g.registry.events.initialized,{analytics:j.getDataAndConfig});
Cog.fireEvent(g.container.name,g.container.events.register);
d=i(i.merge(d,q))
};
l.beforeInit=function(){Cog.fireEvent(g.registry.name,g.registry.events.register);
Cog.fireEvent(g.container.name,g.container.events.register);
if(!p){p=true;
f()
}};
j.getPrice=function(r,q){return i('div.breakdownCoverPr [data-title="'+r+'"]').data(q)
};
j.getTitle=function(){return i("div.breakdown-cover").data("title")
};
j.getProductCode=function(q){return i('div.breakdownCoverPr [data-title="'+q+'"]').data("productCode")
};
function c(q){var r=q.find("input:checked").data()||{};
return{ancillaryPrice:{value:r.annualPrice||"0",origin:"data-annual-price"},ancillaryName:{value:r.linkvar||"None",origin:"data-linkvar"},selected:{value:!_.isUndefined(r.productCode)&&r.productCode!="NONE",origin:"default"}}
}j.getDataAndConfig=function(){return b.BreakdownCoverPr.superclass.getDataAndConfig(d,c)
};
Cog.registerComponent({name:"premiumPage.breakdownCoverPr",api:l,sharedApi:j,externalApi:m,selector:"div.breakdownCoverPr",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"premiumPage.priceHelper",apiId:"priceHelper"},{name:"premiumPage.container",apiId:"premiumPageContainer"}]})
}(COGjQuery,document));
(function(i,o){var l={},j={},h={moduleName:"breakdownCoverDl",code:"BDC"},g={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},container:{name:"premiumPage.container",events:{initialized:"initialized",register:"register",itemAdded:"itemAdded"}},form:{name:"forms.form",events:{submit:"submit"}},ancillaryProduct:{name:"singleAncillaryProduct",events:{update:"update"}},singleAncillaryProductTracker:{name:"singleAncillaryProductTracker",events:{productChanged:"productChanged"}}},m={formElement:null,journeyStorage:null,priceHelper:null,premiumPageContainer:null},c={BreakdownCoverDl:null},p=false,n={expanded:"expanded",collapsed:"collapsed"},f=[];
function b(){var q=Cog.Type.extend(m.formElement.Element,{view:null,$optionRadios:null,$checkedOptionRadio:null,optionButtons:null,basketTitle:null,basketDescription:null,isSelected:false,$breakdownMobile:null,$quoteBlockHeader:null,$quoteBlockContent:null,$premiumQuoteSummary:null,$aggregatorbreakdownCover:null,$hideBreakdowncoverTable:null,$breakdownCoverContainer:null,$lastIconTick:null,$toggleBreakdownButton:null,displayMode:{},rowHeight:null,tracking:{enabled:false,timesChanged:0,productCode:null,history:[]},initialize:function(){q.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope);
this.tracking.enabled=this.configuration.get().trackChanges
},processState:function(r){if(r){this.refreshErrorPresenter();
this.view.render(r);
this.afterRender()
}},afterRender:function(){this.basketTitle=this.$scope.find(".breakdown-cover").data("title");
this.$quoteBlockHeader=this.$scope.find(".breakdown-cover-column-title");
this.$quoteBlockExpandButton=this.$scope.find(".open-breakdown-box");
this.$quoteBlockContent=this.$scope.find("breakdown-cover-column-section .details");
this.$premiumQuoteSummary=i(".premium-quote-summary");
this.$aggregatorbreakdownCover=i(".premium-page-aggregator .breakdown-cover");
this.$toggleBreakdownButton=i(".toggle-breakdown-cover");
this.$lastIconTick=i(".breakdown-cover-table .options-container .icon-text.icon-tick.last");
this.$hideBreakdowncoverTable=i(".hideBreakdowncoverTable");
this.$breakdownCoverContainer=i(".breakdown-cover");
this.initializeValues();
this.initializeOptionRadios();
this.initializeSelectButtons();
this.initializeRemoveButtons();
this.initializeToggleQuoteBlock();
this.notifyProductChanged();
this.notifyStickyFooter();
this.updateAncillariesRegistry();
this.upsellBoxSwap();
this.switchTableStyle();
if(Cog.pages.isChurchillAggregatorPremiumPage()){this.toggleAggregatorBreakdown();
this.hideBreakDownCover();
Cog.addListener2("elements.stateProvider","allElementsUpdated",_.debounce(this.appendDefactoImage.bind(this),1000))
}Cog.addListener2("elements.registry","allInitialized",this.setDynamicColumnsHeight.bind(this));
Cog.addListener2("breakdownCover","resetTrackingToNone",this.resetTrackingToNone.bind(this));
Cog.addListener2("elements.stateProvider","allElementsUpdated",_.debounce(this.fixTableResponsiveness.bind(this),1000));
Cog.addListener2("elements.stateProvider","allElementsUpdated",_.debounce(this.setTableCellsHeight.bind(this),1000));
i(window).on("resize orientationchange",_.throttle(this.fixTableResponsiveness.bind(this),300));
i(window).on("resize orientationchange",_.throttle(this.setTableCellsHeight.bind(this),300));
i(window).on("resize",_.debounce(this.generateUpsellMarkers.bind(this),250))
},initializeValues:function(){var u=m.premiumPageContainer.dataProvider.getQuote(),s=u.selected+"Price",r=this.$scope.find("mark.current-price"),t=m.journeyStorage.get("breakdown.cover.tracking.data");
_.each(r,function(w){var v=i(w);
m.priceHelper.fillPoundsAndPence(v,v.data(s))
});
if(t){this.tracking=JSON.parse(t)
}},initializeToggleQuoteBlock:function(){_.each(this.$quoteBlockHeader,function(s){var r=i(s);
r.on("click",this.onToggleQuoteBlockClicked.bind(this,s));
this.initializeDisplayMode(r.parent())
},this);
_.each(this.$quoteBlockExpandButton,function(t){var r=i(t),s=i(t).parent();
r.on("click",this.onToggleQuoteBlockClicked.bind(this,s));
this.initializeDisplayMode(r.parent().parent())
},this)
},initializeDisplayMode:function(s){var r=s.find(".componentConfiguration");
if(!this.displayMode[r.data("index")]){this.displayMode[r.data("index")]=r.data("defaultDisplayMode")||s.hasClass("brkdownchosen")?n.expanded:n.collapsed
}if(this.displayMode[r.data("index")]==n.expanded){s.addClass(n.expanded)
}else{s.removeClass(n.expanded)
}},initializeOptionRadios:function(){this.$optionRadios=this.$scope.find(".input-radio input");
this.$optionRadios.on("change",i.proxy(this.onOptionClicked,this))
},initializeSelectButtons:function(){this.$optionButtons=this.$scope.find(".select-option");
this.$optionButtons.on("click",i.proxy(this.onOptionButtonClicked,this))
},initializeRemoveButtons:function(){this.$removeButtons=this.$scope.find(".remove-option");
this.$removeButtons.on("click",i.proxy(this.onOptionRemoveButtonClicked,this))
},resetTrackingToNone:function(){if(this.tracking.enabled&&m.journeyStorage){this.tracking.timesChanged=1;
this.tracking.history=["NONE"];
this.tracking.productCode="NONE";
this.tracking.l1String="RescueCoverChange:FV-NONE|Count-0";
m.journeyStorage.put("breakdown.cover.tracking",this.tracking.l1String);
m.journeyStorage.put("breakdown.cover.tracking.data",JSON.stringify(this.tracking))
}},trackChanges:function(){var s=this.$checkedOptionRadio.data("product-code"),u=this.tracking.productCode,t="RescueCoverChange:",r;
if(u!=s){this.tracking.timesChanged++;
this.tracking.history.push(s);
this.tracking.productCode=s;
for(r=0;
r<this.tracking.history.length-1;
r++){t+=this.tracking.history[r]+"|"
}t=t+"FV-"+this.tracking.history[r]+"|Count-"+(this.tracking.timesChanged-1);
this.tracking.l1String=t;
m.journeyStorage.put("breakdown.cover.tracking",this.tracking.l1String);
m.journeyStorage.put("breakdown.cover.tracking.data",JSON.stringify(this.tracking))
}},fireProductChanged:function(u,t,r,s){Cog.fireEvent(g.singleAncillaryProductTracker.name,g.singleAncillaryProductTracker.events.productChanged,{title:u,productCode:t,description:r,action:s})
},productHasChanged:function(r){return this.basketProductCode!==r
},notifyProductChanged:function(){var s,r;
this.$checkedOptionRadio=this.$optionRadios.filter(":checked");
if(this.tracking.enabled){this.trackChanges()
}s=this.basketProductCode;
r=this.basketDescription;
if(this.$checkedOptionRadio.length==0){this.basketDescription="None";
r=this.basketDescription;
this.isSelected=false
}else{this.basketDescription=this.$checkedOptionRadio.data("title");
this.isSelected=this.$checkedOptionRadio.data("productCode")!=="NONE";
this.basketProductCode=this.$checkedOptionRadio.data("productCode");
this.changeTableType()
}if(this.productHasChanged(s)){this.fireProductChanged(this.basketTitle,s,r,"removed")
}if(this.isSelected){this.fireProductChanged(this.basketTitle,this.basketProductCode,this.basketDescription,"added")
}Cog.fireEvent(g.container.name,g.container.events.itemAdded,{title:this.basketTitle,productCode:this.basketProductCode,description:this.basketDescription})
},notifyStickyFooter:function(){if(this.basketDescription.indexOf("None")>=0){return
}Cog.fireEvent("premiumPage.sticyFooter","breakdownCover",{key:h.code,value:this.basketTitle+" "+this.basketDescription,selected:true})
},updateAncillariesRegistry:function(){if(this.basketTitle){Cog.fireEvent(g.ancillaryProduct.name,g.ancillaryProduct.events.update,{name:this.basketTitle,code:h.code,selected:this.isSelected,$scope:this.$scope})
}},onOptionButtonClicked:function(s){var r=i(s.target).data("index");
this.displayMode[r]=n.expanded;
this.onOptionChanged(r)
},onOptionRemoveButtonClicked:function(){var s=this.$quoteBlockHeader,r,t=0;
s.each(function(u,v){r=i(v);
if(r.hasClass("product-code-NONE")){t=u
}});
this.onOptionChanged(t)
},onOptionChanged:function(r){var t=this.$scope.find(".upsell-message-box"),s=parseInt(this.$premiumQuoteSummary.css("top"),10);
this.$checkedOptionRadio=this.$optionRadios.filter(":checked");
this.$checkedOptionRadio.checked=false;
this.$optionRadios[r].checked=true;
this.notifyProductChanged();
this.notifyStickyFooter();
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:this.$scope,isValidationEnabled:false});
Cog.fireEvent("premiumPage.basketChange","changed");
Cog.fireEvent("premiumPage.sidebarChange","changed");
if(this.$premiumQuoteSummary.length&&t.length&&this.$premiumQuoteSummary.css("position")==="absolute"){this.$premiumQuoteSummary.css("top",s-t.outerHeight(true))
}Cog.addListener2("elements.stateProvider","allElementsUpdated",setTimeout(function(){var u=i(".new-breakdown-cover");
if(u.length){window.scrollTo(0,u.offset().top)
}},800))
},onOptionClicked:function(r){this.notifyProductChanged();
this.notifyStickyFooter();
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:this.$scope,isValidationEnabled:false})
},onToggleQuoteBlockClicked:function(u,v){v.preventDefault();
var r=i(u).parent(),s=r.find(".details"),t=r.find(".componentConfiguration");
if(this.isMobile()){if(r.hasClass(n.expanded)){s.slideUp("normal");
r.removeClass(n.expanded);
this.displayMode[t.data("index")]=n.collapsed
}else{s.slideDown("normal");
r.addClass(n.expanded);
this.displayMode[t.data("index")]=n.expanded
}}},isMobile:function(){return window.matchMedia("(max-width: 860px)").matches
},setTableCellsHeight:function(){var u=this.$scope,w=u.find(".breakdown-cover-column-section .options-container"),s=u.find(".benefit-description"),x,r,v,t;
if(!this.isMobile()){for(v=0;
v<=s.length;
v++){r=i(s[v]).outerHeight();
for(t=0;
t<=w.length;
t++){x=i(w[t]).find(".icon-text");
if(x.length){i(x[v]).css({height:r})
}}}}else{w.find(".icon-text").css({height:"auto"})
}},fixTableResponsiveness:function(){var D=this.$scope,C=D.find(".breakdown-cover-firstView"),z=D.outerWidth(true),t=D.find(".breakdown-cover-greenflag-icon"),r=this.$quoteBlockHeader.not(".product-code-NONE"),B=D.find(".breakdown-cover-column").not(".hidden"),E=C.find(".breakdown-cover-column").not(".hidden"),x=r.find(".image img"),y=220,A=r.length,s,v=E.length,u,w;
t.removeAttr("style");
x.removeAttr("style");
this.rowHeight=t.outerHeight(true)+x.outerHeight(true);
s=Math.floor((z-y)/A);
u=Math.floor(z/v);
if(!this.isMobile()){r.css({height:this.rowHeight});
t.css({height:this.rowHeight+1});
B.css({width:s});
r.addClass("open");
B.find(".details").show()
}else{r.css({height:"auto"});
t.css({height:"auto"});
B.css({width:"auto"})
}if(!this.isMobile()&&C.length){for(w=0;
w<=E.length;
w++){i(E[w]).css({width:u-10,"float":"left"});
i(E[w+1]).css({"margin-left":9})
}}this.generateUpsellMarkers();
if(Cog.pages.isChurchillAggregatorPremiumPage()){if(i(".breakdown-cover").is(":visible")){this.$toggleBreakdownButton.parents(".aggregator-columns-row").addClass("tableVisible")
}}},switchTableStyle:function(){var s=this.$scope,r=s.find(".switchTable");
r.on("click",(this.changeTableType.bind(this)))
},setDynamicColumnsHeight:function(){var r=i(".breakdown-cover-firstView .breakdown-cover-column:visible"),s=i(".breakdown-cover-firstView .breakdown-cover-description p");
window.ch=0;
window.ph=0;
r.each(function(u,t){if(window.ch<i(t).height()){window.ch=i(t).height()
}});
r.each(function(u,t){if(!i(t).hasClass("dynamicHeight")){i(t).height(window.ch+100);
i(t).addClass("dynamicHeight")
}});
s.each(function(u,t){if(window.ph<i(t).height()){window.ph=i(t).height()
}});
s.each(function(u,t){i(t).height(window.ph)
})
},changeTableType:function(u){var r=this.$scope,t=r.find(".breakdown-cover-firstView"),s=r.find(".breakdown-cover-table-details");
if(r.find(".added").length||(u&&i(u.target).hasClass("open-breakdown-box"))){t.hide();
s.show();
this.fixTableResponsiveness();
this.setTableCellsHeight()
}},upsellBoxSwap:function(){var r=this.$scope.find(".upsell-message-box"),t=this.$scope.find(".options-block.breakdown-cover.recalculation.added"),s=this.$scope.find(".breakdown-cover-table").children();
if(window.matchMedia("(min-width: 860px)").matches){r.insertAfter(t)
}else{r.insertBefore(s[0])
}i(window).resize(function(){if(window.matchMedia("(min-width: 860px)").matches){r.insertAfter(t)
}else{r.insertBefore(s[0])
}})
},generateUpsellMarkers:function(){var s=this.$scope.find(".upsell-message-box"),v=this.$scope.find(".breakdown-cover-table"),u=v.find(".upsell-upgrade"),y=s.find(".upsell-marker"),z,r,t,x,w;
y.remove();
_.each(u,function(A){w=i(A);
x=i("<span />").addClass("upsell-marker");
z=w.position().left;
r=(w.width()/2)-10;
t=parseInt((z+r),10);
x.css("left",t);
s.append(x)
})
},toggleAggregatorBreakdown:function(){this.$toggleBreakdownButton.on("click",function(){this.$aggregatorbreakdownCover.show();
this.fixTableResponsiveness();
this.setTableCellsHeight();
this.setDynamicColumnsHeight();
this.$toggleBreakdownButton.parents(".aggregator-columns-row").addClass("tableVisible")
}.bind(this))
},hideBreakDownCover:function(){this.$hideBreakdowncoverTable.on("click",function(){this.$toggleBreakdownButton.parents(".aggregator-columns-row").removeClass("tableVisible");
this.$breakdownCoverContainer.css("display","none")
}.bind(this))
},appendDefactoImage:function(){if(!this.$lastIconTick.find("span").length){this.$lastIconTick.append("<span></span>")
}}});
c.BreakdownCoverDl=q
}l.onRegister=function(q){q.element=new c.BreakdownCoverDl(q.$scope)
};
l.onUnregister=function(q){q.element.unregister()
};
l.init=function(q){Cog.fireEvent(g.registry.name,g.registry.events.initialized,{analytics:j.getDataAndConfig});
Cog.fireEvent(g.container.name,g.container.events.register);
f=i(i.merge(f,q))
};
l.beforeInit=function(){Cog.fireEvent(g.registry.name,g.registry.events.register);
Cog.fireEvent(g.container.name,g.container.events.register);
if(!p){p=true;
b()
}};
j.getTitle=function(){return i("div.breakdown-cover").data("title")
};
function d(q){var r=q.find("input:checked").data()||{};
return{ancillaryPrice:{value:r.annualPrice||"0",origin:"data-annual-price"},ancillaryName:{value:r.linkvar||"None",origin:"data-linkvar"},selected:{value:!_.isUndefined(r.productCode)&&r.productCode!="NONE",origin:"default"}}
}j.getDataAndConfig=function(){return c.BreakdownCoverDl.superclass.getDataAndConfig(f,d)
};
Cog.registerComponent({name:"premiumPage.breakdownCoverDl",api:l,sharedApi:j,externalApi:m,selector:"div.breakdownCoverDl",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"premiumPage.priceHelper",apiId:"priceHelper"},{name:"premiumPage.container",apiId:"premiumPageContainer"}]})
}(COGjQuery,document));
(function(h,m){var j={},i={},g={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},container:{name:"premiumPage.container",events:{initialized:"initialized",register:"register",quoteChanged:"quoteChanged"}},form:{name:"forms.form",events:{submit:"submit"}}},l={formElement:null,keyCodes:null,keyExecutor:null,focusHelper:null,rebrand:null},b={PremiumPaymentOption:null},o=false,d=[];
function f(){var p=Cog.Type.extend(l.formElement.Element,{view:null,$links:null,$inputs:null,$selectedInput:null,$selectedRadio:null,currentlyFocused:null,viewing:[],currentlyViewing:null,focusHelper:l.focusHelper.FocusHelper.instance(),$quoteHeading:null,$quoteContent:null,$radioInputs:null,displayMode:null,constructor:function(q){p.superclass.constructor.call(this,q);
Cog.fireEvent(g.container.name,g.container.events.componentInitialized)
},initialize:function(){p.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(q){if(q){this.refreshErrorPresenter();
this.initializeDisplayMode(q);
this.view.render(q);
this.afterRender()
}},getDefaultDisplayMode:function(){return this.configuration.get().defaultDisplayMode||"expanded"
},initializeDisplayMode:function(q){if(!this.displayMode){this.displayMode=q.monthlySelected?"expanded":this.getDefaultDisplayMode()
}},adjustForNewPremiumPage:function(){if(l.rebrand.isRebranded()){this.$quoteHeading=this.$scope.find(".quote-heading");
this.$quoteContent=this.$scope.find(".definition-list-list-inner");
this.$radioInputs=this.$scope.find(".input-radio");
if(this.displayMode=="expanded"){this.$scope.addClass("expanded")
}else{if(this.displayMode=="collapsed"){this.$scope.removeClass("expanded")
}}this.initializeToggleQuoteBlock();
this.handleExpanding()
}},focusOut:function(r,t){var s=null,q=null;
if(r.length){s=r.is("a, input, textarea")?r[0]:r.find("a, input, textarea")[0];
q=t==="next"?r.next():r.prev();
if(s){s.focus()
}else{this.focusOut(q,t)
}}return s
},tabOut:function(s,u,t){var q=t==="next"?this.$links.eq(this.currentlyViewing)[0]:h(this.$links[0]).prev(),r=t==="next"?this.$scope.next():this.$scope.prev();
if(u&&q){q.focus()
}else{s.blur();
this.focusOut(r,t)
}},changeFocus:function(q,t,s){var r=this.$links.eq(q+t)[0];
if(s&&r){r.click();
r.focus()
}},initializeToggleQuoteBlock:function(){this.$quoteHeading.on("click",this.onToggleQuoteBlockClicked.bind(this))
},onToggleQuoteBlockClicked:function(q){if(this.$scope.hasClass("expanded")){this.$quoteContent.slideUp("normal");
this.$scope.removeClass("expanded");
this.displayMode="collapsed"
}else{this.$quoteContent.slideDown("normal");
this.$scope.addClass("expanded");
this.displayMode="expanded"
}},onLinksClicked:function(q,r){this.$selectedInput=h(q).siblings(".input-radio").find("input");
this.$selectedInput.prop("checked",true);
this.displayMode=this.$selectedInput.data("target")=="monthly"?"expanded":"collapsed";
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:this.$scope,isValidationEnabled:false});
r.preventDefault()
},onLinksKeyupped:function(v,t){var x=h(v).data("show"),q=l.keyExecutor,u=l.keyCodes,w=x<this.$inputs.length-1,y=x>0,r=x===1,s=x===0;
switch(t.which){case u.keyDown:case u.keyRight:q.onKey(this.changeFocus(x,1,w),[u.keyRight]);
break;
case u.keyUp:case u.keyLeft:q.onKey(this.changeFocus(x,-1,y),[u.keyLeft]);
break;
case u.tab:if(t.shiftKey){q.onKey(this.tabOut(v,r,"prev"),[u.tab])
}else{q.onKey(this.tabOut(v,s,"next"),[u.tab])
}break;
default:t.preventDefault()
}},markInput:function(q,r){if(r.checked){this.currentlyViewing=q
}this.viewing[q]=h(r).data("target");
h(r).on("change",h.proxy(function(){this.$links.eq(q).click()
},this))
},initializeInputs:function(){this.$inputs=this.$scope.find("ul.tabs input");
this.$inputs.each(h.proxy(function(q,r){this.markInput(q,r)
},this))
},initializeLinks:function(){this.$links=this.$scope.find("ul.tabs li a");
this.$links.each(function(q){h(this).data("show",q)
});
this.$links.on("click",this.contextProxy(this.onLinksClicked,this));
this.$links.on("keyup",this.contextProxy(this.onLinksKeyupped,this))
},afterRender:function(){this.initializeInputs();
this.initializeLinks();
this.notifyOptionChanged();
this.adjustForNewPremiumPage()
},notifyOptionChanged:function(q){this.$selectedRadio=this.$scope.find("input[type='radio']:checked");
if(q){this.focusHelper.blinkElement(this.$selectedRadio)
}Cog.fireEvent(g.container.name,g.container.events.quoteChanged,{selected:this.$selectedRadio.val(),cost:parseFloat(this.$selectedRadio.data("quote")).toFixed(2)});
Cog.fireEvent("premiumPage.basketChange","changed")
},handleExpanding:function(){var r,q=l.keyCodes;
this.$quoteHeading.on("keyup",function(s){if(s.which===q.enter){this.onToggleQuoteBlockClicked()
}}.bind(this));
this.$radioInputs.parent().on("keyup",function(s){r=h(s.target).find("input");
if(s.which===q.enter){this.$radioInputs.prop("checked",false);
r.prop("checked",true);
this.onLinksClicked(h(s.target),s)
}}.bind(this))
}});
b.PremiumPaymentOption=p
}j.onRegister=function(p){p.element=new b.PremiumPaymentOption(p.$scope)
};
j.onUnregister=function(p){p.element.unregister()
};
j.init=function(p){Cog.fireEvent(g.registry.name,g.registry.events.initialized,{analytics:i.getDataAndConfig});
Cog.fireEvent(g.container.name,g.container.events.initialized);
d=h(h.merge(d,p))
};
j.beforeInit=function(){Cog.fireEvent(g.registry.name,g.registry.events.register);
Cog.fireEvent(g.container.name,g.container.events.register);
if(!o){o=true;
f()
}};
i.getPrice=function(p){return h("div.premiumPaymentOption .payment-options").data(p)
};
function c(p){var q=p.find(".payment-options").data("annualPrice");
if(_.isNumber(q)){q=q.toString()
}return{annualPrice:{value:q,origin:"data-annual-price"}}
}function n(){var p=[];
_.forEach(d,function(r){var q=h(r),s=q.find("input:checked"),t;
t={data:{value:s.val(),origin:s.attr("name")},config:{analyticsLabel:"PAYMENT_TYPE",analyticsFieldTrackingBindings:["direct.default"]}};
p.push(t)
});
return p
}i.getDataAndConfig=function(){return b.PremiumPaymentOption.superclass.getDataAndConfig(d,c).concat(n())
};
Cog.registerComponent({name:"premiumPage.paymentOption",api:j,externalApi:l,selector:"div.premiumPaymentOption",sharedApi:i,requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"events.keyCodes",apiId:"keyCodes"},{name:"events.keyExecutor",apiId:"keyExecutor"},{name:"forms.helper.focusHelper",apiId:"focusHelper"},{name:"commons.rebrand",apiId:"rebrand"},"premiumPage.container"]})
}(COGjQuery,document));
(function(g,l){var i={},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},container:{name:"premiumPage.container",events:{initialized:"initialized",register:"register",excessChanged:"excessChanged"}},form:{name:"forms.form",events:{submit:"submit"}}},j={formElement:null,pageScroller:null,rebrand:null,keyCodes:null},b={Excesses:null},h={},m=false;
function d(){var n=Cog.Type.extend(j.formElement.Element,{view:null,excessesValue:null,$select:null,$upgradeButton:null,$toggleButton:null,$content:null,isChanged:false,allowedBrand:["directline","privilege"],constructor:function(o){n.superclass.constructor.call(this,o);
Cog.fireEvent(f.container.name,f.container.events.componentInitialized)
},initialize:function(){n.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},findDomElements:function(){this.$select=this.$scope.find("select");
this.$upgradeButton=this.$scope.find(".third-party-upgrade button");
this.$toggleButton=this.$scope.find(".options-header");
this.$content=this.$scope.find(".options-content")
},processState:function(o){if(o){this.refreshErrorPresenter();
this.view.render(o);
this.afterRender()
}},afterRender:function(){this.findDomElements();
this.initializeSelect();
this.initializeUpgradeButton();
this.notifyExcessesChanged();
this.notifyStickyFooter();
this.adjustForNewPremiumPage();
this.scrollToScope();
this.handleExpanding()
},isValidBrand:function(){var p,o;
if(window.CQ_Analytics){p=window.CQ_Analytics.PageDataMgr.initProperty.brandName;
if(p){o=_.filter(this.allowedBrand,function(q){return q.toLowerCase()==p.toLowerCase()
})
}}return o&&o.length
},adjustForNewPremiumPage:function(){if(j.rebrand.isRebranded()&&this.isValidBrand()){this.initializeToggleButton();
this.expandOrCollapse();
this.handleCoverTypeModeInfo()
}},initializeToggleButton:function(){this.$toggleButton.on("click",g.proxy(this.onToggleClick,this))
},onToggleClick:function(){this.toggleDisplayMode();
this.expandOrCollapse();
this.handleCoverTypeModeInfo()
},toggleDisplayMode:function(){this.displayMode=this.displayMode=="expanded"?"collapsed":"expanded"
},expandOrCollapse:function(){if(!this.displayMode){this.displayMode=this.configuration.get().defaultDisplayMode
}if(this.displayMode=="expanded"){this.$content.slideDown("normal");
this.$scope.addClass("expanded")
}else{this.$content.slideUp("normal");
this.$scope.removeClass("expanded")
}},handleCoverTypeModeInfo:function(){var o=g("<p />").addClass("cover-type-mode"),p=this.$scope.hasClass("expanded")?"Done":"Edit";
o.text(p);
this.$toggleButton.find(".cover-type-mode").remove();
this.$toggleButton.append(o)
},initializeSelect:function(){this.$select.on("change",g.proxy(this.onSelectChange,this))
},onSelectChange:function(o){this.notifyExcessesChanged();
this.notifyStickyFooter();
this.isChanged=true;
Cog.fireEvent(f.form.name,f.form.events.submit,{$scope:this.$scope,isValidationEnabled:false})
},scrollToScope:function(){if(this.isChanged){if(!j.rebrand.isRebranded()){window.setTimeout(function(){j.pageScroller.basicScroller.scrollTo(this.$scope,500)
}.bind(this),500);
this.isChanged=false
}}},initializeUpgradeButton:function(){this.$upgradeButton.on("click",g.proxy(this.onUpgradeButtonClick,this))
},onUpgradeButtonClick:function(p){var o={};
o[this.$upgradeButton.data("coverUpdate")]=true;
this.notifyExcessesChanged();
this.notifyStickyFooter();
this.isChanged=true;
Cog.fireEvent(f.form.name,f.form.events.submit,{$scope:this.$scope,additionalParameters:o,isValidationEnabled:false});
p.preventDefault()
},notifyExcessesChanged:function(){var o=this.$scope.find("option:selected");
this.excessesValue=o.val();
o.trigger("focusout");
g(":focus").blur();
Cog.fireEvent(f.container.name,f.container.events.excessChanged,this.excessesValue)
},notifyStickyFooter:function(){var p=this.$scope.find("option:selected"),o=p.val();
if(!p||!o){return
}o="Voluntary excess "+o;
Cog.fireEvent("premiumPage.sticyFooter","excesses",{key:"EXCESS",value:o,selected:true})
},handleExpanding:function(){var o=j.keyCodes;
this.$toggleButton.on("keyup",function(p){if(p.which===o.enter){this.onToggleClick(p)
}}.bind(this))
}});
b.Excesses=n
}i.onRegister=function(n){n.element=new b.Excesses(n.$scope)
};
i.onUnregister=function(n){n.element.unregister()
};
i.init=function(n){Cog.fireEvent(f.container.name,f.container.events.initialized);
Cog.fireEvent(f.registry.name,f.registry.events.initialized,{analytics:h.getDataAndConfig})
};
i.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
Cog.fireEvent(f.container.name,f.container.events.register);
if(!m){m=true;
d()
}};
function c(n){var o=n.find("select")||{};
return{value:o.val(),origin:o.attr("id")}
}h.getDataAndConfig=function(){var n=g("div.excessesFormElement");
return b.Excesses.superclass.getDataAndConfig(n,c)
};
Cog.registerComponent({name:"premiumPage.excesses",api:i,sharedApi:h,externalApi:j,selector:"div.excessesFormElement",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"commons.rebrand",apiId:"rebrand"},{name:"forms.form.pageScroller",apiId:"pageScroller"},{name:"events.keyCodes",apiId:"keyCodes"},"premiumPage.container"]})
}(COGjQuery,document));
(function(i,n){var l={},j={},h={moduleName:"singleAncillaryProduct",events:{update:"update"}},g={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},container:{name:"premiumPage.container",events:{initialized:"initialized",register:"register",itemAdded:"itemAdded"}},form:{name:"forms.form",events:{submit:"submit"}},stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}},singleAncillaryProductTracker:{name:"singleAncillaryProductTracker",events:{productChanged:"productChanged"}}},m={formElement:null,focusHelper:null,pageScroller:null,rebrand:null,keyCodes:null,ancillaryStorage:null,singleAncillaryProductValidator:null,wcmMode:null,preAddAncillary:null,nBox:null},c={SingleAncillaryProduct:null},p=false,o=false,f=[];
function b(){var q=Cog.Type.extend(m.formElement.Element,{view:null,basketTitle:null,basketDescription:null,noneProductDescription:"None",productCheckbox:null,noProductCheckbox:null,productCode:null,isSelected:false,isChanged:false,carHire:false,telematics:false,replacementProductBasketDescription:null,forceCarHireReplacement:false,carHireReplacement:null,focusHelper:m.focusHelper.FocusHelper.instance(),$submitButton:null,$fullDescription:null,$summary:null,$toggleButton:null,$toggleButtonIcon:null,$toggleTarget:null,$quoteBlockHeader:null,$quoteBlockContent:null,$promptOverlay:null,$lightboxLinkPrompt:null,displayMode:null,executeValidatorsSuper:null,validateAfterRender:false,requiresPrompt:false,promptPassed:false,isQnbTable:false,isQnbPr:false,isQnbVisible:false,toggleButtonLabel:"",toggleButtonLabelHide:"",constructor:function(r){q.superclass.constructor.call(this,r);
this.executeValidatorsSuper=q.superclass.executeValidators;
Cog.fireEvent(g.container.name,g.container.events.componentInitialized)
},initialize:function(){q.superclass.initialize.call(this);
this.requiresPrompt=this.configuration.get().requiresPrompt;
if(this.configuration.get().activeSelectionRequired){this.addValidator(new m.singleAncillaryProductValidator.SingleAncillaryProductValidator(this,this.configuration.get().activeSelectionValidatorMessage))
}this.toggleButtonLabel=this.configuration.get().toggleButtonLabel;
this.toggleButtonLabelHide=this.configuration.get().toggleButtonLabelHide;
this.view=this.viewFactory.create(this.$scope)
},findDomElements:function(){this.$target=this.$scope.find("> .target");
this.$fullDescription=this.$target.find(".full-text");
this.$summary=this.$target.find(".summary-text");
this.$toggleButton=this.$target.find(".nav-toggle");
this.$toggleButtonTop=this.$target.find(".qnb-table-toggle-top");
this.$toggleTarget=this.$target.find(".qnb-toggle-target");
this.$toggleButtonIcon=this.$toggleButton.find(".icon-arrow");
this.$quoteBlockHeader=this.$target.find(".quote-block-header");
this.$quoteBlockContent=this.$target.find(".options-container");
this.$submitButton=this.$target.find("button");
this.$promptOverlay=this.$scope.find(".promptOverlay");
this.$lightboxLinkPrompt=this.$scope.find(".lightbox-link-prompt")
},checkQnbVisible:function(){if(!this.isMobile()&&this.$toggleTarget.data("table-visible")){this.isQnbVisible=true
}},handleQnbVisible:function(){if(this.isQnbVisible){this.showDescription();
this.isQnbVisible=false
}},isMobile:function(){return i(window).width()<640
},checkIfQnbTable:function(){if(this.$target.find(".qnb-table-active").length){this.isQnbTable=true;
this.checkIfQnbTablePr()
}},checkIfQnbTablePr:function(){if(this.$target.find(".qnb-table-pr").length){this.isQnbPr=true
}},processState:function(r){if(r){this.beforeRender(r);
if(!this.displayMode){this.displayMode=r.checked?"expanded":this.configuration.get().defaultDisplayMode
}this.view.render(r);
this.refreshErrorPresenter();
this.afterRender(r)
}},beforeRender:function(r){if(this.$submitButton!=null){this.$submitButton.off();
this.$submitButton=null
}r.unselected=!o&&m.ancillaryStorage.isUnselected(this.configuration.get().productCode)&&this.configuration.get().initialState==="unselected"
},displayErrors:function(u){var t=this.$scope,s,r;
if(u){if(this.isValid()){t.removeClass("error");
s=t.find(".target .error-message");
s.html(" ");
s.hide();
return
}this.validateAfterRender=false
}if(t.hasClass("error")){r=t.find("> .error-message");
s=t.find(".target .error-message");
s.html(r.html());
s.show()
}},executeValidators:function(){var r=this.executeValidatorsSuper();
this.displayErrors();
return r
},afterRender:function(r){this.findDomElements();
this.checkIfQnbTable();
if(this.isQnbTable){i(window).on("resize",_.debounce(function(){this.$toggleButton.off("click");
this.initializeToggleButton();
this.handlePrLightboxLink()
}.bind(this),300))
}this.forceCarHireReplacement=r.selectedReplacementProduct=="CHC"||r.selectedReplacementProduct=="GHC";
if(this.forceCarHireReplacement){this.$scope.data("forceCarHireReplacement","YES");
this.carHireReplacement=r.selectedReplacementProduct;
this.$scope.data("carHireReplacement",this.carHireReplacement)
}else{this.$scope.data("forceCarHireReplacement",null)
}if(r.visible){this.productCheckbox=this.fields.findAndCreate("input.checkbox-main",this.$scope,true);
this.noProductCheckbox=this.fields.findAndCreate("input.hidden",this.$scope,true);
this.handlePrLightboxLink();
this.activatePrLightboxLink();
this.initializeFindOutMoreLightboxLink();
this.initializeSubmitButton();
this.initializeToggleButton();
this.initializeToggleQuoteBlock();
if(r.checked){this.initializeMessage(r)
}this.updateBasketMetadata(true);
if(this.displayMode=="expanded"){this.$scope.addClass("expanded");
if(Cog.pages.isChurchillAggregatorPremiumPage()){this.$scope.find(".button-yes h5").text("Added")
}}else{if(this.displayMode=="collapsed"){this.$scope.removeClass("expanded");
if(Cog.pages.isChurchillAggregatorPremiumPage()){this.$scope.find(".button-yes h5").text("Add")
}}}this.scrollToScope()
}else{this.removeFromAncillariesRegistry()
}this.notifyProductChanged();
this.updateAncillariesRegistry(r);
this.notifyStickyFooter(r);
this.handleExpanding();
Cog.fireEvent("premiumPage.basketChange","changed");
this.displayErrors(this.validateAfterRender);
if(this.isQnbTable){this.checkQnbVisible();
this.handleQnbVisible()
}},removeFromAncillariesRegistry:function(){Cog.fireEvent(h.moduleName,h.events.remove,{name:this.basketTitle,code:this.productCode,selected:false,$scope:this.$scope})
},updateAncillariesRegistry:function(r){if(!this.productCode||!r.visible){return false
}Cog.fireEvent(h.moduleName,h.events.update,{name:this.basketTitle,code:this.productCode,selected:this.isSelected,telematics:this.telematics,hidden:r.greyedOut,$scope:this.$scope})
},notifyStickyFooter:function(r){if(!this.productCode||!r.visible){return false
}Cog.fireEvent("premiumPage.sticyFooter","singleAncillaryProduct",{value:this.basketTitle,key:this.productCode,selected:this.isSelected})
},initializeFindOutMoreLightboxLink:function(){this.$lightboxLinkPrompt.on("click",i.proxy(this.onFindOutMoreLightboxLinkClicked,this))
},initializeSubmitButton:function(){this.$submitButton.on("click",i.proxy(this.onSubmitButtonClicked,this))
},initializeToggleButton:function(){if(this.isMobile()&&this.isQnbTable&&!this.isQnbPr){this.handleQnBMobile();
this.$toggleButton.on("click",this.handleQnbMobileLightbox.bind(this))
}else{this.$toggleButton.on("click",this.onToggleButtonClicked.bind(this))
}},initializeToggleQuoteBlock:function(){this.$quoteBlockHeader.on("click",this.onToggleQuoteBlock.bind(this))
},initializeMessage:function(){var r=this.$scope.find(".remove-message")||i(),s=function(t){if(i(window).width()<640){t.addClass("mobile")
}else{t.removeClass("mobile")
}};
s(r);
this.$submitButton.on("mouseenter",function(){if(Modernizr.mq("(min-width: 640px)")){r.css("visbility","visible").fadeIn()
}});
this.$submitButton.on("mouseleave",function(){r.fadeOut()
});
i(window).on("resize",function(){s(r)
})
},scrollToScope:function(){if(this.isChanged){Cog.fireEvent("premiumPage.basketChange","changed");
if(!m.rebrand.isRebranded()){window.setTimeout(function(){m.pageScroller.basicScroller.scrollTo(this.$scope,500)
}.bind(this),500);
this.isChanged=false
}}},updateBasketMetadata:function(){var s=this.view.getTarget(),r=s.find("> div").data()||{};
this.carhire=r.carhire||false;
this.telematics=r.telematics||false;
this.basketTitle=r.title||"";
this.basketDescription=r.description||"";
this.productCode=r.productCode||"";
this.replacementProductBasketDescription=r.replacementProductBasketDescription||""
},hideDescription:function(){this.$summary.removeClass("hidden");
this.$fullDescription.addClass("hidden");
this.$toggleButtonIcon.addClass("icon-arrow-down").removeClass("icon-arrow-up icon-arrow-right");
this.$toggleButtonIcon.parent().find(".toggleLabel").text(this.toggleButtonLabel);
if(this.isQnbTable){this.$toggleButtonTop.removeClass("hidden")
}},showDescription:function(){this.$summary.addClass("hidden");
this.$fullDescription.removeClass("hidden");
this.$toggleButtonIcon.addClass("icon-arrow-up").removeClass("icon-arrow-down icon-arrow-right");
this.$toggleButtonIcon.parent().find(".toggleLabel").text(this.toggleButtonLabelHide);
if(this.isQnbTable){this.$toggleButtonTop.addClass("hidden")
}},toggleDescription:function(){if(this.$fullDescription.hasClass("hidden")){this.showDescription()
}else{this.hideDescription()
}},handleQnBMobile:function(){this.hideDescription();
this.$toggleButtonIcon.addClass("icon-arrow-right-2").removeClass("icon-arrow-up icon-arrow-down")
},handlePrLightboxLink:function(){if(this.isQnbPr&&this.isMobile()){this.$lightboxLinkPrompt.addClass("hidden")
}else{if(this.$lightboxLinkPrompt.hasClass("hidden")){this.$lightboxLinkPrompt.removeClass("hidden")
}}},activatePrLightboxLink:function(){if(this.$target.find(".show-qnb-lightbox-link").length){this.$target.find(".show-qnb-lightbox-link").on("click",this.handleQnbMobileLightbox.bind(this))
}},handleQnbMobileLightbox:function(){var r={$content:this.$toggleTarget,closable:true,isAjaxRequest:false,handler:false,shouldScroll:false};
event.preventDefault();
m.nBox.create(r)
},notifyProductChanged:function(){var r=this.productCheckbox?this.productCheckbox.getValue():false,t=r?"added":"removed",s;
if(this.carhire&&this.forceCarHireReplacement){s={title:this.basketTitle,productCode:this.carHireReplacement,isReplacementProduct:true,carHire:this.carhire,description:this.replacementProductBasketDescription,action:t};
Cog.fireEvent(g.container.name,g.container.events.itemAdded,s);
Cog.fireEvent(g.singleAncillaryProductTracker.name,g.singleAncillaryProductTracker.events.productChanged,s)
}else{if(this.carhire||this.isSelected!=r){s={title:this.basketTitle,productCode:this.productCode,carHire:!!this.carhire,telematics:!!this.telematics,description:r?this.basketDescription:this.noneProductDescription,action:t};
Cog.fireEvent(g.container.name,g.container.events.itemAdded,s);
Cog.fireEvent(g.singleAncillaryProductTracker.name,g.singleAncillaryProductTracker.events.productChanged,s);
this.isSelected=r
}}if(this.isSelected&&this.$fullDescription.length){if(!this.$scope.hasClass("singleAncillaryProductPr")&&!this.isMobile()){this.showDescription()
}}else{if(!this.$scope.hasClass("singleAncillaryProductPr")&&!this.isMobile()&&this.$fullDescription.length){this.hideDescription()
}}},showPrompt:function(s){var r={$content:this.$promptOverlay,closable:s,isAjaxRequest:false,handler:false,shouldScroll:false};
if(s){this.$promptOverlay.find(".quote-block.bot").hide()
}else{this.$promptOverlay.find(".quote-block.bot").show();
m.preAddAncillary.initialize(this.$promptOverlay,true,true)
}m.nBox.create(r)
},onFindOutMoreLightboxLinkClicked:function(r){this.showPrompt(true);
r.preventDefault();
r.stopPropagation()
},onSubmitButtonClicked:function(t){var u,r=i(t.target),s=r.data()||{};
if(s.disabled||s.inactive){return
}u=!this.productCheckbox.getValue();
if(s.unselectedNoButton){u=false
}if(u&&this.requiresPrompt&&!s.promptPassed){this.showPrompt(false);
return
}if(s.disableScrolling){r.removeData("disableScrolling")
}else{this.isChanged=true
}m.ancillaryStorage.addSelectedItem(this.productCode);
this.productCheckbox.setValue(u);
if(this.noProductCheckbox){this.noProductCheckbox.setValue(!u)
}this.displayMode=u?"expanded":"collapsed";
this.notifyProductChanged();
this.focusHelper.blinkElement(this.productCheckbox.getElement());
this.validateAfterRender=true;
Cog.fireEvent(g.form.name,g.form.events.submit,{$scope:this.$scope,isValidationEnabled:false});
t.preventDefault();
t.stopPropagation()
},onToggleButtonClicked:function(r){r.preventDefault();
this.toggleDescription()
},onToggleQuoteBlock:function(r){r.preventDefault();
this.$summary.removeClass("hidden");
this.$fullDescription.removeClass("hidden");
if(this.isQnbTable){this.$toggleTarget.removeClass("hidden")
}if(this.$scope.hasClass("expanded")){this.$quoteBlockContent.slideUp("normal");
this.$scope.removeClass("expanded");
this.displayMode="collapsed"
}else{this.$quoteBlockContent.slideDown("normal");
this.$scope.addClass("expanded");
this.displayMode="expanded"
}},handleExpanding:function(){var s=m.keyCodes,r;
this.$quoteBlockHeader.on("keyup",function(t){r=i(t.target);
if(t.which===s.enter){if(r.hasClass("quote-block-header")){this.onToggleQuoteBlock(t)
}else{t.stopPropagation()
}}}.bind(this))
}});
c.SingleAncillaryProduct=q
}l.onPageStateChanged=function(r){var q=r.eventData;
if(p){if(q.state&&q.state.pageData){o=q.state.pageData.isRetrieve==="true"
}}};
l.onRegister=function(q){q.element=new c.SingleAncillaryProduct(q.$scope)
};
l.onUnregister=function(q){q.element.unregister()
};
l.init=function(q){Cog.fireEvent(g.registry.name,g.registry.events.initialized,{analytics:j.getDataAndConfig});
Cog.fireEvent(g.container.name,g.container.events.initialized);
f=i(i.merge(f,q))
};
l.beforeInit=function(){Cog.fireEvent(g.registry.name,g.registry.events.register);
Cog.fireEvent(g.container.name,g.container.events.register);
if(!p){p=true;
b();
Cog.addListener2(g.stateProvider.name,g.stateProvider.events.stateChanged,l.onPageStateChanged)
}};
j.getPrice=function(u,t){var s=i('div.singleAncillaryProduct [data-title="'+u+'"]'),q=s.parents(".singleAncillaryProduct"),r=q.data("forceCarHireReplacement");
return r?"0.00":s.data(t)||"0.00"
};
j.getProductCode=function(u){var s=i('div.singleAncillaryProduct [data-title="'+u+'"]'),q=s.parents(".singleAncillaryProduct"),r=q.data("forceCarHireReplacement"),t=q.data("carHireReplacement");
return r?t:s.data("productCode")
};
function d(v){var s=v.find("div[data-product-code]").data()||{},u=s.annualPrice||0,q=s.linkvar||"None",r=v.find(".add-button input.checkbox-main").is(":checked"),w=v.data("forceCarHireReplacement"),t=v.data("carHireReplacement"),y=s.telematics,x=v.find(".analytics-fields-tracking").data("analyticsFieldLabel");
if(!Cog.isInScope(i("body"),v)){u=0;
r=false
}else{if(w){u=0;
q=t;
r=true
}else{if(y){q=x
}}}return{ancillaryPrice:{value:u,origin:w?"forceCarHireReplacementMode":"data-annual-price"},ancillaryName:{value:q,origin:w?"forceCarHireReplacementMode":"data-linkvar"},selected:{value:r,origin:w?"forceCarHireReplacementMode":".add-button input"}}
}j.getDataAndConfig=function(){return c.SingleAncillaryProduct.superclass.getDataAndConfig(f,d)
};
Cog.registerComponent({name:"premiumPage.singleAncillaryProduct",api:l,externalApi:m,sharedApi:j,selector:"div.singleAncillaryProduct",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"forms.helper.focusHelper",apiId:"focusHelper"},{name:"forms.form.pageScroller",apiId:"pageScroller"},{name:"commons.rebrand",apiId:"rebrand"},{name:"events.keyCodes",apiId:"keyCodes"},{name:"premiumPage.singleAncillaryProductStorage",apiId:"ancillaryStorage"},{name:"forms.elements.singleAncillaryProduct.singleAncillaryProductValidator",apiId:"singleAncillaryProductValidator"},{name:"commons.wcmMode",apiId:"wcmMode"},{name:"commons.preAddAncillary",apiId:"preAddAncillary"},{name:"nBox",apiId:"nBox"},"premiumPage.container"]})
}(COGjQuery,document));
(function(f,c){var d={},b={},g={storage:null};
d.getStrorageArray=function(){return g.storage.get("singleAncillaryProductStorage")||[]
};
d.getPromptApprovedProductStorage=function(){return g.storage.get("promptApprovedProductStorage")||[]
};
d.getPromptRejectedProductStorage=function(){return g.storage.get("promptRejectedProductStorage")||[]
};
b.addSelectedItem=function(h){var i=d.getStrorageArray();
if(f.inArray(h,i)===-1){i.push(h);
g.storage.put("singleAncillaryProductStorage",i)
}};
b.isUnselected=function(h){var i=d.getStrorageArray();
return f.inArray(h,i)===-1
};
b.addApproved=function(h){var i=d.getPromptApprovedProductStorage();
if(f.inArray(h,i)===-1){i.push(h);
g.storage.put("promptApprovedProductStorage",i)
}};
b.removeApproved=function(i){var j=d.getPromptApprovedProductStorage(),h=f.inArray(i,j);
if(h!==-1){j.splice(h,1);
g.storage.put("promptApprovedProductStorage",j)
}};
b.isApproved=function(h){var i=d.getPromptApprovedProductStorage();
return f.inArray(h,i)!==-1
};
b.isNotApproved=function(h){var i=d.getPromptApprovedProductStorage();
return f.inArray(h,i)===-1
};
b.addRejected=function(h){var i=d.getPromptRejectedProductStorage();
if(f.inArray(h,i)===-1){i.push(h);
g.storage.put("promptRejectedProductStorage",i)
}};
b.removeRejected=function(i){var j=d.getPromptRejectedProductStorage(),h=f.inArray(i,j);
if(h!==-1){j.splice(h,1);
g.storage.put("promptRejectedProductStorage",j)
}};
b.isRejected=function(h){var i=d.getPromptRejectedProductStorage();
return f.inArray(h,i)!==-1
};
b.isNotRejected=function(h){var i=d.getPromptRejectedProductStorage();
return f.inArray(h,i)===-1
};
Cog.registerStatic({name:"premiumPage.singleAncillaryProductStorage",api:d,sharedApi:b,externalApi:g,requires:[{name:"component.analytics.journeyStorage",apiId:"storage"}]})
}(COGjQuery,document));
Cog.component.premiumPage=Cog.component.premiumPage||{};
(function(i,b){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}}},j={element:null},g={ShoppingBasketContactUs:null},f=false;
function c(){var l=Cog.Type.extend(j.element.Element,{view:null,rcpCode:"DEFAULT",isInitialized:false,adjustPhone:function(){var q=this.$scope.find(".contact-number"),o=q.attr("data-phone-link-"+this.rcpCode),p=q.attr("data-phone-text-"+this.rcpCode),m=q.attr("data-phone-link-default"),n=q.attr("data-phone-text-default");
if(o&&p){q.html(p);
q.attr("href",o)
}else{q.html(n);
q.attr("href",m)
}this.$scope.find(".ajax-loader").remove("")
},onPageStateChanged:function(n){var m=n.eventData;
if(!this.isInitialized){if(m.state&&m.state.pageData){this.rcpCode=m.state.pageData.rcpCode;
this.adjustPhone();
this.isInitialized=true
}}},initialize:function(){l.superclass.initialize.call(this);
Cog.addListener2(d.stateProvider.name,d.stateProvider.events.stateChanged,this.onPageStateChanged.bind(this))
}});
g.ShoppingBasketContactUs=l
}h.onRegister=function(l){l.element=new g.ShoppingBasketContactUs(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
c()
}};
Cog.registerComponent({name:"shoppingContactUs",api:h,externalApi:j,selector:"div.shoppingBasketContactUs",requires:[{name:"elements.element",apiId:"element"}]})
}(COGjQuery,document));
Cog.component.premiumPage=Cog.component.premiumPage||{};
(function(i,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={element:null},f={ShoppingBasketDiscounts:null},d=false;
function h(){var l=Cog.Type.extend(j.element.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
l.superclass.initializeLoader.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m);
if(m.promotionalCodeDetails){Cog.fireEvent("premiumPage.shoppingBasketDiscounts","promoCode",{promotionalCodeDetails:m.promotionalCodeDetails})
}}}});
f.ShoppingBasketDiscounts=l
}g.onRegister=function(l){l.element=new f.ShoppingBasketDiscounts(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
h()
}};
Cog.registerComponent({name:"shoppingBasketDiscounts",api:g,externalApi:j,selector:"div.shoppingBasketDiscounts",requires:[{name:"elements.element",apiId:"element"}]})
}(COGjQuery,document));
Cog.component.premiumPage=Cog.component.premiumPage||{};
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},i={element:null},f={CustomerGreetings:null},d=false;
function j(){var l=Cog.Type.extend(i.element.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
f.CustomerGreetings=l
}g.onRegister=function(l){l.element=new f.CustomerGreetings(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
j()
}};
Cog.registerComponent({name:"CustomerGreetings",api:g,externalApi:i,selector:"div.customerGreetings",requires:[{name:"elements.element",apiId:"element"}]})
}(COGjQuery,document));
(function(g,j,b){var h={},d={continueButton:{name:"premiumPage.ancillaryButton",events:{submit:"SubmitWithAncillaryChecked"}}},i={analytics:null,nBox:null},c=b!=null;
function f(m){i.analytics.clearTrackingCookie();
i.analytics.trackAction(g(this));
Cog.fireEvent(d.continueButton.name,d.continueButton.events.submit);
i.nBox.destroy(m)
}function l(m){m.css("display","");
m.off("click").on("click",f)
}h.init=function(m){g.each(m,function(){var n=g(this).find(".button");
l(n)
})
};
Cog.register({name:"lightboxContinueButton",api:h,externalApi:i,selector:"div.lightboxContinueButton",requires:[{name:"forms.action.button.analytics",apiId:"analytics"},{name:"premiumPage.ancillaryButton"},{name:"nBox",apiId:"nBox"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(g,c){var f={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},h={premiumPageContainer:null,basketContainer:null,singleAncillaryProduct:null,carHire:null,breakdownCover:null,paymentOption:null};
function b(){f.getAncillaryPrice=function(m,l,i){var j=null;
if(m==h.carHire.getTitle()){j=h.carHire.getPrice(l,i)
}else{if(m==h.breakdownCover.getTitle()){j=h.breakdownCover.getPrice(l,i)
}else{j=h.singleAncillaryProduct.getPrice(m,i)
}}return j
};
f.getTotalAncillariesPrice=function(m){var j=h.premiumPageContainer.dataProvider.getItems(),l,o=0,n=0;
for(l=0;
l<j.length;
l++){o=f.getAncillaryPrice(j[l].title,j[l].description,m);
n+=parseFloat(o)
}return n
};
f.getTotalPrice=function(i){return f.toFixed2String(h.paymentOption.getPrice(i))
};
f.getInitialPolicyPrice=function(l){var j=f.getTotalPrice(l),i=f.getTotalAncillariesPrice(l);
return f.toFixed2String(j-i)
};
f.toFixed2String=function(i){return parseFloat(i).toFixed(2)
};
f.fillPoundsAndPence=function(j,l){var i=f.toFixed2String(l).split(".");
j.find(".pounds").html(i[0]);
j.find(".pence").html("."+i[1])
};
return f
}f.init=function(){b()
};
Cog.registerStatic({name:"premiumPage.priceHelper",api:f,externalApi:h,sharedApi:f,requires:[{name:"elements.element",apiId:"element"},{name:"premiumPage.container",apiId:"premiumPageContainer"},{name:"premiumPage.paymentOption",apiId:"paymentOption"},{name:"basket.container",apiId:"basketContainer"},{name:"premiumPage.carHire",apiId:"carHire"},{name:"premiumPage.breakdownCover",apiId:"breakdownCover"},{name:"premiumPage.singleAncillaryProduct",apiId:"singleAncillaryProduct"}]})
}(COGjQuery,document));
Cog.component.premiumPage=Cog.component.premiumPage||{};
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}}},j={formElement:null},f={PricesSummary:null},d=false;
function i(){var l=Cog.Type.extend(j.formElement.Element,{view:null,$annualSpan:null,$monthlySpan:null,$breakdownTable:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m);
this.afterRender()
}},afterRender:function(){this.$annualSpan=this.$scope.find(".tab.annual");
this.$monthlySpan=this.$scope.find(".tab.monthly");
this.$breakdownTable=this.$scope.find(".multicar-sidebar__payment-table");
this.bindEvents();
if(this.$breakdownTable.length>0&&this.$annualSpan.hasClass("tab__chosen")){this.$breakdownTable.hide()
}},bindEvents:function(){this.$annualSpan.find(".tab__icon.annual").on("click",function(){this.$annualSpan.addClass("tab__chosen");
this.$monthlySpan.removeClass("tab__chosen");
this.processBreakdownTable(false)
}.bind(this));
this.$monthlySpan.find(".tab__icon.monthly").on("click",function(){this.$monthlySpan.addClass("tab__chosen");
this.$annualSpan.removeClass("tab__chosen");
this.processBreakdownTable(true)
}.bind(this))
},processBreakdownTable:function(m){if(this.$breakdownTable.length>0&&m){this.$breakdownTable.show()
}else{this.$breakdownTable.hide()
}}});
f.PricesSummary=l
}g.onRegister=function(l){l.element=new f.PricesSummary(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
i()
}};
Cog.registerComponent({name:"pricesSummary",api:g,externalApi:j,selector:"div.pricesSummary",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
Cog.component.reassuringMessage=(function(c){var b={};
function d(h){var f=c("#footer").find(".secure-logos"),g=h.clone();
g.insertAfter(f)
}b.init=function(g){var f=window.CQ!==undefined&&window.CQ.WCM!==undefined&&window.CQ.WCM.isEditMode();
if(!f&&g.length){d(g)
}else{return false
}};
return b
}(COGjQuery));
Cog.register({name:"reassuringMessage",api:Cog.component.reassuringMessage,selector:".reassuringMessage"});
(function(f,b){var c={},h={loader:null,analyticsPageLoad:null};
function d(i){h.loader.hide(i.data)
}c.onRegister=function(i){};
function g(){return b.referrer.indexOf("my-dashboard")!==-1
}c.init=function(i){if(i.parents(".premium-page").length>0){Cog.addListener2("elements.stateProvider","allElementsUpdated",d,{data:i});
if(g()){h.analyticsPageLoad.addEvent("event9")
}}};
Cog.registerComponent({name:"premiumPageLoader",api:c,externalApi:h,selector:"div.premium-quote-summary",requires:[{name:"elements.loader",apiId:"loader"},{name:"analytics.pageLoad",apiId:"analyticsPageLoad"}]})
}(COGjQuery,document));
(function(f,b){var c={},g={loader:null};
function d(h){g.loader.hide(h.data)
}c.onRegister=function(h){};
c.init=function(h){if(h.parents(".details-page").length>0||h.parents(".form-page").length>0){Cog.addListener2("elements.stateProvider","allElementsUpdated",d,{data:h})
}};
Cog.registerComponent({name:"yourDetailsPageLoader",api:c,externalApi:g,selector:"div.premium-quote-summary",requires:[{name:"elements.loader",apiId:"loader"}]})
}(COGjQuery,document));
Cog.component.internalLink=Cog.component.internalLink||{};
(function(f,c){var d={};
function b(h,j){var g=f(j);
g.on("click",function(){Cog.fireEvent("analytics.lastFieldInteracted","setTrackingEnabled",{isTrackingEnabled:false})
})
}d.init=function(g){g.each(b)
};
Cog.register({name:"internalLink",api:d,selector:"a.internal"})
}(COGjQuery,document));
Cog.component.lightboxCloseLink=Cog.component.lightboxCloseLink||{};
(function(d,b){var c={},f={nBox:null};
c.init=function(g){g.on("click",function(h){h.preventDefault();
f.nBox.destroy(h)
})
};
Cog.register({name:"lightboxCloseLink",api:c,externalApi:f,selector:"a.lightbox-close-link",requires:[{name:"nBox",apiId:"nBox"}]})
}(COGjQuery,document));
(function(h,n,d){var j={},g={name:"driverWithVariants",events:{update:"update",added:"added",stateChange:"stateChange",clearRelationship:"clearRelationship",displayAddNewDriverSection:"displayAddNewDriverSection"}},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},fieldsetWithAccordion:{name:"fieldsetWithAccordion",events:{buttonClick:"additionalButtonClickedEvent"}},repeatableFormElems:{name:"repeatableFormElems",events:{change:"change",remove:"remove",clearAll:"clearAll",added:"itemAdded",forceUpdate:"forceUpdate",resetState:"resetState"}},form:{name:"forms.form",events:{restoreElementsState:"restoreElementsState",enableValidation:"enableValidation",disableValidation:"disableValidation"}},driverManager:{name:"driverManager",events:{validation:"validation",stateChange:"stateChange",addNewClose:"addNewClose",driverAdded:"driverAdded"}},stateProvider:{name:"elements.stateProvider",events:{requireState:"requireState"}}},i={},l={element:null,elementsFinder:null,driverManager:null,driverStateManager:null,pageScroller:null,prompt:null,keyCodes:null,loader:null,driverUniqueIdGenerator:null,pagesManager:null,nBox:null,journeyContext:null},p=false,b={DriverWithVariants:null},o=[];
function c(q){var r=q.find(".driverWithVariants");
return{value:"dummy",origin:"dummy"}
}i.getDataAndConfig=function(){return b.DriverWithVariants.superclass.getDataAndConfig(o,c)
};
function m(){var q=Cog.Type.extend(l.formElement.Element,{prompt:null,$addContinueButton:null,$addContainer:null,$deleteButton:null,$editButton:null,$name:null,$dateOfBirth:null,$closeAddNewButton:null,$id:null,stateNames:["edit","view","add"],driverType:null,formSuffix:null,isLastOfTypeSupported:true,currentDriverId:null,editedDriverId:null,hasRemoteErrors:false,headerText:"",isChurchill:n.location.href.contains("churchill"),isAddContainerDetached:false,originalMainDriverId:null,newDriverSource:null,scrollTo:function(r){l.pageScroller.basicScroller.scrollTo(r,700)
},setStateView:function(r){_.forEach(this.stateNames,function(s){if(s!==r){this.$scope.removeClass("visible-state-"+s)
}else{this.$scope.addClass("visible-state-"+s)
}}.bind(this))
},validateElements:function(){if(Cog.isInScope(h("body"),this.$scope)){_.forEach(this.elements,function(r){if(r&&r.isValid){r.isValid()
}})
}},onBeforeStateChange:function(r){if(r.eventData.state==="done"){this.validateElements()
}},onStateChange:function(r){this.setStateView(r.eventData.state)
},onDriverAdded:function(x){var u=this.elements.nameDropdown,t=[],r=x.eventData.drivers||x.eventData,v=u.dropDown.getValue(),w=false,s=null;
_.forEach(r,function(y){if(y.id||this.driverType!=="main"){t.push({value:y.id,disabled:false,text:y.forename+" "+y.surname});
if(!!this.currentDriverId&&this.currentDriverId==y.previousId){w=true;
s=y.id
}}}.bind(this));
u.updateOptions(t);
if(w){u.selectItem(s);
this.selectedDriverChanged({skipResetEmail:this.originalMainDriverId!=this.currentDriverId})
}},removeDriver:function(r){this.removeValues();
this.$scope.remove()
},removeValues:function(r){Cog.fireEvent(f.repeatableFormElems.name,f.repeatableFormElems.events.clearAll,{$scope:this.$addContainer});
Cog.fireEvent(f.form.name,f.form.events.restoreElementsState,{$scope:this.$addContainer});
Cog.fireEvent(f.form.name,f.form.events.disableValidation,{$scope:this.$addContainer});
if(!this.isAddContainerDetached&&!r){this.$addContainer.detach();
this.isAddContainerDetached=true
}},onEditClick:function(t){var r=this.$scope.find(".mode.add"),s=this.$editButton.data().editPath;
if(!this.isCorrectKey(t.which)){return
}if(!this.currentDriverId){this.onAddClick(t);
return
}this.removeValues(true);
this.$addContainer.find(".driver-edit-heading").show();
this.$addContainer.find(".driver-add-new-heading").hide();
if(this.isAddContainerDetached){this.$addContainer.appendTo(r);
this.isAddContainerDetached=false
}this.editedDriverId=this.currentDriverId;
l.loader.show({$scope:r});
h.getJSON("/bin/dlg/site/pageState",{path:this.$editButton.data().editPath,jcid:l.journeyContext.current(),suffix:this.formSuffix,driverId:this.currentDriverId,partial:true}).done(function(u){Cog.fireEvent(f.repeatableFormElems.name,f.repeatableFormElems.events.forceUpdate,{$scope:this.$addContainer,suffix:this.formSuffix});
window.setTimeout(function(){Cog.fireEventAsync("elements.stateProvider","stateChanged",{state:u,scope:h.MD5(h.url().attr("path")),path:h.url().attr("path")});
l.loader.hide(r)
},500)
}.bind(this));
Cog.fireEvent(f.form.name,f.form.events.enableValidation,{$scope:this.$addContainer});
if(t.preventDefault){t.preventDefault()
}this.newDriverSource="edit";
this.setStateView("add");
setTimeout(function(){this.handleNextFieldFocus(t,"add")
}.bind(this),1000)
},onAddClick:function(s){var r;
if(!this.isCorrectKey(s.which)){return
}this.$addContainer.find(".driver-edit-heading").hide();
this.$addContainer.find(".driver-add-new-heading").show();
if(this.isAddContainerDetached){r=this.$scope.find(".mode.add");
this.$addContainer.appendTo(r);
this.isAddContainerDetached=false
}this.removeValues(true);
Cog.fireEvent(f.form.name,f.form.events.enableValidation,{$scope:this.$addContainer});
if(s.preventDefault){s.preventDefault()
}this.newDriverSource="add";
this.setStateView("add")
},onDisplayAddNewDriverSection:function(r){if(Cog.isInScope(r.eventData,this.$scope)){this.elements.nameDropdown.selectItem("");
this.selectedDriverChanged()
}},onCloseAddNewClick:function(r){r.preventDefault();
if(!this.isCorrectKey(r.which)){if(r.which==l.keyCodes.tab){if(r.shiftKey){this.handlePrevFieldFocus(r,"add")
}else{this.handleNextFieldFocus(r,"none")
}return
}else{return
}}this.$scope.find(".add .error").removeClass("error");
this.$scope.find(".add .error-message").hide();
this.setStateView("edit");
this.editedDriverId=null;
Cog.fireEvent(f.driverManager.name,f.driverManager.events.addNewClose,{$scope:this.$scope.parents(".form-step")});
if(this.$scope.offset().top<h(window).scrollTop()){this.scrollTo(this.$scope)
}setTimeout(function(){this.handleNextFieldFocus(r,"edit")
}.bind(this),1000)
},areElementsValid:function(){var r=0,s=[];
_.forEach(arguments,function(t){var u=t.isValid();
if(!u){s.push(t)
}});
if(s.length>0){this.scrollTo(s[0].$scope)
}return s.length===0
},getMonthName:function(t){var s=["January","February","March","April","May","June","July","August","September","October","November","December"],r;
if(t){r=Number(t);
if(!isNaN(r)&&r>=1&&r<=12){return s[r-1]
}}return""
},onAddContinueClick:function(B){var x=l.driverStateManager,C=this.$addContainer.find(".textInput").has('input[name^="formField.details.forename"]'),s=this.$addContainer.find(".textInput").has('input[name^="formField.details.surname"]'),z=this.$addContainer.find(".date").has('select[name^="formField.details.birthDate.day"]'),v=this.elementsFinder.findFirstIn(C),A=this.elementsFinder.findFirstIn(s),F=this.elementsFinder.findFirstIn(z),E=x.fetchValues(v.input,A.input,F.day,F.month,F.year),u=null,t=null,D=null,r=null,y=this.$addContainer.find("input[id*=forename]").attr("id").slice(-1),w=this.$scope.find("input[name*=driverUniqueId]");
E[0]=E[0].trim();
E[1]=E[1].trim();
u=E.join("-").replace(/\s+/g,"-");
t={id:u,previousId:this.editedDriverId,forename:E[0],surname:E[1],date:E[2]+" "+this.getMonthName(E[3])+" "+E[4]};
r=x.fetchElements(this.$addContainer,t,this.elementsFinder);
if(l.pagesManager.isMulticarJourneyDetailsPage&&w.length&&!w.val()){w.val(u);
D={id:t.id,fullName:t.forename+" "+t.surname,dateOfBirth:t.date,uniqueId:u};
l.driverManager.addToStorage(D)
}if(this.areElementsValid.apply(this,r)){x.postValues(this.$addContainer,this.formSuffix,this.$editButton.data().editPath);
this.removeValues();
l.driverManager.addDriver(t);
this.elements.nameDropdown.selectItem(t.id);
this.elements.nameDropdown.validate();
this.selectedDriverChanged();
this.setStateView("edit");
this.editedDriverId=null;
Cog.fireEvent(f.driverManager.name,f.driverManager.events.addNewClose,{$scope:this.$scope.parents(".form-step")});
if(this.$scope.offset().top<h(window).scrollTop()){this.scrollTo(this.$scope)
}}},onRemoveClick:function(u){var s=this.isChurchill?"h4":"p",t=this.$scope.parents(".repeatingContainer").prev().find(".removeDriverOverlay"),r;
u.preventDefault();
if(t.length){r={$content:t,closable:true,isAjaxRequest:false,handler:this.bindRemoveDriver.bind(this),shouldScroll:false,additionalClass:"removeDriverOverlay"};
l.nBox.create(r)
}else{l.prompt.pop({message:"<"+s+">Remove <strong>"+this.headerText+"</strong></"+s+"><"+s+">Are you sure?</"+s+">",onConfirm:function(){Cog.fireEvent(f.repeatableFormElems.name,f.repeatableFormElems.events.remove,{$scope:this.$scope})
}.bind(this),onCancel:function(){return true
}})
}},bindRemoveDriver:function(){Cog.fireEvent(f.repeatableFormElems.name,f.repeatableFormElems.events.remove,{$scope:this.$scope})
},clearRelationship:function(){if(this.elements.relationshipDropdown.dropDown){this.elements.relationshipDropdown.selectItem("")
}},isCorrectKey:function(r){return r===l.keyCodes.pointer||r===l.keyCodes.mouseFirst||r===l.keyCodes.enter
},handleDeleteButton:function(){this.$deleteButton=this.$scope.next("p").find(".delete");
this.$deleteButton.appendTo(this.$scope.find("> header")).off("mousedown").on("click keydown",this.onRemoveClick.bind(this))
},handleEditButton:function(){var s,r;
this.$editButton=this.$scope.find(".driver-edit");
s=this.$editButton.prev().find(".row-container").addClass("contains-add-button");
this.$editButton.appendTo(s);
r=window.parseInt(s.find("*[tabindex]").last().attr("tabindex"),10);
this.$editButton.on("click keydown",this.onEditClick.bind(this))
},handleAddNewClosing:function(){this.$closeAddNewButton=this.$addContainer.find(".close, .driver-add-cancel");
this.$closeAddNewButton.on("click keydown",this.onCloseAddNewClick.bind(this))
},handleAddContinueButton:function(){this.$addContinueButton=this.$scope.find(".driver-add-continue");
this.$addContinueButton.on("click",this.onAddContinueClick.bind(this))
},handleNextFieldFocus:function(t,s){var r,u,v;
if(s!=="none"){r=h(t.target).parents(".driverWithVariants").find("."+s);
u=r.find(".form-row .row-container").first();
v=u.find("input, select")
}else{r=h(t.target).parents(".parsys");
v=r.find("input, select, a").last()
}v.select().focus()
},handlePrevFieldFocus:function(t,s){var r=h(t.target).parents(".driverWithVariants").find("."+s),u=r.find("footer"),v=u.find("button").first();
v.select().focus()
},getIndex:function(){var r=this.$scope.parent().index();
if(this.$scope.parent().parent().children().first().is("span")){r=r-1
}return r
},handleHeader:function(){var t=this.getIndex(),r=this.$scope.find(".driver-header"),s=r.data("label-"+t);
if(this.$scope.parent().hasClass("lookup-form")&&s){r.text(s)
}this.headerText=s
},configureDriverType:function(){var r=this.getIndex(),s=this.$scope.parent().hasClass("lookup-form");
if(s&&r>0){this.driverType="other";
this.formSuffix="_"+r
}else{if(s){this.driverType="secondary";
this.formSuffix="_"+r
}else{this.driverType="main"
}}},handleRelationship:function(){var t=this.$scope.parents(".lookup-form"),r=this.getIndex(),s=t.hasClass("lookup-form");
if(s&&r>0){this.$scope.find(".driver-with-variants-relationship").hide()
}},getRemoteErrors:function(r){if(Cog.isInScope(r.eventData.$scope,this.$scope)){if(r.eventData&&r.eventData.errors){this.hasRemoteErrors=true
}else{this.hasRemoteErrors=false
}}},onAdded:function(r){if(Cog.isInScope(r.eventData.item,this.$scope)){if(this.elements.nameDropdown){this.elements.nameDropdown.selectDefault()
}if(!r.which){r.which=l.keyCodes.enter
}this.onAddClick(r)
}},onRepeatingContainerResetState:function(r){if(Cog.isInScope(r.eventData.$closestLookupParent,this.$scope)&&!this.$scope.hasClass("visible-state-edit")){this.onCloseAddNewClick(r)
}},attachEvents:function(r){Cog.addListener2(f.fieldsetWithAccordion.name,f.fieldsetWithAccordion.events.buttonClick,this.onBeforeStateChange.bind(this));
Cog.addListener2(g.name,g.events.displayAddNewDriverSection,this.onDisplayAddNewDriverSection.bind(this));
Cog.addListener2(f.driverManager.name,f.driverManager.events.validation,this.getRemoteErrors.bind(this));
Cog.addListener2(f.driverManager.name,f.driverManager.events.driverAdded,this.onDriverAdded.bind(this));
Cog.addListener2(f.driverManager.name,f.driverManager.events.stateChange,this.onStateChange.bind(this));
Cog.addListener2(f.repeatableFormElems.name,f.repeatableFormElems.events.added,this.onAdded.bind(this));
Cog.addListener2(f.repeatableFormElems.name,f.repeatableFormElems.events.resetState,this.onRepeatingContainerResetState.bind(this));
Cog.addListener2("forms.validation.errorPresenter","update",this.onValidationError.bind(this));
this.elements.nameDropdown.dropDown.$element.on("change",this.selectedDriverChanged.bind(this));
if(this.driverType=="secondary"){Cog.addListener2(g.name,g.events.clearRelationship,this.clearRelationship.bind(this))
}if(l.pagesManager.isMulticarJourneyDetailsPage){Cog.addListener2("elements.stateProvider","stateChanged",l.driverUniqueIdGenerator.generateUniqueDriverIdsOnAdditional)
}},findDomElements:function(){this.$id=this.$scope.find(".ID");
this.$name=this.$scope.find(".fullName .text");
this.$dateOfBirth=this.$scope.find(".dateOfBirth .text");
this.$addContainer=this.$scope.find(".semi-lightbox")
},disableUnneededValidation:function(){if(this.driverType!="secondary"&&this.elements.relationshipDropdown){this.elements.relationshipDropdown.disableValidation()
}},findElements:function(){var r=this.elementsFinder;
this.elements={nameDropdown:r.findFirstIn(this.$scope.find(".selectDriver")),relationshipDropdown:r.findFirstIn(this.$scope.find(".relationshipToPrimaryDriver")),email:r.findFirstIn(this.$scope.find(".email"))}
},constructor:function(r){q.superclass.constructor.call(this,r,true)
},initialize:function(){q.superclass.initialize.call(this);
this.findDomElements();
this.handleAddContinueButton();
this.handleAddNewClosing();
this.handleEditButton();
this.handleDeleteButton();
this.handleHeader();
this.handleRelationship();
this.configureDriverType();
this.$scope.addClass("visible-state-view").find(".mode").removeClass("hidden");
l.prompt.init()
},onAllInitialized:function(){this.findElements();
this.attachEvents();
this.disableUnneededValidation();
this.removeValues()
},selectedDriverChanged:function(t){var s=this.elements.nameDropdown.dropDown.getValue(),r=l.driverManager.getDrivers();
if(l.pagesManager.isMulticarJourneyDetailsPage){this.processMulticarUniqueIdSwap(s)
}if(s!=this.currentDriverId){_.forOwn(r,function(v,u){if(v.id==s){this.$dateOfBirth.text(v.date);
this.$name.text(v.forename+" "+v.surname)
}}.bind(this));
if(this.driverType=="main"&&!(t&&t.skipResetEmail)){Cog.fireEvent(g.name,g.events.clearRelationship);
this.elements.email.input.reset()
}else{if(this.driverType=="secondary"){this.clearRelationship()
}}this.currentDriverId=s;
this.removeValues()
}},processMulticarUniqueIdSwap:function(t){var r,s,u=l.driverManager.getStorage();
r=h.grep(u,function(v){return v.id==t
});
if(r[0]){s=r[0].uniqueId
}this.$scope.find("input[id*='UniqueId']").val(s)
},processNameDropdownState:function(t){var s=this.elements.nameDropdown,r=_.unique(t.items,"value");
if(this.driverType!="main"){r.unshift({value:"",text:" ",disabled:false})
}s.setOptions(r);
s.selectItem(t.selected)
},onValidationError:function(t){var s=false,r=null;
_.each(t.eventData.errors,function(w,u){if(this.$addContainer.find('[data-field-name="'+u+'"]').length){s=true
}}.bind(this));
if(s){r=h(".accordion-additional-button button");
if(r.data("current-state")=="edit"){Cog.fireEvent("fieldsetWithAccordion","additionalButtonClickedEvent",{$button:r,state:r.data("current-state")})
}t.which=l.keyCodes.enter;
this.onEditClick(t)
}},processState:function(r){if(r&&this.$scope.length){this.$name.text(r.fullName);
this.$dateOfBirth.text(r.dateOfBirth);
this.currentDriverId=r.id;
if(this.driverType=="main"&&!this.originalMainDriverId){this.originalMainDriverId=this.currentDriverId
}this.$id.data("id",r.id);
_.each(r.drivers,function(s){l.driverManager.addDriver(s)
});
if(r.fullNameDropdown){this.processNameDropdownState(r.fullNameDropdown)
}Cog.fireEvent(g.name,g.events.added,r)
}},isValid:function(){var r=true;
if(this.hasRemoteErrors){r=false
}return r
}});
b.DriverWithVariants=q
}j.onRegister=function(q){q.element=new b.DriverWithVariants(q.$scope)
};
j.onUnregister=function(q){q.element.unregister()
};
j.init=function(q){o=h(h.merge(o,q));
Cog.fireEvent(f.registry.name,f.registry.events.initialized,{analytics:i.getDataAndConfig})
};
j.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
if(!p){p=true;
m()
}};
Cog.registerComponent({name:"driverWithVariants",api:j,sharedApi:i,externalApi:l,selector:"div.driverWithVariants",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"forms.form.elementsFinder",apiId:"elementsFinder"},{name:"quickQuotePage.driverManager",apiId:"driverManager"},{name:"quickQuotePage.driverStateManager",apiId:"driverStateManager"},{name:"forms.form.pageScroller",apiId:"pageScroller"},{name:"prompt",apiId:"prompt"},{name:"events.keyCodes",apiId:"keyCodes"},{name:"elements.loader",apiId:"loader"},{name:"driverUniqueIdGenerator",apiId:"driverUniqueIdGenerator"},{name:"component.pagesManager",apiId:"pagesManager"},{name:"nBox",apiId:"nBox"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document,window.CQ_Analytics));
(function(i,o,d){var l={},f=[],h={name:"driverWithVariants",events:{update:"update",added:"added",stateChange:"stateChange",clearRelationship:"clearRelationship",displayAddNewDriverSection:"displayAddNewDriverSection"}},g={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},fieldsetWithAccordion:{name:"fieldsetWithAccordion",events:{buttonClick:"additionalButtonClickedEvent"}},repeatableFormElems:{name:"repeatableFormElems",events:{change:"change",remove:"remove",clearAll:"clearAll",added:"itemAdded",forceUpdate:"forceUpdate",resetState:"resetState"}},form:{name:"forms.form",events:{resetElements:"resetElements",restoreElementsState:"restoreElementsState",enableValidation:"enableValidation",disableValidation:"disableValidation"}},stateProvider:{name:"elements.stateProvider",events:{requireState:"requireState"}}},j={},m={element:null,elementsFinder:null,driverManager:null,driverStateManager:null,pageScroller:null,prompt:null,keyCodes:null,loader:null,driverUniqueIdGenerator:null,pagesManager:null,ghostTextHelper:null,nBox:null,journeyContext:null},q=false,b={DriverWithVariants:null},p=[];
function c(r){var s=r.find(".driverWithVariantsDl");
return{value:"dummy",origin:"dummy"}
}j.getDataAndConfig=function(){return b.DriverWithVariants.superclass.getDataAndConfig(p,c)
};
function n(){var r=Cog.Type.extend(m.formElement.Element,{prompt:null,$addContinueButton:null,$addContainer:null,$deleteButton:null,$editButton:null,$name:null,$dateOfBirth:null,$closeAddNewButton:null,$id:null,stateNames:["edit","view","add"],driverType:null,formSuffix:null,isLastOfTypeSupported:true,currentDriverId:null,editedDriverId:null,hasRemoteErrors:false,headerText:"",addNewDriverLabel:"",isChurchill:o.location.href.contains("churchill"),isAddContainerDetached:false,originalMainDriverId:null,newDriverSource:null,scrollTo:function(s){m.pageScroller.basicScroller.scrollTo(s,700)
},setStateView:function(u){var t=i(".submit"),s=this.$scope.parents(".fieldsetWithAccordion").find(".cs-next-update");
if(u=="add"){this.$scope.removeClass("visible-state-edit");
this.$scope.addClass("visible-state-add");
i(".repeatingContainer.additional-drivers .show-more-container").hide();
this.$scope.parents(".form-step-content").find(".next-button-container").hide();
if(t.is(":visible")){t.addClass("dwv-hidden");
s.addClass("dwv-hidden")
}}else{this.$scope.removeClass("visible-state-add");
this.$scope.addClass("visible-state-edit");
if(!i(".additional-drivers .additional-form-4").is(":visible")){i(".repeatingContainer.additional-drivers .show-more-container").show()
}if(t.hasClass("dwv-hidden")&&!i(".driverWithVariantsDl.visible-state-add").length){t.removeClass("dwv-hidden");
s.removeClass("dwv-hidden")
}this.$scope.parents(".form-step-content").find(".next-button-container").show()
}this.errorPresenter.clearAll();
this.errorPresenter.refresh()
},validateElements:function(){if(Cog.isInScope(i("body"),this.$scope)){_.forEach(this.elements,function(s){if(s&&s.isValid){s.isValid()
}})
}},onBeforeStateChange:function(s){if(s.eventData.state==="done"){this.validateElements()
}},onStateChange:function(s){this.setStateView(s.eventData.state)
},processOptions:function(w){var u=this.elements.nameDropdown,t=[{value:"",text:""}],v=null,s=null;
_.forEach(this.drivers,function(x){if(x.id||this.driverType!=="main"){t.push({value:x.id,disabled:false,text:x.forename+" "+x.surname})
}}.bind(this));
t.push({value:"ADD_NEW_DRIVER",disabled:false,text:this.addNewDriverLabel});
if(w){u.updateOptions(t)
}else{u.setOptions(t)
}v=this.$scope.find('select[name*="details.driverId"] option[value="ADD_NEW_DRIVER"]');
s=this.$scope.find('select[name*="formField.details.driverId"]  option').last();
if(!v.is(s)){v.insertAfter(s)
}},onDriverChanged:function(y){var u=this.elements.nameDropdown,x=y.eventData.driver,v=u.dropDown.getValue(),s=false,w=false,t=null;
_.forEach(this.drivers,function(z){if(z.id==x.previousId){_.assign(z,x);
s=true
}else{if(z.id==x.id){s=true
}}});
if(!s){this.drivers.push(x)
}if(!!this.currentDriverId&&this.currentDriverId==x.previousId){w=true;
t=x.id
}if(this.driverType=="main"){f=this.drivers
}this.processOptions(true);
if(w){u.selectItem(t);
this.selectedDriverChanged({skipResetEmail:this.originalMainDriverId!=this.currentDriverId})
}},removeDriver:function(s){this.removeValues();
this.$scope.remove()
},removeValues:function(s){Cog.fireEvent(g.repeatableFormElems.name,g.repeatableFormElems.events.clearAll,{$scope:this.$addContainer});
Cog.fireEvent(g.form.name,g.form.events.restoreElementsState,{$scope:this.$addContainer});
Cog.fireEvent(g.form.name,g.form.events.disableValidation,{$scope:this.$addContainer});
if(!this.isAddContainerDetached&&!s){this.$addContainer.detach();
this.isAddContainerDetached=true
}},onEditClick:function(u){var s=this.$scope.find(".mode.add"),t=this.$editButton.data().editPath;
if(!this.isCorrectKey(u.which)){return
}if(!this.currentDriverId){this.onAddClick(u);
return
}this.removeValues(true);
this.$addContainer.find(".driver-edit-heading").attr("style","display:inline-block");
this.$addContainer.find(".driver-add-new-heading").hide();
this.$addContainer.removeClass("new-driver").addClass("existing-driver");
if(this.isAddContainerDetached){this.$addContainer.appendTo(s);
this.isAddContainerDetached=false
}this.editedDriverId=this.currentDriverId;
m.loader.show({$scope:s});
i.getJSON("/bin/dlg/site/pageState",{path:this.$editButton.data().editPath,jcid:m.journeyContext.current(),suffix:this.formSuffix,driverId:this.currentDriverId,partial:true}).done(function(v){Cog.fireEvent(g.repeatableFormElems.name,g.repeatableFormElems.events.forceUpdate,{$scope:this.$addContainer,suffix:this.formSuffix});
window.setTimeout(function(){Cog.fireEventAsync("elements.stateProvider","stateChanged",{state:v,scope:i.MD5(i.url().attr("path")),path:i.url().attr("path")});
m.loader.hide(s)
},500)
}.bind(this));
Cog.fireEvent(g.form.name,g.form.events.enableValidation,{$scope:this.$addContainer});
if(u.preventDefault){u.preventDefault()
}this.newDriverSource="edit";
this.setStateView("add");
setTimeout(function(){this.handleNextFieldFocus(u,"add")
}.bind(this),1000)
},onAddClick:function(t){var s;
if(!this.isCorrectKey(t.which)){return
}this.$addContainer.find(".driver-edit-heading").hide();
this.$addContainer.find("h3.driver-add-new-heading").attr("style","display:inline-block");
this.$addContainer.find("p.driver-add-new-heading").attr("style","display:block");
this.$addContainer.removeClass("existing-driver").addClass("new-driver");
if(this.isAddContainerDetached){s=this.$scope.find(".mode.add");
this.$addContainer.appendTo(s);
this.isAddContainerDetached=false
}this.removeValues(true);
Cog.fireEvent(g.form.name,g.form.events.enableValidation,{$scope:this.$addContainer});
if(t.preventDefault){t.preventDefault()
}this.newDriverSource="add";
this.setStateView("add")
},onDisplayAddNewDriverSection:function(s){if(Cog.isInScope(s.eventData,this.$scope)){this.elements.nameDropdown.selectItem("");
this.selectedDriverChanged()
}},onCloseAddNewClick:function(s){s.preventDefault();
if(!this.isCorrectKey(s.which)){if(s.which==m.keyCodes.tab){if(s.shiftKey){this.handlePrevFieldFocus(s,"add")
}else{this.handleNextFieldFocus(s,"none")
}return
}else{return
}}this.$scope.find(".add .error").removeClass("error");
this.$scope.find(".add .error-message").hide();
this.setStateView("edit");
this.editedDriverId=null;
if(this.$addContainer.hasClass("new-driver")){this.elements.nameDropdown.selectItem("");
this.$name.text("");
this.currentDriverId=""
}if(this.$scope.offset().top<i(window).scrollTop()){this.scrollTo(this.$scope)
}this.removeValues();
setTimeout(function(){this.handleNextFieldFocus(s,"edit")
}.bind(this),1000)
},areElementsValid:function(){var s=0,t=[];
_.forEach(arguments,function(u){var v=u.isValid();
if(!v){t.push(u)
}});
if(t.length>0){this.scrollTo(t[0].$scope)
}return t.length===0
},getMonthName:function(u){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],s;
if(u){s=Number(u);
if(!isNaN(s)&&s>=1&&s<=12){return t[s-1]
}}return""
},onAddContinueClick:function(C){var y=m.driverStateManager,D=this.$addContainer.find(".textInput").has('input[name^="formField.details.forename"]'),t=this.$addContainer.find(".textInput").has('input[name^="formField.details.surname"]'),A=this.$addContainer.find(".date").has('select[name^="formField.details.birthDate.day"]'),w=this.elementsFinder.findFirstIn(D),B=this.elementsFinder.findFirstIn(t),G=this.elementsFinder.findFirstIn(A),F=y.fetchValues(w.input,B.input,G.day,G.month,G.year),v=null,u=null,E=null,s=null,z=this.$addContainer.find("input[id*=forename]").attr("id").slice(-1),x=this.$scope.find("input[name*=driverUniqueId]");
F[0]=F[0].trim();
F[1]=F[1].trim();
v=F.join("-").replace(/\s+/g,"-");
u={id:v,previousId:this.editedDriverId,forename:F[0],surname:F[1],date:F[2]+" "+this.getMonthName(F[3])+" "+F[4],uniqueId:x.val()||v};
s=y.fetchElements(this.$addContainer,u,this.elementsFinder);
if(this.areElementsValid.apply(this,s)){y.postValues(this.$addContainer,this.formSuffix,this.$editButton.data().editPath);
this.removeValues();
Cog.fireEvent("driverWithVariantsDl","driverChange",{driver:u});
this.elements.nameDropdown.selectItem(u.id);
this.elements.nameDropdown.validate();
this.selectedDriverChanged();
this.setStateView("edit");
this.editedDriverId=null;
if(this.$scope.offset().top<i(window).scrollTop()){this.scrollTo(this.$scope)
}}},onRemoveClick:function(u){var t=this.$scope.parents(".repeatingContainer").prev().find(".removeDriverOverlay"),s;
u.preventDefault();
if(t.length){s={$content:t,closable:true,isAjaxRequest:false,handler:this.bindRemoveDriver.bind(this),shouldScroll:false,additionalClass:"removeDriverOverlay"};
m.nBox.create(s)
}else{m.prompt.pop({message:"<h4>Are you sure you want to<h4></h4><h4>remove this driver?</h4>",confirmLabel:"Yes, remove driver",nofirst:true,noborder:"1px solid #000",onConfirm:function(){Cog.fireEvent(g.repeatableFormElems.name,g.repeatableFormElems.events.remove,{$scope:this.$scope})
}.bind(this),onCancel:function(){return true
}})
}},bindRemoveDriver:function(){Cog.fireEvent(g.repeatableFormElems.name,g.repeatableFormElems.events.remove,{$scope:this.$scope})
},clearRelationship:function(){if(this.elements.relationshipDropdown.dropDown){this.elements.relationshipDropdown.selectItem("")
}},isCorrectKey:function(s){return s===m.keyCodes.pointer||s===m.keyCodes.mouseFirst||s===m.keyCodes.enter
},handleDeleteButton:function(){this.$deleteButton=this.$scope.next("p").find(".delete");
this.$deleteButton.appendTo(this.$scope.find("> header")).off("mousedown").on("click keydown",this.onRemoveClick.bind(this))
},handleEditButton:function(){var t,s;
this.$editButton=this.$scope.find(".driver-edit");
this.$editButton.detach();
this.$scope.find(".selectDriver .row-container").append(this.$editButton);
t=this.$editButton.prev().find(".row-container").addClass("contains-add-button");
this.$editButton.appendTo(t);
s=window.parseInt(t.find("*[tabindex]").last().attr("tabindex"),10);
this.$editButton.on("click keydown",this.onEditClick.bind(this))
},handleAddNewClosing:function(){this.$closeAddNewButton=this.$addContainer.find(".close, .driver-add-cancel");
this.$closeAddNewButton.on("click keydown",this.onCloseAddNewClick.bind(this))
},handleAddContinueButton:function(){this.$addContinueButton=this.$scope.find(".driver-add-continue");
this.$addContinueButton.on("click",this.onAddContinueClick.bind(this))
},handleNextFieldFocus:function(u,t){var s,v,w;
if(t!=="none"){s=i(u.target).parents(".driverWithVariantsDl").find("."+t);
v=s.find(".form-row .row-container").first();
w=v.find("input, select")
}else{s=i(u.target).parents(".parsys");
w=s.find("input, select, a").last()
}w.select().focus()
},handlePrevFieldFocus:function(u,t){var s=i(u.target).parents(".driverWithVariantsDl").find("."+t),v=s.find("footer"),w=v.find("button").first();
w.select().focus()
},getIndex:function(){var s=this.$scope.parent().index();
if(this.$scope.parent().parent().children().first().is("span")){s=s-1
}return s
},handleHeader:function(){var u=this.getIndex(),s=this.$scope.find(".driver-header"),t=s.data("label-"+u);
if(this.$scope.parent().hasClass("lookup-form")&&t){s.text(t)
}this.headerText=t
},configureDriverType:function(){var s=this.getIndex(),t=this.$scope.parent().hasClass("lookup-form");
if(t&&s>0){this.driverType="other";
this.formSuffix="_"+s
}else{if(t){this.driverType="secondary";
this.formSuffix="_"+s
}else{this.driverType="main"
}}},handleRelationship:function(u){var v=this.$scope.parents(".lookup-form"),s,t;
if(u&&u.eventData&&u.eventData.updateIndexes&&this.isFirstLookupFormInScope(v)){v.find(".driver-with-variants-relationship").show();
this.enableNeededValidation()
}else{s=this.getIndex();
t=v.hasClass("lookup-form");
if(t&&s>0&&!Cog.statics.wcmMode.isEdit()){this.$scope.find(".driver-with-variants-relationship").hide()
}}},isFirstLookupFormInScope:function(s){return s&&!s.prev().hasClass("lookup-form")&&Cog.isInScope(i("form"),this.$scope)
},onAdded:function(s){if(Cog.isInScope(s.eventData.item,this.$scope)){if(this.elements.nameDropdown){this.elements.nameDropdown.selectDefault()
}this.drivers=_.clone(f);
this.processOptions(false)
}},onRepeatingContainerResetState:function(s){if(Cog.isInScope(s.eventData.$closestLookupParent,this.$scope)&&!this.$scope.hasClass("visible-state-edit")){this.onCloseAddNewClick(s)
}},attachEvents:function(s){Cog.addListener2(g.fieldsetWithAccordion.name,g.fieldsetWithAccordion.events.buttonClick,this.onBeforeStateChange.bind(this));
Cog.addListener2(h.name,h.events.displayAddNewDriverSection,this.onDisplayAddNewDriverSection.bind(this));
Cog.addListener2("driverWithVariantsDl","driverChange",this.onDriverChanged.bind(this));
Cog.addListener2(g.repeatableFormElems.name,g.repeatableFormElems.events.added,this.onAdded.bind(this));
Cog.addListener2(g.repeatableFormElems.name,g.repeatableFormElems.events.resetState,this.onRepeatingContainerResetState.bind(this));
Cog.addListener2("forms.validation.errorPresenter","update",this.onValidationError.bind(this));
this.elements.nameDropdown.dropDown.$element.on("change",this.selectedDriverChanged.bind(this));
if(this.driverType=="secondary"){Cog.addListener2(h.name,h.events.clearRelationship,this.clearRelationship.bind(this))
}if(m.pagesManager.isMulticarJourneyDetailsPage){Cog.addListener2("elements.stateProvider","stateChanged",m.driverUniqueIdGenerator.generateUniqueDriverIdsOnAdditional)
}Cog.addListener2("driverWithVariantsDl","addForLast",this.addForLast.bind(this));
Cog.addListener2("relationshipHandler","processInputs",this.handleRelationship.bind(this))
},findDomElements:function(){this.$id=this.$scope.find(".ID");
this.$name=this.$scope.find(".driver-name-dob");
this.$dateOfBirth=this.$scope.find(".dateOfBirth .text");
this.$addContainer=this.$scope.find(".semi-lightbox")
},disableUnneededValidation:function(){if(this.driverType!="secondary"&&this.elements.relationshipDropdown){this.elements.relationshipDropdown.disableValidation()
}},enableNeededValidation:function(){if(this.elements.relationshipDropdown){this.driverType="secondary";
this.elements.relationshipDropdown.enableValidation()
}},findElements:function(){var s=this.elementsFinder;
this.elements={nameDropdown:s.findFirstIn(this.$scope.find(".selectDriver")),relationshipDropdown:s.findFirstIn(this.$scope.find(".relationshipToPrimaryDriver")),email:s.findFirstIn(this.$scope.find(".email"))}
},constructor:function(s){r.superclass.constructor.call(this,s,true)
},initialize:function(){r.superclass.initialize.call(this);
this.findDomElements();
this.handleAddContinueButton();
this.handleAddNewClosing();
this.handleEditButton();
this.handleDeleteButton();
this.handleHeader();
this.handleRelationship();
this.configureDriverType();
this.addNewDriverLabel=this.configuration.get().addNewDriverLabel;
this.$scope.addClass("visible-state-edit").find(".mode").removeClass("hidden");
m.prompt.init();
if(Cog.statics.wcmMode.isEdit()){i(".mode.add").show()
}this.initializeValidateNow(this.validateNow)
},validateNow:function(s,t){if(t&&t.eventData.$scope.has(this.$scope).length){this.hasRemoteErrors=false;
this.validate()
}},onAllInitialized:function(){this.findElements();
this.attachEvents();
this.disableUnneededValidation();
this.removeValues()
},selectedDriverChanged:function(u){var t=this.elements.nameDropdown.dropDown.getValue(),s=this.drivers;
if(this.isFourthAdditionalDriverPresent()){i(".add-driver-header").remove()
}else{this.prepareHeaderAddDriverButton()
}if(m.pagesManager.isMulticarJourneyDetailsPage){this.processMulticarUniqueIdSwap(t)
}if(!t){this.$dateOfBirth.text("");
this.$name.text("")
}else{if(t=="ADD_NEW_DRIVER"&&u){u.which=m.keyCodes.enter;
m.ghostTextHelper.addGreyStyleToLabels(this.$scope);
this.onAddClick(u);
Cog.fireEvent(g.form.name,g.form.events.resetElements,{$scope:this.$scope})
}else{if(t!=this.currentDriverId){_.forOwn(s,function(w,v){if(w.id==t){this.$dateOfBirth.text(w.date);
this.$name.text(w.forename+" "+w.surname+", "+w.date)
}}.bind(this));
if(this.driverType=="main"&&!(u&&u.skipResetEmail)){Cog.fireEvent(h.name,h.events.clearRelationship)
}else{if(this.driverType=="secondary"){this.clearRelationship()
}}this.currentDriverId=t;
this.removeValues()
}}}},processMulticarUniqueIdSwap:function(u){var s,t;
s=i.grep(this.drivers,function(v){return v.id==u
});
if(s[0]){t=s[0].uniqueId
}this.$scope.find("input[id*='UniqueId']").val(t)
},processNameDropdownState:function(u){var t=this.elements.nameDropdown,s=_.unique(u.items,"value");
s.unshift({value:"",text:""});
s.push({value:"ADD_NEW_DRIVER",text:this.addNewDriverLabel});
t.setOptions(s);
t.selectItem(u.selected)
},onValidationError:function(u){var t=false,s=null;
_.each(u.eventData.errors,function(x,w){if(this.$addContainer.find('[data-field-name="'+w+'"]').length){t=true
}}.bind(this));
if(t){s=i(".accordion-additional-button button");
if(s.data("current-state")=="edit"){Cog.fireEvent("fieldsetWithAccordion","additionalButtonClickedEvent",{$button:s,state:s.data("current-state")})
}u.which=m.keyCodes.enter;
this.onEditClick(u)
}},processState:function(s){if(s&&this.$scope.length){this.$name.text(s.fullName+", "+s.dateOfBirth);
this.currentDriverId=s.id;
if(this.driverType=="main"&&!this.originalMainDriverId){this.originalMainDriverId=this.currentDriverId
}this.$id.data("id",s.id);
this.drivers=[];
_.each(s.drivers,function(t){t.uniqueId=t.id;
this.drivers.push(t)
}.bind(this));
if(this.driverType=="main"){f=this.drivers
}if(this.elements.email){this.elements.email.fields.items[0].setValue(s.email)
}if(s.fullNameDropdown){this.processNameDropdownState(s.fullNameDropdown)
}Cog.fireEvent(h.name,h.events.added,s)
}},prepareHeaderAddDriverButton:function(){var u=this.$scope.parents(".fieldsetWithAccordion"),v=u.find("legend a"),s="<button type='button' class='add-driver-header'>Add another driver</button>",t;
if(!i(".add-driver-header").length&&!this.isFourthAdditionalDriverPresent()){v.append(s);
t=v.find(".add-driver-header");
t.on("click",function(){var w=i(".add-driver-header").parents(".fieldsetWithAccordion");
Cog.fireEvent("repeatableFormElems","add",{requiredClass:"additional-drivers"});
if(w.find(".form-step").hasClass("step-hide")){Cog.fireEvent("fieldsetWithAccordion","open",{$accordion:w})
}Cog.fireEvent("driverWithVariantsDl","addForLast")
})
}else{if(this.isFourthAdditionalDriverPresent()){i(".add-driver-header").remove()
}}},isFourthAdditionalDriverPresent:function(){return this.$scope.parents(".fieldsetWithAccordion").find(".lookup-form").length==4
},addForLast:function(s){if(i(".driverWithVariantsDl").last().is(this.$scope)){s.which=m.keyCodes.enter;
this.onAddClick(s);
this.scrollTo(this.$addContainer)
}},isValid:function(){var u=this.$scope.hasClass("visible-state-edit"),s=i('select[name*="formField.details.driverId"] option[value="'+this.currentDriverId+'"]:selected').length,t=u&&s<2;
if(!t){this.errorPresenter.clearAll();
if(s>1){this.errorPresenter.addAndRefresh(this.$scope.find(".mode.edit").data("duplicated-driver-error"))
}else{if(this.$addContainer.hasClass("new-driver")){this.errorPresenter.addAndRefresh(this.$scope.find(".mode.add").data("add-mode-active-error"))
}else{this.errorPresenter.addAndRefresh(this.$scope.find(".mode.add").data("edit-mode-active-error"))
}}}else{this.prepareHeaderAddDriverButton()
}return t
}});
b.DriverWithVariants=r
}l.onRegister=function(r){r.element=new b.DriverWithVariants(r.$scope)
};
l.onUnregister=function(r){r.element.unregister()
};
l.init=function(r){p=i(i.merge(p,r));
Cog.fireEvent(g.registry.name,g.registry.events.initialized,{analytics:j.getDataAndConfig})
};
l.beforeInit=function(){Cog.fireEvent(g.registry.name,g.registry.events.register);
if(!q){q=true;
n()
}};
Cog.registerComponent({name:"driverWithVariantsDl",api:l,sharedApi:j,externalApi:m,selector:"div.driverWithVariantsDl",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"forms.form.elementsFinder",apiId:"elementsFinder"},{name:"quickQuotePage.driverManager",apiId:"driverManager"},{name:"quickQuotePage.driverStateManager",apiId:"driverStateManager"},{name:"forms.form.pageScroller",apiId:"pageScroller"},{name:"prompt",apiId:"prompt"},{name:"events.keyCodes",apiId:"keyCodes"},{name:"elements.loader",apiId:"loader"},{name:"driverUniqueIdGenerator",apiId:"driverUniqueIdGenerator"},{name:"component.pagesManager",apiId:"pagesManager"},{name:"component.ghostTextHelper",apiId:"ghostTextHelper"},{name:"nBox",apiId:"nBox"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document,window.CQ_Analytics));
(function(f,l){var i={},c={name:"driverManager",events:{validation:"validation",stateChange:"stateChange",driverAdded:"driverAdded",addNewClose:"addNewClose"}},b={repeatableFormElems:{name:"repeatableFormElems",events:{itemAdded:"itemAdded",itemRemoved:"remove"}},driver:{name:"driverWithVariants",events:{swapped:"swapped",added:"added",storageRequest:"storageRequest",stateChange:"stateChange",displayAddNewDriverSection:"displayAddNewDriverSection"}},form:{name:"forms.form",events:{submit:"submit",validationFailed:"validationFailed",validationSucceed:"validationSucceed"}},stateProvider:{name:"elements.stateProvider",events:{allElementsUpdated:"allElementsUpdated"}},fieldsetWithAccordion:{name:"fieldsetWithAccordion",events:{additionalButtonClick:"additionalButtonClickedEvent"}}},j={fieldsetWithAccordionHandler:null,pageScroller:null,validationErrors:null},m=[],h=[],g=[{id:"",forename:"",surname:"",date:""}];
function d(){function r(M){return _.find(h,{id:M.id})
}function E(M){_.remove(h,function(N){return N.id==M
})
}function y(M){var O=M.eventData,P=f("form").find("span:contains('"+O.fullName+"')").parents(".driverWithVariants, .driverWithVariantsDl").find("input[id*='UniqueId']").val(),N={id:O.id,fullName:O.fullName,relationship:O.relationship||null,dateOfBirth:O.dateOfBirth||null,uniqueId:P};
if(!r(N)){i.addToStorage(N)
}if(O.previousId&&O.previousId!=O.id){E(O.previousId)
}}function I(M){j.fieldsetWithAccordionHandler.clickAdditionalButtonIfStateMatches("edit");
j.pageScroller.basicScroller.scrollTo(M.eventData.item,1000);
Cog.fireEvent(b.driver.name,b.driver.events.displayAddNewDriverSection,M.eventData.item)
}function L(O,P,N){var M={$scope:O.$scope,errors:P||N};
Cog.fireEvent(c.name,c.events.validation,M)
}function n(M){Cog.fireEvent(c.name,c.events.validation,{$scope:M.$scope,errors:null})
}function t(M){var N=M.find(".driverWithVariants").first(),O=N.find(".error-container");
return new j.errorPresenter.ErrorPresenter(O,null,true)
}function s(N,P){var M=_.find(N.validators,{type:P}),O=M?M.message:"Error.";
if(N.errorPresenter.context){N.errorPresenter.clear();
N.errorPresenter.add(O);
N.validationErrors.add(N.errorPresenter);
N.errorPresenter.refresh()
}}function D(M){M.errorPresenter.clearAll();
M.errorPresenter.refresh()
}function H(M){return M.state==="view"||Cog.pages.isDirectline()
}function z(M){return M.$scope.find(".visible-state-add").length>0
}function A(O){var M=false,N=[];
O.$scope.find(".selectDriver select").each(function(){var P=f(this),R=P.val(),Q=P.prev(".styled-select").text().trim();
if(Q!==""){if(_.indexOf(N,R)<0){N.push(R)
}else{M=R
}}});
return M
}function x(Q,M){var R=null,N=false,P,O;
M=M||[];
P=function(S){return _.indexOf(M,S)>-1
};
Q.validationErrors.reset();
if(!P("mode")&&!H(Q)){R="mode"
}else{if(!P("duplicated")&&A(Q)){R="duplicated";
j.fieldsetWithAccordionHandler.clickAdditionalButtonIfStateMatches("edit")
}else{if(!P("add-edit")&&z(Q)){R="add-edit";
j.fieldsetWithAccordionHandler.clickAdditionalButtonIfStateMatches("edit")
}}}if(R){s(Q,R);
if(Cog.pages.isAdditionalCarPage()){L(Q,{errorCode:R,duplicatedDriver:A(Q)})
}else{L(Q,Q.validationErrors.getErrors())
}}else{D(Q);
O=Q.$scope.find(".form-row.error");
N=O.length>0;
if(N){L(Q,null,true);
j.pageScroller.basicScroller.scrollTo(O,1000)
}else{n(Q)
}}return R===null&&!N
}function w(){_.forEach(m,x)
}function B(){return"uid-"+_.random(10000,999999)
}function K(M){return(M.find(".formStepValidationConfiguration").data("validation")||{}).validators
}function o(N,M){m.push({$scope:M,uid:N,state:null,validators:K(M),errorPresenter:t(M),validationErrors:new j.validationErrors.ValidationErrors()})
}function J(M){var N=M.data("uid");
if(!N){N=B();
M.data("uid",N);
o(N,M)
}return _.find(m,{uid:N})||{}
}function v(M){if(M.eventData.isValidationEnabled){w()
}}function G(M){J(M.eventData.$scope)
}function F(N){var M=J(N.eventData.$scope);
return x(M,["mode"])
}function u(O,N){var M=N.data();
if(O==="edit"){N.text(M.stateDone||"Done");
M.currentState="done"
}else{if(O==="view"){N.text(M.stateEdit||"Edit");
M.currentState="edit"
}}N.data(M).toggleClass("state-edit",O==="edit");
Cog.fireEvent(c.name,c.events.stateChange,{state:O})
}function q(R){var P=R.eventData.$button,M=R.eventData.state,Q=M==="done"?"view":"edit",N=P.parents(".form-step"),O=J(N);
if(Q==="edit"){O.state=Q;
u(Q,P)
}else{_.defer(function(){D(O);
if(x(O,["mode"])){O.state=Q;
u(Q,P)
}})
}}function C(){Cog.addListener2(b.repeatableFormElems.name,b.repeatableFormElems.events.itemAdded,I);
Cog.addListener2(b.fieldsetWithAccordion.name,b.fieldsetWithAccordion.events.additionalButtonClick,q);
Cog.addListener2(b.driver.name,b.driver.events.added,y);
Cog.addListener2(b.form.name,b.form.events.submit,v);
Cog.addListener2(c.name,c.events.addNewClose,F);
Cog.addListener2(c.name,"addScope",G);
Cog.addListener2(c.name,"validateNow",w)
}function p(){C()
}p();
return i
}i.getStorage=function(){return h
};
i.addToStorage=function(n){h.push(n)
};
i.init=function(){d()
};
i.validateNow=function(){Cog.fireEvent(c.name,"validateNow")
};
i.addDriver=function(o){var n=false;
_.each(g,function(p){if(p.id==o.id){n=true
}});
if(!n){if(o.previousId){_.remove(g,function(p){return p.id==o.previousId
})
}g.push(_.clone(o));
Cog.fireEvent(c.name,c.events.driverAdded,g)
}};
i.getDrivers=function(){return g
};
Cog.registerStatic({name:"quickQuotePage.driverManager",api:i,sharedApi:i,externalApi:j,requires:[{name:"forms.fieldsetWithAccordion",apiId:"fieldsetWithAccordionHandler"},{name:"forms.form.pageScroller",apiId:"pageScroller"},{name:"forms.validation.errorPresenter",apiId:"errorPresenter"},{name:"forms.form.validationErrors",apiId:"validationErrors"}]})
}(COGjQuery,document));
(function(g,b){var d={prefix:1000},h={name:"driverStateManager",events:{}},i={finder:null,journeyContext:null},f=["dropdownFormElement","textInput","textWithPredictiveLookup","title","date","dateWithCheckbox","dateWithCheckboxWithInputFields","radioWithContainers","repeatingContainer","compositeDropdown"];
function c(){}d.rename=function(m,j,n){var l=n+".";
if(m&&m.contains("_")){if(j){return l+m.replace(j,"_"+n)
}else{return l+m.replace("_","_"+n+"_")
}}else{return l+m+"_"+n
}};
d.fetchValues=function(){var j=[];
_.forEach(arguments,function(l){if(l.getValue){j.push(l.getValue())
}});
return j
};
d.postValues=function(l,m,q){var p=this.prefix,n=this,r=g('form input[name="path"]').val(),o=q.substring(r.length),j=g("<form/>");
j.attr("action","/bin/dlg/site/formProcessor?jcid="+i.journeyContext.current());
j.attr("method","post");
j.append(g("<input>",{name:"path",value:r,type:"hidden"}));
j.append(g("<input>",{name:"suffix",value:m?m.substring(1):null,type:"hidden"}));
j.append(g("<input>",{name:"pathSegment",value:o.substr(0,o.lastIndexOf("/parsys")),type:"hidden"}));
j.append(g("<input>",{name:"_charset_",value:"utf-8",type:"hidden"}));
j.append(g("<input>",{name:"handlerName",value:"edit-driver",type:"hidden"}));
l.find("input,select").each(function(s,t){var x=g(t),v=g("<input />"),u,w;
if(!x.attr("id")){return
}if(x.attr("type")=="radio"&&!x.is(":checked")){return
}if(x.attr("type")=="checkbox"&&!x.is(":checked")){return
}v.attr("type","hidden");
v.val(g(t).val());
w=x.attr("id");
v.attr("id",w);
u=x.attr("name");
v.attr("name",u);
j.append(v);
if(x.is("[data-recording-mask]")){v.attr("data-recording-mask","")
}});
this.prefix+=1;
g.post("/bin/dlg/site/formProcessor?jcid="+i.journeyContext.current(),j.serialize())
};
d.fetchElements=function(l,m,n){var o=[],j="."+f.join(", .");
l.find(j).each(function(p,q){o.push(n.findFirstIn(g(q)))
});
return o
};
d.fetchState=function(j){return true
};
d.init=function(){c()
};
Cog.registerStatic({name:"quickQuotePage.driverStateManager",api:d,sharedApi:d,externalApi:i,requires:[{name:"forms.form.elementsFinder",apiId:"finder"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery,document));
Cog.component.loginDetails=Cog.component.loginDetails||{};
(function(i,b){var h={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null},g={LoginDetails:null},f=false;
function d(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
g.LoginDetails=l
}h.onRegister=function(l){l.element=new g.LoginDetails(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!f){f=true;
d()
}};
Cog.registerComponent({name:"loginDetails",api:h,externalApi:j,selector:"div.loginDetails",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(f,b){var c={},g={loader:null};
function d(h){g.loader.hide(h.data)
}c.onRegister=function(h){};
c.init=function(h){if(h.parents(".policy-page").length>0){Cog.addListener2("elements.stateProvider","allElementsUpdated",d,{data:h})
}};
Cog.registerComponent({name:"qpmPageLoader",api:c,externalApi:g,selector:"div.first-column",requires:[{name:"elements.loader",apiId:"loader"}]})
}(COGjQuery,document));
(function(d,b){function c(l,i){var h={},g=0,j=d.isFunction(l)?l:d.noop;
function f(){if(g===0){j.call(i)
}}h.add=function(){g++
};
h.remove=function(){g--;
f()
};
h.count=function(){return g
};
return h
}Cog.registerStatic({name:"registry.elementsCounter",api:{},sharedApi:c})
}(COGjQuery,document));
(function(d,b){var f={counter:null,loader:null};
function c(g){var l={},p={registryReady:"registryReady",allInitialized:"allInitialized"},m={initialized:"initialized",register:"register"};
function o(r){var q;
for(q=0;
q<r.listeners.length;
q++){Cog.removeListener(r.listeners[q])
}Cog.fireEvent(g,p.allInitialized)
}function n(q){q.data.add()
}function j(r){var q=r.data.counter;
if(q.count()===0){r.data.delegate()
}}function h(q){q.data.remove()
}function i(){var u={listeners:[]},r=d.proxy(o,null,u),q=f.counter(r),t=Cog.addListener2(g,m.initialized,h,{data:q}),v=Cog.addListener2(g,m.register,n,{data:q}),s=Cog.addListener2(g,p.registryReady,j,{data:{counter:q,delegate:r}});
u.listeners.push(t);
u.listeners.push(v);
u.listeners.push(s)
}l.onBeforeInit=function(){i()
};
l.onInit=function(){Cog.fireEvent(g,p.registryReady)
};
return l
}Cog.registerStatic({name:"registry.elementsRegistry",api:{},sharedApi:c,externalApi:f,requires:[{name:"registry.elementsCounter",apiId:"counter"},{name:"elements.loader",apiId:"loader"}]})
}(COGjQuery,document));
(function(f,j){var g={},d={moduleName:"sessionTimeoutAlert",events:{start:"sessionAlertStart"}},i={lookup:"lookup"},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}},submitter:{moduleName:"forms.form.submitter",events:{formSubmission:"formSubmission"}},lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setTrackingEnabled:"setTrackingEnabled"}}},h={wcmMode:null,journeyContext:null,journeyStorage:null,nBox:null,fieldsTracking:null,customStorage:null},b={SessionTimeoutAlert:null},l=false;
function m(){var n={timeoutValue:null,timeoutExecutionReference:null,ligthbox:null,path:null,isEnabled:false,timeout:null,timeoutAlert:null,pageTitle:null,timeoutAlertAltText:null,$scope:null,initializedFully:false,enabledForCurrentPage:false,countdownId:null,_COUNTDOWN_TEXT:"{TIMER}",$timerText:null,textBeforeTimer:null,isTimerEnabled:null,data:null,onLookup:function(){this.keepAlive()
},keepAlive:function(o){if(!this.initializedFully){this.enabledForCurrentPage=this.isEnabledForCurrentPage();
this.initializedFully=true
}if(!this.enabledForCurrentPage){return
}if(o&&o.eventData){this.path=o.eventData.path
}this.initializeCounter();
this.resetTimer()
},isEnabledForCurrentPage:function(){var q,p,o=true;
q=h.journeyStorage.get("journeyStart");
if(!h.journeyContext.current()||!q){p=f("span.analytics-config-userjourneytracking").first().data("analytics-custom-params");
if(p){h.journeyStorage.put("journeyStart",p)
}if(p=="vehicleYourDetailsLoad"){o=false
}}return o
},initializeCustomLinkTracking:function(){f(".sessionTimeoutAlertAlternative .journey-context-anchor").data("internal","true")
},trackTimeout:function(){var p=Cog.Cookie.read("dlg.lastFieldInteractedWith"),o=null,q="timeout:Y";
if(!window.s){return
}Cog.fireEvent(c.lastFieldTracking.moduleName,c.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:false});
window.s.clearVars();
window.s.events="event8";
window.s.products=null;
if(window.CQ_Analytics){window.CQ_Analytics.PageDataMgr.data.additionalEvent=null;
window.CQ_Analytics.PageDataMgr.data.loadEvent=null
}if(p){window.s.prop29=p;
window.s.eVar29=p;
window.s.events+=",event30";
Cog.Cookie.erase("dlg.lastFieldInteractedWith")
}if(h.fieldsTracking.hasDataForCurrentJourney()){o=h.fieldsTracking.generateFieldsTrackingValues(q,true);
if(o&&window.s){window.s.events+=",event11";
window.s.list1=o
}}window.s.tl()
},initialize:function(){this.$scope=f(".sessionTimeoutAlert");
this.data=this.$scope.data();
this.isEnabled=!f("body").hasClass("no-session-timeout-alert")&&this.data&&this.data.applicable==true;
this.timeout=this.data?this.data.sessionTimeout:0;
this.timeoutAlert=this.data?this.data.sessionTimeoutAlert:0;
this.timeoutAlertAltText=this.data?this.data.sessionTimeoutAlternativeText:"";
this.initializeCustomLinkTracking();
if(this.isEnabled){Cog.addListener2(c.stateProvider.name,c.stateProvider.events.stateChanged,this.keepAlive.bind(this));
Cog.addListener2(c.submitter.moduleName,c.submitter.events.formSubmission,this.keepAlive.bind(this));
Cog.addListener2(d.moduleName,i.lookup,this.onLookup.bind(this))
}},initializeCountdownTimer:function(){this.$timerText=this.ligthbox.find('[name="timer"]').parent();
this.isTimerEnabled=this.$timerText.text().indexOf(this._COUNTDOWN_TEXT);
var o=this.timeoutAlert*60;
if(this.isTimerEnabled!=-1){this.$timerText.addClass("countdownTimer")
}this.startCountdownTimer(o)
},startCountdownTimer:function(p){var r=p,o,q;
this.textBeforeTimer=this.$timerText.text().split(this._COUNTDOWN_TEXT)[0];
this.setTimerText("--m --s");
this.countdownID=setInterval(function(){o=parseInt(r/60,10);
q=parseInt(r%60,10);
o=o<10?"0"+o:o;
q=q<10?"0"+q:q;
this.setTimerText(o+"m "+q+"s");
if(--r<0){r=0;
clearInterval(this.countdownID);
this.showPopupAlternative()
}}.bind(this),1000)
},setTimerText:function(o){if(this.isTimerEnabled!=-1){this.$timerText.text(this.textBeforeTimer+o)
}},initializeCounter:function(){if(!this.timeoutValue){this.timeoutValue=(this.timeout-this.timeoutAlert)*60*1000;
if(this.timeoutValue<60000){this.timeoutValue=60000
}}},resetCountdownTimer:function(){var p=this.$scope.find(".countdownTimer"),o=f("<a />").attr("name","timer");
p.text(this._COUNTDOWN_TEXT);
p.append(o);
clearInterval(this.countdownID)
},resetTimer:function(){if(this.timeoutExecutionReference!==null){clearTimeout(this.timeoutExecutionReference)
}this.timeoutExecutionReference=setTimeout(this.showPopup.bind(this),this.timeoutValue)
},initLightbox:function(){Cog.fireEvent(d.moduleName,d.events.start);
this.ligthbox=f(".featherlight")
},showPopup:function(){if(h.nBox.isNboxOpened()){h.nBox.destroy();
b.SessionTimeoutAlert.initializeTimeoutNbox()
}else{b.SessionTimeoutAlert.initializeTimeoutNbox()
}},initializeTimeoutNbox:function(){var o={$content:this.$scope,closable:false,isAjaxRequest:false,handler:false,shouldScroll:false,additionalClass:"session-timeout-lightbox"};
Cog.fireEvent("sessionTimeoutAlert","start");
h.nBox.create(o);
this.initLightbox();
this.initializeButtons();
this.initBlinkPageAltTitle();
this.initializeCountdownTimer()
},showPopupAlternative:function(){var p=f(".sessionTimeoutAlertAlternative"),o={$content:p,closable:false,isAjaxRequest:false,handler:false,shouldScroll:false,additionalClass:"session-timeout-lightbox-alternative"};
Cog.fireEvent("sessionTimeoutAlert","start");
if(p.length){h.nBox.destroy();
this.trackTimeout();
h.nBox.create(o)
}},initializeButtons:function(){this.ligthbox.find("button").on("click",this.onContinueClicked.bind(this))
},initBlinkPageAltTitle:function(){var q,p,o=j.hasFocus();
this.pageTitle=j.title;
q=function(){j.title=j.title==this.timeoutAlertAltText?this.pageTitle:this.timeoutAlertAltText
}.bind(this);
if(!o){p=setInterval(q,1000)
}window.onblur=function(){if(this.$scope.is(":visible")){p=setInterval(q,1000)
}}.bind(this);
window.onfocus=function(){clearInterval(p);
j.title=this.pageTitle
}.bind(this)
},onContinueClicked:function(){f.getJSON("/bin/dlg/site/tskeepalive?jcid="+h.journeyContext.current()+"&path="+this.path,function(o){if(o.type=="REDIRECT"){Cog.fireEvent("elements.stateProvider","stateRedirect");
window.location.href=o.content.path
}});
this.resetTimer();
this.resetCountdownTimer();
h.nBox.destroy()
}};
b.SessionTimeoutAlert=n
}g.init=function(n){if(h.wcmMode.isNotEdit()&&!l){l=true;
m();
b.SessionTimeoutAlert.initialize()
}};
Cog.registerStatic({name:"sessionTimeoutAlert",api:g,externalApi:h,selector:"div.sessionTimeoutAlert",requires:[{name:"commons.wcmMode",apiId:"wcmMode"},{name:"elements.journeyContext",apiId:"journeyContext"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"nBox",apiId:"nBox"},{name:"analytics.fieldsTracking",apiId:"fieldsTracking"},{name:"commons.customStorage",apiId:"customStorage"}]})
}(COGjQuery,document));
(function(g){var f={},i={wcmMode:null,preAddAncillary:null,cookieDrivenConditionalContainer:null,nBox:null,journeyStorage:null,pagesManager:null,journeyContext:null},d={LoadingOverlay:null},h={autoClose:"autoClose",userClose:"userClose",thirdPartyClose:"thirdPartyClose"},c=false;
function b(j){d.LoadingOverlay={overlayMode:null,backgroundPageLoaded:false,minimumDisplayTimeElapsed:false,minimumDisplayTime:null,$scope:null,displayOnEveryEntry:false,initialize:function(){this.$scope=j;
this.displayOnEveryEntry=this.$scope.data("displayOnEveryEntry");
this.minimumDisplayTime=this.$scope.data("minimumDisplayTime");
this.overlayMode=this.minimumDisplayTime?h.autoClose:h.userClose;
i.cookieDrivenConditionalContainer.initialize(j);
i.preAddAncillary.initialize(j);
if(!this.displayOnEveryEntry&&(i.cookieDrivenConditionalContainer.isEmptyContainer()||!i.cookieDrivenConditionalContainer.hasContainerToShow(j))){return
}if(i.preAddAncillary.anyItemFound()){this.overlayMode=h.thirdPartyClose
}if(this.overlayMode==h.thirdPartyClose){this.initializeThirdPartyClose()
}else{if(this.overlayMode==h.autoClose){this.initializeWithTimer()
}else{this.initializeAsUserClosable()
}}},initializeThirdPartyClose:function(){this.showOverlay()
},initializeWithTimer:function(){this.showOverlay();
this.initializeTimer();
Cog.addListener2("analytics.sitecatalyst.launcher","firedInstantly",this.backgroundPageLoadedAutoCloseHandler.bind(this))
},initializeTimer:function(){setTimeout(this.minimumDisplayTimeElapsedHandler.bind(this),this.minimumDisplayTime*1000)
},backgroundPageLoadedAutoCloseHandler:function(){this.backgroundPageLoaded=true;
this.tryCloseLightbox()
},minimumDisplayTimeElapsedHandler:function(){this.minimumDisplayTimeElapsed=true;
this.tryCloseLightbox()
},tryCloseLightbox:function(){if(this.backgroundPageLoaded&&this.minimumDisplayTimeElapsed){i.nBox.destroy()
}},initializeAsUserClosable:function(){Cog.addListener2("analytics.sitecatalyst.launcher","firedInstantly",this.backgroundPageLoadedUserCloseHandler.bind(this));
this.showOverlay()
},backgroundPageLoadedUserCloseHandler:function(){},showOverlay:function(){var l={$content:this.$scope,closable:this.overlayMode==h.userClose,isAjaxRequest:false,handler:false,shouldScroll:false},m={name:"free-rescue-lightbox",visible:"visible",hidden:"hidden"};
if(this.$scope.find(".free-rescue-lightbox")){if(!i.journeyStorage.get(m.name)||i.journeyStorage.get(m.name)===m.visible){i.nBox.reinitializeButtons(true);
i.nBox.create(l)
}}else{i.nBox.create(l)
}i.nBox.setClosable(true)
}}
}f.setVisited=function(){i.pagesManager.setVisited()
};
f.shouldDisplayOnEntry=function(j){return j.data("displayOnEveryEntry")&&!i.journeyContext.current()
};
f.init=function(){if(!i.pagesManager.isJourneyPage()){return
}i.pagesManager.clearVisitedPagesIfNewQnbPage();
i.pagesManager.clearVisitedPagesIfQnbAndNewJourneyId();
i.pagesManager.clearFirstAccordionSentEvent();
if(i.wcmMode.isNotEdit()&&!c){var j=g(".loadingOverlay");
if(i.pagesManager.isPageVisited()&&!f.shouldDisplayOnEntry(j)){return
}i.pagesManager.clearVisitedPagesIfConfirmation();
i.pagesManager.setVisited();
if(j.length){c=true;
b(j);
d.LoadingOverlay.initialize()
}}Cog.addListener2("analytics.sitecatalyst.launcher","fired",f.setVisited)
};
Cog.registerStatic({name:"loadingOverlay",api:f,externalApi:i,requires:[{name:"commons.wcmMode",apiId:"wcmMode"},{name:"commons.preAddAncillary",apiId:"preAddAncillary"},{name:"commons.cookieDrivenConditionalContainer",apiId:"cookieDrivenConditionalContainer"},{name:"nBox",apiId:"nBox"},{name:"component.analytics.journeyStorage",apiId:"journeyStorage"},{name:"component.pagesManager",apiId:"pagesManager"},{name:"elements.journeyContext",apiId:"journeyContext"}]})
}(COGjQuery));
(function(f){var h={$scope:null,$preAddVisible:null},g={},d={lightboxContent:".hidden"},c={continueButton:{name:"premiumPage.ancillaryButton",events:{submit:"SubmitWithAncillaryChecked"}}},j={nBox:null,ancillaryStorage:null,pageScroller:null},l=false,i=false,b=false;
h.initialize=function(){h.attachButtonEvents();
h.attachPageReadyEvent()
};
h.attachPageReadyEvent=function(){Cog.addListener2("analytics.sitecatalyst.launcher","firedInstantly",h.pageLoaded)
};
h.pageLoaded=function(){h.$preAddVisible.find(".button").removeClass("hidden")
};
h.attachButtonEvents=function(){h.$preAddVisible.find(".button").off("click").on("click",h.handleButtonClick)
};
h.clickCodeCorrespondingButton=function(m){if(!h.scrollToAncillary){m.data("disableScrolling",true)
}m.data("promptPassed",true);
m.trigger("click")
};
h.scrollToBreakdownSection=function(){var m=j.nBox.shouldLightboxScrollAfterClose(),n=f(".section").find('div[class*="breakdownCover"]');
if(m&&l&&!i&&!b){j.pageScroller.basicScroller.scrollTo(n,500);
i=true
}};
h.openConfirmationLightbox=function(p){var q=f(d.lightboxContent).find("."+p),o=q.parents(d.lightboxContent),m=o.find(".lightbox-scroll").data("scroll"),n={$content:o,closable:true,isAjaxRequest:false,handler:false,shouldScroll:m};
j.nBox.destroy();
j.nBox.create(n)
};
h.handleButtonClick=function(r){var q=f(this).data(),o=f('form [data-product-code="'+q.productCode+'"]'),p,m=f(r.target),n=["RES","RESP","REC","RECP","EURP"];
r.stopPropagation();
r.preventDefault();
m.parent().focus();
m.focus();
j.nBox.destroy(r);
Cog.addListener2("nBox","closed",h.scrollToBreakdownSection);
if(q.action=="decline"){j.ancillaryStorage.removeApproved(q.productCode);
j.ancillaryStorage.addRejected(q.productCode)
}else{j.ancillaryStorage.addApproved(q.productCode);
j.ancillaryStorage.removeRejected(q.productCode)
}if(q.action=="continue"){Cog.fireEvent(c.continueButton.name,c.continueButton.events.submit);
return
}if(_.contains(n,q.productCode)){l=true;
if(q.action=="approve"){p=o.filter(":button")
}else{if(o.hasClass("select-option")&&o.hasClass("active")){p=o.siblings(".remove-option");
b=true
}}}else{l=false;
p=(q.action=="approve"?o.find(".button-yes"):o.find(".button-no"))
}if(p){h.clickCodeCorrespondingButton(p);
if(b){Cog.fireEvent("breakdownCover","resetTrackingToNone")
}}if(q.confirmation==true){r.preventDefault();
h.openConfirmationLightbox(q.productCode)
}};
h.initializeVisibility=function(){var m,o,n=h.$scope.find(".preAddAncillary");
h.$preAddVisible=f();
n.each(function(){m=f(this);
o=m.closest(".conditional-item");
h.visible=!o.length||!o.hasClass("hidden");
if(h.visible){h.$preAddVisible=m;
return false
}})
};
h.updateVisibility=function(q){var n=q.eventData.$scope,m,p,o=n.find(".preAddAncillary");
o.each(function(){m=f(this);
p=m.closest(".conditional-item");
h.visible=!p.length||!p.hasClass("hidden");
if(h.visible){h.$preAddVisible=m;
return false
}});
h.pageLoaded();
h.attachButtonEvents()
};
g.anyItemFound=function(){return h.visible
};
g.initialize=function(m,o,n){h.scrollToAncillary=n;
h.$scope=m;
h.initializeVisibility();
Cog.addListener2("nBox","loaded",h.updateVisibility);
if(h.visible){if(!m.hasClass("preAddInitialized")&&m.length){h.initialize();
m.addClass("preAddInitialized")
}}if(h.visible&&o){h.pageLoaded()
}};
Cog.registerStatic({name:"commons.preAddAncillary",sharedApi:g,api:h,externalApi:j,requires:[{name:"nBox",apiId:"nBox"},{name:"premiumPage.singleAncillaryProductStorage",apiId:"ancillaryStorage"},{name:"forms.form.pageScroller",apiId:"pageScroller"}]})
}(COGjQuery));
(function(g,c){var f={},b={},d=false;
f.initialize=function(){var h=f.$scope.find(".conditional-item");
f.$matchingItem=null;
f.currentUuids=f.getCurrentUuids();
h.each(f.matchItem);
if(f.$matchingItem){f.displayMatchingItem()
}else{f.displayDefaultOption()
}};
f.matchItem=function(o){var m,l,j,n=g(this).data("uuid"),h=Cog.Cookie.read("cookieContainer");
if(typeof(n)=="number"){n=n.toString()
}if(_.isEmpty(n)||f.$matchingItem){return false
}j=n.replace(/\s/g,"").split(",");
for(m=0;
m<j.length;
m++){l=j[m];
if(l.indexOf("cdcci-")==0){if(l==h){f.$matchingItem=g(this);
return false
}}else{if(_.contains(f.currentUuids,l)){f.$matchingItem=g(this);
return false
}}}};
f.displayDefaultOption=function(){var h=f.$scope.find(".default-item");
f.applyDynamicData(h);
h.removeClass("hidden").addClass("cc-selected");
h.show()
};
f.displayMatchingItem=function(){f.$matchingItem.removeClass("hidden").addClass("cc-selected");
f.applyDynamicData(f.$matchingItem);
f.$matchingItem.show()
};
f.applyDynamicData=function(i){var p=Cog.Cookie.read("cookieData"),m,l,n,h,j={};
if(p){m=p.split("<n>");
_.each(m,function(o){if((typeof(o)=="string")&&o.indexOf(":")>0){l=o.split(":");
h=l[1].replace("/<w>/ /g").replace("/<s>/;/g").replace("/<c>/,/g");
j[l[0]]=h
}})
}if(i.length&&window.findAndReplaceDOMText){_.forOwn(j,function(q,o){window.findAndReplaceDOMText(i[0],{find:"{"+o+"}",replace:q})
})
}};
f.getCurrentUuids=function(){var h="",j=c.location.pathname,i=j.indexOf(".");
if(i>0){h=j.substring(i+1)
}return h!==""?h.split("."):[]
};
b.isEmptyContainer=function(){return d&&!f.$scope.find(".conditional-item").not(".hidden").children().length
};
b.initialize=function(i){var h=i.find(".cookieDrivenConditionalContainer");
if(h.length&&!d){f.$scope=h;
d=true;
f.initialize()
}};
b.hasContainerToShow=function(j){var h=_.template(g.trim(j.html())),i=h(this),l=g(i).find(".conditional-item");
f.currentUuids=f.getCurrentUuids();
l.each(f.matchItem);
return f.$matchingItem||(g(i).find(".default-item").html()&&g(i).find(".default-item").html().trim().length>0)
};
Cog.registerStatic({name:"commons.cookieDrivenConditionalContainer",sharedApi:b,api:f})
}(COGjQuery,document));
(function(d,b){function c(h){var i={},n={customEvents:[]},g=d.extend({},n,h),m={onPlay:null,onPause:null,onStop:null,onSeek:null,onPlayerUnstarted:null,onPlayerEnded:null,onPlayerPlaying:null,onPlayerPaused:null,onPlayerBuffering:null,onPlayerCued:null},l={};
function j(p,r,o){var q;
if(p!==null){for(q=0;
q<p.length;
q++){p[q](r)
}}}function f(o){var p=l[o];
if(p==null&&m[o]!==undefined){p=function(q){j(m[o],q,o)
};
l[o]=p
}return p
}i.dispatch=function(o){var p=f(o);
if(p!=null){p()
}};
i.get=function(o){var p=f(o);
return p!=null?p:d.noop
};
i.addHandler=function(o,p){if(m[o]!==undefined){if(m[o]===null){m[o]=[]
}m[o].push(p)
}};
i.addHandlers=function(q,p){var o;
for(o=0;
o<q.length;
o++){i.addHandler(q[o],p)
}};
i.detachHandlers=function(){var o;
for(o in m){if(m.hasOwnProperty(o)){m[o]=null
}}};
(function(){d.each(g.customEvents,function(p,o){m[o]=null
})
}());
return i
}Cog.registerStatic({name:"youTube.handlers",api:{},sharedApi:c})
}(COGjQuery,document));
(function(h,q,c){var n={},o={handlers:null,wcmMode:null},p=null,j=null,r=false;
function m(s){var u=s.data()||{},t=u.playerSettings||{};
if(t){t.appearance=t.appearance||{};
t.dimensions=t.dimensions||{}
}return t
}function i(s){h.noop()
}function d(s,u){var t={scope:s,tstart:null,category:u,trackCustom:function(v,w){if(c&&window.s){window.s.clearVars();
window.s.eVar41=w;
c.PageDataMgr.data.additionalEvent=v;
c.PageDataMgr.data.link1=null;
c.PageDataMgr.data.loadEvent=null;
window.s.events=null;
window.s.products=null;
window.s.list1=null;
window.s.tl()
}},timeElapsed:function(){var v=new Date().getTime()-this.tstart;
return(v/1000).toFixed(2)
},playing:function(){this.tstart=new Date().getTime();
if(this.category){this.trackCustom(null,u)
}},paused:function(){this.trackCustom("event42="+this.timeElapsed(),u)
},ended:function(){this.trackCustom("event41,event42="+this.timeElapsed(),u)
}};
return t
}function l(s){var t=p;
if(!!t){t.removeClass("initialized");
t.tubeplayer("destroy")
}}function b(s){if(s&&s.eventData){j=s.eventData.category
}}function g(v){var u=(v&&v.eventData)?v.eventData.category:null,s=d("WISTIA",u),t=window.wistiaEmbeds&&window.wistiaEmbeds.length?window.wistiaEmbeds[0]:null;
if(t){t.bind("play",s.playing.bind(s));
t.bind("pause",function(){if(t.duration()-t.time()<0.2){s.ended()
}else{s.paused()
}}.bind(s))
}}function f(t,v,y){var s=o.handlers(),x=t.$scope.parents(".youtube-player-inner").data("category")||j,u=d(t.$scope,x),w=t.$scope.parents(".conditional-item");
if(o.wcmMode.isNotEdit()&&w.length&&!w.hasClass("cc-selected")){return
}p=t.$scope;
t.handlers=s;
t.$scope.tubeplayer({autoHide:false,modestbranding:false,annotations:false,protocol:"https",width:v.dimensions.width,height:v.dimensions.height,allowFullScreen:v.dimensions.allowFullScreen,initialVideo:v.videoId,showControls:v.appearance.showControls,showinfo:v.appearance.showInfo,autoPlay:v.appearance.autoPlay,onPlayerEnded:u.ended.bind(u),onPlayerPlaying:u.playing.bind(u),onPlayerPaused:u.paused.bind(u),onPlayerBuffering:s.get("onPlayerBuffering"),onPlayerCued:s.get("onPlayerCued")});
h.tubeplayer.defaults.afterReady=i
}n.beforeInit=function(){if(!r){Cog.addListener2("youTube.player","lightboxDestroyed",l);
Cog.addListener2("youTube.player","ligthbox-category",b);
Cog.addListener2("youTube.player","wistia-video-init",g);
r=true
}};
n.onRegister=function(s){var t=m(s.$scope);
if(t.videoId){f(s,t)
}};
n.onUnregister=function(s){if(s.handlers!=null){s.handlers.detachHandlers();
s.$scope.tubeplayer("destroy")
}};
Cog.registerComponent({name:"youTube.player",api:n,externalApi:o,requires:[{name:"youTube.handlers",apiId:"handlers"},{name:"commons.wcmMode",apiId:"wcmMode"}],selector:"div.youtube-player"})
}(COGjQuery,document,window.CQ_Analytics));
(function(g,l){var i={},f={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{submit:"submit"}}},j={formElement:null,focusHelper:null},b={PaymentPagePaymentOption:null},h={},n=false,c=[];
function d(){var o=Cog.Type.extend(j.formElement.Element,{view:null,$links:null,$selectedInput:null,$selectedRadio:null,focusHelper:j.focusHelper.FocusHelper.instance(),initialize:function(){o.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(p){if(p){this.view.render(p);
this.afterRender()
}},afterRender:function(){this.initializeLinks()
},initializeLinks:function(){this.$links=this.$scope.find("ul.tabs li a");
this.$links.on("click",this.contextProxy(this.onLinksClicked,this))
},onLinksClicked:function(p,q){this.$selectedInput=g(p).siblings(".input-radio").find("input");
this.$selectedInput.prop("checked",true);
this.focusHelper.blinkElement(this.$selectedInput);
Cog.fireEvent(f.form.name,f.form.events.submit,{$scope:this.$scope,addHiddenHandler:true,isValidationEnabled:false});
q.preventDefault()
}});
b.PaymentPagePaymentOption=o
}i.onRegister=function(o){o.element=new b.PaymentPagePaymentOption(o.$scope)
};
i.onUnregister=function(o){o.element.unregister()
};
i.init=function(o){Cog.fireEvent(f.registry.name,f.registry.events.initialized,{analytics:h.getDataAndConfig});
c=g(g.merge(c,o))
};
i.beforeInit=function(){Cog.fireEvent(f.registry.name,f.registry.events.register);
if(!n){n=true;
d()
}};
function m(){var o=[];
_.forEach(c,function(q){var p=g(q),r=p.find("input:checked"),s;
s={data:{value:r.val(),origin:r.attr("name")},config:{analyticsLabel:"PAYMENT_TYPE",analyticsFieldTrackingBindings:["direct.default"]}};
o.push(s)
});
return o
}h.getDataAndConfig=function(){return m()
};
Cog.registerComponent({name:"paymentPage.paymentOption",api:i,externalApi:j,sharedApi:h,selector:"div.paymentPagePaymentOption",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"forms.helper.focusHelper",apiId:"focusHelper"}]})
}(COGjQuery,document));
(function(h,c){var g={},b={ReviewRedirectHandler:null},d={errorPresenter:{name:"forms.validation.errorPresenter",events:{update:"update"}}},i={urlUtil:null,handler:null,nBox:null,pagesManager:null};
function f(){var j=Cog.Type.extend(i.handler.JourneyContextHandler,{actions:{success:"success"},$scope:null,path:null,listenerAdded:false,constructor:function(l){j.superclass.constructor.call(this,"redirect");
this.$scope=l
},canHandle:function(m){var l=j.superclass.canHandle.call(this,m);
return l&&this.responseContent(m).action===this.actions.success
},handle:function(l){j.superclass.handle.call(this,l);
this.path=this.responseContent(l).path;
Cog.fireEvent(d.errorPresenter.name,d.errorPresenter.events.update,{$scope:this.$scope,errors:{}});
this.engine.notifyValidationSucceed();
sessionStorage.setItem("plb_path",this.path);
if(!this.listenerAdded){Cog.addListener2("payment.lightbox","update",g.showLightbox.bind(this,true,this.path));
this.listenerAdded=true
}g.showLightbox(false,this.path)
},canHandleNext:function(){return false
},getScope:function(){return this.$scope
}});
if(i.pagesManager.isPaymentPage()){Cog.addListener2("elements.stateProvider","stateChanged",g.onPageStateChanged)
}b.ReviewRedirectHandler=j
}g.paymentLightboxClosed=function(){h("body").removeClass("saved-payment");
if(h("body").hasClass("clear-payment-data-on-close")){Cog.fireEvent("forms.form","restoreElementsState",{$scope:h("form")});
Cog.fireEvent("multicar.payment.type","setDifferentMethod")
}};
g.showLightbox=function(n,q,p){var o=new i.urlUtil.UrlHelper(q||sessionStorage.getItem("plb_path")),m=o.removeSelectors().addSelector("content").getUrl(),j=c.location.pathname,l={$content:m,closable:true,closeHandler:g.paymentLightboxClosed,isAjaxRequest:true,handler:false,shouldScroll:false};
if(n){i.nBox.destroy()
}if(p&&p.eventData&&p.eventData.content&&p.eventData.content.sameMethod=="false"){Cog.fireEvent("elements.stateProvider","requireState",{path:j});
Cog.fireEvent("forms.form","restoreElementsState",{$scope:h("form")});
window.setTimeout(function(){h("html, body").animate({scrollTop:h(".paymentPageMulticarTransactions").offset().top})
},200);
return
}if(p&&p.eventData&&p.eventData.content&&p.eventData.content.sameMethod=="true"){h("body").addClass("clear-payment-data-on-close")
}i.nBox.create(l)
};
g.onPageStateChanged=function(n){var l=n?n.eventData:null,m,j=h.url().data.attr.path;
if(i.pagesManager.isPaymentPage()&&l&&l.state&&l.state.pageData&&l.state.pageData.multicarSameMethodPaymentPending=="true"){m=sessionStorage.getItem("plb_path");
if(j==l.path&&!h("body").hasClass("saved-payment-processed")){h("body").addClass("saved-payment");
g.showLightbox(true,m);
h("body").addClass("saved-payment-processed");
h("body").addClass("clear-payment-data-on-close")
}}};
g.init=function(){f()
};
Cog.registerStatic({name:"paymentPage.proceedButton.reviewRedirectHandler",api:g,sharedApi:b,externalApi:i,requires:[{name:"commons.urlUtil",apiId:"urlUtil"},{name:"forms.response.journeyContextHandler",apiId:"handler"},{name:"nBox",apiId:"nBox"},{name:"component.pagesManager",apiId:"pagesManager"}]})
}(COGjQuery,document));
(function(l,o,c){var m={},j={moduleName:"paymentPage.proceedButton",clickEvent:"click",handlerName:"default"},g={form:{name:"forms.form",events:{submit:"submit"}},errorPresenter:{name:"forms.validation.errorPresenter",events:{update:"update"}}},t={triggerBuyAction:"triggerBuyAction"},n={analytics:null,nBox:null,reviewRedirectHandler:null},d=c!=null,s=[],i=null;
function q(v){var u=null,x,w;
for(w=0;
u==null&&w<s.length;
w++){x=s[w];
if(v.is(x.getScope())){u=x
}}if(u==null){u=new n.reviewRedirectHandler.ReviewRedirectHandler(v);
s.push(u)
}return u
}function b(v,u){if(u){u=l.isArray(u)?u:[u];
v.additionalResponseHandlers={success:u}
}}function p(u,v,x){var w=!l("body").hasClass("saved-payment"),y={$scope:u,isValidationEnabled:w,additionalParameters:{handlerName:v||j.handlerName}};
if(!w){y.additionalParameters.paymentMethod="saved"
}b(y,x);
l("body").removeClass("saved-payment");
if(y.additionalParameters.handlerName=="second_step"){l("body").removeClass("clear-payment-data-on-close")
}Cog.fireEvent(g.form.name,g.form.events.submit,y)
}function f(){var w=l(this),u=q(w.parents("form")),v=w.data()||{};
n.analytics.clearTrackingCookie();
n.analytics.trackAction(w);
p(w,v.handlerName,u)
}function r(){n.nBox.destroy();
Cog.removeListener(i)
}function h(u){var v=u.$scope;
if(!l("body").has(v).length){return
}n.analytics.clearTrackingCookie();
n.analytics.trackAction(v);
n.nBox.showLoader();
i=Cog.addListener2(g.errorPresenter.name,g.errorPresenter.events.update,r.bind(this));
l("body").removeClass("saved-payment-processed");
p(v)
}m.onRegister=function(v){var w=v.$scope.find("button"),u=l.proxy(h,null,v);
w.css("display","");
w.on("click",f);
v.triggerBuyActionListener=Cog.addListener2(j.moduleName,t.triggerBuyAction,u)
};
m.onUnregister=function(u){Cog.removeListener(u.triggerBuyActionListener)
};
Cog.registerComponent({name:j.moduleName,api:m,externalApi:n,selector:"div.proceedButton",requires:[{name:"forms.action.button.analytics",apiId:"analytics"},{name:"paymentPage.proceedButton.reviewRedirectHandler",apiId:"reviewRedirectHandler"},{name:"nBox",apiId:"nBox"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(i,h,f){var g={},b={proceedButton:{name:"paymentPage.proceedButton",events:{triggerBuyAction:"triggerBuyAction"}}},j={analytics:null},d=f!=null;
function c(){var m=i(this),l=b.proceedButton;
j.analytics.clearTrackingCookie();
j.analytics.trackAction(m);
Cog.fireEvent(l.name,l.events.triggerBuyAction)
}g.init=function(l){l.find("button.button").each(function(){var m=i(this);
m.css("display","");
m.off("click").on("click",c)
})
};
Cog.register({name:"buyButton",api:g,externalApi:j,selector:"div.buyButton",requires:[{name:"forms.action.button.analytics",apiId:"analytics"},{name:"paymentPage.proceedButton"}]})
}(COGjQuery,window,window.CQ_Analytics));
(function(f,b){var c={},g={loader:null};
function d(h){g.loader.hide(h.data)
}c.onRegister=function(h){};
c.init=function(h){if(h.parents(".payment-page").length>0){Cog.addListener2("elements.stateProvider","allElementsUpdated",d,{data:h});
if(h.hasClass("form-column")){h.find(".ajax-loader").remove()
}}};
Cog.registerComponent({name:"paymentPageLoader",api:c,externalApi:g,selector:"div.premium-quote-summary, div.form-column",requires:[{name:"elements.loader",apiId:"loader"}]})
}(COGjQuery,document));
(function(f,i,c){var g={},d={},h={formElement:null},b={MulticarPaymentType:null},l=false;
function j(){var m=Cog.Type.extend(h.formElement.Element,{view:null,$sameMethodInput:null,$differentMethodInput:null,$sameMethodLabel:null,$differentMethodLabel:null,$form:null,fieldName:null,initialStateProcessed:false,initialize:function(){m.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope);
this.$form=f(".content .form-column form");
this.fieldName=this.configuration.get().fieldname;
Cog.addListener2("multicar.payment.type","setDifferentMethod",this.setDifferentMethod.bind(this));
Cog.addListener2("elements.stateProvider","stateChanged",this.hideOnLockdown.bind(this))
},processState:function(n){if(n&&n.parameters&&n.parameters.lockdown!="true"){this.view.render(n);
this.$sameMethodInput=this.$scope.find(".multicar-same-method-input");
this.$differentMethodInput=this.$scope.find(".multicar-different-method-input");
this.$sameMethodLabel=this.$scope.find(".multicar-same-method-label");
this.$differentMethodLabel=this.$scope.find(".multicar-different-method-label");
this.$sameMethodInput.on("click",this.setSameMethod.bind(this));
this.$sameMethodLabel.on("click",this.setSameMethod.bind(this));
this.$differentMethodInput.on("click",this.setDifferentMethod.bind(this));
this.$differentMethodLabel.on("click",this.setDifferentMethod.bind(this));
if(!this.initialStateProcessed){if(this.$sameMethodInput.is(":checked")){this.setHiddenField("sameMethod")
}else{if(this.$differentMethodInput.is(":checked")){this.setHiddenField("differentMethod")
}}this.initialStateProcessed=true
}}else{if(n&&n.parameters&&n.parameters[this.fieldName]){this.setHiddenField(n.parameters[this.fieldName])
}}},hideOnLockdown:function(o){var n=o.eventData.state.pageData.paymentPageLockdown;
if(n=="true"){this.$scope.hide();
f(".navigation-step a").css("pointer-events","none")
}},setSameMethod:function(){if(this.$sameMethodInput){this.$sameMethodInput.attr("checked","checked")
}this.setHiddenField("sameMethod");
Cog.fireEvent("forms.form","submit",{$scope:this.$form,isValidationEnabled:false})
},setDifferentMethod:function(){if(this.$differentMethodInput){this.$differentMethodInput.attr("checked","checked")
}this.setHiddenField("differentMethod");
Cog.fireEvent("forms.form","submit",{$scope:this.$form,isValidationEnabled:false})
},setHiddenField:function(n){this.$form.find('input[name="'+this.fieldName+'"]').val(n)
}});
b.MulticarPaymentType=m
}g.onRegister=function(m){m.element=new b.MulticarPaymentType(m.$scope)
};
g.onUnregister=function(m){m.element.unregister()
};
g.init=function(m){Cog.fireEvent("elements.registry","initialized")
};
g.beforeInit=function(){Cog.fireEvent("elements.registry","register");
if(!l){l=true;
j()
}};
Cog.registerComponent({name:"multicarPaymentType",api:g,externalApi:h,requires:[{name:"forms.elements.element",apiId:"formElement"}],selector:"div.paymentPageMulticarPaymentType"})
}(COGjQuery,window,window.CQ_Analytics));
(function(f,i,c){var g={},d={},h={formElement:null},b={MulticarSecciCheckbox:null},l=false;
function j(){var m=Cog.Type.extend(h.formElement.Element,{view:null,$form:null,$checkboxes:null,fieldName:null,initialStateProcessed:false,errorsPresent:false,initialize:function(){m.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope);
this.$form=f(".content .form-column form");
this.fieldName=this.configuration.get().fieldname;
Cog.addListener2("forms.form","validationFailed",this.processErrorState)
},states:{},processState:function(n){if(n){this.view.render(n);
this.$checkboxes=this.$scope.find(".mscb");
this.$checkboxes.on("click",this.performFieldsValidation.bind(this));
if(this.initialStateProcessed){_.forEach(this.$checkboxes,function(o,p){if(this.states[f(o).attr("name")]){f(o).attr("checked",true)
}}.bind(this));
if(this.allCheckboxesChecked()){this.setHiddenField(true)
}else{this.setHiddenField(false)
}}else{if(n.checkboxValue=="on"){this.$checkboxes.attr("checked",true)
}this.initialStateProcessed=true
}}},processErrorState:function(){setTimeout(function(){var p=f("form").find(".multicarSecciCheckbox"),o=p.parents(".conditionalContainer"),n=p.find(".confirmation-checkbox-row .form-row");
if(p.hasClass("error")){p.removeClass("error");
o.removeClass("error");
o.addClass("errorProcessing");
_.forEach(n,function(s,r){var q=r+1;
if(!f(s).find('input[name*="secciCheckbox_checkbox_'+q+'"]').prop("checked")){f(s).addClass("error");
f("form").find(".multicarSecciCheckbox").find(".error-message").show()
}})
}},500)
},performFieldsValidation:function(o){var n=f(o.currentTarget).parents(".confirmation-checkbox-row .form-row"),p=this.$scope.parents(".conditionalContainer");
_.forEach(this.$checkboxes,function(q,r){this.states[f(q).attr("name")]=f(q).is(":checked")
}.bind(this));
if(this.allCheckboxesChecked()){this.setHiddenField(true)
}else{this.setHiddenField(false)
}if(f(o.currentTarget).prop("checked")){n.removeClass("error")
}else{if(p.hasClass("errorProcessing")){n.addClass("error")
}}this.errorsPresent=false;
_.forEach(this.$checkboxes,function(s,r){var q=r+1,t=false;
if(!f(s).prop("checked")){this.errorsPresent=true
}else{f("form").find(".multicarSecciCheckbox").removeClass("error")
}}.bind(this));
if(!this.errorsPresent){this.validate();
p.removeClass("errorProcessing")
}},allCheckboxesChecked:function(){return this.$scope.find(".mscb:checked").length==this.$checkboxes.length
},setHiddenField:function(n){var o=n?"on":"off";
this.$form.find('input[name="'+this.fieldName+'"]').attr("checked",n);
this.$form.find('input[name="'+this.fieldName+'"]').attr("value",o)
}});
b.MulticarSecciCheckbox=m
}g.onRegister=function(m){m.element=new b.MulticarSecciCheckbox(m.$scope)
};
g.onUnregister=function(m){m.element.unregister()
};
g.init=function(m){Cog.fireEvent("elements.registry","initialized")
};
g.beforeInit=function(){Cog.fireEvent("elements.registry","register");
if(!l){l=true;
j()
}};
Cog.registerComponent({name:"multicarSecciCheckbox",api:g,externalApi:h,requires:[{name:"forms.elements.element",apiId:"formElement"}],selector:".multicarSecciCheckbox"})
}(COGjQuery,window,window.CQ_Analytics));
(function(g,j,d){var h={},f={},i={formElement:null,nBox:null},b={buy:null},l=false;
function c(){var m=Cog.Type.extend(i.formElement.Element,{view:null,$buyButton:null,$editButton:null,initialize:function(){m.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(n){if(n){this.view.render(n);
this.$buyButton=this.$scope.find(".payment-summary__buy");
this.$buyButton.on("click",this.buyClick.bind(this));
this.$editButton=this.$scope.find(".edit-details");
this.$editButton.on("click",i.nBox.destroy)
}},buyClick:function(n){if(n&&n.preventDefault){n.preventDefault()
}Cog.fireEvent("paymentPage.proceedButton","triggerBuyAction")
}});
b.buy=m
}h.onRegister=function(m){m.element=new b.buy(m.$scope)
};
h.onUnregister=function(m){m.element.unregister()
};
h.init=function(m){Cog.fireEvent("elements.registry","initialized")
};
h.beforeInit=function(){Cog.fireEvent("elements.registry","register");
if(!l){l=true;
c()
}};
Cog.registerComponent({name:"buy",api:h,externalApi:i,requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"nBox",apiId:"nBox"}],selector:"div.paymentPageBuy"})
}(COGjQuery,window,window.CQ_Analytics));
Cog.component.PaymentPageMulticarTransactions=Cog.component.PaymentPageMulticarTransactions||{};
(function(i,c){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null,nBox:null},g={PaymentPageMulticarTransactions:null},f=false;
function b(){var l=Cog.Type.extend(j.formElement.Element,{view:null,$toggleButton:null,$breakdown:null,breakdownHidden:false,$showBreakdownLink:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m);
this.$toggleButton=this.$scope.find(".toggle");
this.$breakdown=this.$scope.find(".completed-transaction__content");
this.$showBreakdownLink=this.$scope.find(".lightbox-link");
if(this.breakdownHidden){this.$breakdown.hide();
this.showLabel()
}this.$toggleButton.on("click",this.toggleClick.bind(this));
this.$showBreakdownLink.on("click",this.showLightbox.bind(this));
if(this.previousPaymentMethod=="annual"&&m.monthly&&m.method=="sameMethod"){this.showLightbox()
}this.previousPaymentMethod=m.monthly?"monthly":"annual"
}},toggleClick:function(){if(this.breakdownHidden){this.$breakdown.show();
this.hideLabel()
}else{this.$breakdown.hide();
this.showLabel()
}this.breakdownHidden=!this.breakdownHidden
},hideLabel:function(){this.$toggleButton.find("span").html(this.$toggleButton.data("hide-label"))
},showLabel:function(){this.$toggleButton.find("span").html(this.$toggleButton.data("show-label"))
},showLightbox:function(n){var m={$content:this.$showBreakdownLink.data("lightbox-path"),closable:true,isAjaxRequest:true,handler:false,shouldScroll:false};
if(n&&n.preventDefault){n.preventDefault()
}j.nBox.create(m)
}});
g.PaymentPageMulticarTransactions=l
}h.onRegister=function(l){l.element=new g.PaymentPageMulticarTransactions(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
b()
}};
Cog.registerComponent({name:"paymentPageMulticarTransactions",api:h,externalApi:j,selector:"div.paymentPageMulticarTransactions",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"nBox",apiId:"nBox"}]})
}(COGjQuery,document));
Cog.component.paymentErrorPageMulticarTransactions=Cog.component.PaymentErrorPageMulticarTransactions||{};
(function(h,b){var g={},f={PaymentErrorPageMulticarTransactions:null},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null},d=false;
function i(){var l=Cog.Type.extend(j.formElement.Element,{view:null,$paymentsCompleted:null,$noCompletedTransactions:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m);
this.afterRender()
}},afterRender:function(){this.$paymentsCompleted=this.view.$target.find(".payments-list-completed");
this.$noCompletedTransactions=this.view.$target.find(".no-completed-transactions");
if(this.$paymentsCompleted.children("li").length==0){this.$noCompletedTransactions.show()
}}});
f.PaymentErrorPageMulticarTransactions=l
}g.onRegister=function(l){l.element=new f.PaymentErrorPageMulticarTransactions(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
i()
}};
Cog.registerComponent({name:"paymentErrorPageMulticarTransactions",api:g,externalApi:j,selector:"div.errorPageMulticarTransactions",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(i,c){var h={},d={stateProvider:{name:"elements.stateProvider",events:{stateChanged:"stateChanged"}},registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},g={Iframe:null},f=false,j={eventsUtil:null,element:null,urlUtil:null};
function b(){var l=Cog.Type.extend(j.element.Element,{initialize:function(){var m=d.stateProvider;
l.superclass.initialize.call(this);
Cog.addListener2(m.name,m.events.stateChanged,this.onJourneyContextUpdate.bind(this))
},onJourneyContextUpdate:function(n){var r=this.$scope,s=r.is("iframe")?r:r.find("iframe"),t=s.data("path"),u=n.eventData.state.jcid,q=new j.urlUtil.UrlHelper(window.location.href),p=q.getSelectors(),m=t,o;
if(p){o=new j.urlUtil.UrlHelper(m);
o.addSelector(p.join("."));
m=o.getUrl()
}m=m+location.search+"#"+u;
s.prop("src",m)
}});
g.Iframe=l
}h.onRegister=function(l){l.iframeElement=new g.Iframe(l.$scope)
};
h.onUnregister=function(l){l.iframeElement.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
b()
}};
Cog.registerComponent({name:"3dSecurePage.page",api:h,externalApi:j,selector:"#3d-secure-iframe",requires:[{name:"commons.eventsUtil",apiId:"eventsUtil"},{name:"forms.elements.element",apiId:"element"},{name:"commons.urlUtil",apiId:"urlUtil"},"forms.elementsRegistry"]})
}(COGjQuery,document));
(function(i,b){var h={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{submit:"submit"}},lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setTrackingEnabled:"setTrackingEnabled"}}},j={formElement:null},g={Redirect:null},f=false;
function d(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m);
Cog.fireEvent(c.lastFieldTracking.moduleName,c.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:false});
this.submitForm()
}},submitForm:function(){var m=this.$scope.find("form"),n;
if(m.length>0){n=m.data("time")*1000;
if(n){setTimeout(function(){m.submit()
},n)
}else{m.submit()
}}}});
g.Redirect=l
}h.onRegister=function(l){l.element=new g.Redirect(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!f){f=true;
d()
}};
Cog.registerComponent({name:"3dSecurePage.redirect",api:h,externalApi:j,requires:[{name:"forms.elements.element",apiId:"formElement"}],selector:"div.redirect"})
}(COGjQuery,document));
Cog.component.redirectResult=(function(d){var c={};
function b(h){var g=window.location;
if(h[0]==="/"&&h[1]!=="/"){if(!g.origin){g.origin=g.protocol+"//"+g.host
}h=g.origin+h
}return h
}function f(g){var h=g.find(".redirect-payment-result").data("redirect");
if(h){h=b(h);
window.top.location=h
}}c.init=function(g){g.each(function(){f(d(this))
})
};
return c
}(COGjQuery));
Cog.register({name:"3dSecurePage.redirectResult",api:Cog.component.redirectResult,selector:"div.redirectPaymentResult"});
Cog.component.reviewPage=Cog.component.reviewPage||{};
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={element:null,keyCodes:null},f={SummaryTable:null},d=false;
function i(){var l=Cog.Type.extend(j.element.Element,{view:null,state:null,displayMode:null,$sectionContent:null,$sectionHeader:null,createNewLines:function(){this.$scope.find(".definition-list > dd.definition-description").each(function(){h(this).html(h(this).html().replace(/[\|]{3}/g,"<br />"))
})
},initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope);
this.initShoppingBasketPolicyDetails()
},initShoppingBasketPolicyDetails:function(){if(this.$scope.hasClass("shoppingBasketPolicyDetails")){this.displayMode=this.configuration.get().defaultDisplayMode;
this.$sectionContent=this.$scope.find(".section-content");
this.$sectionHeader=this.$scope.find(".section-header");
this.$sectionHeader.on("click",this.onToggleQuoteBlock.bind(this));
if(this.displayMode=="collapsed"){this.$sectionContent.hide()
}else{this.$sectionHeader.addClass("expanded");
this.displayMode="expanded"
}this.handleExpanding()
}},onToggleQuoteBlock:function(m){m.preventDefault();
if(!this.$scope.parents(".burger-components").length){if(this.displayMode=="expanded"){this.$sectionContent.slideUp("normal",this.triggerResize);
this.$sectionHeader.removeClass("expanded");
this.displayMode="collapsed"
}else{this.$sectionContent.slideDown("normal",this.triggerResize);
this.$sectionHeader.addClass("expanded");
this.displayMode="expanded"
}}},triggerResize:function(){h(window).resize();
h(window).scroll();
h(".form-sidebar").trigger("resize")
},processState:function(m){this.state=m;
if(m){this.view.render(m);
this.createNewLines()
}},handleExpanding:function(){var m=j.keyCodes;
this.$sectionHeader.on("keyup",function(n){if(n.which===m.enter){this.onToggleQuoteBlock(n)
}}.bind(this))
}});
f.SummaryTable=l
}g.onRegister=function(l){l.element=new f.SummaryTable(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
i()
}};
Cog.registerComponent({name:"reviewPage.summaryTable",api:g,externalApi:j,selector:"div.summaryTable, div.shoppingBasketPolicyDetails",requires:[{name:"elements.element",apiId:"element"},{name:"events.keyCodes",apiId:"keyCodes"}]})
}(COGjQuery,document));
Cog.component.reviewPage=Cog.component.reviewPage||{};
(function(i,b){var h={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null},g={OptionsSummary:null},d=false;
function f(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
g.OptionsSummary=l
}h.onRegister=function(l){l.element=new g.OptionsSummary(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
f()
}};
Cog.registerComponent({name:"reviewPage.optionsSummary",api:h,externalApi:j,selector:"div.optionsSummary",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(f,b){var c={},g={loader:null};
function d(h){g.loader.hide(h.data)
}c.onRegister=function(h){};
c.init=function(h){if(h.parents(".review-page").length>0){Cog.addListener2("elements.stateProvider","allElementsUpdated",d,{data:h})
}};
Cog.registerComponent({name:"reviewPageLoader",api:c,externalApi:g,selector:"div.form-column",requires:[{name:"elements.loader",apiId:"loader"}]})
}(COGjQuery,document));
Cog.component.loggedInUserWelcomeText=Cog.component.loggedInUserWelcomeText||{};
(function(i,c){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null},g={LoggedInUserWelcomeText:null},f=false;
function b(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
g.LoggedInUserWelcomeText=l
}h.onRegister=function(l){l.element=new g.LoggedInUserWelcomeText(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
b()
}};
Cog.registerComponent({name:"loggedInUserWelcomeText",api:h,externalApi:j,selector:"div.loggedInUserWelcomeText",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(f,j,c){var g={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{submit:"submit"}},lastFieldTracking:{moduleName:"analytics.lastFieldInteracted",events:{setTrackingEnabled:"setTrackingEnabled"}}},h={formElement:null,customStorage:null},b={SavedQuotes:null},l=false;
function i(){var m=Cog.Type.extend(h.formElement.Element,{view:null,$submitButtons:null,initialize:function(){m.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(n){if(n){this.view.render(n);
this.afterRender()
}},afterRender:function(){this.$submitButtons=this.$scope.find("button");
this.$submitButtons.on("click",this.contextProxy(this.onSubmitButtonClicked,this))
},trackClick:function(){if(!c){return
}h.customStorage.putItem("qpmQuoteRetrieve",true);
var n=f('<a href="'+this.configuration.get().address+'" />').get(0)
},onSubmitButtonClicked:function(n,q){var o=f(n).data(),p=f(n).parents("li");
Cog.fireEvent(d.lastFieldTracking.moduleName,d.lastFieldTracking.events.setTrackingEnabled,{isTrackingEnabled:false});
this.trackClick();
if(o.link==null){this.submitData(o,p)
}else{if(window.confirm(o.message)==true){window.top.location.href=o.link
}}q.preventDefault()
},submitData:function(o,p){var n={};
n["formField.details.product"]=o.product;
n["formField.details.rcp"]=o.rcp;
n["formField.details.quotefoldernum"]=o.quoteFolderNum;
n["formField.details.quoteref"]=o.quoteRef;
n["formField.details.quoteseq"]=o.quoteSeq;
n.handlerName=o.handlerName;
if(p.find(".retrieve-additional-car").length){this.processMulticarData(p,n);
n["formField.yourDetails.multicarJourney"]="yes"
}else{if(o.multicar==true){n["formField.yourDetails.multicarJourney"]="yes";
n.additionalCars=0
}}Cog.fireEvent(d.form.name,d.form.events.submit,{$scope:this.$scope,additionalParameters:n,isValidationEnabled:false})
},processMulticarData:function(q,n){var r=q.find(".retrieve-additional-car"),o,p;
for(o=0;
o<r.size();
o++){p=r[o].dataset;
n["formField.details.product_"+o]=p.product;
n["formField.details.rcp_"+o]=p.rcp;
n["formField.details.quotefoldernum_"+o]=p.quoteFolderNum;
n["formField.details.quoteref_"+o]=p.quoteRef;
n["formField.details.quoteseq_"+o]=p.quoteSeq;
n["handlerName_"+o]=p.handlerName
}n.additionalCars=o
}});
b.SavedQuotes=m
}g.onRegister=function(m){m.element=new b.SavedQuotes(m.$scope)
};
g.onUnregister=function(m){m.element.unregister()
};
g.init=function(m){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!l){l=true;
i()
}};
Cog.registerComponent({name:"qpm.savedQuotes",api:g,externalApi:h,selector:"div.qpmSavedQuotes",requires:[{name:"forms.elements.element",apiId:"formElement"},{name:"commons.customStorage",apiId:"customStorage"}]})
}(COGjQuery,document,window.CQ_Analytics));
(function(i,c){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{submit:"submit"}}},j={formElement:null},g={SavedQuotes:null},f=false;
function b(){var l=Cog.Type.extend(j.formElement.Element,{view:null,$submitButtons:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m);
this.afterRender()
}},afterRender:function(){this.$submitButtons=this.$scope.find("button");
this.$submitButtons.on("click",this.contextProxy(this.onSubmitButtonClicked,this))
},onSubmitButtonClicked:function(n,p){var m={},o=i(n).data();
m["formField.details.rcp"]=o.rcp;
m["formField.details.policyKey"]=o.policyKey;
m.handlerName=o.handlerName;
Cog.fireEvent(d.form.name,d.form.events.submit,{$scope:this.$scope,additionalParameters:m,isValidationEnabled:false});
p.preventDefault()
}});
g.CurrentPolicies=l
}h.onRegister=function(l){l.element=new g.CurrentPolicies(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
b()
}};
Cog.registerComponent({name:"qpm.currentPolicies",api:h,externalApi:j,selector:"div.qpmCurrentPolicies",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(d,i){var g={},l={passDiv:".input-password-verification-col"},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{submit:"submit"}}},h={formElement:null},b={LoginPasswordAnswer:null},j=false;
function f(){var m=Cog.Type.extend(h.formElement.Element,{firstInput:null,secondInput:null,thirdInput:null,fourthInput:null,view:null,initialize:function(){m.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(n){if(n){this.view.render(n);
this.initializeLoginPwd()
}},initializeField:function(n){var o=this.fields.findAndCreate(n,this.$scope);
if(o){o.on("keyup",d.proxy(this.onKeyUp,o))
}return o
},initializeLoginPwd:function(){this.firstInput=this.initializeField(".first input");
this.secondInput=this.initializeField(".second input");
this.thirdInput=this.initializeField(".third input");
this.fourthInput=this.initializeField(".fourth input")
},onKeyUp:function(p){var o=this.$element,q=d.trim(o.val()),n=p.keyCode||p.which,r;
if(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)!==null){return false
}if(q.length==1&&n!=8&&n!=9&&n!=16&&!(p.ctrlKey&&p.which)){r=o.closest(l.passDiv).next(l.passDiv).find("input")
}else{if(n==8){o.val("");
r=o.closest(l.passDiv).prev(l.passDiv).find("input")
}}if(r){q=r.val();
r.val("");
r.focus().val(q)
}}});
b.LoginPasswordAnswer=m
}g.onRegister=function(m){m.element=new b.LoginPasswordAnswer(m.$scope)
};
g.onUnregister=function(m){m.element.unregister()
};
g.init=function(m){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!j){j=true;
f()
}};
Cog.registerComponent({name:"qpm.loginPasswordAnswer",api:g,externalApi:h,selector:"div.loginPwdAnswer",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(i,b){var h={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}},form:{name:"forms.form",events:{submit:"submit"}}},j={keyCodes:null,formElement:null,keyExecutor:null},g={SavedQuotes:null},f=false;
function c(){var l=Cog.Type.extend(j.formElement.Element,{view:null,input:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m);
this.afterRender()
}},afterRender:function(){var m=this,n;
this.input=this.fields.findAndCreate("input",this.$scope);
if(this.input){this.input.$label=this.$scope.find(".text-input-label");
this.input.$errorTemplate=this.$scope.find("script");
this.input.on("focusout",function(){var o=i.proxy(m.validate,m);
clearTimeout(n);
n=setTimeout(function(){if(!m.input.$element.is(":focus")){o()
}},100)
});
this.input.nameChangedHandler(this.onTextInputNameChanged,this);
this.input.on("keypress",j.keyExecutor.onKey(this.onItemKeypress,[j.keyCodes.enter]))
}},onItemKeypress:function(m){m.preventDefault()
},onTextInputNameChanged:function(){var m=this.input.getName();
this.input.attribute("id",m);
this.input.$label.attr("for",m);
this.input.$errorTemplate.attr("data-field-name",m)
}});
g.SecurityAnswerInput=l
}h.onRegister=function(l){l.element=new g.SecurityAnswerInput(l.$scope)
};
h.onUnregister=function(l){l.element.unregister()
};
h.init=function(l){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
h.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!f){f=true;
c()
}};
Cog.registerComponent({name:"qpm.securityAnswerInput",api:h,externalApi:j,selector:"div.securityAnswerInput",requires:[{name:"events.keyCodes",apiId:"keyCodes"},{name:"events.keyExecutor",apiId:"keyExecutor"},{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(h,b){var g={},c={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},j={formElement:null},f={EmailInputReadOnly:null},d=false;
function i(){var l=Cog.Type.extend(j.formElement.Element,{view:null,initialize:function(){l.superclass.initialize.call(this);
this.view=this.viewFactory.create(this.$scope)
},processState:function(m){if(m){this.view.render(m)
}}});
f.EmailInputReadOnly=l
}g.onRegister=function(l){l.element=new f.EmailInputReadOnly(l.$scope)
};
g.onUnregister=function(l){l.element.unregister()
};
g.init=function(l){Cog.fireEvent(c.registry.name,c.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(c.registry.name,c.registry.events.register);
if(!d){d=true;
i()
}};
Cog.registerComponent({name:"emailInputReadOnly",api:g,externalApi:j,selector:"div.emailInputReadOnly",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document));
(function(g,f){var d={open:false};
function c(i){var h=i?i.replace("-"," "):" ";
return h.substr(0,1).toUpperCase()+h.substr(1)
}function b(h){var j=h.find("select[name=areas]"),i=j.data("productUrl"),m=j.data("timeout"),n=function(p){var q=j.find("option:selected").text(),o=j.val();
Cog.fireEvent("faq","browse",{op:"browse",label:q,area:o})
},l=function(p){var q=j.find("option:selected").text(),o=j.val();
if(d.open){d.open=false;
Cog.fireEvent("faq","browse",{op:"browse",label:q,area:o})
}else{d.open=true
}};
if(h.parents(".faqSearch").length==0){j.on("blur",function(o){d.open=false
});
g(document).keyup(function(o){if(o.keyCode==Cog.statics.keyCodes.escape){d.open=false
}});
j.on("click",l);
Cog.addListener2("faqAreaSelect","select",function(p){var o=p.eventData.area;
j.val(o);
n()
}.bind(this))
}h.addClass("ajax-loader");
g.ajax({url:i,cache:false,type:"GET",crossDomain:true,timeout:m,success:function(o){g.each(o,function(p,q){j.append(g("<option>",{value:q}).text(c(q)))
});
h.removeClass("ajax-loader")
}.bind(this),error:function(){h.removeClass("ajax-loader")
}.bind(this)})
}d.init=function(h){h.each(function(){b(g(this))
})
};
Cog.register({name:"faqAreaSelect",api:d,selector:".faqAreaSelect",requires:[]})
}(COGjQuery,window));
(function(f,d){var c={},g={faqPaging:null,pageScroller:null};
function b(i){var h={$scope:i,faqList:[],title:null,subtitle:null,titleTemplate:i.data("title"),subtitleTemplate:i.data("subtitle"),searchTitleTemplate:i.data("search-title"),searchSubtitleTemplate:i.data("search-subtitle"),itemsPerPage:i.data("items-per-page"),searchUrl:i.data("search-url"),browseUrl:i.data("browse-url"),timeout:i.data("timeout"),faqLink:i.data("faq-link"),itemsLength:null,nextPage:null,currentPage:null,prevPage:null,totalPages:null,totalElements:null,visiblePages:5,area:"all",label:"All areas",labelHl:null,page:0,op:"browse",query:"",areaPlaceholder:"{area}",countPlaceholder:"{count}",searchPlaceholder:"{search}",url:"",paging:null,getUrl:function(){var j="";
if(this.op==="browse"){j=this.browseUrl
}else{if(this.op==="search"){j=this.searchUrl
}}if(this.area!=="all"){j=j+"/"+encodeURI(this.area)
}return j
},display:function(l){var j=l.eventData,m={};
_.templateSettings.variable="acc";
this.$scope.empty().addClass("ajax-loader");
this.area=j.area||this.area;
this.label=j.label||this.label;
this.labelHl='<span class="accordion-highlight">'+this.label+"</span>";
this.currentPage=j.page||0;
this.op=j.op||this.op;
this.faqList=[];
m={page:this.currentPage,size:this.itemsPerPage};
if(j.op==="browse"){this.query=""
}else{if(j.op==="search"){this.query=l.eventData.query
}}this.url=this.getUrl();
if(this.op==="search"){m.query=this.query
}f.ajax({url:this.url,data:m,cache:false,type:"GET",crossDomain:true,timeout:this.timeout,success:function(n){this.$scope.removeClass("ajax-loader");
this.displayResults(n)
}.bind(this),error:function(p){var n=_.template(f(".ajax-error-template").html()),o=n(this);
this.$scope.removeClass("ajax-loader");
this.$scope.html(o)
}.bind(this)})
},displayResults:function(o){var q,j,m,n=_.template(f(".title-template").html()),l=_.template(f(".accordion-template").html()),p=_.template(f(".search-not-found").html());
this.itemsLength=(o.content?o.content.length:0);
this.totalPages=o.totalPages||0;
this.totalElements=o.totalElements||0;
this.title=(this.op==="browse"?this.titleTemplate:this.searchTitleTemplate).replace(this.areaPlaceholder,this.label).replace(this.searchPlaceholder,this.query).replace(this.countPlaceholder,this.totalElements);
this.subtitle=(this.op==="browse"?this.subtitleTemplate:this.searchSubtitleTemplate).replace(this.areaPlaceholder,this.labelHl).replace(this.searchPlaceholder,this.query).replace(this.countPlaceholder,this.totalElements);
_.each(o.content,function(r){this.faqList.push({question:r.question,answer:r.answer})
},this);
q=n(this);
j=l(this);
this.$scope.prepend(q);
this.$scope.append(j);
if(this.op=="search"&&this.totalElements==0){m=p(this);
m=m.replace("{faqLink}",this.generateFaqLink());
this.$scope.append(m);
this.$scope.find("a.faq-link").on("click",function(){Cog.fireEvent("faqAreaSelect","select",{area:this.area})
}.bind(this))
}this.generatePaging();
Cog.init({$element:this.$scope});
g.pageScroller.basicScroller.scrollTo(this.$scope,500)
},generatePaging:function(){var l,j=_.template(f(".paging-template").html());
this.paging=g.faqPaging.generatePaging(this);
l=j(this.paging);
this.$scope.find(".accordion").append(l)
},generateFaqLink:function(){var l='<a class="faq-link">{faqLink}</a>',j=l.replace("{faqLink}",this.faqLink).replace("{area}",this.label);
return j
},onInit:function(){if(this.$scope.data("autoload")===true){this.autoload()
}},autoload:function(){Cog.fireEvent("faq","browse",{op:"browse",label:this.$scope.data("autoload-label"),value:this.$scope.data("autoload-area")})
},keydown:function(j){if(j.keyCode===Cog.statics.keyCodes.enter){this.autoload()
}}};
Cog.addListener2("faq","browse",h.display.bind(h));
i.find(".button.submit").on("click",h.autoload.bind(h));
i.find(".button.submit").on("keydown",h.keydown.bind(h));
h.onInit()
}c.init=function(h){h.each(function(){b(f(this))
})
};
Cog.register({name:"faqAccordionWebserviceDriven",api:c,selector:".faq-accordion-webservice-driven",externalApi:g,requires:[{name:"faqAccordionPaging",apiId:"faqPaging"},{name:"forms.form.pageScroller",apiId:"pageScroller"}]})
}(COGjQuery,window));
(function(g,f){var d={},c={};
function b(h){var j,i;
h.on("click",function(l){l.preventDefault();
i=g(this).parent();
j=g(this).data("page");
if(!i.hasClass("no-more-results")){Cog.fireEvent("faq","browse",{page:j})
}})
}c.generatePaging=function(i){var h={currentPage:null,visiblePages:null,itemsPerPage:null,totalPages:null,totalElements:null,totalDots:null,showArrows:null,prevPageIdx:null,nextPageIdx:null,firstDotIdx:null,lastDotId:null,prevLinkActive:null,nextLinkActive:null,prevDataRangeStart:null,prevDataRangeEnd:null,prevDataActive:null,prevDataLink:null,prevDataPage:null,nextDataRangeStart:null,nextDataRangeEnd:null,nextDataActive:null,nextDataLink:null,nextDataPage:null};
h.currentPage=i.currentPage;
h.visiblePages=i.visiblePages;
h.itemsPerPage=i.itemsPerPage;
h.totalPages=i.totalPages;
h.totalElements=i.totalElements;
h.showArrows=h.totalPages>h.visiblePages;
h.prevPageIdx=Math.max(0,h.currentPage-1);
h.nextPageIdx=Math.min(h.currentPage+1,h.totalPages-1);
h.prevLinkActive=h.currentPage>0;
h.nextLinkActive=h.currentPage+1<h.totalPages;
h.firstDotIdx=Math.floor(h.currentPage/h.visiblePages)*h.visiblePages+1;
h.lastDotIdx=Math.min(h.totalPages,h.firstDotIdx+h.visiblePages-1);
h.totalDots=h.lastDotIdx-h.firstDotIdx+1;
h.prevDataRangeStart=h.firstDotIdx-5;
h.prevDataRangeEnd=Math.min(h.totalPages,h.prevDataRangeStart+h.visiblePages-1);
h.prevDataActive=h.prevDataRangeStart>0;
h.prevDataLink=h.prevDataRangeStart+"-"+h.prevDataRangeEnd;
h.prevDataPage=Math.max(0,h.firstDotIdx-2);
h.nextDataRangeStart=h.firstDotIdx+5;
h.nextDataRangeEnd=Math.min(h.totalPages,h.nextDataRangeStart+h.visiblePages-1);
h.nextDataActive=h.nextDataRangeStart<=h.totalPages;
h.nextDataLink=(h.nextDataRangeStart!==h.nextDataRangeEnd?h.nextDataRangeStart+"-"+h.nextDataRangeEnd:h.nextDataRangeEnd);
h.nextDataPage=Math.min(h.totalPages-1,h.firstDotIdx+h.visiblePages-1);
return h
};
d.init=function(h){h.each(function(){b(g(this))
})
};
Cog.register({name:"faqAccordionPaging",api:d,sharedApi:c,selector:".accordion-paging"})
}(COGjQuery,window));
(function(f,d){var c={};
function b(g){var h={$scope:g,$select:g.find("select[name=areas]"),$input:g.find("input"),triggerSearch:function(m){var j=this.$select.val(),i=this.$select.find("option:selected").text(),l=this.$input.val();
m.preventDefault();
Cog.fireEvent("faq","browse",{op:"search",area:j,label:i,query:l})
},keydown:function(i){if(i.keyCode===Cog.statics.keyCodes.enter){this.triggerSearch(i)
}}};
g.find("input").on("keydown",h.keydown.bind(h));
g.find(".button.submit").on("click",h.triggerSearch.bind(h))
}c.init=function(g){g.each(function(){b(f(this))
})
};
Cog.register({name:"faqSearch",api:c,selector:".faqSearch",requires:[]})
}(COGjQuery,window));
Cog.component.telephonyDown=(function(f){var d={},c=null,h={noticeId:null,noticeHeading:null,noticeText:null},g={name:"td-enabled",visible:"enabled",hidden:"accepted"};
d.bindEvents=function(){var i=c.find(".toggle");
i.on("click",function(j){j.preventDefault();
c.removeClass("active");
d.acknowledge()
}.bind(d))
};
d.shouldDisplay=function(){var i=Cog.Cookie.read(g.name);
return i!==h.noticeId
};
d.acknowledge=function(){var i=1;
Cog.Cookie.create(g.name,h.noticeId,i)
};
d.display=function(){var i=c.find(".notice-telephony-down-template").html(),j,l;
if(h&&h.noticeHeading&&h.noticeText){j=_.template(i);
l=j(h);
c.find(".container").append(l);
c.addClass("active");
d.bindEvents()
}};
function b(i){h=i.eventData.data;
if(d.shouldDisplay()){d.display()
}}d.init=function(i){if(i.length){c=i;
Cog.addListener2("udp","dataObtained",b)
}};
return d
}(COGjQuery));
Cog.register({name:"telephonyDown",api:Cog.component.telephonyDown,selector:".notice-telephony-down"});
Cog.component.rcpReferrerMatching=(function(c){var b={};
b.showOnMatch=function(f,h){var i=h.eventData.state.pageData.rcpCode,g=h.eventData.state.pageData.referrer,d=h.eventData.state.pageData.multicarJourney||Cog.pages.isMulticarJourneyDetailsPage();
if(document.location.pathname.indexOf("/system-error/")===-1){sessionStorage.setItem("rcpCode",i);
sessionStorage.setItem("referrer",g);
sessionStorage.setItem("multicarJourney",d)
}else{if(sessionStorage.getItem("rcpCode")){i=sessionStorage.getItem("rcpCode")
}if(sessionStorage.getItem("referrer")){g=sessionStorage.getItem("referrer")
}}f.each(function(){f.each(function(){b.showBox.bind(this)(i,g)
})
})
};
b.showOnInit=function(d){var g=sessionStorage.getItem("rcpCode"),f=sessionStorage.getItem("referrer");
if(g){d.each(function(){b.showBox.bind(this)(g,f)
})
}};
b.showBox=function(i,f){var g=false,d=false,h=false;
if(c(this).data("rcpCodesList")){g=c(this).data("rcpCodesList").contains(i)
}else{g=true
}if(c(this).data("referrersList")){d=c(this).data("referrersList").contains(f)
}else{d=!c(this).data("referrersExclude")
}if(c(this).data("referrersExclude")){h=!c(this).data("referrersExclude").contains(f)
}else{h=!c(this).data("referrersList")
}if(g&&(d||h)){c(this).removeClass("hidden")
}};
b.init=function(d){Cog.addListener2("elements.stateProvider","stateChanged",b.showOnMatch.bind(b,d));
if(d&&d.length){b.showOnInit(d)
}};
return b
}(COGjQuery));
Cog.register({name:"rcpReferrerMatching",api:Cog.component.rcpReferrerMatching,selector:".rcpMatching,.referrerMatching"});
Cog.component.registrationPageMainDrivers=Cog.component.registrationPageMainDrivers||{};
(function(f,i,c){var g={},d={registry:{name:"elements.registry",events:{initialized:"initialized",register:"register"}}},h={formElement:null},b={RegistrationPageMainDrivers:null},l=false;
function j(){var m=Cog.Type.extend(h.formElement.Element,{view:null,$form:null,template1:null,template2:null,$target1:null,$target2:null,initialStateProcessed:false,initialize:function(){m.superclass.initialize.call(this);
this.template1=f.templates(this.$scope.find(".template1").html());
this.template2=f.templates(this.$scope.find(".template2").html());
this.$target1=this.$scope.find(".target1");
this.$target2=this.$scope.find(".target2");
Cog.addListener2("elements.stateProvider","allElementsUpdated",this.hideFormOnSuccess.bind(this));
this.$scope.find(".button.close").on("click",this.hideForm.bind(this))
},processState:function(n){if(n){this.$target1.html(this.template1.render(n));
this.$target2.html(this.template2.render(n))
}this.$scope.find(".registration__section-header").on("click",this.headerClick.bind(this));
this.$form=this.$scope.find(".component-content")
},hideForm:function(){this.$form.addClass("hidden")
},hideFormOnSuccess:function(){if(!this.initialStateProcessed){this.$scope.find(".unregistered .registration__section-header").first().click();
this.initialStateProcessed=true
}else{if(!this.$form.find(".error").length){this.$form.addClass("hidden");
if(window.s&&c){window.s.clearVars();
c.PageDataMgr.data.additionalEvent="event27";
c.PageDataMgr.data.link1=null;
c.PageDataMgr.data.loadEvent=null;
window.s.events=null;
window.s.products=null;
window.s.list1=null;
window.s.tl()
}}}window.scrollTo(0,0)
},headerClick:function(q){var n=f(q.currentTarget),o=n.data("index"),p;
q.preventDefault();
if(n.parent().hasClass("registered")){return
}for(p=1;
p<=o;
p++){this.$scope.find(".top-"+p).removeClass("hidden");
this.$scope.find(".bottom-"+p).addClass("hidden")
}for(p=o+1;
p<5;
p++){this.$scope.find(".top-"+p).addClass("hidden");
this.$scope.find(".bottom-"+p).removeClass("hidden")
}Cog.fireEvent("repeatableFormElems","clearAll",{$scope:this.$form});
Cog.fireEvent("forms.form","restoreElementsState",{$scope:this.$form});
this.$form.find('input[name="formField.details.uniqueId"]').val(n.data("id"));
this.$form.removeClass("hidden")
}});
b.RegistrationPageMainDrivers=m
}g.onRegister=function(m){m.element=new b.RegistrationPageMainDrivers(m.$scope)
};
g.onUnregister=function(m){m.element.unregister()
};
g.init=function(m){Cog.fireEvent(d.registry.name,d.registry.events.initialized)
};
g.beforeInit=function(){Cog.fireEvent(d.registry.name,d.registry.events.register);
if(!l){l=true;
j()
}};
Cog.registerComponent({name:"registrationPageMainDrivers",api:g,externalApi:h,selector:"div.registrationPageMainDrivers",requires:[{name:"forms.elements.element",apiId:"formElement"}]})
}(COGjQuery,document,window.CQ_Analytics));