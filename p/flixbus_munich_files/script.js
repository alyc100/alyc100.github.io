"use strict";function iframeOnload(){return{restrict:"A",scope:{callback:"&iframeOnload"},link:function(scope,elem,attrs){elem.on("load",function(){scope.callback()})}}}angular.module("angularWidgetInternal",[]),angular.module("angularWidget",["angularWidgetInternal"]).config(["$provide","$injector",function($provide,$injector){$injector.has("$routeProvider")&&$provide.decorator("$rootScope",["$delegate","$injector",function($delegate,$injector){var next,last,originalBroadcast=$delegate.$broadcast;$delegate.$broadcast=function(name){var shouldMute=!1;return"$routeChangeSuccess"===name&&$injector.invoke(["$route","widgets","$location",function($route,widgets,$location){last=next,(next=$route.current)&&last&&next.$$route===last.$$route&&next.locals&&next.locals.$template&&-1!==next.locals.$template.indexOf("<ng-widget")&&(widgets.notifyWidgets("$locationChangeSuccess",$location.absUrl(),""),shouldMute=!0)}]),shouldMute&&(arguments[0]="$routeChangeMuted"),originalBroadcast.apply(this,arguments)};var suspendListener=!1;return $delegate.$on("$routeUpdate",function(){suspendListener||$injector.invoke(["widgets","$location",function(widgets,$location){suspendListener=!0,widgets.notifyWidgets("$locationChangeSuccess",$location.absUrl(),""),suspendListener=!1}])}),$delegate}])}]).config(["widgetsProvider",function(widgetsProvider){widgetsProvider.addServiceToShare("$location",{url:1,path:1,search:1,hash:1,$$parse:1}),widgetsProvider.addEventToForward("$locationChangeStart")}]),angular.module("angularWidgetOnly",[]).run(["$rootScope","$location",function($rootScope,$location){$rootScope.$evalAsync(function(){$rootScope.$broadcast("$locationChangeStart",$location.absUrl(),"").defaultPrevented||$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),"")})}]),angular.module("angularWidgetInternal").directive("ngWidget",["$http","$templateCache","$q","$timeout","tagAppender","widgets","$rootScope","$log",function($http,$templateCache,$q,$timeout,tagAppender,widgets,$rootScope,$log){return{restrict:"E",priority:999,terminal:!0,scope:{src:"=",options:"=",delay:"@"},link:function(scope,element){function widgetConfigSection($provide,widgetConfigProvider){angular.forEach(widgets.getServicesToShare(),function(value,key){$provide.constant(key,value)}),widgetConfigProvider.setParentInjectorScope(scope),widgetConfigProvider.setOptions(scope.options)}function delayedPromise(promise,delay){return $q.when(promise).then(function(result){return $timeout(function(){return result},void 0===delay?1e3:delay)},function(result){return $timeout(function(){return $q.reject(result)},void 0===delay?1e3:delay)})}function downloadWidget(module,html,filetags){try{if(angular.module(module).requires.length)return $http.get(html,{cache:$templateCache}).then(function(response){return response.data})}catch(e){}var promises=filetags.map(function(filename){return tagAppender(filename,filename.split(".").reverse()[0])});return promises.unshift($http.get(html,{cache:$templateCache})),$q.all(promises).then(function(result){return result[0].data})}function forwardEvent(name,src,dst,emit){var fn=emit?dst.$emit:dst.$broadcast;return src.$on(name,function(event){if(!emit||event.stopPropagation){var args=Array.prototype.slice.call(arguments);args[0]=name,fn.apply(dst,args).defaultPrevented&&event.preventDefault()}})}function handleNewInjector(){var widgetConfig=injector.get("widgetConfig"),widgetScope=injector.get("$rootScope");if(unsubscribe=[],widgets.getEventsToForward().forEach(function(name){unsubscribe.push(forwardEvent(name,$rootScope,widgetScope,!1)),unsubscribe.push(forwardEvent(name,widgetScope,scope,!0))}),unsubscribe.push(scope.$watch("options",function(options){widgetScope.$apply(function(){widgetConfig.setOptions(options)})},!0)),widgetConfig.exportProperties().loading){var deregister=scope.$on("exportPropertiesUpdated",function(event,properties){properties.loading||(deregister(),scope.$emit("widgetLoaded"))});unsubscribe.push(deregister)}else scope.$emit("widgetLoaded");widgets.registerWidget(injector)}function bootstrapWidget(src,delay){var thisChangeId=++changeCounter,manifest=widgets.getWidgetManifest(src);delayedPromise(downloadWidget(manifest.module,manifest.html,manifest.files),delay).then(function(response){if(thisChangeId===changeCounter)try{var widgetElement=angular.element(response),modules=["angularWidgetOnly","angularWidget",widgetConfigSection,manifest.module].concat(manifest.config||[]);scope.$emit("widgetLoading"),injector=angular.bootstrap(widgetElement,modules),handleNewInjector(),element.append(widgetElement)}catch(e){$log.error(e),scope.$emit("widgetError")}},function(){thisChangeId===changeCounter&&scope.$emit("widgetError")})}function unregisterInjector(){injector&&(unsubscribe.forEach(function(fn){fn()}),widgets.unregisterWidget(injector),injector=null,unsubscribe=[])}function updateWidgetSrc(){unregisterInjector(),element.html(""),scope.src&&bootstrapWidget(scope.src,scope.delay)}var injector,unsubscribe,changeCounter=0;widgetConfigSection.$inject=["$provide","widgetConfigProvider"],scope.$watch("src",updateWidgetSrc),scope.$on("reloadWidget",updateWidgetSrc),scope.$on("$destroy",function(){changeCounter++,unregisterInjector(),element.html("")})}}}]),angular.module("angularWidgetInternal").value("headElement",document.getElementsByTagName("head")[0]).value("navigator",navigator).factory("tagAppender",["$q","$rootScope","headElement","$interval","navigator","$document",function($q,$rootScope,headElement,$interval,navigator,$document){var requireCache=[],styleSheets=$document[0].styleSheets;return function(url,filetype){var deferred=$q.defer();if(-1!==requireCache.indexOf(url))return deferred.resolve(),deferred.promise;var fileref;"css"===filetype?(fileref=angular.element("<link></link>")[0],fileref.setAttribute("rel","stylesheet"),fileref.setAttribute("type","text/css"),fileref.setAttribute("href",url)):(fileref=angular.element("<script><\/script>")[0],fileref.setAttribute("type","text/javascript"),fileref.setAttribute("src",url));var done=!1;if(headElement.appendChild(fileref),fileref.onerror=function(){fileref.onerror=fileref.onload=fileref.onreadystatechange=null,$rootScope.$$phase?deferred.reject():$rootScope.$apply(function(){deferred.reject()})},fileref.onload=fileref.onreadystatechange=function(){done||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(done=!0,fileref.onerror=fileref.onload=fileref.onreadystatechange=null,requireCache.push(url),$rootScope.$$phase?deferred.resolve():$rootScope.$apply(function(){deferred.resolve()}))},"css"===filetype&&navigator.userAgent.match(" Safari/")&&!navigator.userAgent.match(" Chrom")&&navigator.userAgent.match(" Version/5."))var attempts=20,promise=$interval(function(){for(var i=0;i<styleSheets.length;i++)if(styleSheets[i].href===url)return $interval.cancel(promise),void fileref.onload();0==--attempts&&($interval.cancel(promise),fileref.onerror())},50,0);return deferred.promise}}]),angular.module("angularWidgetInternal").provider("widgetConfig",function(){function safeApply(fn){parentInjectorScope.$root.$$phase?fn():parentInjectorScope.$apply(fn)}var parentInjectorScope={$root:{},$apply:function(fn){fn()},$emit:angular.noop},options={};this.setParentInjectorScope=function(scope){parentInjectorScope=scope;var unsubscribe=parentInjectorScope.$on("$destroy",function(){parentInjectorScope=null,unsubscribe()})},this.setOptions=function(newOptions){angular.copy(newOptions,options)},this.getOptions=function(){return options},this.$get=["$log",function($log){var properties={};return{exportProperties:function(props){return props&&safeApply(function(){angular.extend(properties,props),parentInjectorScope.$emit("exportPropertiesUpdated",properties)}),properties},reportError:function(){safeApply(function(){parentInjectorScope.$emit("widgetError")||$log.warn("widget reported an error")})},getOptions:function(){return options},setOptions:function(newOptions){angular.copy(newOptions,options)}}}]}),angular.module("angularWidgetInternal").provider("widgets",function(){var manifestGenerators=[],eventsToForward=[],servicesToShare={};this.setManifestGenerator=function(fn){manifestGenerators.push(fn)},this.addEventToForward=function(name){eventsToForward=eventsToForward.concat(name)},this.addServiceToShare=function(name,description){servicesToShare[name]=description},this.$get=["$injector","$rootScope",function($injector,$rootScope){function decorate(service,method,count){var original=service[method];service[method]=function(){return arguments.length>=count&&!$rootScope.$$phase&&$rootScope.$evalAsync(),original.apply(service,arguments)}}function notifyInjector(injector,args){var event,scope=injector.get("$rootScope");return args.length&&(event=scope.$broadcast.apply(scope,args)),scope.$$phase||injector===$injector||scope.$digest(),event}var widgets=[],instancesToShare={};return angular.forEach(servicesToShare,function(description,name){var service=$injector.get(name);angular.isArray(description)?description.forEach(function(method){decorate(service,method,0)}):angular.forEach(description,function(count,method){decorate(service,method,count)}),instancesToShare[name]=service}),manifestGenerators=manifestGenerators.map(function(generator){return $injector.invoke(generator)}),{getWidgetManifest:function(){var args=arguments;return manifestGenerators.reduce(function(prev,generator){var result=generator.apply(this,args);return result&&prev?prev.priority>result.priority?prev:result:result||prev},void 0)},unregisterWidget:function(injector){var del=[];if(injector){var i=widgets.indexOf(injector);-1!==i&&(del=widgets.splice(i,1))}else del=widgets,widgets=[];del.forEach(function(injector){var $rootScope=injector.get("$rootScope");$rootScope.$destroy(),$rootScope.$$childHead=$rootScope.$$childTail=null,$rootScope.$$ChildScope=null})},registerWidget:function(injector){widgets.push(injector)},notifyWidgets:function(){var args=arguments;return widgets.map(function(injector){return notifyInjector(injector,args)})},getEventsToForward:function(){return eventsToForward},getServicesToShare:function(){return instancesToShare}}}]}),function(){function a(a,b,c){"addEventListener"in window?a.addEventListener(b,c,!1):"attachEvent"in window&&a.attachEvent("on"+b,c)}function b(){var a,b=["moz","webkit","o","ms"];for(a=0;a<b.length&&!z;a+=1)z=window[b[a]+"RequestAnimationFrame"];z||e(" RequestAnimationFrame not supported")}function c(){var a="Host page";return window.top!==window.self&&(a=window.parentIFrame?window.parentIFrame.getId():"Nested host page"),a}function d(a){return w+"["+c()+"]"+a}function e(a){t&&"object"==typeof window.console&&console.log(d(a))}function f(a){"object"==typeof window.console&&console.warn(d(a))}function g(a){function b(){function a(){k(F),i(),B[G].resizedCallback(F)}g("Height"),g("Width"),l(a,F,"resetPage")}function c(a){var b=a.id;e(" Removing iFrame: "+b),a.parentNode.removeChild(a),B[b].closedCallback(b),delete B[b],e(" --")}function g(a){var b=Number(B[G]["max"+a]),c=Number(B[G]["min"+a]),d=a.toLowerCase(),f=Number(F[d]);if(c>b)throw new Error("Value for min"+a+" can not be greater than max"+a);e(" Checking "+d+" is in range "+c+"-"+b),c>f&&(f=c,e(" Set "+d+" to min value")),f>b&&(f=b,e(" Set "+d+" to max value")),F[d]=""+f}function p(a){return E.substr(E.indexOf(":")+v+a)}function q(a){e(" MessageCallback passed: {iframe: "+F.iframe.id+", message: "+a+"}"),B[G].messageCallback({iframe:F.iframe,message:JSON.parse(a)}),e(" --")}function s(a){var b=a.getBoundingClientRect();return h(),{x:parseInt(b.left,10)+parseInt(y.x,10),y:parseInt(b.top,10)+parseInt(y.y,10)}}function u(a){var d=a?s(F.iframe):{x:0,y:0},g=function(){return{x:Number(F.width)+d.x,y:Number(F.height)+d.y}}();e(" Reposition requested from iFrame (offset x:"+d.x+" y:"+d.y+")"),window.top!==window.self?window.parentIFrame?a?window.parentIFrame.scrollToOffset(g.x,g.y):window.parentIFrame.scrollTo(F.width,F.height):f(" Unable to scroll to requested position, window.parentIFrame not found"):function(){y=g,z(),e(" --")}()}function z(){!1!==B[G].scrollCallback(y)&&i()}function A(a){var c=a.split("#")[1]||"",d=decodeURIComponent(c),f=document.getElementById(d)||document.getElementsByName(d)[0];window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(c):e(" In page link #"+c+" not found and window.parentIFrame not found"):f?function(a){var b=s(a);e(" Moving to in page link (#"+c+") at x: "+b.x+" y: "+b.y),y={x:b.x,y:b.y},z(),e(" --")}(f):e(" In page link #"+c+" not found")}var E=a.data,F={},G=null;(function(){return w===(""+E).substr(0,x)})()&&(F=function(){var a=E.substr(x).split(":");return{iframe:document.getElementById(a[0]),id:a[0],height:a[1],width:a[2],type:a[3]}}(),G=F.id,!function(){var a=F.type in{true:1,false:1,undefined:1};return a&&e(" Ignoring init message from meta parent page"),a}()&&function(a){var b=!0;return B[a]||(b=!1,f(F.type+" No settings for "+a+". Message was: "+E)),b}(G)&&(t=B[G].log,e(" Received: "+E),function(){return null!==F.iframe||(f(" IFrame ("+F.id+") not found"),!1)}()&&function(){var c=a.origin,d=B[G].checkOrigin,f=F.iframe.src.split("/").slice(0,3).join("/");if(d&&""+c!="null"&&!function(){return d.constructor===Array?function(){e(" Checking connection is from allowed list of origins: "+d);var a;for(a=0;a<d.length;a++)if(d[a]===c)return!0;return!1}():function(){return e(" Checking connection is from: "+f),c===f}()}())throw new Error("Unexpected message received from: "+c+" for "+F.iframe.id+". Message was: "+a.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&(B[G].firstRun=!1,function(){switch(F.type){case"close":c(F.iframe);break;case"message":q(p(6));break;case"scrollTo":u(!1);break;case"scrollToOffset":u(!0);break;case"inPageLink":A(p(9));break;case"reset":j(F);break;case"init":b(),B[G].initCallback(F.iframe);break;default:b()}}())))}function h(){null===y&&(y={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},e(" Get page position: "+y.x+","+y.y))}function i(){null!==y&&(window.scrollTo(y.x,y.y),e(" Set page position: "+y.x+","+y.y),y=null)}function j(a){function b(){k(a),m("reset","reset",a.iframe,a.id)}e(" Size reset requested by "+("init"===a.type?"host page":"iFrame")),h(),l(b,a,"init")}function k(a){function b(b){a.iframe.style[b]=a[b]+"px",e(" IFrame ("+c+") "+b+" set to "+a[b]+"px")}var c=a.iframe.id;B[c].sizeHeight&&b("height"),B[c].sizeWidth&&b("width")}function l(a,b,c){c!==b.type&&z?(e(" Requesting animation frame"),z(a)):a()}function m(a,b,c,d){c&&c.contentWindow?(e("["+a+"] Sending msg to iframe ("+b+")"),c.contentWindow.postMessage(w+b,"*")):(f("["+a+"] IFrame not found"),B[d]&&delete B[d])}function n(b){function k(a){if("object"!=typeof a)throw new TypeError("Options is not an object.")}var n=this,o=function(a){return""===a&&(n.id=a="iFrameResizer"+s++,t=(b||{}).log,e(" Added missing iframe ID: "+a+" ("+n.src+")")),a}(n.id);(function(a){a=a||{},B[o]={firstRun:!0},k(a);for(var b in D)D.hasOwnProperty(b)&&(B[o][b]=a.hasOwnProperty(b)?a[b]:D[b]);t=B[o].log})(b),function(){e(" IFrame scrolling "+(B[o].scrolling?"enabled":"disabled")+" for "+o),n.style.overflow=!1===B[o].scrolling?"hidden":"auto",n.scrolling=!1===B[o].scrolling?"no":"yes"}(),function(){function a(a){1/0!==B[o][a]&&0!==B[o][a]&&(n.style[a]=B[o][a]+"px",e(" Set "+a+" = "+B[o][a]+"px"))}a("maxHeight"),a("minHeight"),a("maxWidth"),a("minWidth")}(),function(){("number"==typeof B[o].bodyMargin||"0"===B[o].bodyMargin)&&(B[o].bodyMarginV1=B[o].bodyMargin,B[o].bodyMargin=B[o].bodyMargin+"px")}(),function(b){a(n,"load",function(){var a=B[o].firstRun;m("iFrame.onload",b,n),!a&&B[o].heightCalculationMethod in A&&j({iframe:n,height:0,width:0,type:"init"})}),m("init",b,n)}(function(){return o+":"+B[o].bodyMarginV1+":"+B[o].sizeWidth+":"+B[o].log+":"+B[o].interval+":"+B[o].enablePublicMethods+":"+B[o].autoResize+":"+B[o].bodyMargin+":"+B[o].heightCalculationMethod+":"+B[o].bodyBackground+":"+B[o].bodyPadding+":"+B[o].tolerance+":"+B[o].enableInPageLinks+":"+B[o].resizeFrom}())}function o(a,b){null===C&&(C=setTimeout(function(){C=null,a()},b))}function p(){function a(a){return"parent"===B[a].resizeFrom&&B[a].autoResize&&!B[a].firstRun}o(function(){for(var b in B)a(b)&&m("Window resize","resize",document.getElementById(b),b)},66)}function q(){function c(a,b){if(!a.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==a.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+a.tagName+">.");n.call(a,b)}return b(),a(window,"message",g),a(window,"resize",p),function(a,b){switch(typeof b){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(b||"iframe"),function(b){c(b,a)});break;case"object":c(b,a);break;default:throw new TypeError("Unexpected data type ("+typeof b+").")}}}var s=0,t=!1,v="message".length,w="[iFrameSizer]",x=w.length,y=null,z=window.requestAnimationFrame,A={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},B={},C=null,D={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enableInPageLinks:!1,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){},scrollCallback:function(){return!0}};window.jQuery&&function(a){a.fn.iFrameResize=function(a){return this.filter("iframe").each(function(b,c){n.call(c,a)}).end()}}(jQuery),"function"==typeof define&&define.amd?define([],q):"object"==typeof module&&"object"==typeof module.exports?module.exports=q():window.iFrameResize=window.iFrameResize||q()}(),function(window,factory){var lazySizes=function(window,document){if(document.getElementsByClassName){var lazySizesConfig,docElem=document.documentElement,Date=window.Date,supportPicture=window.HTMLPictureElement,addEventListener=window.addEventListener,setTimeout=window.setTimeout,requestAnimationFrame=window.requestAnimationFrame||setTimeout,requestIdleCallback=window.requestIdleCallback,regPicture=/^picture$/i,loadEvents=["load","error","lazyincluded","_lazyloaded"],regClassCache={},forEach=Array.prototype.forEach,hasClass=function(ele,cls){return regClassCache[cls]||(regClassCache[cls]=new RegExp("(\\s|^)"+cls+"(\\s|$)")),regClassCache[cls].test(ele.getAttribute("class")||"")&&regClassCache[cls]},addClass=function(ele,cls){hasClass(ele,cls)||ele.setAttribute("class",(ele.getAttribute("class")||"").trim()+" "+cls)},removeClass=function(ele,cls){var reg;(reg=hasClass(ele,cls))&&ele.setAttribute("class",(ele.getAttribute("class")||"").replace(reg," "))},addRemoveLoadEvents=function(dom,fn,add){var action=add?"addEventListener":"removeEventListener";add&&addRemoveLoadEvents(dom,fn),loadEvents.forEach(function(evt){dom[action](evt,fn)})},triggerEvent=function(elem,name,detail,noBubbles,noCancelable){var event=document.createEvent("CustomEvent");return event.initCustomEvent(name,!noBubbles,!noCancelable,detail||{}),elem.dispatchEvent(event),event},updatePolyfill=function(el,full){var polyfill;!supportPicture&&(polyfill=window.picturefill||lazySizesConfig.pf)?polyfill({reevaluate:!0,elements:[el]}):full&&full.src&&(el.src=full.src)},getCSS=function(elem,style){return(getComputedStyle(elem,null)||{})[style]},getWidth=function(elem,parent,width){for(width=width||elem.offsetWidth;width<lazySizesConfig.minSize&&parent&&!elem._lazysizesWidth;)width=parent.offsetWidth,parent=parent.parentNode;return width},rAF=function(){var running,waiting,firstFns=[],secondFns=[],fns=firstFns,run=function(){var runFns=fns;for(fns=firstFns.length?secondFns:firstFns,running=!0,waiting=!1;runFns.length;)runFns.shift()();running=!1},rafBatch=function(fn,queue){running&&!queue?fn.apply(this,arguments):(fns.push(fn),waiting||(waiting=!0,(document.hidden?setTimeout:requestAnimationFrame)(run)))};return rafBatch._lsFlush=run,rafBatch}(),rAFIt=function(fn,simple){return simple?function(){rAF(fn)}:function(){var that=this,args=arguments;rAF(function(){fn.apply(that,args)})}},throttle=function(fn){var running,lastTime=0,rICTimeout=666,run=function(){running=!1,lastTime=Date.now(),fn()},idleCallback=requestIdleCallback?function(){requestIdleCallback(run,{timeout:rICTimeout}),666!==rICTimeout&&(rICTimeout=666)}:rAFIt(function(){setTimeout(run)},!0);return function(isPriority){var delay;(isPriority=!0===isPriority)&&(rICTimeout=44),running||(running=!0,delay=125-(Date.now()-lastTime),delay<0&&(delay=0),isPriority||delay<9&&requestIdleCallback?idleCallback():setTimeout(idleCallback,delay))}},debounce=function(func){var timeout,timestamp,run=function(){timeout=null,func()},later=function(){var last=Date.now()-timestamp;last<99?setTimeout(later,99-last):(requestIdleCallback||run)(run)};return function(){timestamp=Date.now(),timeout||(timeout=setTimeout(later,99))}},loader=function(){var lazyloadElems,preloadElems,isCompleted,resetPreloadingTimer,loadMode,started,eLvW,elvH,eLtop,eLleft,eLright,eLbottom,defaultExpand,preloadExpand,hFac,regImg=/^img$/i,regIframe=/^iframe$/i,supportScroll="onscroll"in window&&!/glebot/.test(navigator.userAgent),currentExpand=0,isLoading=0,lowRuns=-1,resetPreloading=function(e){isLoading--,e&&e.target&&addRemoveLoadEvents(e.target,resetPreloading),(!e||isLoading<0||!e.target)&&(isLoading=0)},isNestedVisible=function(elem,elemExpand){var outerRect,parent=elem,visible="hidden"==getCSS(document.body,"visibility")||"hidden"!=getCSS(elem,"visibility");for(eLtop-=elemExpand,eLbottom+=elemExpand,eLleft-=elemExpand,eLright+=elemExpand;visible&&(parent=parent.offsetParent)&&parent!=document.body&&parent!=docElem;)(visible=(getCSS(parent,"opacity")||1)>0)&&"visible"!=getCSS(parent,"overflow")&&(outerRect=parent.getBoundingClientRect(),visible=eLright>outerRect.left&&eLleft<outerRect.right&&eLbottom>outerRect.top-1&&eLtop<outerRect.bottom+1);return visible},checkElements=function(){var eLlen,i,rect,autoLoadElem,loadedSomething,elemExpand,elemNegativeExpand,elemExpandVal,beforeExpandVal;if((loadMode=lazySizesConfig.loadMode)&&isLoading<8&&(eLlen=lazyloadElems.length)){i=0,lowRuns++,null==preloadExpand&&("expand"in lazySizesConfig||(lazySizesConfig.expand=docElem.clientHeight>500&&docElem.clientWidth>500?500:370),defaultExpand=lazySizesConfig.expand,preloadExpand=defaultExpand*lazySizesConfig.expFactor),currentExpand<preloadExpand&&isLoading<1&&lowRuns>2&&loadMode>2&&!document.hidden?(currentExpand=preloadExpand,lowRuns=0):currentExpand=loadMode>1&&lowRuns>1&&isLoading<6?defaultExpand:0;for(;i<eLlen;i++)if(lazyloadElems[i]&&!lazyloadElems[i]._lazyRace)if(supportScroll)if((elemExpandVal=lazyloadElems[i].getAttribute("data-expand"))&&(elemExpand=1*elemExpandVal)||(elemExpand=currentExpand),beforeExpandVal!==elemExpand&&(eLvW=innerWidth+elemExpand*hFac,elvH=innerHeight+elemExpand,elemNegativeExpand=-1*elemExpand,beforeExpandVal=elemExpand),rect=lazyloadElems[i].getBoundingClientRect(),(eLbottom=rect.bottom)>=elemNegativeExpand&&(eLtop=rect.top)<=elvH&&(eLright=rect.right)>=elemNegativeExpand*hFac&&(eLleft=rect.left)<=eLvW&&(eLbottom||eLright||eLleft||eLtop)&&(isCompleted&&isLoading<3&&!elemExpandVal&&(loadMode<3||lowRuns<4)||isNestedVisible(lazyloadElems[i],elemExpand))){if(unveilElement(lazyloadElems[i]),loadedSomething=!0,isLoading>9)break}else!loadedSomething&&isCompleted&&!autoLoadElem&&isLoading<4&&lowRuns<4&&loadMode>2&&(preloadElems[0]||lazySizesConfig.preloadAfterLoad)&&(preloadElems[0]||!elemExpandVal&&(eLbottom||eLright||eLleft||eLtop||"auto"!=lazyloadElems[i].getAttribute(lazySizesConfig.sizesAttr)))&&(autoLoadElem=preloadElems[0]||lazyloadElems[i]);else unveilElement(lazyloadElems[i]);autoLoadElem&&!loadedSomething&&unveilElement(autoLoadElem)}},throttledCheckElements=throttle(checkElements),switchLoadingClass=function(e){addClass(e.target,lazySizesConfig.loadedClass),removeClass(e.target,lazySizesConfig.loadingClass),addRemoveLoadEvents(e.target,rafSwitchLoadingClass)},rafedSwitchLoadingClass=rAFIt(switchLoadingClass),rafSwitchLoadingClass=function(e){rafedSwitchLoadingClass({target:e.target})},changeIframeSrc=function(elem,src){try{elem.contentWindow.location.replace(src)}catch(e){elem.src=src}},handleSources=function(source){var customMedia,parent,sourceSrcset=source.getAttribute(lazySizesConfig.srcsetAttr);(customMedia=lazySizesConfig.customMedia[source.getAttribute("data-media")||source.getAttribute("media")])&&source.setAttribute("media",customMedia),sourceSrcset&&source.setAttribute("srcset",sourceSrcset),customMedia&&(parent=source.parentNode,parent.insertBefore(source.cloneNode(),source),parent.removeChild(source))},lazyUnveil=rAFIt(function(elem,detail,isAuto,sizes,isImg){var src,srcset,parent,isPicture,event,firesLoad;(event=triggerEvent(elem,"lazybeforeunveil",detail)).defaultPrevented||(sizes&&(isAuto?addClass(elem,lazySizesConfig.autosizesClass):elem.setAttribute("sizes",sizes)),srcset=elem.getAttribute(lazySizesConfig.srcsetAttr),src=elem.getAttribute(lazySizesConfig.srcAttr),isImg&&(parent=elem.parentNode,isPicture=parent&&regPicture.test(parent.nodeName||"")),firesLoad=detail.firesLoad||"src"in elem&&(srcset||src||isPicture),event={target:elem},firesLoad&&(addRemoveLoadEvents(elem,resetPreloading,!0),clearTimeout(resetPreloadingTimer),resetPreloadingTimer=setTimeout(resetPreloading,2500),addClass(elem,lazySizesConfig.loadingClass),addRemoveLoadEvents(elem,rafSwitchLoadingClass,!0)),isPicture&&forEach.call(parent.getElementsByTagName("source"),handleSources),srcset?elem.setAttribute("srcset",srcset):src&&!isPicture&&(regIframe.test(elem.nodeName)?changeIframeSrc(elem,src):elem.src=src),(srcset||isPicture)&&updatePolyfill(elem,{src:src})),elem._lazyRace&&delete elem._lazyRace,removeClass(elem,lazySizesConfig.lazyClass),rAF(function(){(!firesLoad||elem.complete&&elem.naturalWidth>1)&&(firesLoad?resetPreloading(event):isLoading--,switchLoadingClass(event))},!0)}),unveilElement=function(elem){var detail,isImg=regImg.test(elem.nodeName),sizes=isImg&&(elem.getAttribute(lazySizesConfig.sizesAttr)||elem.getAttribute("sizes")),isAuto="auto"==sizes;(!isAuto&&isCompleted||!isImg||!elem.src&&!elem.srcset||elem.complete||hasClass(elem,lazySizesConfig.errorClass))&&(detail=triggerEvent(elem,"lazyunveilread").detail,isAuto&&autoSizer.updateElem(elem,!0,elem.offsetWidth),elem._lazyRace=!0,isLoading++,lazyUnveil(elem,detail,isAuto,sizes,isImg))},onload=function(){if(!isCompleted){if(Date.now()-started<999)return void setTimeout(onload,999);var afterScroll=debounce(function(){lazySizesConfig.loadMode=3,throttledCheckElements()});isCompleted=!0,lazySizesConfig.loadMode=3,throttledCheckElements(),addEventListener("scroll",function(){3==lazySizesConfig.loadMode&&(lazySizesConfig.loadMode=2),afterScroll()},!0)}};return{_:function(){started=Date.now(),lazyloadElems=document.getElementsByClassName(lazySizesConfig.lazyClass),preloadElems=document.getElementsByClassName(lazySizesConfig.lazyClass+" "+lazySizesConfig.preloadClass),hFac=lazySizesConfig.hFac,addEventListener("scroll",throttledCheckElements,!0),addEventListener("resize",throttledCheckElements,!0),window.MutationObserver?new MutationObserver(throttledCheckElements).observe(docElem,{childList:!0,subtree:!0,attributes:!0}):(docElem.addEventListener("DOMNodeInserted",throttledCheckElements,!0),docElem.addEventListener("DOMAttrModified",throttledCheckElements,!0),setInterval(throttledCheckElements,999)),addEventListener("hashchange",throttledCheckElements,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(name){document.addEventListener(name,throttledCheckElements,!0)}),/d$|^c/.test(document.readyState)?onload():(addEventListener("load",onload),document.addEventListener("DOMContentLoaded",throttledCheckElements),setTimeout(onload,2e4)),lazyloadElems.length?(checkElements(),rAF._lsFlush()):throttledCheckElements()},checkElems:throttledCheckElements,unveil:unveilElement}}(),autoSizer=function(){var autosizesElems,sizeElement=rAFIt(function(elem,parent,event,width){var sources,i,len;if(elem._lazysizesWidth=width,width+="px",elem.setAttribute("sizes",width),regPicture.test(parent.nodeName||""))for(sources=parent.getElementsByTagName("source"),i=0,len=sources.length;i<len;i++)sources[i].setAttribute("sizes",width);event.detail.dataAttr||updatePolyfill(elem,event.detail)}),getSizeElement=function(elem,dataAttr,width){var event,parent=elem.parentNode;parent&&(width=getWidth(elem,parent,width),event=triggerEvent(elem,"lazybeforesizes",{width:width,dataAttr:!!dataAttr}),event.defaultPrevented||(width=event.detail.width)&&width!==elem._lazysizesWidth&&sizeElement(elem,parent,event,width))},updateElementsSizes=function(){var i,len=autosizesElems.length;if(len)for(i=0;i<len;i++)getSizeElement(autosizesElems[i])},debouncedUpdateElementsSizes=debounce(updateElementsSizes);return{_:function(){autosizesElems=document.getElementsByClassName(lazySizesConfig.autosizesClass),addEventListener("resize",debouncedUpdateElementsSizes)},checkElems:debouncedUpdateElementsSizes,updateElem:getSizeElement}}(),init=function(){init.i||(init.i=!0,autoSizer._(),loader._())};return function(){var prop,lazySizesDefaults={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2};lazySizesConfig=window.lazySizesConfig||window.lazysizesConfig||{};for(prop in lazySizesDefaults)prop in lazySizesConfig||(lazySizesConfig[prop]=lazySizesDefaults[prop]);window.lazySizesConfig=lazySizesConfig,setTimeout(function(){lazySizesConfig.init&&init()})}(),{cfg:lazySizesConfig,autoSizer:autoSizer,loader:loader,init:init,uP:updatePolyfill,aC:addClass,rC:removeClass,hC:hasClass,fire:triggerEvent,gW:getWidth,rAF:rAF}}}(window,window.document);window.lazySizes=lazySizes,"object"==typeof module&&module.exports&&(module.exports=lazySizes)}(window),function(ngIframeResizer){angular.module("ngIframeResizer",[]).directive("ngIframeResizer",function(){return{restrict:"A",link:function(scope,element){iFrameResize({checkOrigin:!1},element[0])}}})}(),function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,c){function d(a){return" "===a||"\t"===a||"\n"===a||"\f"===a||"\r"===a}function f(){M=!1,P=a.devicePixelRatio,N={},O={},s.DPR=P||1,Q.width=Math.max(a.innerWidth||0,z.clientWidth),Q.height=Math.max(a.innerHeight||0,z.clientHeight),Q.vw=Q.width/100,Q.vh=Q.height/100,r=[Q.height,Q.width,P].join("-"),Q.em=s.getEmValue(),Q.rem=Q.em}function g(a,b,c,d){var e,f,g,h;return"saveData"===B.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function h(a){var b,c=s.getSet(a),d=!1
;"pending"!==c&&(d=r,c&&(b=s.setRes(c),s.applySetCandidate(b,a))),a[s.ns].evaled=d}function i(a,b){return a.res-b.res}function j(a,b,c){var d;return!c&&b&&(c=a[s.ns].sets,c=c&&c[c.length-1]),d=k(b,c),d&&(b=s.makeUrl(b),a[s.ns].curSrc=b,a[s.ns].curCan=d,d.res||aa(d,d.set.sizes)),d}function k(a,b){var c,d,e;if(a&&b)for(e=s.parseSet(b),a=s.makeUrl(a),c=0;c<e.length;c++)if(a===s.makeUrl(e[c].url)){d=e[c];break}return d}function l(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;d>c;c++)e=g[c],e[s.ns]=!0,(f=e.getAttribute("srcset"))&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function m(a,b){function c(b){var c,d=b.exec(a.substring(m));return d?(c=d[0],m+=c.length,c):void 0}function e(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),X.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):Y.test(j)&&"x"===i?((a||c||d)&&(m=!0),0>l?m=!0:c=l):X.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(U),m>=l)return n;g=c(V),h=[],","===g.slice(-1)?(g=g.replace(W,""),e()):function(){for(c(T),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j)if(d(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void e();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void e();i+=k}}else if("in parens"===j)if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void e();i+=k}else if("after descriptor"===j)if(d(k));else{if(""===k)return void e();j="in descriptor",m-=1}m+=1}}()}}function n(a){var e,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=function(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var e,f="",g=[],h=[],i=0,j=0,k=!1;;){if(""===(e=a.charAt(j)))return b(),c(),h;if(k){if("*"===e&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(d(e)){if(a.charAt(j-1)&&d(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}e=" "}else if("("===e)i+=1;else if(")"===e)i-=1;else{if(","===e){b(),c(),j+=1;continue}if("/"===e&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=e,j+=1}}}(a),g=f.length,e=0;g>e;e++)if(h=f[e],i=h[h.length-1],function(a){return!!(k.test(a)&&parseFloat(a)>=0)||(!!l.test(a)||("0"===a||"-0"===a||"+0"===a))}(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),s.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var p,q,r,s={},t=!1,u=function(){},v=b.createElement("img"),w=v.getAttribute,x=v.setAttribute,y=v.removeAttribute,z=b.documentElement,A={},B={algorithm:""},C="data-pfsrc",D=C+"set",E=navigator.userAgent,F=/rident/.test(E)||/ecko/.test(E)&&E.match(/rv\:(\d+)/)&&RegExp.$1>35,G="currentSrc",H=/\s+\+?\d+(e\d+)?w/,I=/(\([^)]+\))?\s*(.+)/,J=a.picturefillCFG,L="font-size:100%!important;",M=!0,N={},O={},P=a.devicePixelRatio,Q={px:1,in:96},R=b.createElement("a"),S=!1,T=/^[ \t\n\r\u000c]+/,U=/^[, \t\n\r\u000c]+/,V=/^[^ \t\n\r\u000c]+/,W=/[,]+$/,X=/^\d+$/,Y=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Z=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},$=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},_=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=$(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in N))if(N[b]=!1,d&&(e=b.match(a)))N[b]=e[1]*Q[e[2]];else try{N[b]=new Function("e",c(b))(Q)}catch(f){}return N[b]}}(),aa=function(a,b){return a.w?(a.cWidth=s.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},ba=function(a){if(t){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||s.qsa(f.context||b,f.reevaluate||f.reselect?s.sel:s.selShort),e=c.length){for(s.setupRun(f),S=!0,d=0;e>d;d++)s.fillImg(c[d],f);s.teardownRun(f)}}};a.console&&console.warn,G in v||(G="src"),A["image/jpeg"]=!0,A["image/gif"]=!0,A["image/png"]=!0,A["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),s.ns=("pf"+(new Date).getTime()).substr(0,9),s.supSrcset="srcset"in v,s.supSizes="sizes"in v,s.supPicture=!!a.HTMLPictureElement,s.supSrcset&&s.supPicture&&!s.supSizes&&function(a){v.srcset="data:,a",a.src="data:,a",s.supSrcset=v.complete===a.complete,s.supPicture=s.supSrcset&&s.supPicture}(b.createElement("img")),s.supSrcset&&!s.supSizes?function(){var c="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d=b.createElement("img"),e=function(){2===d.width&&(s.supSizes=!0),q=s.supSrcset&&!s.supSizes,t=!0,setTimeout(ba)};d.onload=e,d.onerror=e,d.setAttribute("sizes","9px"),d.srcset=c+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",d.src=c}():t=!0,s.selShort="picture>img,img[srcset]",s.sel=s.selShort,s.cfg=B,s.DPR=P||1,s.u=Q,s.types=A,s.setSize=u,s.makeUrl=$(function(a){return R.href=a,R.href}),s.qsa=function(a,b){return"querySelector"in a?a.querySelectorAll(b):[]},s.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?s.matchesMedia=function(a){return!a||matchMedia(a).matches}:s.matchesMedia=s.mMQ,s.matchesMedia.apply(this,arguments)},s.mMQ=function(a){return!a||_(a)},s.calcLength=function(a){var b=_(a,!0)||!1;return 0>b&&(b=!1),b},s.supportsType=function(a){return!a||A[a]},s.parseSize=$(function(a){var b=(a||"").match(I);return{media:b&&b[1],length:b&&b[2]}}),s.parseSet=function(a){return a.cands||(a.cands=m(a.srcset,a)),a.cands},s.getEmValue=function(){var a;if(!p&&(a=b.body)){var c=b.createElement("div"),d=z.style.cssText,e=a.style.cssText;c.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",z.style.cssText=L,a.style.cssText=L,a.appendChild(c),p=c.offsetWidth,a.removeChild(c),p=parseFloat(p,10),z.style.cssText=d,a.style.cssText=e}return p||16},s.calcListLength=function(a){if(!(a in O)||B.uT){var b=s.calcLength(n(a));O[a]=b||Q.width}return O[a]},s.setRes=function(a){var b;if(a){b=s.parseSet(a);for(var c=0,d=b.length;d>c;c++)aa(b[c],a.sizes)}return b},s.setRes.res=aa,s.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,h,k,l,m,n,o=b[s.ns],p=s.DPR;if(k=o.curSrc||b[G],l=o.curCan||j(b,k,a[0].set),l&&l.set===a[0].set&&((n=F&&!b.complete&&l.res-.1>p)||(l.cached=!0,l.res>=p&&(h=l))),!h)for(a.sort(i),f=a.length,h=a[f-1],d=0;f>d;d++)if(c=a[d],c.res>=p){e=d-1,h=a[e]&&(n||k!==s.makeUrl(c.url))&&g(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}h&&(m=s.makeUrl(h.url),o.curSrc=m,o.curCan=h,m!==k&&s.setSrc(b,h),s.setSize(b))}},s.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},s.getSet=function(a){var b,c,d,e=!1,f=a[s.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&s.matchesMedia(c.media)&&(d=s.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},s.parseSets=function(a,b,d){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[s.ns];(j.src===c||d.src)&&(j.src=w.call(a,"src"),j.src?x.call(a,C,j.src):y.call(a,C)),(j.srcset===c||d.srcset||!s.supSrcset||a.srcset)&&(e=w.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,l(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:w.call(a,"sizes")},j.sets.push(f),(g=(q||j.src)&&H.test(j.srcset||""))||!j.src||k(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=c,j.supported=!(i||f&&!s.supSrcset||g&&!s.supSizes),h&&s.supSrcset&&!j.supported&&(e?(x.call(a,D,e),a.srcset=""):y.call(a,D)),j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==s.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},s.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[s.ns]||(a[s.ns]={}),c=a[s.ns],(d||c.evaled!==r)&&((!c.parsed||b.reevaluate)&&s.parseSets(a,a.parentNode,b),c.supported?c.evaled=r:h(a))},s.setupRun=function(){(!S||M||P!==a.devicePixelRatio)&&f()},s.supPicture?(ba=u,s.fillImg=u):function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(s.fillImgs(),(c=c||d.test(a))&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),h=z.clientHeight,i=function(){M=Math.max(a.innerWidth||0,z.clientWidth)!==Q.width||z.clientHeight!==h,h=z.clientHeight,M&&s.fillImgs()};Z(a,"resize",function(a,b){var c,d,e=function(){var f=new Date-d;b>f?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}}(i,99)),Z(b,"readystatechange",e)}(),s.picturefill=ba,s.fillImgs=ba,s.teardownRun=u,ba._=s,a.picturefillCFG={pf:s,push:function(a){var b=a.shift();"function"==typeof s[b]?s[b].apply(s,a):(B[b]=a[0],S&&s.fillImgs({reselect:!0}))}};for(;J&&J.length;)a.picturefillCFG.push(J.shift());a.picturefill=ba,"object"==typeof module&&"object"==typeof module.exports?module.exports=ba:"function"==typeof define&&define.amd&&define("picturefill",function(){return ba}),s.supPicture||(A["image/webp"]=function(b,c){var d=new a.Image;return d.onerror=function(){A[b]=!1,ba()},d.onload=function(){A[b]=1===d.width,ba()},d.src=c,"pending"}("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.dropdown","ui.bootstrap.multiMap","ui.bootstrap.position","ui.bootstrap.tabs","ui.bootstrap.carousel"]),angular.module("ui.bootstrap.tpls",["uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function($animate,$q,$parse,$injector){var $animateCss=$injector.has("$animateCss")?$injector.get("$animateCss"):null;return{link:function(scope,element,attrs){function getScrollFromElement(element){return horizontal?{width:element.scrollWidth+"px"}:{height:element.scrollHeight+"px"}}function expand(){element.hasClass("collapse")&&element.hasClass("in")||$q.resolve(expandingExpr(scope)).then(function(){element.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),$animateCss?$animateCss(element,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).start().finally(expandDone):$animate.addClass(element,"in",{css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).then(expandDone)},angular.noop)}function expandDone(){element.removeClass("collapsing").addClass("collapse").css(css),expandedExpr(scope)}function collapse(){if(!element.hasClass("collapse")&&!element.hasClass("in"))return collapseDone();$q.resolve(collapsingExpr(scope)).then(function(){element.css(getScrollFromElement(element[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),$animateCss?$animateCss(element,{removeClass:"in",to:cssTo}).start().finally(collapseDone):$animate.removeClass(element,"in",{to:cssTo}).then(collapseDone)},angular.noop)}function collapseDone(){element.css(cssTo),element.removeClass("collapsing").addClass("collapse"),collapsedExpr(scope)}var expandingExpr=$parse(attrs.expanding),expandedExpr=$parse(attrs.expanded),collapsingExpr=$parse(attrs.collapsing),collapsedExpr=$parse(attrs.collapsed),horizontal=!1,css={},cssTo={};!function(){horizontal=!!("horizontal"in attrs),horizontal?(css={width:""},cssTo={width:"0"}):(css={height:""},cssTo={height:"0"}),scope.$eval(attrs.uibCollapse)||element.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(css)}(),scope.$watch(attrs.uibCollapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function($document,$rootScope,$$multiMap){var openScope=null,openedContainers=$$multiMap.createNew();this.isOnlyOpen=function(dropdownScope,appendTo){var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){if(openedDropdowns.reduce(function(toClose,dropdown){return dropdown.scope===dropdownScope?dropdown:toClose},{}))return 1===openedDropdowns.length}return!1},this.open=function(dropdownScope,element,appendTo){if(openScope||$document.on("click",closeDropdown),openScope&&openScope!==dropdownScope&&(openScope.isOpen=!1),openScope=dropdownScope,appendTo){var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){-1===openedDropdowns.map(function(dropdown){return dropdown.scope}).indexOf(dropdownScope)&&openedContainers.put(appendTo,{scope:dropdownScope})}else openedContainers.put(appendTo,{scope:dropdownScope})}},this.close=function(dropdownScope,element,appendTo){if(openScope===dropdownScope&&($document.off("click",closeDropdown),$document.off("keydown",this.keybindFilter),openScope=null),appendTo){var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){var dropdownToClose=openedDropdowns.reduce(function(toClose,dropdown){return dropdown.scope===dropdownScope?dropdown:toClose},{});dropdownToClose&&openedContainers.remove(appendTo,dropdownToClose)}}};var closeDropdown=function(evt){if(openScope&&openScope.isOpen&&!(evt&&"disabled"===openScope.getAutoClose()||evt&&3===evt.which)){var toggleElement=openScope.getToggleElement();if(!(evt&&toggleElement&&toggleElement[0].contains(evt.target))){var dropdownElement=openScope.getDropdownElement();evt&&"outsideClick"===openScope.getAutoClose()&&dropdownElement&&dropdownElement[0].contains(evt.target)||(openScope.focusToggleElement(),openScope.isOpen=!1,$rootScope.$$phase||openScope.$apply())}}};this.keybindFilter=function(evt){if(openScope){var dropdownElement=openScope.getDropdownElement(),toggleElement=openScope.getToggleElement(),dropdownElementTargeted=dropdownElement&&dropdownElement[0].contains(evt.target),toggleElementTargeted=toggleElement&&toggleElement[0].contains(evt.target);27===evt.which?(evt.stopPropagation(),openScope.focusToggleElement(),closeDropdown()):openScope.isKeynavEnabled()&&-1!==[38,40].indexOf(evt.which)&&openScope.isOpen&&(dropdownElementTargeted||toggleElementTargeted)&&(evt.preventDefault(),evt.stopPropagation(),openScope.focusDropdownEntry(evt.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function($scope,$element,$attrs,$parse,dropdownConfig,uibDropdownService,$animate,$position,$document,$compile,$templateRequest){function removeDropdownMenu(){$element.append(self.dropdownMenu)}var templateScope,getIsOpen,self=this,scope=$scope.$new(),appendToOpenClass=dropdownConfig.appendToOpenClass,openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,keynavEnabled=!1,body=$document.find("body");$element.addClass("dropdown"),this.init=function(){$attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})),keynavEnabled=angular.isDefined($attrs.keyboardNav)},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen,angular.isFunction(setIsOpen)&&setIsOpen(scope,scope.isOpen),scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.getAutoClose=function(){return $attrs.autoClose||"always"},scope.getElement=function(){return $element},scope.isKeynavEnabled=function(){return keynavEnabled},scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):$element.find("ul").eq(0).find("a");switch(keyCode){case 40:angular.isNumber(self.selectedOption)?self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1:self.selectedOption=0;break;case 38:angular.isNumber(self.selectedOption)?self.selectedOption=0===self.selectedOption?0:self.selectedOption-1:self.selectedOption=elems.length-1}elems[self.selectedOption].focus()},scope.getDropdownElement=function(){return self.dropdownMenu},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",function(isOpen,wasOpen){var appendTo=null,appendToBody=!1;if(angular.isDefined($attrs.dropdownAppendTo)){var appendToEl=$parse($attrs.dropdownAppendTo)(scope);appendToEl&&(appendTo=angular.element(appendToEl))}if(angular.isDefined($attrs.dropdownAppendToBody)){!1!==$parse($attrs.dropdownAppendToBody)(scope)&&(appendToBody=!0)}if(appendToBody&&!appendTo&&(appendTo=body),appendTo&&self.dropdownMenu&&(isOpen?(appendTo.append(self.dropdownMenu),$element.on("$destroy",removeDropdownMenu)):($element.off("$destroy",removeDropdownMenu),removeDropdownMenu())),appendTo&&self.dropdownMenu){var css,rightalign,scrollbarPadding,pos=$position.positionElements($element,self.dropdownMenu,"bottom-left",!0),scrollbarWidth=0;if(css={top:pos.top+"px",display:isOpen?"block":"none"},rightalign=self.dropdownMenu.hasClass("dropdown-menu-right"),rightalign?(css.left="auto",scrollbarPadding=$position.scrollbarPadding(appendTo),scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth&&(scrollbarWidth=scrollbarPadding.scrollbarWidth),css.right=window.innerWidth-scrollbarWidth-(pos.left+$element.prop("offsetWidth"))+"px"):(css.left=pos.left+"px",css.right="auto"),!appendToBody){var appendOffset=$position.offset(appendTo);css.top=pos.top-appendOffset.top+"px",rightalign?css.right=window.innerWidth-(pos.left-appendOffset.left+$element.prop("offsetWidth"))+"px":css.left=pos.left-appendOffset.left+"px"}self.dropdownMenu.css(css)}var openContainer=appendTo||$element,dropdownOpenClass=appendTo?appendToOpenClass:openClass,hasOpenClass=openContainer.hasClass(dropdownOpenClass),isOnlyOpen=uibDropdownService.isOnlyOpen($scope,appendTo);if(hasOpenClass===!isOpen){var toggleClass;toggleClass=appendTo?isOnlyOpen?"removeClass":"addClass":isOpen?"addClass":"removeClass",$animate[toggleClass](openContainer,dropdownOpenClass).then(function(){angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})})}if(isOpen)self.dropdownMenuTemplateUrl?$templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent){templateScope=scope.$new(),$compile(tplContent.trim())(templateScope,function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl,$document.on("keydown",uibDropdownService.keybindFilter)})}):$document.on("keydown",uibDropdownService.keybindFilter),scope.focusToggleElement(),uibDropdownService.open(scope,$element,appendTo);else{if(uibDropdownService.close(scope,$element,appendTo),self.dropdownMenuTemplateUrl){templateScope&&templateScope.$destroy();var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl}self.selectedOption=null}angular.isFunction(setIsOpen)&&setIsOpen($scope,isOpen)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl&&!angular.isDefined(attrs.dropdownNested)){element.addClass("dropdown-menu");var tplUrl=attrs.templateUrl;tplUrl&&(dropdownCtrl.dropdownMenuTemplateUrl=tplUrl),dropdownCtrl.dropdownMenu||(dropdownCtrl.dropdownMenu=element)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){element.addClass("dropdown-toggle"),dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.on("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)}),scope.$on("$destroy",function(){element.off("click",toggleDropdown)})}}}}),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var map={};return{entries:function(){return Object.keys(map).map(function(key){return{key:key,value:map[key]}})},get:function(key){return map[key]},hasKey:function(key){return!!map[key]},keys:function(){return Object.keys(map)},put:function(key,value){map[key]||(map[key]=[]),map[key].push(value)},remove:function(key,value){var values=map[key];if(values){var idx=values.indexOf(value);-1!==idx&&values.splice(idx,1),values.length||delete map[key]}}}}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function($document,$window){var SCROLLBAR_WIDTH,BODY_SCROLLBAR_WIDTH,OVERFLOW_REGEX={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},PLACEMENT_REGEX={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},BODY_REGEX=/(HTML|BODY)/;return{getRawNode:function(elem){return elem.nodeName?elem:elem[0]||elem},parseStyle:function(value){return value=parseFloat(value),isFinite(value)?value:0},offsetParent:function(elem){elem=this.getRawNode(elem);for(var offsetParent=elem.offsetParent||$document[0].documentElement;offsetParent&&offsetParent!==$document[0].documentElement&&function(el){return"static"===($window.getComputedStyle(el).position||"static")}(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||$document[0].documentElement},scrollbarWidth:function(isBody){if(isBody){if(angular.isUndefined(BODY_SCROLLBAR_WIDTH)){var bodyElem=$document.find("body");bodyElem.addClass("uib-position-body-scrollbar-measure"),BODY_SCROLLBAR_WIDTH=$window.innerWidth-bodyElem[0].clientWidth,BODY_SCROLLBAR_WIDTH=isFinite(BODY_SCROLLBAR_WIDTH)?BODY_SCROLLBAR_WIDTH:0,bodyElem.removeClass("uib-position-body-scrollbar-measure")}return BODY_SCROLLBAR_WIDTH}if(angular.isUndefined(SCROLLBAR_WIDTH)){var scrollElem=angular.element('<div class="uib-position-scrollbar-measure"></div>');$document.find("body").append(scrollElem),SCROLLBAR_WIDTH=scrollElem[0].offsetWidth-scrollElem[0].clientWidth,SCROLLBAR_WIDTH=isFinite(SCROLLBAR_WIDTH)?SCROLLBAR_WIDTH:0,scrollElem.remove()}return SCROLLBAR_WIDTH},scrollbarPadding:function(elem){elem=this.getRawNode(elem);var elemStyle=$window.getComputedStyle(elem),paddingRight=this.parseStyle(elemStyle.paddingRight),paddingBottom=this.parseStyle(elemStyle.paddingBottom),scrollParent=this.scrollParent(elem,!1,!0),scrollbarWidth=this.scrollbarWidth(BODY_REGEX.test(scrollParent.tagName));return{scrollbarWidth:scrollbarWidth,widthOverflow:scrollParent.scrollWidth>scrollParent.clientWidth,right:paddingRight+scrollbarWidth,originalRight:paddingRight,heightOverflow:scrollParent.scrollHeight>scrollParent.clientHeight,bottom:paddingBottom+scrollbarWidth,originalBottom:paddingBottom}},isScrollable:function(elem,includeHidden){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal,elemStyle=$window.getComputedStyle(elem);return overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX)},scrollParent:function(elem,includeHidden,includeSelf){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal,documentEl=$document[0].documentElement,elemStyle=$window.getComputedStyle(elem);if(includeSelf&&overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX))return elem;var excludeStatic="absolute"===elemStyle.position,scrollParent=elem.parentElement||documentEl;if(scrollParent===documentEl||"fixed"===elemStyle.position)return documentEl;for(;scrollParent.parentElement&&scrollParent!==documentEl;){var spStyle=$window.getComputedStyle(scrollParent);if(excludeStatic&&"static"!==spStyle.position&&(excludeStatic=!1),!excludeStatic&&overflowRegex.test(spStyle.overflow+spStyle.overflowY+spStyle.overflowX))break;scrollParent=scrollParent.parentElement}return scrollParent},position:function(elem,includeMagins){elem=this.getRawNode(elem);var elemOffset=this.offset(elem);if(includeMagins){var elemStyle=$window.getComputedStyle(elem);elemOffset.top-=this.parseStyle(elemStyle.marginTop),elemOffset.left-=this.parseStyle(elemStyle.marginLeft)}var parent=this.offsetParent(elem),parentOffset={top:0,left:0};return parent!==$document[0].documentElement&&(parentOffset=this.offset(parent),parentOffset.top+=parent.clientTop-parent.scrollTop,parentOffset.left+=parent.clientLeft-parent.scrollLeft),{width:Math.round(angular.isNumber(elemOffset.width)?elemOffset.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemOffset.height)?elemOffset.height:elem.offsetHeight),top:Math.round(elemOffset.top-parentOffset.top),left:Math.round(elemOffset.left-parentOffset.left)}},offset:function(elem){elem=this.getRawNode(elem);var elemBCR=elem.getBoundingClientRect();return{width:Math.round(angular.isNumber(elemBCR.width)?elemBCR.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemBCR.height)?elemBCR.height:elem.offsetHeight),top:Math.round(elemBCR.top+($window.pageYOffset||$document[0].documentElement.scrollTop)),left:Math.round(elemBCR.left+($window.pageXOffset||$document[0].documentElement.scrollLeft))}},viewportOffset:function(elem,useDocument,includePadding){elem=this.getRawNode(elem),includePadding=!1!==includePadding;var elemBCR=elem.getBoundingClientRect(),offsetBCR={top:0,left:0,bottom:0,right:0},offsetParent=useDocument?$document[0].documentElement:this.scrollParent(elem),offsetParentBCR=offsetParent.getBoundingClientRect();if(offsetBCR.top=offsetParentBCR.top+offsetParent.clientTop,offsetBCR.left=offsetParentBCR.left+offsetParent.clientLeft,offsetParent===$document[0].documentElement&&(offsetBCR.top+=$window.pageYOffset,offsetBCR.left+=$window.pageXOffset),offsetBCR.bottom=offsetBCR.top+offsetParent.clientHeight,offsetBCR.right=offsetBCR.left+offsetParent.clientWidth,includePadding){var offsetParentStyle=$window.getComputedStyle(offsetParent);offsetBCR.top+=this.parseStyle(offsetParentStyle.paddingTop),offsetBCR.bottom-=this.parseStyle(offsetParentStyle.paddingBottom),offsetBCR.left+=this.parseStyle(offsetParentStyle.paddingLeft),offsetBCR.right-=this.parseStyle(offsetParentStyle.paddingRight)}return{top:Math.round(elemBCR.top-offsetBCR.top),bottom:Math.round(offsetBCR.bottom-elemBCR.bottom),left:Math.round(elemBCR.left-offsetBCR.left),right:Math.round(offsetBCR.right-elemBCR.right)}},parsePlacement:function(placement){var autoPlace=PLACEMENT_REGEX.auto.test(placement);return autoPlace&&(placement=placement.replace(PLACEMENT_REGEX.auto,"")),placement=placement.split("-"),placement[0]=placement[0]||"top",PLACEMENT_REGEX.primary.test(placement[0])||(placement[0]="top"),placement[1]=placement[1]||"center",PLACEMENT_REGEX.secondary.test(placement[1])||(placement[1]="center"),placement[2]=!!autoPlace,placement},positionElements:function(hostElem,targetElem,placement,appendToBody){hostElem=this.getRawNode(hostElem),targetElem=this.getRawNode(targetElem);var targetWidth=angular.isDefined(targetElem.offsetWidth)?targetElem.offsetWidth:targetElem.prop("offsetWidth"),targetHeight=angular.isDefined(targetElem.offsetHeight)?targetElem.offsetHeight:targetElem.prop("offsetHeight");placement=this.parsePlacement(placement);var hostElemPos=appendToBody?this.offset(hostElem):this.position(hostElem),targetElemPos={top:0,left:0,placement:""};if(placement[2]){var viewportOffset=this.viewportOffset(hostElem,appendToBody),targetElemStyle=$window.getComputedStyle(targetElem),adjustedSize={width:targetWidth+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginLeft)+this.parseStyle(targetElemStyle.marginRight))),height:targetHeight+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginTop)+this.parseStyle(targetElemStyle.marginBottom)))};if(placement[0]="top"===placement[0]&&adjustedSize.height>viewportOffset.top&&adjustedSize.height<=viewportOffset.bottom?"bottom":"bottom"===placement[0]&&adjustedSize.height>viewportOffset.bottom&&adjustedSize.height<=viewportOffset.top?"top":"left"===placement[0]&&adjustedSize.width>viewportOffset.left&&adjustedSize.width<=viewportOffset.right?"right":"right"===placement[0]&&adjustedSize.width>viewportOffset.right&&adjustedSize.width<=viewportOffset.left?"left":placement[0],placement[1]="top"===placement[1]&&adjustedSize.height-hostElemPos.height>viewportOffset.bottom&&adjustedSize.height-hostElemPos.height<=viewportOffset.top?"bottom":"bottom"===placement[1]&&adjustedSize.height-hostElemPos.height>viewportOffset.top&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?"top":"left"===placement[1]&&adjustedSize.width-hostElemPos.width>viewportOffset.right&&adjustedSize.width-hostElemPos.width<=viewportOffset.left?"right":"right"===placement[1]&&adjustedSize.width-hostElemPos.width>viewportOffset.left&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?"left":placement[1],"center"===placement[1])if(PLACEMENT_REGEX.vertical.test(placement[0])){var xOverflow=hostElemPos.width/2-targetWidth/2;viewportOffset.left+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?placement[1]="left":viewportOffset.right+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.left&&(placement[1]="right")}else{var yOverflow=hostElemPos.height/2-adjustedSize.height/2;viewportOffset.top+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?placement[1]="top":viewportOffset.bottom+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.top&&(placement[1]="bottom")}}switch(placement[0]){case"top":targetElemPos.top=hostElemPos.top-targetHeight;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height;break;case"left":targetElemPos.left=hostElemPos.left-targetWidth;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width}switch(placement[1]){case"top":targetElemPos.top=hostElemPos.top;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height-targetHeight;break;case"left":targetElemPos.left=hostElemPos.left;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width-targetWidth;break;case"center":PLACEMENT_REGEX.vertical.test(placement[0])?targetElemPos.left=hostElemPos.left+hostElemPos.width/2-targetWidth/2:targetElemPos.top=hostElemPos.top+hostElemPos.height/2-targetHeight/2}return targetElemPos.top=Math.round(targetElemPos.top),targetElemPos.left=Math.round(targetElemPos.left),targetElemPos.placement="center"===placement[1]?placement[0]:placement[0]+"-"+placement[1],targetElemPos},adjustTop:function(placementClasses,containerPosition,initialHeight,currentHeight){if(-1!==placementClasses.indexOf("top")&&initialHeight!==currentHeight)return{top:containerPosition.top-currentHeight+"px"}},positionArrow:function(elem,placement){elem=this.getRawNode(elem);var innerElem=elem.querySelector(".tooltip-inner, .popover-inner");if(innerElem){
var isTooltip=angular.element(innerElem).hasClass("tooltip-inner"),arrowElem=isTooltip?elem.querySelector(".tooltip-arrow"):elem.querySelector(".arrow");if(arrowElem){var arrowCss={top:"",bottom:"",left:"",right:""};if(placement=this.parsePlacement(placement),"center"===placement[1])return void angular.element(arrowElem).css(arrowCss);var borderProp="border-"+placement[0]+"-width",borderWidth=$window.getComputedStyle(arrowElem)[borderProp],borderRadiusProp="border-";PLACEMENT_REGEX.vertical.test(placement[0])?borderRadiusProp+=placement[0]+"-"+placement[1]:borderRadiusProp+=placement[1]+"-"+placement[0],borderRadiusProp+="-radius";var borderRadius=$window.getComputedStyle(isTooltip?innerElem:elem)[borderRadiusProp];switch(placement[0]){case"top":arrowCss.bottom=isTooltip?"0":"-"+borderWidth;break;case"bottom":arrowCss.top=isTooltip?"0":"-"+borderWidth;break;case"left":arrowCss.right=isTooltip?"0":"-"+borderWidth;break;case"right":arrowCss.left=isTooltip?"0":"-"+borderWidth}arrowCss[placement[1]]=borderRadius,angular.element(arrowElem).css(arrowCss)}}}}}]),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function($scope){function findTabIndex(index){for(var i=0;i<ctrl.tabs.length;i++)if(ctrl.tabs[i].index===index)return i}var oldIndex,ctrl=this;ctrl.tabs=[],ctrl.select=function(index,evt){if(!destroyed){var previousIndex=findTabIndex(oldIndex),previousSelected=ctrl.tabs[previousIndex];if(previousSelected){if(previousSelected.tab.onDeselect({$event:evt,$selectedIndex:index}),evt&&evt.isDefaultPrevented())return;previousSelected.tab.active=!1}var selected=ctrl.tabs[index];selected?(selected.tab.onSelect({$event:evt}),selected.tab.active=!0,ctrl.active=selected.index,oldIndex=selected.index):!selected&&angular.isDefined(oldIndex)&&(ctrl.active=null,oldIndex=null)}},ctrl.addTab=function(tab){if(ctrl.tabs.push({tab:tab,index:tab.index}),ctrl.tabs.sort(function(t1,t2){return t1.index>t2.index?1:t1.index<t2.index?-1:0}),tab.index===ctrl.active||!angular.isDefined(ctrl.active)&&1===ctrl.tabs.length){var newActiveIndex=findTabIndex(tab.index);ctrl.select(newActiveIndex)}},ctrl.removeTab=function(tab){for(var index,i=0;i<ctrl.tabs.length;i++)if(ctrl.tabs[i].tab===tab){index=i;break}if(ctrl.tabs[index].index===ctrl.active){var newActiveTabIndex=index===ctrl.tabs.length-1?index-1:index+1%ctrl.tabs.length;ctrl.select(newActiveTabIndex)}ctrl.tabs.splice(index,1)},$scope.$watch("tabset.active",function(val){angular.isDefined(val)&&val!==oldIndex&&ctrl.select(findTabIndex(val))});var destroyed;$scope.$on("$destroy",function(){destroyed=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tabset.html"},link:function(scope,element,attrs){scope.vertical=!!angular.isDefined(attrs.vertical)&&scope.$parent.$eval(attrs.vertical),scope.justified=!!angular.isDefined(attrs.justified)&&scope.$parent.$eval(attrs.justified)}}}).directive("uibTab",["$parse",function($parse){return{require:"^uibTabset",replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(scope,elm,attrs,tabsetCtrl,transclude){scope.disabled=!1,attrs.disable&&scope.$parent.$watch($parse(attrs.disable),function(value){scope.disabled=!!value}),angular.isUndefined(attrs.index)&&(tabsetCtrl.tabs&&tabsetCtrl.tabs.length?scope.index=Math.max.apply(null,tabsetCtrl.tabs.map(function(t){return t.index}))+1:scope.index=0),angular.isUndefined(attrs.classes)&&(scope.classes=""),scope.select=function(evt){if(!scope.disabled){for(var index,i=0;i<tabsetCtrl.tabs.length;i++)if(tabsetCtrl.tabs[i].tab===scope){index=i;break}tabsetCtrl.select(index,evt)}},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(scope,elm){scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}).directive("uibTabContentTransclude",function(){function isTabHeading(node){return node.tagName&&(node.hasAttribute("uib-tab-heading")||node.hasAttribute("data-uib-tab-heading")||node.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===node.tagName.toLowerCase()||"data-uib-tab-heading"===node.tagName.toLowerCase()||"x-uib-tab-heading"===node.tagName.toLowerCase()||"uib:tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.uibTabContentTransclude).tab;tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function($scope,$element,$interval,$timeout,$animate){function setActive(index){for(var i=0;i<slides.length;i++)slides[i].slide.active=i===index}function goNext(slide,index,direction){if(!destroyed){if(angular.extend(slide,{direction:direction}),angular.extend(slides[currentIndex].slide||{},{direction:direction}),$animate.enabled($element)&&!$scope.$currentTransition&&slides[index].element&&self.slides.length>1){slides[index].element.data(SLIDE_DIRECTION,slide.direction);var currentIdx=self.getCurrentIndex();angular.isNumber(currentIdx)&&slides[currentIdx].element&&slides[currentIdx].element.data(SLIDE_DIRECTION,slide.direction),$scope.$currentTransition=!0,$animate.on("addClass",slides[index].element,function(element,phase){"close"===phase&&($scope.$currentTransition=null,$animate.off("addClass",element))})}$scope.active=slide.index,currentIndex=slide.index,setActive(index),restartTimer()}}function findSlideIndex(slide){for(var i=0;i<slides.length;i++)if(slides[i].slide===slide)return i}function resetTimer(){currentInterval&&($interval.cancel(currentInterval),currentInterval=null)}function resetTransition(slides){slides.length||($scope.$currentTransition=null)}function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>0&&(currentInterval=$interval(timerFn,interval))}function timerFn(){var interval=+$scope.interval;isPlaying&&!isNaN(interval)&&interval>0&&slides.length?$scope.next():$scope.pause()}var currentInterval,isPlaying,self=this,slides=self.slides=$scope.slides=[],SLIDE_DIRECTION="uib-slideDirection",currentIndex=$scope.active,destroyed=!1;$element.addClass("carousel"),self.addSlide=function(slide,element){slides.push({slide:slide,element:element}),slides.sort(function(a,b){return+a.slide.index-+b.slide.index}),(slide.index===$scope.active||1===slides.length&&!angular.isNumber($scope.active))&&($scope.$currentTransition&&($scope.$currentTransition=null),currentIndex=slide.index,$scope.active=slide.index,setActive(currentIndex),self.select(slides[findSlideIndex(slide)]),1===slides.length&&$scope.play())},self.getCurrentIndex=function(){for(var i=0;i<slides.length;i++)if(slides[i].slide.index===currentIndex)return i},self.next=$scope.next=function(){var newIndex=(self.getCurrentIndex()+1)%slides.length;return 0===newIndex&&$scope.noWrap()?void $scope.pause():self.select(slides[newIndex],"next")},self.prev=$scope.prev=function(){var newIndex=self.getCurrentIndex()-1<0?slides.length-1:self.getCurrentIndex()-1;return $scope.noWrap()&&newIndex===slides.length-1?void $scope.pause():self.select(slides[newIndex],"prev")},self.removeSlide=function(slide){var index=findSlideIndex(slide);slides.splice(index,1),slides.length>0&&currentIndex===index?index>=slides.length?(currentIndex=slides.length-1,$scope.active=currentIndex,setActive(currentIndex),self.select(slides[slides.length-1])):(currentIndex=index,$scope.active=currentIndex,setActive(currentIndex),self.select(slides[index])):currentIndex>index&&(currentIndex--,$scope.active=currentIndex),0===slides.length&&(currentIndex=null,$scope.active=null)},self.select=$scope.select=function(nextSlide,direction){var nextIndex=findSlideIndex(nextSlide.slide);void 0===direction&&(direction=nextIndex>self.getCurrentIndex()?"next":"prev"),nextSlide.slide.index===currentIndex||$scope.$currentTransition||goNext(nextSlide.slide,nextIndex,direction)},$scope.indexOfSlide=function(slide){return+slide.slide.index},$scope.isActive=function(slide){return $scope.active===slide.slide.index},$scope.isPrevDisabled=function(){return 0===$scope.active&&$scope.noWrap()},$scope.isNextDisabled=function(){return $scope.active===slides.length-1&&$scope.noWrap()},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$element.on("mouseenter",$scope.pause),$element.on("mouseleave",$scope.play),$scope.$on("$destroy",function(){destroyed=!0,resetTimer()}),$scope.$watch("noTransition",function(noTransition){$animate.enabled($element,!noTransition)}),$scope.$watch("interval",restartTimer),$scope.$watchCollection("slides",resetTransition),$scope.$watch("active",function(index){if(angular.isNumber(index)&&currentIndex!==index){for(var i=0;i<slides.length;i++)if(slides[i].slide.index===index){index=i;break}slides[index]&&(setActive(index),self.select(slides[index]),currentIndex=index)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function($animate){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(scope,element,attrs,carouselCtrl){element.addClass("item"),carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){$animate[active?"addClass":"removeClass"](element,"active")})}}}]).animation(".item",["$animateCss",function($animateCss){function removeClass(element,className,callback){element.removeClass(className),callback&&callback()}return{beforeAddClass:function(element,className,done){if("active"===className){var stopped=!1,direction=element.data("uib-slideDirection"),directionClass="next"===direction?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass+" "+direction,done);return element.addClass(direction),$animateCss(element,{addClass:directionClass}).start().done(removeClassFn),function(){stopped=!0}}done()},beforeRemoveClass:function(element,className,done){if("active"===className){var stopped=!1,direction=element.data("uib-slideDirection"),directionClass="next"===direction?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass,done);return $animateCss(element,{addClass:directionClass}).start().done(removeClassFn),function(){stopped=!0}}done()}}}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),function(){var KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(e){switch(e.which){case KEY.COMMAND:case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return!0}return!!(e.metaKey||e.ctrlKey||e.altKey)},isFunctionKey:function(k){return(k=k.which?k.which:k)>=112&&k<=123},isVerticalMovement:function(k){return~[KEY.UP,KEY.DOWN].indexOf(k)},isHorizontalMovement:function(k){return~[KEY.LEFT,KEY.RIGHT,KEY.BACKSPACE,KEY.DELETE].indexOf(k)},toSeparator:function(k){var sep={ENTER:"\n",TAB:"\t",SPACE:" "}[k];return sep||(KEY[k]?void 0:k)}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(selector){return angular.element(this[0].querySelectorAll(selector))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(selector){for(var elem=this[0],matchesSelector=elem.matches||elem.webkitMatchesSelector||elem.mozMatchesSelector||elem.msMatchesSelector;elem;){if(matchesSelector.bind(elem)(selector))return elem;elem=elem.parentElement}return!1});var latestId=0,uis=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",removeSelected:!0,resetSearchInput:!0,generateId:function(){return latestId++},appendToBody:!1}).service("uiSelectMinErr",function(){var minErr=angular.$$minErr("ui.select");return function(){var error=minErr.apply(this,arguments),message=error.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(message)}}).directive("uisTranscludeAppend",function(){return{link:function(scope,element,attrs,ctrl,transclude){transclude(scope,function(clone){element.append(clone)})}}}).filter("highlight",function(){function escapeRegexp(queryToEscape){return(""+queryToEscape).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(matchItem,query){return query&&matchItem?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),'<span class="ui-select-highlight">$&</span>'):matchItem}}).factory("uisOffset",["$document","$window",function($document,$window){return function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}}}]);uis.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(uiSelectConfig,RepeatParser,uiSelectMinErr,$compile,$window){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(tElement){return tElement.addClass("ui-select-choices"),(tElement.parent().attr("theme")||uiSelectConfig.theme)+"/choices.tpl.html"},compile:function(tElement,tAttrs){if(!tAttrs.repeat)throw uiSelectMinErr("repeat","Expected 'repeat' expression.");var groupByExp=tAttrs.groupBy,groupFilterExp=tAttrs.groupFilter;if(groupByExp){var groups=tElement.querySelectorAll(".ui-select-choices-group");if(1!==groups.length)throw uiSelectMinErr("rows","Expected 1 .ui-select-choices-group but got '{0}'.",groups.length);groups.attr("ng-repeat",RepeatParser.getGroupNgRepeatExpression())}var parserResult=RepeatParser.parse(tAttrs.repeat),choices=tElement.querySelectorAll(".ui-select-choices-row");if(1!==choices.length)throw uiSelectMinErr("rows","Expected 1 .ui-select-choices-row but got '{0}'.",choices.length);choices.attr("ng-repeat",parserResult.repeatExpression(groupByExp));var rowsInner=tElement.querySelectorAll(".ui-select-choices-row-inner");if(1!==rowsInner.length)throw uiSelectMinErr("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",rowsInner.length);return rowsInner.attr("uis-transclude-append",""),($window.document.addEventListener?choices:rowsInner).attr("ng-click","$select.select("+parserResult.itemName+",$select.skipFocusser,$event)"),function(scope,element,attrs,$select){$select.parseRepeatAttr(attrs.repeat,groupByExp,groupFilterExp),$select.disableChoiceExpression=attrs.uiDisableChoice,$select.onHighlightCallback=attrs.onHighlight,$select.dropdownPosition=attrs.position?attrs.position.toLowerCase():uiSelectConfig.dropdownPosition,scope.$on("$destroy",function(){choices.remove()}),scope.$watch("$select.search",function(newValue){newValue&&!$select.open&&$select.multiple&&$select.activate(!1,!0),$select.activeIndex=$select.tagging.isActivated?-1:0,!attrs.minimumInputLength||$select.search.length>=attrs.minimumInputLength?$select.refresh(attrs.refresh):$select.items=[]}),attrs.$observe("refreshDelay",function(){var refreshDelay=scope.$eval(attrs.refreshDelay);$select.refreshDelay=void 0!==refreshDelay?refreshDelay:uiSelectConfig.refreshDelay})}}}}]),uis.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function($scope,$element,$timeout,$filter,$$uisDebounce,RepeatParser,uiSelectMinErr,uiSelectConfig,$parse,$injector,$window){function _findIndex(collection,predicate,thisArg){if(collection.findIndex)return collection.findIndex(predicate,thisArg);for(var value,list=Object(collection),length=list.length>>>0,i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return i;return-1}function _resetSearchInput(){ctrl.resetSearchInput&&(ctrl.search=EMPTY_SEARCH,ctrl.selected&&ctrl.items.length&&!ctrl.multiple&&(ctrl.activeIndex=_findIndex(ctrl.items,function(item){return angular.equals(this,item)},ctrl.selected)))}function _groupsFilter(groups,groupNames){var i,j,result=[];for(i=0;i<groupNames.length;i++)for(j=0;j<groups.length;j++)groups[j].name==[groupNames[i]]&&result.push(groups[j]);return result}function _updateItemDisabled(item,isDisabled){var disabledItemIndex=disabledItems.indexOf(item);isDisabled&&-1===disabledItemIndex&&disabledItems.push(item),!isDisabled&&disabledItemIndex>-1&&disabledItems.splice(disabledItemIndex,1)}function _isItemDisabled(item){return disabledItems.indexOf(item)>-1}function _initaliseLockedChoices(doInitalise){function _updateItemLocked(item,isLocked){var lockedItemIndex=lockedItems.indexOf(item);isLocked&&-1===lockedItemIndex&&lockedItems.push(item),!isLocked&&lockedItemIndex>-1&&lockedItems.splice(lockedItemIndex,0)}function _isItemlocked(item){return lockedItems.indexOf(item)>-1}if(doInitalise){var lockedItems=[];ctrl.isLocked=function(itemScope,itemIndex){var isLocked=!1,item=ctrl.selected[itemIndex];return item&&(itemScope?(isLocked=!!itemScope.$eval(ctrl.lockChoiceExpression),_updateItemLocked(item,isLocked)):isLocked=_isItemlocked(item)),isLocked}}}function _handleDropDownSelection(key){var processed=!0;switch(key){case KEY.DOWN:!ctrl.open&&ctrl.multiple?ctrl.activate(!1,!0):ctrl.activeIndex<ctrl.items.length-1&&ctrl.activeIndex++;break;case KEY.UP:!ctrl.open&&ctrl.multiple?ctrl.activate(!1,!0):(ctrl.activeIndex>0||0===ctrl.search.length&&ctrl.tagging.isActivated&&ctrl.activeIndex>-1)&&ctrl.activeIndex--;break;case KEY.TAB:ctrl.multiple&&!ctrl.open||ctrl.select(ctrl.items[ctrl.activeIndex],!0);break;case KEY.ENTER:ctrl.open&&(ctrl.tagging.isActivated||ctrl.activeIndex>=0)?ctrl.select(ctrl.items[ctrl.activeIndex],ctrl.skipFocusser):ctrl.activate(!1,!0);break;case KEY.ESC:ctrl.close();break;default:processed=!1}return processed}function _ensureHighlightVisible(){var container=$element.querySelectorAll(".ui-select-choices-content"),choices=container.querySelectorAll(".ui-select-choices-row");if(choices.length<1)throw uiSelectMinErr("choices","Expected multiple .ui-select-choices-row but got '{0}'.",choices.length);if(!(ctrl.activeIndex<0)){var highlighted=choices[ctrl.activeIndex],posY=highlighted.offsetTop+highlighted.clientHeight-container[0].scrollTop,height=container[0].offsetHeight;posY>height?container[0].scrollTop+=posY-height:posY<highlighted.clientHeight&&(ctrl.isGrouped&&0===ctrl.activeIndex?container[0].scrollTop=0:container[0].scrollTop-=highlighted.clientHeight-posY)}}var ctrl=this,EMPTY_SEARCH="";if(ctrl.placeholder=uiSelectConfig.placeholder,ctrl.searchEnabled=uiSelectConfig.searchEnabled,ctrl.sortable=uiSelectConfig.sortable,ctrl.refreshDelay=uiSelectConfig.refreshDelay,ctrl.paste=uiSelectConfig.paste,ctrl.resetSearchInput=uiSelectConfig.resetSearchInput,ctrl.removeSelected=uiSelectConfig.removeSelected,ctrl.closeOnSelect=!0,ctrl.skipFocusser=!1,ctrl.search=EMPTY_SEARCH,ctrl.activeIndex=0,ctrl.items=[],ctrl.open=!1,ctrl.focus=!1,ctrl.disabled=!1,ctrl.selected=void 0,ctrl.dropdownPosition="auto",ctrl.focusser=void 0,ctrl.multiple=void 0,ctrl.disableChoiceExpression=void 0,ctrl.tagging={isActivated:!1,fct:void 0},ctrl.taggingTokens={isActivated:!1,tokens:void 0},ctrl.lockChoiceExpression=void 0,ctrl.clickTriggeredSelect=!1,ctrl.$filter=$filter,ctrl.$element=$element,ctrl.$animate=function(){try{return $injector.get("$animate")}catch(err){return null}}(),ctrl.searchInput=$element.querySelectorAll("input.ui-select-search"),1!==ctrl.searchInput.length)throw uiSelectMinErr("searchInput","Expected 1 input.ui-select-search but got '{0}'.",ctrl.searchInput.length);ctrl.isEmpty=function(){return angular.isUndefined(ctrl.selected)||null===ctrl.selected||""===ctrl.selected||ctrl.multiple&&0===ctrl.selected.length},ctrl.activate=function(initSearchValue,avoidReset){if(ctrl.disabled||ctrl.open)ctrl.open&&!ctrl.searchEnabled&&ctrl.close();else{avoidReset||_resetSearchInput(),$scope.$broadcast("uis:activate"),ctrl.open=!0,ctrl.activeIndex=ctrl.activeIndex>=ctrl.items.length?0:ctrl.activeIndex,-1===ctrl.activeIndex&&!1!==ctrl.taggingLabel&&(ctrl.activeIndex=0);var container=$element.querySelectorAll(".ui-select-choices-content"),searchInput=$element.querySelectorAll(".ui-select-search");if(ctrl.$animate&&ctrl.$animate.on&&ctrl.$animate.enabled(container[0])){var animateHandler=function(elem,phase){"start"===phase&&0===ctrl.items.length?(ctrl.$animate.off("removeClass",searchInput[0],animateHandler),$timeout(function(){ctrl.focusSearchInput(initSearchValue)})):"close"===phase&&(ctrl.$animate.off("enter",container[0],animateHandler),$timeout(function(){ctrl.focusSearchInput(initSearchValue)}))};ctrl.items.length>0?ctrl.$animate.on("enter",container[0],animateHandler):ctrl.$animate.on("removeClass",searchInput[0],animateHandler)}else $timeout(function(){ctrl.focusSearchInput(initSearchValue),!ctrl.tagging.isActivated&&ctrl.items.length>1&&_ensureHighlightVisible()})}},ctrl.focusSearchInput=function(initSearchValue){ctrl.search=initSearchValue||ctrl.search,ctrl.searchInput[0].focus()},ctrl.findGroupByName=function(name){return ctrl.groups&&ctrl.groups.filter(function(group){return group.name===name})[0]},ctrl.parseRepeatAttr=function(repeatAttr,groupByExp,groupFilterExp){function updateGroups(items){var groupFn=$scope.$eval(groupByExp);if(ctrl.groups=[],angular.forEach(items,function(item){var groupName=angular.isFunction(groupFn)?groupFn(item):item[groupFn],group=ctrl.findGroupByName(groupName);group?group.items.push(item):ctrl.groups.push({name:groupName,items:[item]})}),groupFilterExp){var groupFilterFn=$scope.$eval(groupFilterExp);angular.isFunction(groupFilterFn)?ctrl.groups=groupFilterFn(ctrl.groups):angular.isArray(groupFilterFn)&&(ctrl.groups=_groupsFilter(ctrl.groups,groupFilterFn))}ctrl.items=[],ctrl.groups.forEach(function(group){ctrl.items=ctrl.items.concat(group.items)})}function setPlainItems(items){ctrl.items=items}ctrl.setItemsFn=groupByExp?updateGroups:setPlainItems,ctrl.parserResult=RepeatParser.parse(repeatAttr),ctrl.isGrouped=!!groupByExp,ctrl.itemProperty=ctrl.parserResult.itemName;var originalSource=ctrl.parserResult.source,createArrayFromObject=function(){var origSrc=originalSource($scope);$scope.$uisSource=Object.keys(origSrc).map(function(v){var result={};return result[ctrl.parserResult.keyName]=v,result.value=origSrc[v],result})};ctrl.parserResult.keyName&&(createArrayFromObject(),ctrl.parserResult.source=$parse("$uisSource"+ctrl.parserResult.filters),$scope.$watch(originalSource,function(newVal,oldVal){newVal!==oldVal&&createArrayFromObject()},!0)),ctrl.refreshItems=function(data){data=data||ctrl.parserResult.source($scope);var selectedItems=ctrl.selected;if(ctrl.isEmpty()||angular.isArray(selectedItems)&&!selectedItems.length||!ctrl.multiple||!ctrl.removeSelected)ctrl.setItemsFn(data);else if(void 0!==data&&null!==data){var filteredItems=data.filter(function(i){return angular.isArray(selectedItems)?selectedItems.every(function(selectedItem){return!angular.equals(i,selectedItem)}):!angular.equals(i,selectedItems)});ctrl.setItemsFn(filteredItems)}"auto"!==ctrl.dropdownPosition&&"up"!==ctrl.dropdownPosition||$scope.calculateDropdownPos(),$scope.$broadcast("uis:refresh")},$scope.$watchCollection(ctrl.parserResult.source,function(items){if(void 0===items||null===items)ctrl.items=[];else{if(!angular.isArray(items))throw uiSelectMinErr("items","Expected an array but got '{0}'.",items);ctrl.refreshItems(items),angular.isDefined(ctrl.ngModel.$modelValue)&&(ctrl.ngModel.$modelValue=null)}})};var _refreshDelayPromise;ctrl.refresh=function(refreshAttr){void 0!==refreshAttr&&(_refreshDelayPromise&&$timeout.cancel(_refreshDelayPromise),_refreshDelayPromise=$timeout(function(){$scope.$eval(refreshAttr)},ctrl.refreshDelay))},ctrl.isActive=function(itemScope){if(!ctrl.open)return!1;var itemIndex=ctrl.items.indexOf(itemScope[ctrl.itemProperty]),isActive=itemIndex==ctrl.activeIndex;return!(!isActive||itemIndex<0)&&(isActive&&!angular.isUndefined(ctrl.onHighlightCallback)&&itemScope.$eval(ctrl.onHighlightCallback),isActive)};var _isItemSelected=function(item){return ctrl.selected&&angular.isArray(ctrl.selected)&&ctrl.selected.filter(function(selection){return angular.equals(selection,item)}).length>0},disabledItems=[];ctrl.isDisabled=function(itemScope){if(ctrl.open){var item=itemScope[ctrl.itemProperty],itemIndex=ctrl.items.indexOf(item),isDisabled=!1;if(itemIndex>=0&&(angular.isDefined(ctrl.disableChoiceExpression)||ctrl.multiple)){if(item.isTag)return!1;ctrl.multiple&&(isDisabled=_isItemSelected(item)),!isDisabled&&angular.isDefined(ctrl.disableChoiceExpression)&&(isDisabled=!!itemScope.$eval(ctrl.disableChoiceExpression)),_updateItemDisabled(item,isDisabled)}return isDisabled}},ctrl.select=function(item,skipFocusser,$event){if(void 0===item||!_isItemDisabled(item)){if(!ctrl.items&&!ctrl.search&&!ctrl.tagging.isActivated)return;if(!item||!_isItemDisabled(item)){if(ctrl.clickTriggeredSelect=!1,$event&&"click"===$event.type&&item&&(ctrl.clickTriggeredSelect=!0),ctrl.tagging.isActivated&&!1===ctrl.clickTriggeredSelect){if(!1===ctrl.taggingLabel)if(ctrl.activeIndex<0){if(void 0===item&&(item=void 0!==ctrl.tagging.fct?ctrl.tagging.fct(ctrl.search):ctrl.search),!item||angular.equals(ctrl.items[0],item))return}else item=ctrl.items[ctrl.activeIndex];else if(0===ctrl.activeIndex){if(void 0===item)return;if(void 0!==ctrl.tagging.fct&&"string"==typeof item){if(!(item=ctrl.tagging.fct(item)))return}else"string"==typeof item&&(item=item.replace(ctrl.taggingLabel,"").trim())}if(_isItemSelected(item))return void ctrl.close(skipFocusser)}_resetSearchInput(),$scope.$broadcast("uis:select",item);var locals={};locals[ctrl.parserResult.itemName]=item,$timeout(function(){ctrl.onSelectCallback($scope,{$item:item,$model:ctrl.parserResult.modelMapper($scope,locals)})}),ctrl.closeOnSelect&&ctrl.close(skipFocusser)}}},ctrl.close=function(skipFocusser){ctrl.open&&(ctrl.ngModel&&ctrl.ngModel.$setTouched&&ctrl.ngModel.$setTouched(),ctrl.open=!1,_resetSearchInput(),$scope.$broadcast("uis:close",skipFocusser))},ctrl.setFocus=function(){ctrl.focus||ctrl.focusInput[0].focus()},ctrl.clear=function($event){ctrl.select(void 0),$event.stopPropagation(),$timeout(function(){ctrl.focusser[0].focus()},0,!1)},ctrl.toggle=function(e){ctrl.open?(ctrl.close(),e.preventDefault(),e.stopPropagation()):ctrl.activate()},ctrl.isLocked=function(){return!1},$scope.$watch(function(){return angular.isDefined(ctrl.lockChoiceExpression)&&""!==ctrl.lockChoiceExpression},_initaliseLockedChoices);var sizeWatch=null,updaterScheduled=!1;ctrl.sizeSearchInput=function(){var input=ctrl.searchInput[0],container=ctrl.searchInput.parent().parent()[0],calculateContainerWidth=function(){return container.clientWidth*!!input.offsetParent},updateIfVisible=function(containerWidth){if(0===containerWidth)return!1;var inputWidth=containerWidth-input.offsetLeft-10;return inputWidth<50&&(inputWidth=containerWidth),
ctrl.searchInput.css("width",inputWidth+"px"),!0};ctrl.searchInput.css("width","10px"),$timeout(function(){null!==sizeWatch||updateIfVisible(calculateContainerWidth())||(sizeWatch=$scope.$watch(function(){updaterScheduled||(updaterScheduled=!0,$scope.$$postDigest(function(){updaterScheduled=!1,updateIfVisible(calculateContainerWidth())&&(sizeWatch(),sizeWatch=null)}))},angular.noop))})},ctrl.searchInput.on("keydown",function(e){var key=e.which;~[KEY.ENTER,KEY.ESC].indexOf(key)&&(e.preventDefault(),e.stopPropagation()),$scope.$apply(function(){var tagged=!1;if((ctrl.items.length>0||ctrl.tagging.isActivated)&&(_handleDropDownSelection(key)||ctrl.searchEnabled||(e.preventDefault(),e.stopPropagation()),ctrl.taggingTokens.isActivated)){for(var i=0;i<ctrl.taggingTokens.tokens.length;i++)ctrl.taggingTokens.tokens[i]===KEY.MAP[e.keyCode]&&ctrl.search.length>0&&(tagged=!0);tagged&&$timeout(function(){ctrl.searchInput.triggerHandler("tagged");var newItem=ctrl.search.replace(KEY.MAP[e.keyCode],"").trim();ctrl.tagging.fct&&(newItem=ctrl.tagging.fct(newItem)),newItem&&ctrl.select(newItem,!0)})}}),KEY.isVerticalMovement(key)&&ctrl.items.length>0&&_ensureHighlightVisible(),key!==KEY.ENTER&&key!==KEY.ESC||(e.preventDefault(),e.stopPropagation())}),ctrl.searchInput.on("paste",function(e){var data;if(data=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(e.originalEvent||e).clipboardData.getData("text/plain"),(data=ctrl.search+data)&&data.length>0)if(ctrl.taggingTokens.isActivated){for(var items=[],i=0;i<ctrl.taggingTokens.tokens.length;i++){var separator=KEY.toSeparator(ctrl.taggingTokens.tokens[i])||ctrl.taggingTokens.tokens[i];if(data.indexOf(separator)>-1){items=data.split(separator);break}}0===items.length&&(items=[data]);var oldsearch=ctrl.search;angular.forEach(items,function(item){var newItem=ctrl.tagging.fct?ctrl.tagging.fct(item):item;newItem&&ctrl.select(newItem,!0)}),ctrl.search=oldsearch||EMPTY_SEARCH,e.preventDefault(),e.stopPropagation()}else ctrl.paste&&(ctrl.paste(data),ctrl.search=EMPTY_SEARCH,e.preventDefault(),e.stopPropagation())}),ctrl.searchInput.on("tagged",function(){$timeout(function(){_resetSearchInput()})});var onResize=$$uisDebounce(function(){ctrl.sizeSearchInput()},50);angular.element($window).bind("resize",onResize),$scope.$on("$destroy",function(){ctrl.searchInput.off("keyup keydown tagged blur paste"),angular.element($window).off("resize",onResize)})}]),uis.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function($document,uiSelectConfig,uiSelectMinErr,uisOffset,$compile,$parse,$timeout){return{restrict:"EA",templateUrl:function(tElement,tAttrs){return(tAttrs.theme||uiSelectConfig.theme)+(angular.isDefined(tAttrs.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(tElement,tAttrs){var match=/{(.*)}\s*{(.*)}/.exec(tAttrs.ngClass);if(match){var combined="{"+match[1]+", "+match[2]+"}";tAttrs.ngClass=combined,tElement.attr("ng-class",combined)}return angular.isDefined(tAttrs.multiple)?tElement.append("<ui-select-multiple/>").removeAttr("multiple"):tElement.append("<ui-select-single/>"),tAttrs.inputId&&(tElement.querySelectorAll("input.ui-select-search")[0].id=tAttrs.inputId),function(scope,element,attrs,ctrls,transcludeFn){function onDocumentClick(e){if($select.open){if(!(window.jQuery?window.jQuery.contains(element[0],e.target):element[0].contains(e.target))&&!$select.clickTriggeredSelect){var skipFocusser;if($select.skipFocusser)skipFocusser=!0;else{var focusableControls=["input","button","textarea","select"],targetController=angular.element(e.target).controller("uiSelect");skipFocusser=targetController&&targetController!==$select,skipFocusser||(skipFocusser=~focusableControls.indexOf(e.target.tagName.toLowerCase()))}$select.close(skipFocusser),scope.$digest()}$select.clickTriggeredSelect=!1}}function positionDropdown(){var offset=uisOffset(element);placeholder=angular.element('<div class="ui-select-placeholder"></div>'),placeholder[0].style.width=offset.width+"px",placeholder[0].style.height=offset.height+"px",element.after(placeholder),originalWidth=element[0].style.width,$document.find("body").append(element),element[0].style.position="absolute",element[0].style.left=offset.left+"px",element[0].style.top=offset.top+"px",element[0].style.width=offset.width+"px"}function resetDropdown(){null!==placeholder&&(placeholder.replaceWith(element),placeholder=null,element[0].style.position="",element[0].style.left="",element[0].style.top="",element[0].style.width=originalWidth,$select.setFocus())}var $select=ctrls[0],ngModel=ctrls[1];$select.generatedId=uiSelectConfig.generateId(),$select.baseTitle=attrs.title||"Select box",$select.focusserTitle=$select.baseTitle+" focus",$select.focusserId="focusser-"+$select.generatedId,$select.closeOnSelect=function(){return angular.isDefined(attrs.closeOnSelect)?$parse(attrs.closeOnSelect)():uiSelectConfig.closeOnSelect}(),scope.$watch("skipFocusser",function(){var skipFocusser=scope.$eval(attrs.skipFocusser);$select.skipFocusser=void 0!==skipFocusser?skipFocusser:uiSelectConfig.skipFocusser}),$select.onSelectCallback=$parse(attrs.onSelect),$select.onRemoveCallback=$parse(attrs.onRemove),$select.ngModel=ngModel,$select.choiceGrouped=function(group){return $select.isGrouped&&group&&group.name},attrs.tabindex&&attrs.$observe("tabindex",function(value){$select.focusInput.attr("tabindex",value),element.removeAttr("tabindex")}),scope.$watch(function(){return scope.$eval(attrs.searchEnabled)},function(newVal){$select.searchEnabled=void 0!==newVal?newVal:uiSelectConfig.searchEnabled}),scope.$watch("sortable",function(){var sortable=scope.$eval(attrs.sortable);$select.sortable=void 0!==sortable?sortable:uiSelectConfig.sortable}),attrs.$observe("limit",function(){$select.limit=angular.isDefined(attrs.limit)?parseInt(attrs.limit,10):void 0}),scope.$watch("removeSelected",function(){var removeSelected=scope.$eval(attrs.removeSelected);$select.removeSelected=void 0!==removeSelected?removeSelected:uiSelectConfig.removeSelected}),attrs.$observe("disabled",function(){$select.disabled=void 0!==attrs.disabled&&attrs.disabled}),attrs.$observe("resetSearchInput",function(){var resetSearchInput=scope.$eval(attrs.resetSearchInput);$select.resetSearchInput=void 0===resetSearchInput||resetSearchInput}),attrs.$observe("paste",function(){$select.paste=scope.$eval(attrs.paste)}),attrs.$observe("tagging",function(){if(void 0!==attrs.tagging){var taggingEval=scope.$eval(attrs.tagging);$select.tagging={isActivated:!0,fct:!0!==taggingEval?taggingEval:void 0}}else $select.tagging={isActivated:!1,fct:void 0}}),attrs.$observe("taggingLabel",function(){void 0!==attrs.tagging&&("false"===attrs.taggingLabel?$select.taggingLabel=!1:$select.taggingLabel=void 0!==attrs.taggingLabel?attrs.taggingLabel:"(new)")}),attrs.$observe("taggingTokens",function(){if(void 0!==attrs.tagging){var tokens=void 0!==attrs.taggingTokens?attrs.taggingTokens.split("|"):[",","ENTER"];$select.taggingTokens={isActivated:!0,tokens:tokens}}}),angular.isDefined(attrs.autofocus)&&$timeout(function(){$select.setFocus()}),angular.isDefined(attrs.focusOn)&&scope.$on(attrs.focusOn,function(){$timeout(function(){$select.setFocus()})}),$document.on("click",onDocumentClick),scope.$on("$destroy",function(){$document.off("click",onDocumentClick)}),transcludeFn(scope,function(clone){var transcluded=angular.element("<div>").append(clone),transcludedMatch=transcluded.querySelectorAll(".ui-select-match");if(transcludedMatch.removeAttr("ui-select-match"),transcludedMatch.removeAttr("data-ui-select-match"),1!==transcludedMatch.length)throw uiSelectMinErr("transcluded","Expected 1 .ui-select-match but got '{0}'.",transcludedMatch.length);element.querySelectorAll(".ui-select-match").replaceWith(transcludedMatch);var transcludedChoices=transcluded.querySelectorAll(".ui-select-choices");if(transcludedChoices.removeAttr("ui-select-choices"),transcludedChoices.removeAttr("data-ui-select-choices"),1!==transcludedChoices.length)throw uiSelectMinErr("transcluded","Expected 1 .ui-select-choices but got '{0}'.",transcludedChoices.length);element.querySelectorAll(".ui-select-choices").replaceWith(transcludedChoices);var transcludedNoChoice=transcluded.querySelectorAll(".ui-select-no-choice");transcludedNoChoice.removeAttr("ui-select-no-choice"),transcludedNoChoice.removeAttr("data-ui-select-no-choice"),1==transcludedNoChoice.length&&element.querySelectorAll(".ui-select-no-choice").replaceWith(transcludedNoChoice)});var appendToBody=scope.$eval(attrs.appendToBody);(void 0!==appendToBody?appendToBody:uiSelectConfig.appendToBody)&&(scope.$watch("$select.open",function(isOpen){isOpen?positionDropdown():resetDropdown()}),scope.$on("$destroy",function(){resetDropdown()}));var placeholder=null,originalWidth="",dropdown=null;scope.$watch("$select.open",function(){"auto"!==$select.dropdownPosition&&"up"!==$select.dropdownPosition||scope.calculateDropdownPos()});var setDropdownPosUp=function(offset,offsetDropdown){offset=offset||uisOffset(element),offsetDropdown=offsetDropdown||uisOffset(dropdown),dropdown[0].style.position="absolute",dropdown[0].style.top=-1*offsetDropdown.height+"px",element.addClass("direction-up")},setDropdownPosDown=function(offset,offsetDropdown){element.removeClass("direction-up"),offset=offset||uisOffset(element),offsetDropdown=offsetDropdown||uisOffset(dropdown),dropdown[0].style.position="",dropdown[0].style.top=""},calculateDropdownPosAfterAnimation=function(){$timeout(function(){if("up"===$select.dropdownPosition)setDropdownPosUp();else{element.removeClass("direction-up");var offset=uisOffset(element),offsetDropdown=uisOffset(dropdown),scrollTop=$document[0].documentElement.scrollTop||$document[0].body.scrollTop;offset.top+offset.height+offsetDropdown.height>scrollTop+$document[0].documentElement.clientHeight?setDropdownPosUp(offset,offsetDropdown):setDropdownPosDown(offset,offsetDropdown)}dropdown[0].style.opacity=1})},opened=!1;scope.calculateDropdownPos=function(){if($select.open){if(dropdown=angular.element(element).querySelectorAll(".ui-select-dropdown"),0===dropdown.length)return;if(""!==$select.search||opened||(dropdown[0].style.opacity=0,opened=!0),!uisOffset(dropdown).height&&$select.$animate&&$select.$animate.on&&$select.$animate.enabled(dropdown)){var needsCalculated=!0;$select.$animate.on("enter",dropdown,function(elem,phase){"close"===phase&&needsCalculated&&(calculateDropdownPosAfterAnimation(),needsCalculated=!1)})}else calculateDropdownPosAfterAnimation()}else{if(null===dropdown||0===dropdown.length)return;dropdown[0].style.opacity=0,dropdown[0].style.position="",dropdown[0].style.top="",element.removeClass("direction-up")}}}}}}]),uis.directive("uiSelectMatch",["uiSelectConfig",function(uiSelectConfig){function getAttribute(elem,attribute){return elem[0].hasAttribute(attribute)?elem.attr(attribute):elem[0].hasAttribute("data-"+attribute)?elem.attr("data-"+attribute):elem[0].hasAttribute("x-"+attribute)?elem.attr("x-"+attribute):void 0}return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(tElement){tElement.addClass("ui-select-match");var parent=tElement.parent();return(getAttribute(parent,"theme")||uiSelectConfig.theme)+(angular.isDefined(getAttribute(parent,"multiple"))?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(scope,element,attrs,$select){function setAllowClear(allow){$select.allowClear=!!angular.isDefined(allow)&&(""===allow||"true"===allow.toLowerCase())}$select.lockChoiceExpression=attrs.uiLockChoice,attrs.$observe("placeholder",function(placeholder){$select.placeholder=void 0!==placeholder?placeholder:uiSelectConfig.placeholder}),attrs.$observe("allowClear",setAllowClear),setAllowClear(attrs.allowClear),$select.multiple&&$select.sizeSearchInput()}}}]),uis.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(uiSelectMinErr,$timeout){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function($scope,$timeout){var ngModel,ctrl=this,$select=$scope.$select;angular.isUndefined($select.selected)&&($select.selected=[]),$scope.$evalAsync(function(){ngModel=$scope.ngModel}),ctrl.activeMatchIndex=-1,ctrl.updateModel=function(){ngModel.$setViewValue(Date.now()),ctrl.refreshComponent()},ctrl.refreshComponent=function(){$select.refreshItems&&$select.refreshItems(),$select.sizeSearchInput&&$select.sizeSearchInput()},ctrl.removeChoice=function(index){if($select.isLocked(null,index))return!1;var removedChoice=$select.selected[index],locals={};return locals[$select.parserResult.itemName]=removedChoice,$select.selected.splice(index,1),ctrl.activeMatchIndex=-1,$select.sizeSearchInput(),$timeout(function(){$select.onRemoveCallback($scope,{$item:removedChoice,$model:$select.parserResult.modelMapper($scope,locals)})}),ctrl.updateModel(),!0},ctrl.getPlaceholder=function(){if(!$select.selected||!$select.selected.length)return $select.placeholder}}],controllerAs:"$selectMultiple",link:function(scope,element,attrs,ctrls){function _getCaretPosition(el){return angular.isNumber(el.selectionStart)?el.selectionStart:el.value.length}function _handleMatchSelection(key){var caretPosition=_getCaretPosition($select.searchInput[0]),length=$select.selected.length,last=length-1,curr=$selectMultiple.activeMatchIndex,next=$selectMultiple.activeMatchIndex+1,prev=$selectMultiple.activeMatchIndex-1,newIndex=curr;return!(caretPosition>0||$select.search.length&&key==KEY.RIGHT)&&($select.close(),newIndex=function(){switch(key){case KEY.LEFT:return~$selectMultiple.activeMatchIndex?prev:last;case KEY.RIGHT:return~$selectMultiple.activeMatchIndex&&curr!==last?next:($select.activate(),!1);case KEY.BACKSPACE:return~$selectMultiple.activeMatchIndex?$selectMultiple.removeChoice(curr)?prev:curr:last;case KEY.DELETE:return!!~$selectMultiple.activeMatchIndex&&($selectMultiple.removeChoice($selectMultiple.activeMatchIndex),curr)}}(),$select.selected.length&&!1!==newIndex?$selectMultiple.activeMatchIndex=Math.min(last,Math.max(0,newIndex)):$selectMultiple.activeMatchIndex=-1,!0)}function _findCaseInsensitiveDupe(arr){return void 0!==arr&&void 0!==$select.search&&arr.filter(function(origItem){return void 0!==$select.search.toUpperCase()&&void 0!==origItem&&origItem.toUpperCase()===$select.search.toUpperCase()}).length>0}function _findApproxDupe(haystack,needle){var dupeIndex=-1;if(angular.isArray(haystack))for(var tempArr=angular.copy(haystack),i=0;i<tempArr.length;i++)if(void 0===$select.tagging.fct)tempArr[i]+" "+$select.taggingLabel===needle&&(dupeIndex=i);else{var mockObj=tempArr[i];angular.isObject(mockObj)&&(mockObj.isTag=!0),angular.equals(mockObj,needle)&&(dupeIndex=i)}return dupeIndex}var $select=ctrls[0],ngModel=scope.ngModel=ctrls[1],$selectMultiple=scope.$selectMultiple;$select.multiple=!0,$select.focusInput=$select.searchInput,ngModel.$isEmpty=function(value){return!value||0===value.length},ngModel.$parsers.unshift(function(){for(var result,locals={},resultMultiple=[],j=$select.selected.length-1;j>=0;j--)locals={},locals[$select.parserResult.itemName]=$select.selected[j],result=$select.parserResult.modelMapper(scope,locals),resultMultiple.unshift(result);return resultMultiple}),ngModel.$formatters.unshift(function(inputValue){var result,data=$select.parserResult&&$select.parserResult.source(scope,{$select:{search:""}}),locals={};if(!data)return inputValue;var resultMultiple=[],checkFnMultiple=function(list,value){if(list&&list.length){for(var p=list.length-1;p>=0;p--){if(locals[$select.parserResult.itemName]=list[p],result=$select.parserResult.modelMapper(scope,locals),$select.parserResult.trackByExp){var propsItemNameMatches=/(\w*)\./.exec($select.parserResult.trackByExp),matches=/\.([^\s]+)/.exec($select.parserResult.trackByExp);if(propsItemNameMatches&&propsItemNameMatches.length>0&&propsItemNameMatches[1]==$select.parserResult.itemName&&matches&&matches.length>0&&result[matches[1]]==value[matches[1]])return resultMultiple.unshift(list[p]),!0}if(angular.equals(result,value))return resultMultiple.unshift(list[p]),!0}return!1}};if(!inputValue)return resultMultiple;for(var k=inputValue.length-1;k>=0;k--)checkFnMultiple($select.selected,inputValue[k])||checkFnMultiple(data,inputValue[k])||resultMultiple.unshift(inputValue[k]);return resultMultiple}),scope.$watchCollection(function(){return ngModel.$modelValue},function(newValue,oldValue){oldValue!=newValue&&(angular.isDefined(ngModel.$modelValue)&&(ngModel.$modelValue=null),$selectMultiple.refreshComponent())}),ngModel.$render=function(){if(!angular.isArray(ngModel.$viewValue)){if(!angular.isUndefined(ngModel.$viewValue)&&null!==ngModel.$viewValue)throw uiSelectMinErr("multiarr","Expected model value to be array but got '{0}'",ngModel.$viewValue);ngModel.$viewValue=[]}$select.selected=ngModel.$viewValue,$selectMultiple.refreshComponent(),scope.$evalAsync()},scope.$on("uis:select",function(event,item){$select.selected.length>=$select.limit||($select.selected.push(item),$selectMultiple.updateModel())}),scope.$on("uis:activate",function(){$selectMultiple.activeMatchIndex=-1}),scope.$watch("$select.disabled",function(newValue,oldValue){oldValue&&!newValue&&$select.sizeSearchInput()}),$select.searchInput.on("keydown",function(e){var key=e.which;scope.$apply(function(){var processed=!1;KEY.isHorizontalMovement(key)&&(processed=_handleMatchSelection(key)),processed&&key!=KEY.TAB&&(e.preventDefault(),e.stopPropagation())})}),$select.searchInput.on("keyup",function(e){if(KEY.isVerticalMovement(e.which)||scope.$evalAsync(function(){$select.activeIndex=!1===$select.taggingLabel?-1:0}),$select.tagging.isActivated&&$select.search.length>0){if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC||KEY.isVerticalMovement(e.which))return;if($select.activeIndex=!1===$select.taggingLabel?-1:0,!1===$select.taggingLabel)return;var newItem,item,tagItems,tagItem,items=angular.copy($select.items),stashArr=angular.copy($select.items),hasTag=!1,dupeIndex=-1;if(void 0!==$select.tagging.fct){if(tagItems=$select.$filter("filter")(items,{isTag:!0}),tagItems.length>0&&(tagItem=tagItems[0]),items.length>0&&tagItem&&(hasTag=!0,items=items.slice(1,items.length),stashArr=stashArr.slice(1,stashArr.length)),newItem=$select.tagging.fct($select.search),stashArr.some(function(origItem){return angular.equals(origItem,newItem)})||$select.selected.some(function(origItem){return angular.equals(origItem,newItem)}))return void scope.$evalAsync(function(){$select.activeIndex=0,$select.items=items});newItem&&(newItem.isTag=!0)}else{if(tagItems=$select.$filter("filter")(items,function(item){return item.match($select.taggingLabel)}),tagItems.length>0&&(tagItem=tagItems[0]),item=items[0],void 0!==item&&items.length>0&&tagItem&&(hasTag=!0,items=items.slice(1,items.length),stashArr=stashArr.slice(1,stashArr.length)),newItem=$select.search+" "+$select.taggingLabel,_findApproxDupe($select.selected,$select.search)>-1)return;if(_findCaseInsensitiveDupe(stashArr.concat($select.selected)))return void(hasTag&&(items=stashArr,scope.$evalAsync(function(){$select.activeIndex=0,$select.items=items})));if(_findCaseInsensitiveDupe(stashArr))return void(hasTag&&($select.items=stashArr.slice(1,stashArr.length)))}hasTag&&(dupeIndex=_findApproxDupe($select.selected,newItem)),dupeIndex>-1?items=items.slice(dupeIndex+1,items.length-1):(items=[],newItem&&items.push(newItem),items=items.concat(stashArr)),scope.$evalAsync(function(){if($select.activeIndex=0,$select.items=items,$select.isGrouped){var itemsWithoutTag=newItem?items.slice(1):items;$select.setItemsFn(itemsWithoutTag),newItem&&($select.items.unshift(newItem),$select.groups.unshift({name:"",items:[newItem],tagging:!0}))}})}}),$select.searchInput.on("blur",function(){$timeout(function(){$selectMultiple.activeMatchIndex=-1})})}}}]),uis.directive("uiSelectNoChoice",["uiSelectConfig",function(uiSelectConfig){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(tElement){return tElement.addClass("ui-select-no-choice"),(tElement.parent().attr("theme")||uiSelectConfig.theme)+"/no-choice.tpl.html"}}}]),uis.directive("uiSelectSingle",["$timeout","$compile",function($timeout,$compile){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(scope,element,attrs,ctrls){var $select=ctrls[0],ngModel=ctrls[1];ngModel.$parsers.unshift(function(inputValue){var locals={};return locals[$select.parserResult.itemName]=inputValue,$select.parserResult.modelMapper(scope,locals)}),ngModel.$formatters.unshift(function(inputValue){var result,data=$select.parserResult&&$select.parserResult.source(scope,{$select:{search:""}}),locals={};if(data){var checkFnSingle=function(d){return locals[$select.parserResult.itemName]=d,(result=$select.parserResult.modelMapper(scope,locals))===inputValue};if($select.selected&&checkFnSingle($select.selected))return $select.selected;for(var i=data.length-1;i>=0;i--)if(checkFnSingle(data[i]))return data[i]}return inputValue}),scope.$watch("$select.selected",function(newValue){ngModel.$viewValue!==newValue&&ngModel.$setViewValue(newValue)}),ngModel.$render=function(){$select.selected=ngModel.$viewValue},scope.$on("uis:select",function(event,item){$select.selected=item}),scope.$on("uis:close",function(event,skipFocusser){$timeout(function(){$select.focusser.prop("disabled",!1),skipFocusser||$select.focusser[0].focus()},0,!1)}),scope.$on("uis:activate",function(){focusser.prop("disabled",!0)});var focusser=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");$compile(focusser)(scope),$select.focusser=focusser,$select.focusInput=focusser,element.parent().append(focusser),focusser.bind("focus",function(){scope.$evalAsync(function(){$select.focus=!0})}),focusser.bind("blur",function(){scope.$evalAsync(function(){$select.focus=!1})}),focusser.bind("keydown",function(e){if(e.which===KEY.BACKSPACE)return e.preventDefault(),e.stopPropagation(),$select.select(void 0),void scope.$apply();e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC||(e.which!=KEY.DOWN&&e.which!=KEY.UP&&e.which!=KEY.ENTER&&e.which!=KEY.SPACE||(e.preventDefault(),e.stopPropagation(),$select.activate()),scope.$digest())}),focusser.bind("keyup input",function(e){e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC||e.which==KEY.ENTER||e.which===KEY.BACKSPACE||($select.activate(focusser.val()),focusser.val(""),scope.$digest())})}}}]),uis.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function($timeout,uiSelectConfig,uiSelectMinErr){return{require:["^^uiSelect","^ngModel"],link:function(scope,element,attrs,ctrls){if(null===scope[attrs.uiSelectSort])throw uiSelectMinErr("sort","Expected a list to sort");var $select=ctrls[0],$ngModel=ctrls[1],options=angular.extend({axis:"horizontal"},scope.$eval(attrs.uiSelectSortOptions)),axis=options.axis;scope.$watch(function(){return $select.sortable},function(newValue){newValue?element.attr("draggable",!0):element.removeAttr("draggable")}),element.on("dragstart",function(event){element.addClass("dragging"),(event.dataTransfer||event.originalEvent.dataTransfer).setData("text",scope.$index.toString())}),element.on("dragend",function(){removeClass("dragging")});var dropTimeout,move=function(from,to){this.splice(to,0,this.splice(from,1)[0])},removeClass=function(className){angular.forEach($select.$element.querySelectorAll("."+className),function(el){angular.element(el).removeClass(className)})},dragOverHandler=function(event){event.preventDefault(),("vertical"===axis?event.offsetY||event.layerY||(event.originalEvent?event.originalEvent.offsetY:0):event.offsetX||event.layerX||(event.originalEvent?event.originalEvent.offsetX:0))<this["vertical"===axis?"offsetHeight":"offsetWidth"]/2?(removeClass("dropping-after"),element.addClass("dropping-before")):(removeClass("dropping-before"),element.addClass("dropping-after"))},dropHandler=function(event){event.preventDefault();var droppedItemIndex=parseInt((event.dataTransfer||event.originalEvent.dataTransfer).getData("text"),10);$timeout.cancel(dropTimeout),dropTimeout=$timeout(function(){_dropHandler(droppedItemIndex)},20)},_dropHandler=function(droppedItemIndex){var theList=scope.$eval(attrs.uiSelectSort),itemToMove=theList[droppedItemIndex],newIndex=null;newIndex=element.hasClass("dropping-before")?droppedItemIndex<scope.$index?scope.$index-1:scope.$index:droppedItemIndex<scope.$index?scope.$index:scope.$index+1,move.apply(theList,[droppedItemIndex,newIndex]),$ngModel.$setViewValue(Date.now()),scope.$apply(function(){scope.$emit("uiSelectSort:change",{array:theList,item:itemToMove,from:droppedItemIndex,to:newIndex})}),removeClass("dropping"),removeClass("dropping-before"),removeClass("dropping-after"),element.off("drop",dropHandler)};element.on("dragenter",function(){element.hasClass("dragging")||(element.addClass("dropping"),element.on("dragover",dragOverHandler),element.on("drop",dropHandler))}),element.on("dragleave",function(event){event.target==element&&(removeClass("dropping"),removeClass("dropping-before"),removeClass("dropping-after"),element.off("dragover",dragOverHandler),element.off("drop",dropHandler))})}}}]),uis.factory("$$uisDebounce",["$timeout",function($timeout){return function(callback,debounceTime){var timeoutPromise;return function(){var self=this,args=Array.prototype.slice.call(arguments);timeoutPromise&&$timeout.cancel(timeoutPromise),timeoutPromise=$timeout(function(){callback.apply(self,args)},debounceTime)}}}]),uis.directive("uisOpenClose",["$parse","$timeout",function($parse,$timeout){return{restrict:"A",require:"uiSelect",link:function(scope,element,attrs,$select){$select.onOpenCloseCallback=$parse(attrs.uisOpenClose),scope.$watch("$select.open",function(isOpen,previousState){isOpen!==previousState&&$timeout(function(){$select.onOpenCloseCallback(scope,{isOpen:isOpen})})})}}}]),uis.service("uisRepeatParser",["uiSelectMinErr","$parse",function(uiSelectMinErr,$parse){var self=this;self.parse=function(expression){var match;if(!(match=expression.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/)))throw uiSelectMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var source=match[5],filters="";if(match[3]){source=match[5].replace(/(^\()|(\)$)/g,"");var filterMatch=match[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);filterMatch&&filterMatch[1].trim()&&(filters=filterMatch[1],source=source.replace(filters,""))}return{itemName:match[4]||match[2],keyName:match[3],source:$parse(source),filters:filters,trackByExp:match[6],modelMapper:$parse(match[1]||match[4]||match[2]),repeatExpression:function(grouped){var expression=this.itemName+" in "+(grouped?"$group.items":"$select.items");return this.trackByExp&&(expression+=" track by "+this.trackByExp),expression}}},self.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])}(),angular.module("ui.select").run(["$templateCache",function($templateCache){$templateCache.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" role="listbox" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"></span></div></li></ul>'),$templateCache.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),$templateCache.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),$templateCache.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""></li></ul>'),$templateCache.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),$templateCache.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),
$templateCache.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),$templateCache.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),$templateCache.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),$templateCache.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),$templateCache.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"></div></div></div>'),$templateCache.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div></div>'),$templateCache.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),$templateCache.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""></span></div>'),$templateCache.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),$templateCache.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>')}]);var flixApp=angular.module("flixApp",["ngAnimate","ui.bootstrap","ngCookies","ngTouch","ngSanitize","ngIframeResizer","ui.select","angularWidget"]);flixApp.run(["$anchorScroll","$rootScope",function($anchorScroll,$rootScope){$anchorScroll.yOffset=60}]),flixApp.config(function($interpolateProvider){$interpolateProvider.startSymbol("").endSymbol("")});var IMAGES_CDN="https://cdn.flixbus.de/assets/images-20180806";flixApp.controller("AppOverlayCtrl",["$scope","$window","UserAgentSvc","CookieSvc","OverlaySvc",function($scope,$window,UserAgentSvc,CookieSvc){$scope.showAppOverlay=function(){return!!UserAgentSvc.isMobile()&&0==CookieSvc.getCookieValue("appOverlay")}(),$scope.closeAppOverlay=function(){CookieSvc.setDomainCookie("appOverlay",!0,7),$scope.showAppOverlay=!1}}]),function(){function BusConnectionMapSearchController(BusConnectionMapService,$scope){BusConnectionMapService.initSearch(),$scope.citiesSelected=BusConnectionMapService.getSelectedCities(),$scope.rotateIcon=!1,$scope.selectDepartureString=BusConnectionMapService.t("Select_a_departure_by_clicking_on_the_pin_(Bus_Connection_Map)"),$scope.getConnectionShopUrl=BusConnectionMapService.getConnectionShopUrl,$scope.getConnectionMinPriceBookNowString=BusConnectionMapService.getConnectionMinPriceBookNowString,$scope.startUpdated=function(deselectDestination){BusConnectionMapService.setSelectedCities($scope.citiesSelected.start,"start")},$scope.destUpdated=function(){BusConnectionMapService.setSelectedCities($scope.citiesSelected.dest,"dest")},$scope.switchClicked=function(){if($scope.citiesSelected.isStartSelected&&$scope.citiesSelected.isDestSelected){var tmpStart=$scope.citiesSelected.start;BusConnectionMapService.setSelectedCities($scope.citiesSelected.dest,"start"),BusConnectionMapService.setSelectedCities(tmpStart,"dest"),$scope.rotateIcon=!$scope.rotateIcon}},$scope.resetClicked=function(){BusConnectionMapService.deselectCities()},$scope.objectToArray=function(citiesAsObject){return Object.keys(citiesAsObject).map(function(key){return citiesAsObject[key]})}}angular.module("flixApp").controller("BusConnectionMapSearchController",BusConnectionMapSearchController),BusConnectionMapSearchController.$inject=["BusConnectionMapService","$scope"]}(),function(){function BusConnectionMapController($element,$attrs,BusConnectionMapService){BusConnectionMapService.initMap($element[0])}angular.module("flixApp").controller("BusConnectionMapController",BusConnectionMapController),BusConnectionMapController.$inject=["$element","$attrs","BusConnectionMapService"]}(),function(){function BusConnectionMapService($window,$timeout,FormatPriceService){function getSelectedCities(){return selectedCities}function setSelectedCities(cityId,type){selectedCities[type]=cityId,"start"===type?null==cityId?(selectedCities.isStartSelected=!1,selectedCities.destCities=getCities()):(selectedCities.isStartSelected=!0,selectedCities.destCities=getReachableCities(cityId)):"dest"===type&&(selectedCities.isDestSelected=null!=cityId),createConnectionLine()}function getCities(){return cities||null}function getReachableCities(id){var cities=getCities(),reachableCities=new Object;for(var key in cities)Object.keys(connections[id]).indexOf(key)>-1&&(reachableCities[key]=cities[key]);return reachableCities=Object.keys(reachableCities).map(function(key){return reachableCities[key]})}function deselectCities(){setSelectedCities(null,"start"),setSelectedCities(null,"dest"),selectCityBehaviourFunction(null)()}function getConnectionMinPriceString(startCityId,destinationCityId){return translateMinPrice(minPriceTemplate,startCityId,destinationCityId)}function getConnectionMinPriceBookNowString(startCityId,destinationCityId){return translateMinPrice(minPriceBookNowTemplate,startCityId,destinationCityId)}function getConnectionShopUrl(){return getSelectedCities().start&&getSelectedCities().dest&&void 0!==$window.domain_data.shop_search_url?$window.domain_data.shop_search_url.replace("departureCity=","departureCity="+getSelectedCities().start).replace("arrivalCity=","arrivalCity="+getSelectedCities().dest):""}function initMap(domElement){var centerLat=$window.domain_data.latitude,centerLon=$window.domain_data.longitude,initZoom=$window.domain_data.zoom;domElement.style.display="none",map=L.map(domElement,{center:[centerLat,centerLon],zoom:initZoom,maxZoom:9,minZoom:3}),L.tileLayer(tileServer,{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}).addTo(map),map.setMaxBounds(L.latLngBounds([-90,-180],[90,180])),minPriceBookNowTemplate=t("Book_now_from_[frontend:min_price_connection_map]_(Bus_Connection_Map)"),minPriceTemplate=t("From_[frontend:min_price_connection_map]_(Bus_Connection_Map)"),initAddCitiesToMap(),connectionLine.addTo(map),map.on("zoomend",function(){map.getZoom()>=9&&setMarkerIconAndLabelsForAllCities()}),setMarkerIconAndLabelsForAllCities(),domElement.style.display="",map.invalidateSize(!0)}function initSearch(){selectedCities.startCities=getCities(),selectedCities.destCities=getCities()}function importGlobalMapData(){cities={},angular.forEach($window.flixMapData.city_entities,function(v){cities[Number(v.id)]=v,cities[Number(v.id)].id=Number(v.id),cities[Number(v.id)].lat=Number(v.lat),cities[Number(v.id)].lon=Number(v.lon)}),delete $window.flixMapData.city_entities,connections={},angular.forEach($window.flixMapData.min_price_connections,function(v,city1_id){angular.forEach(v,function(minPrice,city2_id){void 0===connections[Number(city1_id)]&&(connections[Number(city1_id)]={}),void 0===connections[Number(city2_id)]&&(connections[Number(city2_id)]={}),isNaN(minPrice)||(connections[Number(city1_id)][Number(city2_id)]=minPrice,connections[Number(city2_id)][Number(city1_id)]=minPrice)})}),delete $window.flixMapData.min_price_connections}function initAddCitiesToMap(){cityMarkers={},angular.forEach(cities,function(city,id){cityMarkers[id]=initAddCityMarkerToMap(city)})}function initAddCityMarkerToMap(city){var markerOptions={icon:iconCityBig},marker=L.marker([city.lat,city.lon],markerOptions);return marker.on("mouseover",function(labelMarker,city){return function(){city.id!=getSelectedCities().start&&city.id!=getSelectedCities().dest&&labelMarker.openTooltip()}}(marker,city)),marker.on("mouseout",function(labelMarker,city){return function(){city.id!=getSelectedCities().start&&city.id!=getSelectedCities().dest&&labelMarker.closeTooltip()}}(marker,city)),marker.bindTooltip(city.name,{direction:"bottom",opacity:.9,permanent:!0}),marker.on("click",selectCityBehaviourFunction(city)),marker.addTo(map),marker}function setMarkerIconAndLabelsForAllCities(){angular.forEach(cities,function(city,id){setMarkerIconAndLabel(city,getSelectedCities().start,getSelectedCities().dest)})}function setMarkerIconAndLabel(city,startCityId,destCityId){var marker=cityMarkers[city.id];return startCityId==city.id||destCityId==city.id?(marker.setIcon(iconCityBigSelected),marker.openTooltip(),void(L.DomUtil.hasClass(marker._icon,"marker-hidden")&&L.DomUtil.removeClass(marker._icon,"marker-hidden"))):(marker.closeTooltip(),startCityId&&void 0===connections[startCityId][city.id]?void(L.DomUtil.hasClass(marker._icon,"marker-hidden")||L.DomUtil.addClass(marker._icon,"marker-hidden")):(L.DomUtil.hasClass(marker._icon,"marker-hidden")&&L.DomUtil.removeClass(marker._icon,"marker-hidden"),void("big"===getIconTypeForZoom(city)?"big"!==marker.options.icon.options.city&&marker.setIcon(iconCityBig):"small"!==marker.options.icon.options.city&&marker.setIcon(iconCitySmall))))}function getIconTypeForZoom(city){var zoom=map.getZoom();return zoom<=6?"A"==city.class?"big":"small":zoom>6&&zoom<=8?"A"==city.class||"B"==city.class?"big":"small":"big"}function selectCityBehaviourFunction(city){var selectedCityId=city&&city.id?city.id:null;return function(){selectedCityId==getSelectedCities().start?(setSelectedCities(null,"start"),setSelectedCities(null,"dest")):getSelectedCities().start>0&&selectedCityId!=getSelectedCities().start?getSelectedCities().dest==selectedCityId?(setSelectedCities(null,"dest"),connectionLine.setLatLngs([])):setSelectedCities(selectedCityId,"dest"):setSelectedCities(selectedCityId,"start")}}function createConnectionLine(){getSelectedCities().start>0&&getSelectedCities().dest?(connectionLine.setLatLngs([[cities[getSelectedCities().start].lat,cities[getSelectedCities().start].lon],[cities[getSelectedCities().dest].lat,cities[getSelectedCities().dest].lon]]),connectionLine.addTo(map)):connectionLine&&connectionLine.remove(),$timeout(function(){setMarkerIconAndLabelsForAllCities()})}function translateMinPrice(template,startCityId,destinationCityId){var price;return startCityId=startCityId||getSelectedCities().start,destinationCityId=destinationCityId||getSelectedCities().dest,startCityId&&destinationCityId?(price=void 0!==connections[startCityId][destinationCityId]?connections[startCityId][destinationCityId]:null,price=price?template.replace("[frontend:min_price_connection_map]",FormatPriceService.formatPrice(price)):t("Book_now")):""}function t(key){return void 0!==$window.domain_data.translations[key]?$window.domain_data.translations[key]:key}if("de-at"==$window.domain_data.langcode&&"flixbus"==$window.domain_data.type)var tileServer="https://osm.flixcdn.net/8c3b391324ce471bb3de8bf1a4edd8d1/{z}/{x}/{y}.png";else var tileServer="https://d3jqyliq0niogv.cloudfront.net/{z}/{x}/{y}.png";this.initMap=initMap,this.initSearch=initSearch,this.getConnectionMinPriceString=getConnectionMinPriceString,this.getConnectionMinPriceBookNowString=getConnectionMinPriceBookNowString,this.getConnectionShopUrl=getConnectionShopUrl,this.getSelectedCities=getSelectedCities,this.setSelectedCities=setSelectedCities,this.deselectCities=deselectCities,this.t=t;var map,cities,connections,cityMarkers,minPriceTemplate,minPriceBookNowTemplate,selectedCities={start:null,dest:null,isStartSelected:!1,isDestSelected:!1,startCities:null,destCities:null},connectionLine=L.polyline([],{color:"#FFA500",opacity:1,weight:3}),iconCityBig=L.icon({iconUrl:IMAGES_CDN+"/marker_clusterer/map-picker-green@2x.png",iconSize:[30,35],iconAnchor:[15,35],city:"big"}),iconCitySmall=L.icon({iconUrl:IMAGES_CDN+"/marker_clusterer/map-picker-green@2x.png",iconSize:[14,17],iconAnchor:[7,17],city:"small"}),iconCityBigSelected=L.icon({iconUrl:IMAGES_CDN+"/marker_clusterer/map-picker-active@2x.png",iconSize:[30,35],iconAnchor:[15,35],city:"selected"});!function(){importGlobalMapData()}()}angular.module("flixApp").service("BusConnectionMapService",BusConnectionMapService),BusConnectionMapService.$inject=["$window","$timeout","FormatPriceService"]}(),flixApp.controller("BusPartnerCtrl",["$scope","$http",function($scope,$http){$scope.partners=[];var status="LOADING";$http.get("/api/bus_partner").then(function(result){$scope.partners=result.data,status="READY"}),$scope.isLoading=function(){return"LOADING"===status},$scope.isReady=function(){return"READY"===status}}]),function(){flixApp.controller("BusScheduleFinderController",["$scope","$log","$http","$window","$q","orderByFilter","BusScheduleFinderService","FormatPriceService","DateTimeService","DropdownService","PriceAtBusSvc",function($scope,$log,$http,$window,$q,orderByFilter,BusScheduleFinderService,FormatPriceService,DateTimeService,DropdownService,PriceAtBusSvc){function select(item,from_to){if(item||"from"!=from_to||(item=$scope.selected[from_to]),$scope.selected[from_to].id=item.id,$scope.selected[from_to].name=item.name,$scope.selected[from_to].city_id=item.city_id,$scope.selected.to.id&&$scope.selected.from.id)if(bus_schedule_page)$scope.loadingSchedules=0,BusScheduleFinderService.getScheduleByCities($scope.selected.from.city_id,$scope.selected.to.city_id,domain_data.default_currency,domain_data.langcode).then(function(response){$scope.schedules[0]=[],angular.forEach(response.data,function(schedule){schedule.departure_station.id==$scope.selected.from.id&&schedule.arrival_station.id==$scope.selected.to.id&&$scope.schedules[0].push(schedule)}),$scope.loadingSchedules+=1,2==$scope.loadingSchedules&&($scope.loadingSchedules=!1)}),BusScheduleFinderService.getScheduleByCities($scope.selected.to.city_id,$scope.selected.from.city_id,domain_data.default_currency,domain_data.langcode).then(function(response){$scope.schedules[1]=[],angular.forEach(response.data,function(schedule){schedule.departure_station.id==$scope.selected.to.id&&schedule.arrival_station.id==$scope.selected.from.id&&$scope.schedules[1].push(schedule)}),$scope.loadingSchedules+=1,2==$scope.loadingSchedules&&($scope.loadingSchedules=!1)});else{var domainCurrency=domain_data.default_currency;PriceAtBusSvc.getPriceAtBus($scope.selected.from.id,$scope.selected.to.id,domainCurrency).then(function(data){$scope.getPriceAtBus=data&&""!==data?data:""})}1==bus_schedule_page&&"from"==from_to&&($scope.selected.to={},updateToStopsOnSchedulePages(item)),"from"==from_to&&0==bus_schedule_page&&($scope.priceAtTheBus="",updateToStopsOnConnectionPages())}function updateFromStopsOnConnectionPages(){var reachableStops={};angular.forEach(fromStops,function(fromStop,key){reachableStops[key]={},angular.forEach($scope.schedules,function(schedule){angular.forEach(schedule,function(connection){fromStop.id==connection.departure_station.id&&(reachableStops[key][connection.departure_station.id]=!0)})})}),angular.forEach(fromStops,function(from_stop,key){angular.equals(reachableStops[key],{})&&(fromStops[key].visible=!1)})}function updateToStopsOnConnectionPages(){var fromId=$scope.selected.from.id,reachableStops={};angular.equals($scope.schedules,{})||(angular.forEach($scope.schedules,function(schedule){angular.forEach(schedule,function(connection){connection.departure_station.id==fromId&&(reachableStops[connection.arrival_station.id]=!0)})}),angular.forEach(toStops,function(to_stop,key){toStops[key].visible=1==reachableStops[to_stop.id]}))}function getAllToStopsForSchedulePages(fromStops,selectedFromStop){toStops=[];var promises=[];stopsForSchedulePagesAlreadyLoaded||(angular.forEach(fromStops,function(fromStop){activeConnectiosnForSchedulePages[fromStop.id]=[];var promise=$http.get("/rest/flix/get_stops_for_stop?_format=json&stop_id="+fromStop.id+"&langcode="+domain_data.langcode).then(function(data){angular.forEach(data.data,function(stopData){toStops.some(function(reachableStop){return reachableStop.id===stopData.id})?activeConnectiosnForSchedulePages[fromStop.id].push(stopData.id):(activeConnectiosnForSchedulePages[fromStop.id].push(stopData.id),toStops.push(stopData))})});promises.push(promise)}),$q.all(promises).then(function(){updateToStopsOnSchedulePages(selectedFromStop)}),toStops=orderByFilter(toStops,"name",!1),stopsForSchedulePagesAlreadyLoaded=!0)}function updateToStopsOnSchedulePages(selectedFromStop){angular.forEach(toStops,function(stop){activeConnectiosnForSchedulePages[selectedFromStop.id].some(function(reachableStop){return reachableStop==stop.id})?stop.visible=!0:stop.visible=!1}),$scope.loading=!1}function loadSchedulesByCities(from,to){$scope.loading=0,BusScheduleFinderService.getScheduleByCities(from,to,domain_data.default_currency,domain_data.langcode).then(function(response){$scope.schedules[0]=response.data,$scope.loading+=1,2==$scope.loading&&(updateToStopsOnConnectionPages(),updateFromStopsOnConnectionPages(),$scope.loading=!1)}),BusScheduleFinderService.getScheduleByCities(to,from,domain_data.default_currency,domain_data.langcode).then(function(response){$scope.schedules[1]=response.data,$scope.loading+=1,2==$scope.loading&&(updateToStopsOnConnectionPages(),updateFromStopsOnConnectionPages(),$scope.loading=!1)})}var domain_data=$window.domain_data,bus_schedule_page=!1,fromStops={},toStops={},activeConnectiosnForSchedulePages={},stopsForSchedulePagesAlreadyLoaded=!1;$scope.getShopLinkForTrip=BusScheduleFinderService.getShopLinkForTrip,$scope.getWeekdayString=BusScheduleFinderService.getWeekdayString,$scope.formatPrice=FormatPriceService.formatPrice,$scope.formatDate=DateTimeService.formatDate,$scope.formatTimeFilter=DateTimeService.formatTimeFilter,$scope.formatDuration=DateTimeService.formatDuration,$scope.schedules={},$scope.getPriceAtBus="",$scope.loading=!1,$scope.loadingSchedules=!1,$scope.selected={from:{},to:{}},$scope.selected_weekdays={1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0},$scope.inputValues={from:"",to:""},DropdownService.subscribeToChangesFromDirective($scope,function(eventName,key){select(DropdownService.getSelected()[key],key)}),$scope.getFilteredConnections=function(connections,selected_weekdays){var result=[],countConnections=0;return angular.forEach(connections,function(connection){var already_added=!1,matchesSelected={from:!1,to:!1};angular.forEach(connection.weekdays,function(connection_weekday){!1===already_added&&!0===selected_weekdays[connection_weekday]&&(angular.forEach($scope.selected,function(selected,from_to){null!=selected&&(selected.id!=connection.arrival_station.id&&selected.id!=connection.departure_station.id||(countConnections+=1,matchesSelected[from_to]=!0))}),matchesSelected.from&&matchesSelected.to&&(result.push(connection),already_added=!0))})}),$scope.countConnections=countConnections,result},$scope.toggleAllWeekdays=function(event){event.target.checked?angular.forEach($scope.selected_weekdays,function(selected_weekday,key){$scope.selected_weekdays[key]=!0}):angular.forEach($scope.selected_weekdays,function(selected_weekday,key){$scope.selected_weekdays[key]=!1})},$scope.toogleStatus=function(event){var allChecked=!0;event.target.checked?(angular.forEach($scope.selected_weekdays,function(selected_weekday,key){8!=key&&!1===$scope.selected_weekdays[key]&&(allChecked=!1)}),1==allChecked&&($scope.selected_weekdays[8]=!0)):$scope.selected_weekdays[8]=!1},$scope.init=function(fromStopsList,toStopsList,fromCity,toCity){fromStops=fromStopsList,toStops=toStopsList,fromCity&&toCity?loadSchedulesByCities(fromCity,toCity):fromCity&&(getAllToStopsForSchedulePages(fromStops,fromStops[0]),bus_schedule_page=!0),DropdownService.setDropdownList(fromStops,"from"),DropdownService.setDropdownList(toStops,"to")}}])}(),function(){flixApp.directive("busScheduleFinder",function(){return{restrict:"E",controller:"BusScheduleFinderController",scope:{from:"@",to:"@",schedules:"=",selected:"=",fromStops:"=",toStops:"=",loading:"=",isSelected:"&",getShopLinkForTrip:"&",goesOnSelectedWeekDays:"&",toggleAllWeekdays:"&",checkWeekdayAvailability:"&",getFilteredConnections:"&",getTranslatedWeekdayShort:"&",clickConnection:"&",getWeekdayString:"&",getPriceAtBus:"=getPriceAtBus",countConnections:"=countConnections"}}})}(),function(){flixApp.factory("BusScheduleFinderService",function($http,DateTimeService,$window){return{getShopLinkForTrip:function(departure_station_id,arrival_station_id){return $window.domain_data.shop_search_url.split("/search")[0]+"/search?departureStation="+departure_station_id+"&arrivalStation="+arrival_station_id+"&_locale="+$window.domain_data.langcode},getWeekdayString:function(weekdays){var _temp=[],groups=[];angular.forEach(weekdays,function(weekday){var last_weekday=_temp[_temp.length-1];!(_temp.length>0&&parseInt(last_weekday)+1==weekday)&&_temp.length>0&&(groups.push(_temp),_temp=[]),_temp.push(weekday)}),groups.push(_temp);var result_string="",short_weekday_array=DateTimeService.getShortWeekdayArray();return angular.forEach(groups,function(group,group_index){if(group.length>2){var short_weekday_start=short_weekday_array[group[0]],short_weekday_end=short_weekday_array[group[group.length-1]];result_string+=$window.domain_data.translations[short_weekday_start]+"-"+$window.domain_data.translations[short_weekday_end]}else angular.forEach(group,function(day,index){var short_weekday=short_weekday_array[day];result_string+=$window.domain_data.translations[short_weekday],index!=group.length-1&&(result_string+=", ")});group_index!=groups.length-1&&(result_string+=", ")}),result_string},getScheduleByCities:function(from,to,currency,langcode){var url="/getSmallScheduleForStops?from="+from+"&to="+to+"&currency="+currency+"&langcode="+langcode;return $http.get(url)}}})}(),flixApp.controller("ConnectionController",function($scope,$http,$window){$scope.clickConnection=function(){if($scope.isCollapsed=!$scope.isCollapsed,void 0===$scope.details){var url="/public/v1/trips/"+$scope.connection.uid+"/info",req={method:"GET",url:url,headers:{"Accept-Language":$window.domain_data.langcode+",en;q=0.5"}};$http(req).then(function(response){$scope.details=response.data})}},$scope.fullDetailsCollapsed=!1}),flixApp.factory("PriceAtBusSvc",function($http){return{getPriceAtBus:function(stopFrom,stopTo,domainCurrency){return $http({method:"GET",url:"/rest/flix/flix_prices/54/"+domainCurrency+"/"+stopFrom+"/"+stopTo}).then(function(response){return!(!response.data.value||void 0===response.data.value)&&response.data.value},function(response){return!1})}}}),flixApp.controller("BusStopMapCtrl",["$scope","BusStopOverviewMapSvc","DateTimeService",function($scope,BusStopOverviewMapSvc,DateTimeService){var marker_icon,active_marker_icon,version_marker_icon,map,max_zoom_level;$scope.markers={},$scope.version_markers={},$scope.selected_marker=0,$scope.formatDate=DateTimeService.formatDate,$scope.formatTime=DateTimeService.formatTime,$scope.formatDuration=DateTimeService.formatDuration,$scope.init=function(city_slug,city_latitude,city_longitude,init_max_zoom_level){var mapElementId="bus-stop-overview-map-"+city_slug;marker_icon=BusStopOverviewMapSvc.createMarkerImage(IMAGES_CDN+"/marker_clusterer/map-picker-green@2x.png",25,30,12,30),active_marker_icon=BusStopOverviewMapSvc.createMarkerImage(IMAGES_CDN+"/marker_clusterer/map-picker-active@2x.png",25,30,12,30),version_marker_icon=BusStopOverviewMapSvc.createMarkerImage(IMAGES_CDN+"/marker_clusterer/map-picker-relocated@2x.png",25,30,12,30),max_zoom_level=init_max_zoom_level>0?init_max_zoom_level:13,map=BusStopOverviewMapSvc.createMap(mapElementId,city_latitude,city_longitude,max_zoom_level),BusStopOverviewMapSvc.createTileLayer(map),map.scrollWheelZoom.disable(),map.setMaxBounds(L.latLngBounds([-90,-180],[90,180]))};var resizeMap=function(){var latLngBounds;Object.keys($scope.markers).length>1?(latLngBounds=BusStopOverviewMapSvc.getLatLngBounds($scope.markers),map.fitBounds(latLngBounds)):(map.panTo($scope.markers[Object.keys($scope.markers)[0]].getLatLng()),map.setZoom(parseInt(max_zoom_level)))};$scope.createMapMarker=function(stop_id,latitude,longitude,version){var marker;return version?(marker=BusStopOverviewMapSvc.createMarker(latitude,longitude,map,version_marker_icon),BusStopOverviewMapSvc.toogleMarkerVisibility(map,marker,!1),$scope.version_markers[stop_id]||($scope.version_markers[stop_id]=[]),$scope.version_markers[stop_id].push(marker)):(marker=BusStopOverviewMapSvc.createMarker(latitude,longitude,map,marker_icon),$scope.markers[stop_id]=marker,resizeMap()),1==Object.keys($scope.markers).length&&$scope.updateMapMarker(stop_id),marker},$scope.updateMapMarker=function(stop_id){$scope.selected_marker=stop_id,angular.forEach($scope.markers,function(marker,stop_id){marker.setIcon(marker_icon),$scope.version_markers[stop_id]&&angular.forEach($scope.version_markers[stop_id],function(version_marker){BusStopOverviewMapSvc.toogleMarkerVisibility(map,version_marker,!1)})}),$scope.markers[stop_id].setIcon(active_marker_icon),map.flyTo($scope.markers[stop_id].getLatLng()),$scope.version_markers[stop_id]&&angular.forEach($scope.version_markers[stop_id],function(version_marker){BusStopOverviewMapSvc.toogleMarkerVisibility(map,version_marker,!0)})},$scope.addListenerToMarker=function(marker){}}]),flixApp.factory("BusStopOverviewMapSvc",function($window){function getOverlayView(){return new google.maps.OverlayView}function createMapOptions(zoom,center){return center||(center=new google.maps.LatLng(0,0)),{zoom:zoom,center:center,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,streetViewControl:!1}}function createMap(elementId,latitude,longitude,zoomLevel){return L.map(elementId,{minZoom:1}).setView([latitude,longitude],zoomLevel)}function createTileLayer(mapObj){L.tileLayer(tileServer,{maxZoom:maxZoom,attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}).addTo(mapObj)}function getLatLngBounds(markers){var featureGroup=new L.featureGroup;return angular.forEach(markers,function(marker){marker.addTo(featureGroup)}),featureGroup.getBounds()}function createMarker(lat,lng,map,icon){return L.marker([lat,lng],{icon:icon}).addTo(map)}function createMarkerImage(path,width,height,anchorX,anchorY){return L.icon({iconUrl:path,iconSize:[width,height],iconAnchor:[anchorX,anchorY]})}function toogleMarkerVisibility(mapObj,marker,showMarker){showMarker?mapObj.addLayer(marker):mapObj.removeLayer(marker)}function getMaxBounds(markers){var minLat=91,maxLat=-91,minLon=181,maxLon=-181;return angular.forEach(markers,function(marker){minLat=marker.getLatLng().lat<minLat?marker.getLatLng().lat:minLat,maxLat=marker.getLatLng().lat>maxLat?marker.getLatLng().lat:maxLat,minLon=marker.getLatLng().lng<minLon?marker.getLatLng().lng:minLon,maxLon=marker.getLatLng().lng>minLon?marker.getLatLng().lng:maxLon}),
[new L.LatLng(minLat,minLon),new L.LatLng(maxLat,maxLon)]}if("de-at"==$window.domain_data.langcode&&"flixbus"==$window.domain_data.type)var tileServer="https://osm.flixcdn.net/8c3b391324ce471bb3de8bf1a4edd8d1/{z}/{x}/{y}.png";else var tileServer="https://d3jqyliq0niogv.cloudfront.net/{z}/{x}/{y}.png";var maxZoom=20;return{getOverlayView:getOverlayView,createMapOptions:createMapOptions,createMap:createMap,createTileLayer:createTileLayer,getLatLngBounds:getLatLngBounds,createMarker:createMarker,createMarkerImage:createMarkerImage,toogleMarkerVisibility:toogleMarkerVisibility,getMaxBounds:getMaxBounds}}),flixApp.factory("BusStopOverviewSvc",function($http){function formatDate(date,option){function addZ(n){return n<10?"0"+n:""+n}var year=date.getFullYear();return"+1 year"===option&&year++,year+"-"+addZ(date.getMonth()+1)+"-"+addZ(date.getDate())}function getCityPageRequestUrl(city_slug){var date=new Date;return"/api/city/citypage.json?slug="+city_slug+"&dateFrom="+formatDate(date)+"&dateTo="+formatDate(date,"+1 year")}function getCityPage(url,langcode){return $http.get(url+"&langcode="+langcode,{cache:!0})}return{getCityPageRequestUrl:getCityPageRequestUrl,getCityPage:getCityPage}}),flixApp.controller("BusStopCtrl",["$scope","$sce","BusStopOverviewSvc",function($scope,$sce,BusStopOverviewSvc){var stop_id;$scope.init=function(init_stop_id,city_slug,stop_latitude,stop_longitude,langcode){stop_id=init_stop_id,createMapMarker(stop_latitude,stop_longitude,!1).on("click",function(){mapMarkerListener()});var cityPageRequestUrl=BusStopOverviewSvc.getCityPageRequestUrl(city_slug);BusStopOverviewSvc.getCityPage(cityPageRequestUrl,langcode).then(function(response){"object"==typeof response.data&&response.data.hasOwnProperty("stops")&&response.data.stops[stop_id]&&(setStopVersions(response.data.stops[stop_id]),setStopDescription(response.data.stops[stop_id]))})};var setStopVersions=function(stop){stop.hasOwnProperty("versions")&&($scope.versions=stop.versions,angular.forEach($scope.versions,function(version){version.description&&(version.description=getTrustedHtml(version.description)),createMapMarker(version.gmapParams.latitude,version.gmapParams.longitude,!0)}))},setStopDescription=function(stop){stop.hasOwnProperty("description")&&($scope.description=getTrustedHtml(stop.description))};$scope.isActive=function(){return $scope.$parent.selected_marker===stop_id};var createMapMarker=function(latitude,longitude,is_version){return $scope.$parent.createMapMarker(stop_id,latitude,longitude,is_version)},getTrustedHtml=function(data){return data&&(data=data.replace(/<!--.*?-->/g,"").replace(/(<[^>]*>|&nbsp;)/gi,"")),$sce.trustAsHtml(data)},mapMarkerListener=function(){$scope.$apply(function(){$scope.busStopListener()})};$scope.busStopListener=function(){$scope.$parent.updateMapMarker(stop_id)}}]),flixApp.service("anchorSmoothScroll",function($document,$window){function getCurrentPagePosition(window,document){return window.pageYOffset?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function getElementY(document,element){for(var y=element.offsetTop,node=element;node.offsetParent&&node.offsetParent!=document.body;)node=node.offsetParent,y+=node.offsetTop;return y-60}var document=$document[0],window=$window;this.scrollDown=function(startY,stopY,speed,distance){for(var timer=0,step=Math.round(distance/25),leapY=startY+step,i=startY;i<stopY;i+=step)setTimeout("window.scrollTo(0, "+leapY+")",timer*speed),leapY+=step,leapY>stopY&&(leapY=stopY),timer++},this.scrollUp=function(startY,stopY,speed,distance){for(var timer=0,step=Math.round(distance/25),leapY=startY-step,i=startY;i>stopY;i-=step)setTimeout("window.scrollTo(0, "+leapY+")",timer*speed),leapY-=step,leapY<stopY&&(leapY=stopY),timer++},this.scrollToTop=function(stopY){scrollTo(0,stopY)},this.scrollTo=function(elementId,speed){var element=document.getElementById(elementId);if(element){var startY=getCurrentPagePosition(window,document),stopY=getElementY(document,element),distance=stopY>startY?stopY-startY:startY-stopY;if(distance<100)this.scrollToTop(stopY);else{var defaultSpeed=Math.round(distance/100);speed=speed||(defaultSpeed>20?20:defaultSpeed),stopY>startY?this.scrollDown(startY,stopY,speed,distance):this.scrollUp(startY,stopY,speed,distance)}}}}),flixApp.controller("CollapseCtrl",["$rootScope","$scope","anchorSmoothScroll","$anchorScroll","OverlaySvc",function($rootScope,$scope,anchorSmoothScroll,$anchorScroll,OverlaySvc){$scope.isNavCollapsed=!0,$scope.isCollapsed=!1,$scope.isCollapsedHorizontal=!1,$scope.isClosed=!0;var mainMenuIsOpen=!1,faqIsOpen=!1;$rootScope.$on("mainNav",function(){mainMenuIsOpen&&$scope.mainNavClose()}),$rootScope.$on("dynamicFaq",function(){faqIsOpen=!1}),$scope.mainNavOpen=function(){0==mainMenuIsOpen&&(faqIsOpen&&OverlaySvc.setOverlay("dynamicFaq"),OverlaySvc.setOverlay("mainNav"),$scope.isCollapsedHorizontal=!0,mainMenuIsOpen=!0,OverlaySvc.setOverflowHidden(!0))},$scope.mainNavClose=function(){mainMenuIsOpen=!1,OverlaySvc.setOverlay("mainNav"),$scope.isCollapsedHorizontal=!1,faqIsOpen||OverlaySvc.setOverflowHidden(!1)},$scope.faqLoad=function(){$anchorScroll(),faqIsOpen||(OverlaySvc.setOverlay("dynamicFaq"),OverlaySvc.setOverflowHidden(!0)),faqIsOpen=!0},$scope.gotoElement=function(eID){anchorSmoothScroll.scrollTo(eID)}}]),flixApp.controller("DropdownCtrl",function($scope){$scope.status={isopen:!1},$scope.toggleDropdown=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.status.isopen=!$scope.status.isopen}}),flixApp.controller("clickTitleCtrl",function($scope,$window,$element){$scope.clickTitle=function(event){var element=angular.element(event.currentTarget).find("a").attr("href");element&&(console.log(element),$window.location=element)},$scope.clickTitleForConnectionLink=function(){var element=angular.element($element).find("a");element[1]?$window.location=element[1].href:element[0]&&($window.location=element[0].href)}}),flixApp.controller("cookiePolicyCtrl",["$scope","CookieSvc",function($scope,CookieSvc){$scope.status=2!=CookieSvc.getCookieValue("cookie-agreed"),$scope.acceptCookiePolicy=function(){$scope.status=!1,CookieSvc.setDomainCookie("cookie-agreed",2,100)}}]),flixApp.controller("emergencyBoxCtrl",["$scope","$http","$sce","$log",function($scope,$http,$sce,$log){var hasEmergency=!1,isLongText=!1;$scope.hasEmergency=function(){return hasEmergency},$scope.isLongText=function(){return isLongText},$scope.toggleOpenClose=function(){isLongText&&("closed"==$scope.emergencyBoxClass?$scope.emergencyBoxClass="opened":$scope.emergencyBoxClass="closed")},$scope.init=function(realtime_rest_url){$http({method:"GET",url:realtime_rest_url}).then(function(response){if(response.data.emergency_box){hasEmergency=!0;var emergencyBoxContent=response.data.emergency_box;String(emergencyBoxContent).replace(/<[^>]+>/gm,"").length>175?(isLongText=!0,$scope.longTextClass="is-long-text",$scope.emergencyBoxClass="closed",console.log(emergencyBoxContent),$scope.emergencyBoxContentShort=$sce.trustAsHtml(emergencyBoxContent.substring(0,175)+'&hellip;<span class="cms-icon-arrow-right"></span>'),$scope.emergencyBoxContent=$sce.trustAsHtml(emergencyBoxContent.substring(0,emergencyBoxContent.length)+'&nbsp;<span class="cms-icon-arrow-bottom"></span></p>')):($scope.longTextClass="is-short-text",$scope.emergencyBoxClass="opened",$scope.emergencyBoxContent=$sce.trustAsHtml(emergencyBoxContent))}},function(response){$log.error(response)})}}]),flixApp.controller("faqCtrl",["$rootScope","$scope","$sce","OverlaySvc","$attrs",function($rootScope,$scope,$sce,OverlaySvc,$attrs){var faqIsOpen=!1;$scope.showLoadingSpinner=!0,$scope.faqButtonIsClicked=!1,$scope.iframeUrl=[""],$rootScope.$on("dynamicFaq",function(){$scope.faqButtonIsClicked=!$scope.faqButtonIsClicked,faqIsOpen=!faqIsOpen,""===$scope.iframeUrl[0]&&$scope.faqHome()}),$scope.loadingSpinner=function(){$scope.$apply(function(){$scope.showLoadingSpinner=!1})},$scope.faqClose=function(){OverlaySvc.setOverlay("dynamicFaq"),$scope.faqButtonIsClicked=!1,faqIsOpen=!1,OverlaySvc.setOverflowHidden(!1)},$scope.faqHome=function(){$scope.showLoadingSpinner||($scope.showLoadingSpinner=!0),0==faqIsOpen&&($scope.faqButtonIsClicked=!0,faqIsOpen=!0),$scope.iframeUrl[0]=$sce.trustAsResourceUrl($attrs.iframeUrl)}}]),flixApp.controller("contactFormCtrl",function($scope){function compareConfirmationMail(){email!=email2?($scope.SfContactForm.email2.$invalid=!0,$scope.SfContactForm.email2.$valid=!1,checkFormValid()):($scope.SfContactForm.email2.$invalid=!1,$scope.SfContactForm.email2.$valid=!0,checkFormValid())}function checkFormValid(){($scope.SfContactForm.First_Name__c.$invalid||$scope.SfContactForm.Last_Name__c.$invalid||$scope.SfContactForm.email.$invalid||$scope.SfContactForm.email2.$invalid||$scope.SfContactForm.Category__c.$invalid||$scope.SfContactForm.Sub_Category__c.$invalid||$scope.SfContactForm.description.$invalid)&&($scope.SfContactForm.$invalid=!0)}var email="",email2="";$scope.contactformEmailKeyUp=function(){email=event.target.value,compareConfirmationMail()},$scope.contactformEmail2KeyUp=function(){email2=event.target.value,compareConfirmationMail()},$scope.updateSubCat=function(){$scope.SfContactForm.Sub_Category__c.$invalid=!0,checkFormValid()},$scope.onChangeSubCat=function(){checkFormValid()},$scope.onChangeTextArea=function(){checkFormValid()}}),flixApp.controller("lostAndFoundFormCtrl",function($scope){function compareConfirmationMail(){email!=email2?($scope.SfLostAndFoundForm.email2.$invalid=!0,$scope.SfLostAndFoundForm.email2.$valid=!1,checkFormValid()):($scope.SfLostAndFoundForm.email2.$invalid=!1,$scope.SfLostAndFoundForm.email2.$valid=!0,checkFormValid())}function checkFormValid(){($scope.SfLostAndFoundForm.email.$invalid||$scope.SfLostAndFoundForm.email2.$invalid)&&($scope.SfLostAndFoundForm.$invalid=!0)}var email="",email2="";$scope.EmailKeyUp=function(){email=event.target.value,compareConfirmationMail()},$scope.Email2KeyUp=function(){email2=event.target.value,compareConfirmationMail()}}),flixApp.controller("newsletterValidationCtrl",function($scope){$scope.submitForm=function(){$scope.newsletterSignIn.$valid&&(document.getElementById("loadingSpinner").style.display="inline-block")}}),flixApp.directive("numericOnly",function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){modelCtrl.$parsers.push(function(inputValue){var transformedInput=inputValue?inputValue.replace(/[^\d.-]/g,""):null;return transformedInput!=inputValue&&(modelCtrl.$setViewValue(transformedInput),modelCtrl.$render()),transformedInput})}}}),flixApp.controller("GeolocationUsCtrl",["$scope","$window","GeolocationOverlaySvc","CookieSvc",function($scope,$window,GeolocationOverlaySvc,CookieSvc){function getSuggestion(){GeolocationOverlaySvc.getForwardingLocation(currentSiteLangcode).then(function(location){forwarding(location)})}function forwarding(location){show=!0,domains.indexOf(location)>-1?setOverlayTemplate(location):show=!1}function setOverlayTemplate(langcode){$scope.geoLangcode=langcode,$scope.geoTextTitle=$window.domain_data.translations[translationStrings[langcode]],$window.languageSwitcherLinks[langcode]?($scope.geoLinkText=GeolocationOverlaySvc.getDestinationLinkText(langcode),$scope.geoLink=GeolocationOverlaySvc.getDestinationHref(langcode)):show=!1}var show=!1,geoSession=CookieSvc.isCookieSet("geoSuggestion"),cookieValue=CookieSvc.getCookieValue("geoSuggestion"),currentSiteLangcode=$window.domain_data.langcode,domains=["en-us","en-gl","es-us"],showInDomain=domains.indexOf($window.domain_data.langcode)>-1,translationStrings={"en-us":"Switch_to_our_American_site:","es-us":"Switch_to_our_site_in_spanish:","en-gl":"Switch_to_our_global_site:"};showInDomain&&(geoSession||(cookieValue?cookieValue!==currentSiteLangcode&&domains.indexOf(cookieValue)>-1?forwarding(cookieValue):(CookieSvc.removeDomainCookie("geoSuggestion"),getSuggestion()):getSuggestion())),$scope.showGeo=function(){return!(!show||!showInDomain)},$scope.closeGeo=function(){show=!1,CookieSvc.setDomainCookie("geoSuggestion",location,7),$scope.showGeo()}}]),flixApp.factory("GeolocationOverlaySvc",["GeolocationSvc","$http","$window",function(GeolocationSvc,$http,$window){var getForwardingLocation=function(currentSiteLangcode){return GeolocationSvc.getGeolocation().then(function(responseData){if(responseData){var userCountryCode=responseData.countryCode.toLowerCase();return"en-us"===currentSiteLangcode&&userCountryCode?"us"===userCountryCode&&isUserBrowserLanguage("es")?"es-us":"us"!==userCountryCode&&"en-gl":"en-gl"===currentSiteLangcode&&("us"===userCountryCode&&isUserBrowserLanguage("es")?"es-us":"us"===userCountryCode&&"en-us")}return!1})},isUserBrowserLanguage=function(browserLang){return($window.navigator.language||$window.navigator.userLanguage).indexOf(browserLang)>-1},getDestinationLinkText=function(langcode){var link=$window.languageSwitcherLinks[langcode].link,destinationLinkText=link.replace(/(https:|http:)\/\//,"");return destinationLinkText.indexOf("/")>0&&(destinationLinkText=destinationLinkText.substring(0,destinationLinkText.indexOf("/"))),destinationLinkText};return{getForwardingLocation:getForwardingLocation,getDestinationLinkText:getDestinationLinkText,getDestinationHref:function(langcode){return-1===$window.languageSwitcherLinks[langcode].link.indexOf("/404")?$window.languageSwitcherLinks[langcode].link:"https://"+getDestinationLinkText(langcode)}}}]),flixApp.factory("GeolocationSvc",function($http){return{getGeolocation:function(){return $http({method:"GET",url:"https://9glds55w3k.execute-api.eu-west-1.amazonaws.com/prod"}).then(function(response){return response.data.countryCode=response.data.Country.IsoCode,response.data},function(response){return!1})}}}),function(){flixApp.directive("hubPagesLinkList",[function(){return{restrict:"E",templateUrl:"/app/js/app/hub-pages/hub-pages-link-list-directive.template.html",replace:!0}}])}(),flixApp.controller("HubPagesSearchResultController",["$scope","HubPagesSearchResultService",function($scope,HubPagesSearchResultService){function getHubpageSearchResultUpdated(){$scope.hideStaticCityList=HubPagesSearchResultService.getHideStaticCityList(),$scope.citiesLoaded=HubPagesSearchResultService.getCitiesLoaded(),$scope.isNoResults=HubPagesSearchResultService.getIsNoResults()}$scope.hideStaticCityList=!0,$scope.citiesLoaded=!1,$scope.isNoResults=!1,$scope.cities={},$scope.$on("CitiesAndTags",function(){getHubpageSearchResultUpdated()}),$scope.$on("UpdateCities",function(){$scope.cities=HubPagesSearchResultService.getCities()})}]),function(){flixApp.factory("HubPagesSearchResultService",function($rootScope){function updateScope(){$rootScope.$broadcast("CitiesAndTags")}function hideCityListWhileLoadingCities(){hideStaticCityList=!0,citiesLoaded=!1,isNoResults=!1,updateScope()}function buildCityListAfterLoadingCities(data){if(numberOfCities=0,data&&data.length<=0)citiesLoaded=!1,isNoResults=!0,numberOfCities=0;else{allCities=data;for(var cities in allCities)numberOfCities+=allCities[cities].length-1;citiesLoaded=!0,isNoResults=!1}updateScope()}function getCitiesLoaded(){return citiesLoaded}function getIsNoResults(){return isNoResults}function getHideStaticCityList(){return hideStaticCityList}function getNumberOfCities(){return numberOfCities}function getCities(){return allCities}function getUpdatedCities(){$rootScope.$broadcast("UpdateCities")}var citiesLoaded=!1,isNoResults=!1,hideStaticCityList=!1,numberOfCities=0,allCities={};return{hideCityListWhileLoadingCities:hideCityListWhileLoadingCities,buildCityListAfterLoadingCities:buildCityListAfterLoadingCities,getCitiesLoaded:getCitiesLoaded,getIsNoResults:getIsNoResults,getHideStaticCityList:getHideStaticCityList,getNumberOfCities:getNumberOfCities,getCities:getCities,getUpdatedCities:getUpdatedCities}})}(),flixApp.controller("HubPagesSearchController",["$scope","$window","$attrs","HubPagesDropdownItemService","CitiesService","TrackingService","HubPagesSearchResultService",function($scope,$window,$attrs,HubPagesDropdownItemService,CitiesService,TrackingService,HubPagesSearchResultService){function updateNumberOfCities(){$scope.numberOfCities=HubPagesSearchResultService.getNumberOfCities()}$scope.countries=[],$scope.destTags=[],$scope.countriesLoaded=!1,$scope.destTagsLoaded=!1,$scope.numberOfCities=0,$scope.locations="locations_(city_hub_number_of_connections)"!=window.domain_data.translations["locations_(city_hub_number_of_connections)"]?window.domain_data.translations["locations_(city_hub_number_of_connections)"]:"destinations",$scope.location="location_(city_hub_number_of_connection)"!=window.domain_data.translations["location_(city_hub_number_of_connection)"]?window.domain_data.translations["locations_(city_hub_number_of_connections)"]:"destination";var initialDestTag="all";$attrs.initDestinationTag.length>0&&(initialDestTag=$attrs.initDestinationTag);var domainCountryCode="all";$attrs.initCountry.length>0?domainCountryCode=$attrs.initCountry:null!=$window.domain_data.field_country&&(domainCountryCode=$window.domain_data.field_country),$scope.$on("CitiesAndTags",function(){updateNumberOfCities()}),$scope.countrySelected=function(){var countrySelectedFlag=document.getElementsByClassName("hubpage__country-select__choice--flag")[0];$scope.countries.selected.country_code!=CitiesService.getSelectedCountry()&&(lazySizes.loader.unveil(countrySelectedFlag),HubPagesSearchResultService.hideCityListWhileLoadingCities(),TrackingService.pushSelectionFromSelectfieldToDataLayer("country-select",$scope.countries.selected.country_code),CitiesService.setSelectedCountry($scope.countries.selected.country_code),CitiesService.getCities($attrs.type).then(function(promise){HubPagesSearchResultService.buildCityListAfterLoadingCities(promise.cities),HubPagesSearchResultService.getUpdatedCities()})),updateNumberOfCities()},$scope.destTagSelected=function(){$scope.destTags.selected.tid!=CitiesService.getSelectedDestTag()&&(HubPagesSearchResultService.hideCityListWhileLoadingCities(),TrackingService.pushSelectionFromSelectfieldToDataLayer("destination-select",$scope.destTags.selected.tid),CitiesService.setSelectedDestTag($scope.destTags.selected.tid),CitiesService.getCities($attrs.type).then(function(promise){HubPagesSearchResultService.buildCityListAfterLoadingCities(promise.cities),HubPagesSearchResultService.getUpdatedCities()})),updateNumberOfCities()};!function(){HubPagesDropdownItemService.getItems("countries").then(function(promise){$scope.countries=promise.countries,$scope.countries.unshift({name:$window.domain_data.translations["All_Countries_(Hub_Pages)"],country_code:"all"}),$scope.countries.selected=HubPagesDropdownItemService.preselectItem($scope.countries,domainCountryCode,"country_code"),CitiesService.setSelectedCountry(domainCountryCode),$scope.countriesLoaded=!0,HubPagesDropdownItemService.getItems("destination_tags").then(function(promise){$scope.destTags=promise,$scope.destTags.unshift({name:$window.domain_data.translations["All_Categories_(Destination_Tags)_(Hub_Pages)"],tid:"all"}),$scope.destTags.selected=HubPagesDropdownItemService.preselectItem($scope.destTags,initialDestTag,"tid"),CitiesService.setSelectedDestTag(initialDestTag),CitiesService.getCities($attrs.type).then(function(promise){HubPagesSearchResultService.buildCityListAfterLoadingCities(promise.cities)}),$scope.destTagsLoaded=!0})}),updateNumberOfCities()}()}]),function(){flixApp.factory("CitiesService",function($http){function getCities(type){return $http.get("/rest/flix/cities/"+type+"/"+selectedCountry+"/"+selectedDestTag).then(function(response){return response.data})}function setSelectedCountry(selection){selectedCountry=selection}function setSelectedDestTag(selection){selectedDestTag=selection}function getSelectedCountry(){return selectedCountry}function getSelectedDestTag(){return selectedDestTag}var selectedDestTag,selectedCountry;return{getCities:getCities,setSelectedCountry:setSelectedCountry,setSelectedDestTag:setSelectedDestTag,getSelectedCountry:getSelectedCountry,getSelectedDestTag:getSelectedDestTag}})}(),function(){flixApp.factory("HubPagesDropdownItemService",function($http,$window){function getItems(itemType){return"countries"==itemType?$http.get("/rest/flix/countries").then(function(response){return response.data}):"destination_tags"==itemType?$http.get("/rest/flix/taxonomy_terms/destination_tags").then(function(response){return response.data}):void 0}function preselectItem(items,preselectItem,itemIdKey){for(var preSelection={},i=0;i<items.length;i++)if(items[i][itemIdKey]==preselectItem){preSelection=items[i];break}return preSelection}return{getItems:getItems,preselectItem:preselectItem}})}(),flixApp.controller("newRelicController",["NewRelicService","$http",function(NewRelicService,$http){"object"==typeof newrelic&&(NewRelicService.getPageType(),NewRelicService.getServiceWorkerStatus(),NewRelicService.testCloudflare())}]),function(){flixApp.factory("NewRelicService",function($window,$http){function finishMeasurementsForSearch(){void 0!==$window.performance&&void 0!==$window.performance.now&&void 0!==$window.performance.getEntriesByType&&searchMeasurements()}function getPageType(){var pageType=document.getElementsByTagName("body")[0].className.split(" ")[2];newrelic.setCustomAttribute("pageType",pageType)}function registerMutationObserverForSearch(){function disconnectMutationObserver(){observer.disconnect()}var targetNode=document.getElementById("search-mask-component");if(null!==targetNode&&"object"==typeof targetNode&&"MutationObserver"in window){var observer=new MutationObserver(function(mutations){for(var i=0;i<mutations.length;i++)if("childList"==mutations[i].type&&document.getElementsByClassName("search-mask__dropdown__option").length>0){void 0!==window.performance&&void 0!==window.performance.mark&&"object"==typeof newrelic&&(newrelic.setCustomAttribute("SearchCitiesLoaded",performance.now()/1e3),finishMeasurementsForSearch()),disconnectMutationObserver();break}}),observerConfig={childList:!0,attributes:!0,subtree:!0,characterData:!0};observer.observe(targetNode,observerConfig)}}function searchMeasurements(){if("object"==typeof newrelic){var timesForHeroImageOne=[],timesForHeroImageTwo=[],timesForSearch=[];performance.getEntriesByType("mark").forEach(function(element){"onloadFirstHeroImage"===element.name?timesForHeroImageOne.push(element.startTime):"onloadSecondHeroImage"===element.name?timesForHeroImageTwo.push(element.startTime):"SearchOnReady"===element.name&&timesForSearch.push(element.startTime)});var firstMeaningfulPaint=Math.max(Math.min.apply(null,timesForHeroImageOne),Math.min.apply(null,timesForHeroImageTwo)),searchMaskOnload=Math.min(Math.min.apply(null,timesForSearch));newrelic.setCustomAttribute("firstMeaningfulPaint",firstMeaningfulPaint/1e3),newrelic.setCustomAttribute("SearchOnReady",searchMaskOnload/1e3)}}function setCustomMark(markName){void 0!==$window.performance&&void 0!==$window.performance.mark&&performance.mark(markName)}function getServiceWorkerStatus(){if("serviceWorker"in navigator)var value=navigator.serviceWorker.controller?"controlled":"supported";else var value="unsupported";newrelic.setCustomAttribute("serviceWorkerStatus",value)}function testCloudflare(){$http.get("https://osm.flixcdn.net/de.png").then(function(){newrelic.setCustomAttribute("cloudflareAccessibility","Success")},function(){newrelic.setCustomAttribute("cloudflareAccessibility","Error")})}return{setCustomMark:setCustomMark,getPageType:getPageType,registerMutationObserverForSearch:registerMutationObserverForSearch,getServiceWorkerStatus:getServiceWorkerStatus,testCloudflare:testCloudflare}})}(),flixApp.controller("PopupCtrl",["$rootScope","$scope","$location","$window","$http","$sce","$log","OverlaySvc",function($rootScope,$scope,$location,$window,$http,$sce,$log,OverlaySvc){function closePopup(){$scope.hidePopup=!0,OverlaySvc.setOverflowHidden(!1)}function getRestUrlForPopupContent(popupBodyNid){return $window.flix_config.flix_rest_endpoint+"/page_body/"+popupBodyNid+"/"+$window.domain_data.langcode}var popupBodyNid=function(name,url){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null}("popup");closePopup(),popupBodyNid&&angular.isNumber(parseInt(popupBodyNid))?function(popupBodyNid){var url=getRestUrlForPopupContent(popupBodyNid);$scope.loading=!0,$http.get(url).then(function(response){if(void 0!==response.data[0]){var body=response.data[0].body;$scope.popupBody=$sce.trustAsHtml(body),$scope.popupTitle=response.data[0].field_h1,$scope.hidePopup=!1}},function(response){$log.error(response)}).finally(function(){$scope.loading=!1}),OverlaySvc.setOverflowHidden(!0)}(popupBodyNid):closePopup(),$scope.closePopup=function(){closePopup()}}]),flixApp.factory("SearchMaskPersonalizationService",function(CookieSvc,$window){function saveDepartureCityInCookie(id){CookieSvc.setDomainCookie(DEPARTURECITYCOOKIE,id,DAYSUNTILCOOKIEEXPIRES)}function saveArrivalCityInCookie(id){CookieSvc.setDomainCookie(ARRIVALCITYCOOKIE,id,DAYSUNTILCOOKIEEXPIRES)}function getDepartureCityFromCookie(){return CookieSvc.getCookieValue(DEPARTURECITYCOOKIE)}function getArrivalCityFromCookie(){return CookieSvc.getCookieValue(ARRIVALCITYCOOKIE)}function saveDepartureDateInCookie(date){CookieSvc.setDomainCookie(DEPDATECOOKIE,date,DAYSUNTILCOOKIEEXPIRES)}function saveReturnDateInCookie(date){CookieSvc.setDomainCookie(RETURNDATECOOKIE,date,DAYSUNTILCOOKIEEXPIRES)}function getDepartureDateFromCookie(){return CookieSvc.getCookieValue(DEPDATECOOKIE)}function getReturnDateFromCookie(){return CookieSvc.getCookieValue(RETURNDATECOOKIE)}function identifyUserForABTests(domain,ABTestCookieName){return $window.domain_data.langcode==domain&&(CookieSvc.isCookieSet(ABTestCookieName)?0!=CookieSvc.getCookieValue(ABTestCookieName)&&1==CookieSvc.getCookieValue(ABTestCookieName):Math.random()>.5?(CookieSvc.setDomainCookie(ABTestCookieName,0,40),!1):(CookieSvc.setDomainCookie(ABTestCookieName,1,40),!0))}var DAYSUNTILCOOKIEEXPIRES=30,DEPARTURECITYCOOKIE="search-personalization-dep-city",ARRIVALCITYCOOKIE="search-personalization-arr-city",DEPDATECOOKIE="search-personalization-dep-date",RETURNDATECOOKIE="search-personalization-return-date";return{saveDepartureCityInCookie:saveDepartureCityInCookie,saveArrivalCityInCookie:saveArrivalCityInCookie,getDepartureCityFromCookie:getDepartureCityFromCookie,getArrivalCityFromCookie:getArrivalCityFromCookie,saveDepartureDateInCookie:saveDepartureDateInCookie,saveReturnDateInCookie:saveReturnDateInCookie,getDepartureDateFromCookie:getDepartureDateFromCookie,getReturnDateFromCookie:getReturnDateFromCookie,identifyUserForABTests:identifyUserForABTests}}),flixApp.controller("searchMaskController",["$attrs","CookieSvc","$window","SearchMaskService","SearchMaskPersonalizationService","$scope","NewRelicService",function($attrs,CookieSvc,$window,SearchMaskService,SearchMaskPersonalizationService,$scope,NewRelicService){var options={};!function(isCompactLayout){if(NewRelicService.registerMutationObserverForSearch(),$scope.searchReady=!1,"flixtrain"==$attrs.project&&(options.flixTrain=!0),options.variant=$attrs.variant,options.searchResultsHost=$window.domain_data.shop_url.split("https://")[1],options.handleOwnRequestSearchEvent=!0,null!==$window.domain_data.shop_search_mask_locale?options.locale=$window.domain_data.shop_search_mask_locale:options.locale=$window.domain_data.langcode,$window.searchMaskComponent.onRequestSearch(function(payload){SearchMaskPersonalizationService.identifyUserForABTests("pl","search-personalization-2")&&(SearchMaskPersonalizationService.saveDepartureDateInCookie(payload.departureDate),SearchMaskPersonalizationService.saveReturnDateInCookie(payload.returnDate)),SearchMaskPersonalizationService.saveDepartureCityInCookie(payload.departureCity),SearchMaskPersonalizationService.saveArrivalCityInCookie(payload.arrivalCity)}),SearchMaskService.setAttributes($attrs),options.initialSearchMaskValues=SearchMaskService.getCities(),SearchMaskPersonalizationService.identifyUserForABTests("pl","search-personalization-2")){var dates=SearchMaskService.getDates();0!=dates&&(Date.now()/1e3<dates.departureDate&&(options.initialSearchMaskValues.departureDate=dates.departureDate),parseInt(dates.returnDate)>0&&Date.now()/1e3<dates.returnDate&&(options.initialSearchMaskValues.returnDate=dates.returnDate))}$window.searchMaskComponent.onReady(function(){$scope.searchReady=!0,NewRelicService.setCustomMark("SearchOnReady")}),$window.searchMaskComponent.mount(options)}()}]),flixApp.factory("SearchMaskService",function(getParameterService,SearchMaskPersonalizationService){function getArrivalAndDepartureParameter(){paramCities.dep=getParameterService.getParameterValueByName("departureCity"),paramCities.arr=getParameterService.getParameterValueByName("arrivalCity")}function setAttributes(attributes){attrs=attributes}function getCities(){var cities={departureCity:"",arrivalCity:""};return getArrivalAndDepartureParameter(),void 0!==paramCities.dep&&void 0!==paramCities.arr?(cities.departureCity=paramCities.dep,cities.arrivalCity=paramCities.arr):SearchMaskPersonalizationService.getDepartureCityFromCookie()&&SearchMaskPersonalizationService.getArrivalCityFromCookie()&&"frontpage"==attrs.pagetype?(cities.departureCity=SearchMaskPersonalizationService.getDepartureCityFromCookie(),cities.arrivalCity=SearchMaskPersonalizationService.getArrivalCityFromCookie()):void 0!==attrs.departureCity&&void 0!==attrs.arrivalCity?(cities.departureCity=attrs.departureCity,cities.arrivalCity=attrs.arrivalCity):void 0!==attrs.departureCity&&void 0===attrs.arrivalCity?(cities.departureCity=attrs.departureCity,cities.arrivalCity=null):(cities.departureCity=88,cities.arrivalCity=94),cities}function getDates(){return SearchMaskPersonalizationService.getDepartureDateFromCookie()&&SearchMaskPersonalizationService.getReturnDateFromCookie()?{departureDate:SearchMaskPersonalizationService.getDepartureDateFromCookie(),returnDate:SearchMaskPersonalizationService.getReturnDateFromCookie()}:!!SearchMaskPersonalizationService.getDepartureDateFromCookie()&&{departureDate:SearchMaskPersonalizationService.getDepartureDateFromCookie(),returnDate:0}}var paramCities={},attrs={};return{setAttributes:setAttributes,getCities:getCities,getDates:getDates}}),flixApp.factory("CookieSvc",["$window","$cookies",function($window,$cookies){var expiresDays=function(value){var cookieExpiresObj=new Date,cookieExpiresDays=value;return cookieExpiresObj.setDate(cookieExpiresObj.getDate()+cookieExpiresDays),cookieExpiresObj},getCurrentCookieDomain=function(){var cookieDomain=$window.location.hostname;return cookieDomain=(cookieDomain.match(/\./g)||[]).length>1?cookieDomain.substring(cookieDomain.indexOf(".")):"."+cookieDomain},getCookieValue=function(cookieName){return!!$cookies.get(cookieName)&&$cookies.get(cookieName)};return{isCookieSet:function(cookieName){return!!$cookies.get(cookieName)},setDomainCookie:function(cookieName,value,cookieExpiresDays){$cookies.put(cookieName,value,{expires:expiresDays(cookieExpiresDays),path:"/",domain:getCurrentCookieDomain()})},setSessionCookie:function(cookieName){$cookies.put(cookieName,!0,{path:"/",domain:getCurrentCookieDomain()})},getCookieValue:getCookieValue,removeDomainCookie:function(cookieName){$cookies.remove(cookieName)}}}]),flixApp.factory("DateTimeService",function($window,$filter){function formatDateTime(date,formatter,tz){var d;return d="number"==typeof date?new Date(1e3*date):new Date(date),format(formatter,d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())}function formatDatetimeWithAngularJsFilter(date,formatter,tz){var d;return d="number"==typeof date?new Date(1e3*date):new Date(date),
format(formatter,$filter("date")(d,"yyyy",tz),$filter("date")(d,"MM",tz),$filter("date")(d,"dd",tz),$filter("date")(d,"HH",tz),$filter("date")(d,"mm",tz),$filter("date")(d,"ss",tz))}function formatDateTimeYmdhis(ymdhisString,formatter){var m=ymdhisString.match(/^(\d+)\D+(\d+)\D+(\d+)\s+(\d+)\D+(\d+)\D+(\d+)/);return m?format(formatter,m[1],m[2],m[3],m[4],m[5],m[6]):null}function format(formatter,y,m,d,h,i,s){y=Number(y),m=Number(m),d=Number(d),h=Number(h),i=Number(i),s=Number(s);var hours_12_format=h%12?h%12:12;return formatter.replace(/%d%/g,d<10?"0"+d:d).replace(/%j%/g,d).replace(/%m%/g,m<10?"0"+m:m).replace(/%n%/g,m).replace(/%y%/g,y.toString().substr(2,2)).replace(/%Y%/g,y).replace(/%H%/g,h<10?"0"+h:h).replace(/%h%/g,hours_12_format<10?"0"+hours_12_format:hours_12_format).replace(/%i%/g,i<10?"0"+i:i).replace(/%g%/g,h%12?h%12:12).replace(/%G%/g,h).replace(/%a%/g,h>=12?"pm":"am").replace(/%A%/g,h>=12?"PM":"AM")}return{getShortWeekdayArray:function(){var weekday_array={};return weekday_array[1]="Mon",weekday_array[2]="Tue",weekday_array[3]="Wed",weekday_array[4]="Thu",weekday_array[5]="Fri",weekday_array[6]="Sat",weekday_array[7]="Sun",weekday_array},formatDate:function(date,tz){return formatDateTime(date,$window.domain_data.default_date_format,tz)},formatDateYmdhis:function(ymdhisString,tz){return formatDateTimeYmdhis(ymdhisString,$window.domain_data.default_date_format)},formatTime:function(date,tz){return formatDateTime(date,$window.domain_data.default_time_format,tz)},formatTimeFilter:function(date,tz){return formatDatetimeWithAngularJsFilter(date,$window.domain_data.default_time_format,tz)},formatTimeYmdhis:function(ymdhisString,tz){return formatDateTimeYmdhis(ymdhisString,$window.domain_data.default_time_format)},formatDuration:function(hours,minutes){var format=$window.domain_data.default_duration_format;return 0===hours&&(format=format.substring(format.indexOf("%minutes%"))),0===minutes&&(format=format.substring(0,format.indexOf("%minutes%"))),format.replace(new RegExp("%hours%","g"),hours).replace(new RegExp("%minutes%","g"),minutes)}}}),function(){flixApp.directive("dropdown",["DropdownService",function(){return{restrict:"E",templateUrl:"/app/js/app/shared/dropdown-directive.template.html",replace:!0,scope:{inputValue:"=",siblingInputValue:"="},controller:function($scope,DropdownService,$attrs){var isMainDropdown=JSON.parse($attrs.mainDropdown),tempInputValue="",items=DropdownService.getDropdownList($attrs.type);this.init=function(){isMainDropdown?$scope.selectItem(items[0]):$scope.selectItem({name:""})},$scope.selectItem=function(item){$scope.inputValue=item.name,DropdownService.setSelected(item,$attrs.type)},$scope.toggleDropdown=function(dropdownVisible){if(isMainDropdown&&($scope.siblingInputValue="",angular.forEach(Object.keys(DropdownService.getSelected()),function(key){key!==$attrs.key&&DropdownService.setSelected("",key)})),""!=$scope.inputValue)for(var i=0;i<items.length;i++){if($scope.inputValue.toLowerCase()==items[i].name.toLowerCase()){tempInputValue=items[i].name,$scope.selectItem(items[i]);break}tempInputValue=""}else isMainDropdown||(tempInputValue="");$scope.dropdownVisible=dropdownVisible,$scope.dropdownVisible&&($scope.inputValue=""),$scope.dropdownVisible||($scope.inputValue=tempInputValue)},$scope.inputEvents=function(event){if(9!=event.keyCode)return!1;$scope.selectItem($scope.getFilteredItems()[0]),$scope.toggleDropdown()},$scope.getFilteredItems=function(){var filteredItems=[],shouldBeDisplayed=function(item_name){return""==$scope.inputValue||-1!=item_name.toLowerCase().indexOf($scope.inputValue.toLowerCase())};return angular.forEach(items,function(item){shouldBeDisplayed(item.name)&&item.visible&&filteredItems.push(item)}),filteredItems},this.init()}}}])}(),function(){flixApp.factory("DropdownService",function($rootScope){var selection={},dropDownList={};return{setSelected:function(ele,key){void 0!==this.getSelected()[key]&&this.getSelected()[key].id==ele.id?selection[key]=ele:(selection[key]=ele,$rootScope.$emit("stop-dropdown-selection-event",key))},getSelected:function(){return selection},setDropdownList:function(val,key){dropDownList[key]=val},getDropdownList:function(key){return dropDownList[key]},subscribeToChangesFromDirective:function(scope,callback){var handler=$rootScope.$on("stop-dropdown-selection-event",callback);scope.$on("$destroy",handler)}}})}(),flixApp.factory("FormatPriceService",function(NumberFormatService,$window){return{formatPrice:function(price){var decimals,result;return decimals=price%1==0?0:2,result=$window.domain_data.default_currency_format.replace("%num_dot_comma%",NumberFormatService.numberFormat(price,decimals,",",".")),result=result.replace("%num_comma_dot%",NumberFormatService.numberFormat(price,decimals,".",",")),result=result.replace("%num_space_comma%",NumberFormatService.numberFormat(price,decimals,","," ")),result=result.replace("%symbol%",$window.domain_data.default_currency_symbol)}}}),flixApp.factory("getParameterService",function($window){return{getParameterValueByName:function(parameterName){var url=$window.location.search;if(url.length>0)for(var query=url.substr(1),pairs=query.split("&"),i=0;i<pairs.length;i++){var pair=pairs[i].split("=");if(pair[0]==parameterName)return void 0!==pair[1]?decodeURIComponent(pair[1]):void 0}}}}),flixApp.directive("iframeOnload",iframeOnload),flixApp.factory("NumberFormatService",function(){return{numberFormat:function(number,decimals,decPoint,thousandsSep){number=(number+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+number)?+number:0,prec=isFinite(+decimals)?Math.abs(decimals):0,sep=void 0===thousandsSep?",":thousandsSep,dec=void 0===decPoint?".":decPoint,s="";return s=(prec?function(n,prec){var k=Math.pow(10,prec);return""+(Math.round(n*k)/k).toFixed(prec)}(n,prec):""+Math.round(n)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)),(s[1]||"").length<prec&&(s[1]=s[1]||"",s[1]+=new Array(prec-s[1].length+1).join("0")),s.join(dec)}}}),flixApp.factory("OverlaySvc",function($rootScope){var arrElement=[];return $rootScope.isOverflow=!1,{setOverlay:function(el){arrElement.indexOf(el)<0&&arrElement.push(el);for(var i=0;i<arrElement.length;i++)"mainNav"!=el&&"dynamicFaq"==arrElement[i]?$rootScope.$emit(arrElement[i]):$rootScope.isOverflow=!$rootScope.isOverflow},setOverflowHidden:function(arg){$rootScope.isOverflow=arg}}}),flixApp.factory("TrackingService",[function(){return{pushSelectionFromSelectfieldToDataLayer:function(type,value){"undefined"!==dataLayer&&dataLayer.push({event:"ga_event_local",eventCategory:"Content Filters",eventAction:type,eventLabel:value})}}}]),flixApp.factory("Translate",function($window){return{t:function(key){return void 0!==$window.domain_data.translations[key]?$window.domain_data.translations[key]:key}}}),flixApp.factory("UserAgentSvc",function(){var userAgent=navigator.userAgent.toLowerCase();return{isAndroid:function(){return!!(userAgent.indexOf("android")>-1)},isAndroidMobile:function(){return!!(userAgent.indexOf("android")>-1&&userAgent.indexOf("mobile")>-1)},isAndroidTablet:function(){return!!(userAgent.indexOf("android")>-1&&userAgent.indexOf("tablet")>-1)},isIosMobile:function(){return!!(userAgent.indexOf("iphone")>-1)},isMobile:function(){return!(!this.isIosMobile()&&!this.isAndroidMobile())}}}),flixApp.controller("shopLoginCtrl",["$scope","$cookies",function($scope,$cookies){$scope.logged=0,$cookies.get("USRINF")&&($scope.logged=1)}]),function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Bakery=function(){function Bakery(){_classCallCheck(this,Bakery)}var name=window.domain_data.name,domain=name.substring(name.indexOf(".")),myDate=new Date;return myDate.setDate(myDate.getDate()+7),_createClass(Bakery,null,[{key:"bake",value:function(){document.cookie="sb-closed=true;expires="+myDate+";domain="+domain+";path=/"}},{key:"unbake",value:function(){document.cookie="sb-closed=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"baked",get:function(){return"true"===document.cookie.replace(/(?:(?:^|.*;\s*)sb-closed\s*\=\s*([^;]*).*$)|^.*$/,"$1")}}]),Bakery}();exports.default=Bakery},{}],2:[function(require,module,exports){(function(global){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Detector=function(){function Detector(){_classCallCheck(this,Detector)}return _createClass(Detector,null,[{key:"platform",value:function(){return/iPhone|iPad|iPod/i.test(window.navigator.userAgent)?"ios":/Android/i.test(window.navigator.userAgent)?"android":void 0}},{key:"userAgentMatchesRegex",value:function(regexString){return new RegExp(regexString).test(window.navigator.userAgent)}},{key:"jQueryMobilePage",value:function(){return void 0!==global.$&&"undefined"!==global.$.mobile&&null!==document.querySelector(".ui-page")}},{key:"wrapperElement",value:function(){var selector=Detector.jQueryMobilePage()?".ui-page":"html";return document.querySelectorAll(selector)}}]),Detector}();exports.default=Detector}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(require,module,exports){var _smartbanner=require("./smartbanner.js"),_smartbanner2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_smartbanner),smartbanner=void 0;window.addEventListener("load",function(){smartbanner=new _smartbanner2.default,smartbanner.publish()})},{"./smartbanner.js":7}],4:[function(require,module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function valid(name){return-1!==name.indexOf("smartbanner:")&&name.split(":")[1].length>0}function convertToCamelCase(name){var parts=name.split("-");return parts.map(function(part,index){index>0&&(parts[index]=part.charAt(0).toUpperCase()+part.substring(1))}),parts.join("")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();require("./polyfills/array/from.js"),require("./polyfills/array/includes.js");var OptionParser=function(){function OptionParser(){_classCallCheck(this,OptionParser)}return _createClass(OptionParser,[{key:"parse",value:function(){var metas=document.getElementsByTagName("meta"),options={},optionName=null;return Array.from(metas).forEach(function(meta){var name=meta.getAttribute("name"),content=meta.getAttribute("content");name&&content&&valid(name)&&content.length>0&&(optionName=name.split(":")[1],Array.from(optionName).includes("-")&&(optionName=convertToCamelCase(optionName)),options[optionName]=content)}),options}}]),OptionParser}();exports.default=OptionParser},{"./polyfills/array/from.js":5,"./polyfills/array/includes.js":6}],5:[function(require,module,exports){Array.from||(Array.from=function(){var toStr=Object.prototype.toString,isCallable=function(fn){return"function"==typeof fn||"[object Function]"===toStr.call(fn)},toInteger=function(value){var number=Number(value);return isNaN(number)?0:0!==number&&isFinite(number)?(number>0?1:-1)*Math.floor(Math.abs(number)):number},maxSafeInteger=Math.pow(2,53)-1,toLength=function(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger)};return function(arrayLike){var C=this,items=Object(arrayLike);if(null==arrayLike)throw new TypeError("Array.from requires an array-like object - not null or undefined");var T,mapFn=arguments.length>1?arguments[1]:void 0;if(void 0!==mapFn){if(!isCallable(mapFn))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(T=arguments[2])}for(var kValue,len=toLength(items.length),A=isCallable(C)?Object(new C(len)):new Array(len),k=0;k<len;)kValue=items[k],A[k]=mapFn?void 0===T?mapFn(kValue,k):mapFn.call(T,kValue,k):kValue,k+=1;return A.length=len,A}}())},{}],6:[function(require,module,exports){Array.prototype.includes||(Array.prototype.includes=function(searchElement){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var O=Object(this),len=parseInt(O.length,10)||0;if(0===len)return!1;var k,n=parseInt(arguments[1],10)||0;n>=0?k=n:(k=len+n)<0&&(k=0);for(var currentElement;k<len;){if(currentElement=O[k],searchElement===currentElement||searchElement!==searchElement&&currentElement!==currentElement)return!0;k++}return!1})},{}],7:[function(require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function handleExitClick(event,self){self.exit()}function handleJQueryMobilePageLoad(event){this.positioningDisabled||setContentPosition(event.data.height)}function addEventListeners(self){for(var closeIcon=document.getElementsByClassName("js_smartbanner__exit"),i=0;i<closeIcon.length;i++)closeIcon[i].addEventListener("click",function(event){return handleExitClick(event,self)});_detector2.default.jQueryMobilePage()&&$(document).on("pagebeforeshow",self,handleJQueryMobilePageLoad)}function removeEventListeners(){_detector2.default.jQueryMobilePage()&&$(document).off("pagebeforeshow",handleJQueryMobilePageLoad)}function setContentPosition(value){for(var wrapper,wrappers=_detector2.default.wrapperElement(),i=0,l=wrappers.length;i<l;i++)if(wrapper=wrappers[i],_detector2.default.jQueryMobilePage()){if(wrapper.getAttribute(datas.originalTop))continue;var top=parseFloat(getComputedStyle(wrapper).top);wrapper.setAttribute(datas.originalTop,isNaN(top)?0:top),wrapper.style.top=value+"px"}else{if(wrapper.getAttribute(datas.originalMarginTop))continue;var margin=parseFloat(getComputedStyle(wrapper).marginTop);wrapper.setAttribute(datas.originalMarginTop,isNaN(margin)?0:margin),wrapper.style.marginTop=value+"px"}}function restoreContentPosition(){for(var wrapper,wrappers=_detector2.default.wrapperElement(),i=0,l=wrappers.length;i<l;i++)wrapper=wrappers[i],_detector2.default.jQueryMobilePage()&&wrapper.getAttribute(datas.originalTop)?wrapper.style.top=wrapper.getAttribute(datas.originalTop)+"px":wrapper.getAttribute(datas.originalMarginTop)&&(wrapper.style.marginTop=wrapper.getAttribute(datas.originalMarginTop)+"px")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_optionparser=require("./optionparser.js"),_optionparser2=_interopRequireDefault(_optionparser),_detector=require("./detector.js"),_detector2=_interopRequireDefault(_detector),_bakery=require("./bakery.js"),_bakery2=_interopRequireDefault(_bakery),datas={originalTop:"data-smartbanner-original-top",originalMarginTop:"data-smartbanner-original-margin-top"},SmartBanner=function(){function SmartBanner(){_classCallCheck(this,SmartBanner);var parser=new _optionparser2.default;this.options=parser.parse(),this.platform=_detector2.default.platform()}return _createClass(SmartBanner,[{key:"publish",value:function(){if(0===Object.keys(this.options).length)throw new Error("No options detected. Please consult documentation.");if(_bakery2.default.baked)return!1;if(this.userAgentExcluded)return!1;if(!this.platformEnabled&&!this.userAgentIncluded)return!1;var bannerDiv=document.createElement("div");document.querySelector("body").appendChild(bannerDiv),bannerDiv.outerHTML=this.html,this.positioningDisabled||setContentPosition(this.height),addEventListeners(this)}},{key:"exit",value:function(){removeEventListeners(),this.positioningDisabled||restoreContentPosition();var banner=document.querySelector(".js_smartbanner");document.querySelector("body").removeChild(banner),_bakery2.default.bake()}},{key:"originalTop",get:function(){var wrapper=_detector2.default.wrapperElement()[0];return parseFloat(wrapper.getAttribute(datas.originalTop))}},{key:"originalTopMargin",get:function(){var wrapper=_detector2.default.wrapperElement()[0];return parseFloat(wrapper.getAttribute(datas.originalMarginTop))}},{key:"priceSuffix",get:function(){return"ios"===this.platform?this.options.priceSuffixApple:"android"===this.platform?this.options.priceSuffixGoogle:""}},{key:"icon",get:function(){return"android"===this.platform?this.options.iconGoogle:this.options.iconApple}},{key:"buttonUrl",get:function(){return"android"===this.platform?this.options.buttonUrlGoogle:"ios"===this.platform?this.options.buttonUrlApple:"#"}},{key:"html",get:function(){return'<div class="smartbanner smartbanner--'+this.platform+' js_smartbanner">\n      <a href="javascript:void(0);" class="smartbanner__exit js_smartbanner__exit"></a>\n      <div class="smartbanner__icon-container"><div class="smartbanner__icon"></div></div>\n      <div class="smartbanner__info">\n         <div class="smartbanner__info__title">'+this.options.title+'</div>\n          <div class="smartbanner__info__author">'+this.options.author+'</div>\n          <div class="smartbanner__info__price">'+this.options.price+this.priceSuffix+'</div>\n        </div>\n         <div class="smartbanner__button-container"><a class="smartbanner__button button button--secondary js_smartbanner__exit" href="'+this.buttonUrl+'" target="_blank"><span class="smartbanner__button__label">'+this.options.button+"</span></a></div>\n    </div>"}},{key:"height",get:function(){var height=document.querySelector(".js_smartbanner").offsetHeight;return void 0!==height?height:0}},{key:"platformEnabled",get:function(){var enabledPlatforms=this.options.enabledPlatforms||"android,ios";return enabledPlatforms&&-1!==enabledPlatforms.replace(/\s+/g,"").split(",").indexOf(this.platform)}},{key:"positioningDisabled",get:function(){return"true"===this.options.disablePositioning}},{key:"userAgentExcluded",get:function(){return!!this.options.excludeUserAgentRegex&&_detector2.default.userAgentMatchesRegex(this.options.excludeUserAgentRegex)}},{key:"userAgentIncluded",get:function(){return!!this.options.includeUserAgentRegex&&_detector2.default.userAgentMatchesRegex(this.options.includeUserAgentRegex)}}]),SmartBanner}();exports.default=SmartBanner},{"./bakery.js":1,"./detector.js":2,"./optionparser.js":4}]},{},[3]),function(){function TravelAgencyController($scope,$http,$window,$attrs){function initMap(){var map,attrs={lat:$window.domain_data.latitude,lon:$window.domain_data.longitude,zoom:$window.domain_data.zoom,langcode:$window.domain_data.langcode};map=L.map(document.getElementById($attrs.id),{center:[attrs.lat?attrs.lat:50,attrs.lon?attrs.lon:10],zoom:parseInt(attrs.zoom?attrs.zoom:5),minZoom:3}),L.tileLayer(tileServer,{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}).addTo(map),map.setMaxBounds(L.latLngBounds([-90,-180],[90,180])),$http.get("/rest/flix/agency_data?_format=json&langcode="+attrs.langcode).then(function(response){var agencies=angular.fromJson(response.data);angular.forEach(agencies,function(agency){setMarker(map,[agency.latitude,agency.longitude],agency.title,"<h2>"+agency.title+"</h2><p>"+agency.address+" "+agency.zip+", "+agency.cityname+"</p>")});var marker_clusterer=L.markerClusterGroup({showCoverageOnHover:!1,iconCreateFunction:function(cluster){var childCount=cluster.getChildCount(),c=" marker-cluster-";return c+=childCount<10?"small":childCount<100?"medium":"large",new L.DivIcon({html:"<div><span>"+childCount+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(60,70)})}});angular.forEach(markers,function(m){marker_clusterer.addLayer(m)}),map.addLayer(marker_clusterer)},function(error){var agencies=temp_agency;angular.forEach(agencies,function(agency){setMarker(map,[agency.latitude,agency.longitude],agency.title,"<h2>"+agency.title+"</h2><p>"+agency.address+" "+agency.zip+", "+agency.cityname+"</p>")});var marker_clusterer=L.markerClusterGroup({showCoverageOnHover:!1,iconCreateFunction:function(cluster){var childCount=cluster.getChildCount(),c=" marker-cluster-";return c+=childCount<10?"small":childCount<100?"medium":"large",new L.DivIcon({html:"<div><span>"+childCount+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(60,70)})}});angular.forEach(markers,function(m){marker_clusterer.addLayer(m)}),map.addLayer(marker_clusterer)}),$scope.marker_count=markers.length}function setMarker(map,position,title,content){var marker,Icon=L.icon({iconUrl:IMAGES_CDN+"/marker_clusterer/map_picker.png",iconSize:[30,35],iconAnchor:[15,35]}),markerOptions={title:title,icon:Icon};marker=L.marker(position,markerOptions),marker.bindPopup(content,{offset:[0,-30]}),markers.push(marker)}if($scope.initMap=initMap,$scope.marker_count=marker_count,"de-at"==$window.domain_data.langcode&&"flixbus"==$window.domain_data.type)var tileServer="https://osm.flixcdn.net/8c3b391324ce471bb3de8bf1a4edd8d1/{z}/{x}/{y}.png";else var tileServer="https://d3jqyliq0niogv.cloudfront.net/{z}/{x}/{y}.png";initMap()}angular.module("flixApp").controller("TravelAgencyController",TravelAgencyController),TravelAgencyController.$inject=["$scope","$http","$window","$attrs"];var marker_count,markers=[]}();var wimbLangcode;wimbLangcode=window.domain_data.fallback_langcode.length>0?window.domain_data.fallback_langcode:window.domain_data.langcode,flixApp.config(function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(["self","https://whereismy.flixbus.com/**"])}),flixApp.config(function(widgetsProvider){widgetsProvider.setManifestGenerator(function(){return function(){return{module:"wimb",html:"https://whereismy.flixbus.com/wimb-widget?locale="+wimbLangcode,files:["https://whereismy.flixbus.com/static/wimb.js","https://honeycomb.flixbus.com/dist/2.0.0-alpha/css/flixui.min.css","https://whereismy.flixbus.com/static/wimb-styles.css"]}}}),widgetsProvider.addServiceToShare("WIMBService")}),function(){flixApp.factory("WIMBService",function($window){function setGetParameter(name,value){var newurl=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+name+"="+value;$window.history.pushState({path:newurl},"",newurl)}function resetGetParameter(){var newurl=window.location.protocol+"//"+window.location.host+window.location.pathname;$window.history.pushState({path:newurl},"",newurl)}function scrollToTop(){$window.scrollTo(0,0)}return{setGetParameter:setGetParameter,resetGetParameter:resetGetParameter,scrollToTop:scrollToTop}})}();
//# sourceMappingURL=script.js.map